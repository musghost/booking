YUI.add("yui2-animation",function(A){},"0.1");YUI.add("yui2-calendar",function(A){},"0.1");YUI.add("wl-scc",function(A){A.components.Scc=function(C){var E=this;var H=C.compInstConfig;E.incomingEvents={hide:function(J){var I=A.Lang.isArray(J.componentsToHide)?J.componentsToHide:[];if(A.Array.indexOf(E.getId(),I)){C.state="empty";E.renderHtml(C,E.node)}},show:function(){}};E.onCreate=function(I,J){if(I.state==="text"){var K=H.textKey;if(K){E.renderHtml({textKey:K})}}};E.onRenderState={script:function(J){var L=H.functionName;var I=window[L];A.log("Executing "+L+" function from file "+H.scriptPath);if(typeof I==="function"){try{I(A.Node.getDOMNode(J))}catch(K){A.log("Error executing script: "+L+" "+K.message,"error")}}else{A.log("Cannot find function named: "+L,"error")}E.translateTemplate(C,J)},text:function(){var I=E.node.one(".scc-text");if(I){I.removeClass("hidden")}}};var D=function(I){if(typeof Array.prototype.indexOf==="function"){D=Array.prototype.indexOf}else{D=function(K){for(var J=0;J<this.length;J++){if(this[J]===K){return J}}return -1}}return D.call(this,I)};var G=function(I){return D.call(H.scriptsForcedToStayInHead,I)===-1};if(C.state==="header"||C.state==="footer"){E.create=false;E.node=A.one("#"+C.getId());E.node.set("innerHTML",A.replaceTemplateData(null,E.node.get("innerHTML")));E.node.translate()}else{if(C.state==="script"){E.render=false;var B="wl-custom_script-"+C.getId();var F=sabre.config.global.commonResourcesPath+"js/"+H.scriptPath;sabre.config.groups["wl-noncombine"].modules[B]={fullpath:F};if(G(H.scriptPath)){E.node=A.one("#"+B);if(E.node){E.onRenderState.script(E.node)}else{A.log("Cannot load custom script "+B+". There is no script node for "+F,"warn")}C.componentRendered()}else{A.use(B,function(J,I){if(I.success){E.onRenderState.script(E.node)}else{J.log("Cannot load custom script. "+I.msg,"warn")}C.componentRendered()})}}}}});YUI.add("wl-prbar",function(A){A.components.Prbar=function(B,H){var G=this;var C={REINITIALIZE:"reinitialize"};G.incomingEvents={flight_changed:F,ancillary_changed:F,state_changed:function(){I(J)}};G.onRenderState={initialized:function(K){A.delegate("click",function(L){L.preventDefault()},K,".stepFuture a, .lastStep a")}};function I(L){var M="_elements";var K={data:{requestPartials:[M]},on:{end:function(){},success:function(O,N){if(N){L(N,M)}}}};G.fireEvent("to-ajax",{cfg:K,actionCode:C.REINITIALIZE})}function J(L,M){var K=G.node.one("#booking-process");K.set("innerHTML",A.decodeHtmlEntities(L.partials[M]));F()}function E(K,L){K.setAttribute("class",L.join(" "))}function D(){var N=G.node.all("li");var M=G.node.one("li.stepCurrent");var L=N.indexOf(M);var K=N._nodes.slice(L+1);return A.all(K)}function F(){var K=D();var L=K.size()-1;K.each(function(N,M){var O=["stepFuture"];if(M===0){O.push("prevCurrent");O.push("stepFuture_prevCurrent")}else{O.push("prevFuture");O.push("stepFuture_prevFuture")}if(M===L){O.push("lastStep");O.push("stepFuture_lastStep")}E(N,O)})}}});YUI.add("wl-flomes",function(A){A.components.Flomes=function(D,B){var F=this;F.incomingEvents={"add-messages":function(L){var K=L.data.messages;var J=G(K);var O="flow-messages-component-"+L.type;var N=A.one("#"+O);var I=A.one("#flow-messages-component");if(!N){N=A.Node.create('<div id="'+O+'"></div>');I.append(N)}N.set("innerHTML",J);I.translate();N.removeClass("hidden");var M=I.getXY();window.scrollTo(M[0],M[1])},"show-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.removeClass("hidden")}}var P=A.one("#flow-messages-component");var O=P.getXY();window.scrollTo(O[0],O[1])},"remove-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.addClass("hidden")}}},"remove-all-messages":function(){A.all(".flow-message-error").each(function(I){I.remove()})},"remove-all-component-messages":function(I){var K="flow-messages-component-"+I.type;var J=A.one("#"+K);if(J){J.set("innerHTML","")}},"block-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.set("disabled","disabled").addClass("disabled")}},"unblock-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.removeAttribute("disabled");I.removeClass("disabled")}}};F.onRenderState={initialized:function(K){var J=D.initData.messages;for(var I in J){if(E[J[I].id]){E[J[I].id]()}}}};function G(K){var M="";for(var I in K){var J=K[I];var L=J.id;var N=F.getHtml("_flowMessage_"+L);if(!N){N=F.getHtml("_flowMessage")}M+=F.replaceData({level:J.level,id:J.id,code:J.code,originalMessage:J.originalMessage},N);if(null!==A.one("#flow-message-"+L)){A.one("#flow-message-"+L).remove(true)}}return M}var E={priceDiscrepancyError:function(){A.on("click",H,"#select-flights-link");A.on("click",C,"#accept-new-price-btn")},ssrInsufficientInfantProvision:function(){F.fireEvent("block_submit",{forceInitialize:true})}};function H(I){location.href=A.utilsUrl.buildExecutionUrl("_eventId=goto&gotoPageCode=AIR_SELECT_PAGE")}function C(I){F.fireEvent("sbmt-after-price-discrepancy")}}});YUI.add("attribute-base",function(C){C.State=function(){this.data={}};C.State.prototype={add:function(O,Y,f){var e=this.data;e[Y]=e[Y]||{};e[Y][O]=f},addAll:function(O,d){var Y;for(Y in d){if(d.hasOwnProperty(Y)){this.add(O,Y,d[Y])}}},remove:function(O,Y){var e=this.data;if(e[Y]&&(O in e[Y])){delete e[Y][O]}},removeAll:function(O,e){var Y=this.data;C.each(e||Y,function(f,d){if(C.Lang.isString(d)){this.remove(O,d)}else{this.remove(O,f)}},this)},get:function(O,Y){var e=this.data;return(e[Y]&&O in e[Y])?e[Y][O]:undefined},getAll:function(O){var e=this.data,Y;C.each(e,function(f,d){if(O in e[d]){Y=Y||{};Y[d]=f[O]}},this);return Y}};var K=C.Object,F=C.Lang,L=C.EventTarget,X=".",U="Change",N="getter",M="setter",P="readOnly",Z="writeOnce",V="initOnly",c="validator",H="value",Q="valueFn",E="broadcast",S="lazyAdd",J="_bypassProxy",b="added",B="initializing",I="initValue",W="published",T="defaultValue",A="lazy",R="isLazyAdd",G,a={};a[P]=1;a[Z]=1;a[N]=1;a[E]=1;function D(){var d=this,O=this.constructor.ATTRS,Y=C.Base;d._ATTR_E_FACADE={};L.call(d,{emitFacade:true});d._conf=d._state=new C.State();d._stateProxy=d._stateProxy||null;d._requireAddAttr=d._requireAddAttr||false;if(O&&!(Y&&d instanceof Y)){d.addAttrs(this._protectAttrs(O))}}D.INVALID_VALUE={};G=D.INVALID_VALUE;D._ATTR_CFG=[M,N,c,H,Q,Z,P,S,E,J];D.prototype={addAttr:function(Y,O,e){var f=this,h=f._state,g,d;e=(S in O)?O[S]:e;if(e&&!f.attrAdded(Y)){h.add(Y,A,O||{});h.add(Y,b,true)}else{if(!f.attrAdded(Y)||h.get(Y,R)){O=O||{};d=(H in O);if(d){g=O.value;delete O.value}O.added=true;O.initializing=true;h.addAll(Y,O);if(d){f.set(Y,g)}h.remove(Y,B)}}return f},attrAdded:function(O){return !!this._state.get(O,b)},modifyAttr:function(Y,O){var d=this,f,e;if(d.attrAdded(Y)){if(d._isLazyAttr(Y)){d._addLazyAttr(Y)}e=d._state;for(f in O){if(a[f]&&O.hasOwnProperty(f)){e.add(Y,f,O[f]);if(f===E){e.remove(Y,W)}}}}},removeAttr:function(O){this._state.removeAll(O)},get:function(O){return this._getAttr(O)},_isLazyAttr:function(O){return this._state.get(O,A)},_addLazyAttr:function(Y){var d=this._state,O=d.get(Y,A);d.add(Y,R,true);d.remove(Y,A);this.addAttr(Y,O)},set:function(O,d,Y){return this._setAttr(O,d,Y)},reset:function(O){var d=this,Y;if(O){if(d._isLazyAttr(O)){d._addLazyAttr(O)}d.set(O,d._state.get(O,I))}else{Y=d._state.data.added;C.each(Y,function(e,f){d.reset(f)},d)}return d},_set:function(O,d,Y){return this._setAttr(O,d,Y,true)},_getAttr:function(d){var e=this,k=d,f=e._state,g,O,h,Y;if(d.indexOf(X)!==-1){g=d.split(X);d=g.shift()}if(e._tCfgs&&e._tCfgs[d]){Y={};Y[d]=e._tCfgs[d];delete e._tCfgs[d];e._addAttrs(Y,e._tVals)}if(e._isLazyAttr(d)){e._addLazyAttr(d)}h=e._getStateVal(d);O=f.get(d,N);if(O&&!O.call){O=this[O]}h=(O)?O.call(e,h,k):h;h=(g)?K.getValue(h,g):h;return h},_setAttr:function(d,g,O,e){var m=true,Y=this._state,h=this._stateProxy,o=Y.data,l,p,q,f,k,n;if(d.indexOf(X)!==-1){p=d;q=d.split(X);d=q.shift()}if(this._isLazyAttr(d)){this._addLazyAttr(d)}l=(!o.value||!(d in o.value));if(h&&d in h&&!this._state.get(d,J)){l=false}if(this._requireAddAttr&&!this.attrAdded(d)){}else{k=Y.get(d,Z);n=Y.get(d,B);if(!l&&!e){if(k){m=false}if(Y.get(d,P)){m=false}}if(!n&&!e&&k===V){m=false}if(m){if(!l){f=this.get(d)}if(q){g=K.setValue(C.clone(f),q,g);if(g===undefined){m=false}}if(m){if(n){this._setAttrVal(d,p,f,g)}else{this._fireAttrChange(d,p,f,g,O)}}}}return this},_fireAttrChange:function(h,g,e,d,O){var l=this,f=h+U,Y=l._state,k;if(!Y.get(h,W)){l.publish(f,{queuable:false,defaultTargetOnly:true,defaultFn:l._defAttrChangeFn,silent:true,broadcast:Y.get(h,E)});Y.add(h,W,true)}k=(O)?C.merge(O):l._ATTR_E_FACADE;k.type=f;k.attrName=h;k.subAttrName=g;k.prevVal=e;k.newVal=d;l.fire(k)},_defAttrChangeFn:function(O){if(!this._setAttrVal(O.attrName,O.subAttrName,O.prevVal,O.newVal)){O.stopImmediatePropagation()}else{O.newVal=this.get(O.attrName)}},_getStateVal:function(O){var Y=this._stateProxy;return Y&&(O in Y)&&!this._state.get(O,J)?Y[O]:this._state.get(O,H)},_setStateVal:function(O,d){var Y=this._stateProxy;if(Y&&(O in Y)&&!this._state.get(O,J)){Y[O]=d}else{this._state.add(O,H,d)}},_setAttrVal:function(o,n,k,g){var q=this,l=true,d=q._state,e=d.get(o,c),h=d.get(o,M),m=d.get(o,B),p=this._getStateVal(o),Y=n||o,f,O;if(e){if(!e.call){e=this[e]}if(e){O=e.call(q,g,Y);if(!O&&m){g=d.get(o,T);O=true}}}if(!e||O){if(h){if(!h.call){h=this[h]}if(h){f=h.call(q,g,Y);if(f===G){l=false}else{if(f!==undefined){g=f}}}}if(l){if(!n&&(g===p)&&!F.isObject(g)){l=false}else{if(d.get(o,I)===undefined){d.add(o,I,g)}q._setStateVal(o,g)}}}else{l=false}return l},setAttrs:function(O,Y){return this._setAttrs(O,Y)},_setAttrs:function(Y,d){for(var O in Y){if(Y.hasOwnProperty(O)){this.set(O,Y[O])}}return this},getAttrs:function(O){return this._getAttrs(O)},_getAttrs:function(e){var g=this,k={},f,Y,O,h,d=(e===true);e=(e&&!d)?e:K.keys(g._state.data.added);for(f=0,Y=e.length;f<Y;f++){O=e[f];h=g.get(O);if(!d||g._getStateVal(O)!=g._state.get(O,I)){k[O]=g.get(O)}}return k},addAttrs:function(O,Y,d){var e=this;if(O){e._tCfgs=O;e._tVals=e._normAttrVals(Y);e._addAttrs(O,e._tVals,d);e._tCfgs=e._tVals=null}return e},_addAttrs:function(Y,d,e){var g=this,O,f,h;for(O in Y){if(Y.hasOwnProperty(O)){f=Y[O];f.defaultValue=f.value;h=g._getAttrInitVal(O,f,g._tVals);if(h!==undefined){f.value=h}if(g._tCfgs[O]){delete g._tCfgs[O]}g.addAttr(O,f,e)}}},_protectAttrs:function(Y){if(Y){Y=C.merge(Y);for(var O in Y){if(Y.hasOwnProperty(O)){Y[O]=C.merge(Y[O])}}}return Y},_normAttrVals:function(O){return(O)?C.merge(O):null},_getAttrInitVal:function(O,Y,e){var f,d;if(!Y[P]&&e&&e.hasOwnProperty(O)){f=e[O]}else{f=Y[H];d=Y[Q];if(d){if(!d.call){d=this[d]}if(d){f=d.call(this)}}}return f}};C.mix(D,L,false,null,1);C.Attribute=D},"3.1.2",{requires:["event-custom"]});YUI.add("base-base",function(B){var I=B.Object,K=B.Lang,J=".",G="destroy",R="init",Q="initialized",H="destroyed",D="initializer",N="bubbleTargets",E="_bubbleTargets",C=Object.prototype.constructor,M="deep",S="shallow",P="destructor",A=B.Attribute;function F(){A.call(this);var L=B.Plugin&&B.Plugin.Host;if(this._initPlugins&&L){L.call(this)}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments)}F._ATTR_CFG=A._ATTR_CFG.concat("cloneDefaultValue");F.NAME="base";F.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};F.prototype={init:function(L){this._yuievt.config.prefix=this._eventPrefix;this.publish(R,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(L);this.fire(R,{cfg:L});return this},_preInitEventCfg:function(O){if(O){if(O.on){this.on(O.on)}if(O.after){this.after(O.after)}}var T,L,V,U=(O&&N in O);if(U||E in this){V=U?(O&&O.bubbleTargets):this._bubbleTargets;if(K.isArray(V)){for(T=0,L=V.length;T<L;T++){this.addTarget(V[T])}}else{if(V){this.addTarget(V)}}}},destroy:function(){this.publish(G,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(G);this.detachAll();return this},_defInitFn:function(L){this._initHierarchy(L.cfg);if(this._initPlugins){this._initPlugins(L.cfg)}this._set(Q,true)},_defDestroyFn:function(L){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins()}this._set(H,true)},_getClasses:function(){if(!this._classes){this._initHierarchyData()}return this._classes},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData()}return this._attrs},_filterAttrCfgs:function(V,O){var T=null,L,U=V.ATTRS;if(U){for(L in U){if(U.hasOwnProperty(L)&&O[L]){T=T||{};T[L]=O[L];delete O[L]}}}return T},_initHierarchyData:function(){var T=this.constructor,O=[],L=[];while(T){O[O.length]=T;if(T.ATTRS){L[L.length]=T.ATTRS}T=T.superclass?T.superclass.constructor:null}this._classes=O;this._attrs=this._aggregateAttrs(L)},_aggregateAttrs:function(Y){var V,Z,U,L,a,O,X,T=F._ATTR_CFG,W={};if(Y){for(O=Y.length-1;O>=0;--O){Z=Y[O];for(V in Z){if(Z.hasOwnProperty(V)){U=B.mix({},Z[V],true,T);L=U.value;X=U.cloneDefaultValue;if(L){if((X===undefined&&(C===L.constructor||K.isArray(L)))||X===M||X===true){U.value=B.clone(L)}else{if(X===S){U.value=B.merge(L)}}}a=null;if(V.indexOf(J)!==-1){a=V.split(J);V=a.shift()}if(a&&W[V]&&W[V].value){I.setValue(W[V].value,a,L)}else{if(!a){if(!W[V]){W[V]=U}else{B.mix(W[V],U,true,T)}}}}}}}return W},_initHierarchy:function(W){var T=this._lazyAddAttrs,X,Y,Z,U,O,V=this._getClasses(),L=this._getAttrCfgs();for(Z=V.length-1;Z>=0;Z--){X=V[Z];Y=X.prototype;if(X._yuibuild&&X._yuibuild.exts){for(U=0,O=X._yuibuild.exts.length;U<O;U++){X._yuibuild.exts[U].apply(this,arguments)}}this.addAttrs(this._filterAttrCfgs(X,L),W,T);if(Y.hasOwnProperty(D)){Y.initializer.apply(this,arguments)}}},_destroyHierarchy:function(){var V,O,U,L,T=this._getClasses();for(U=0,L=T.length;U<L;U++){V=T[U];O=V.prototype;if(O.hasOwnProperty(P)){O.destructor.apply(this,arguments)}}},toString:function(){return this.constructor.NAME+"["+B.stamp(this)+"]"}};B.mix(F,A,false,null,1);F.prototype.constructor=F;B.Base=F},"3.1.2",{requires:["attribute-base"]});YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",P="reverse",H="iterationCount",A=Number;var F={},O={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);O[B.stamp(this)]=this};B.Anim.NAME="anim";B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(R,Q,T,S){return T*R/S+Q};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(R,Q){return R._getOffset(Q)}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(U,R,X,W,Q,V,S,T){T=T||"";U._node.setStyle(R,S(Q,A(X),A(W)-A(X),V)+T)};B.Anim.DEFAULT_GETTER=function(Q,R){return Q._node.getComputedStyle(R)};B.Anim.ATTRS={node:{setter:function(Q){Q=B.one(Q);this._node=Q;if(!Q){}return Q}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(Q){if(typeof Q==="string"&&B.Easing){return B.Easing[Q]}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)]},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){for(var Q in O){if(O[Q].run){O[Q].run()}}};B.Anim.pause=function(){for(var Q in F){if(F[Q].pause){F[Q].pause()}}B.Anim._stopTimer()};B.Anim.stop=function(){for(var Q in F){if(F[Q].stop){F[Q].stop()}}B.Anim._stopTimer()};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime)}};B.Anim._stopTimer=function(){clearInterval(E);E=0};B.Anim._runFrame=function(){var Q=true;for(var R in F){if(F[R]._runFrame){Q=false;F[R]._runFrame()}}if(Q){B.Anim._stopTimer()}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume()}else{if(!this.get(C)){this._start()}}return this},pause:function(){if(this.get(C)){this._pause()}return this},stop:function(Q){if(this.get(C)||this.get(K)){this._end(Q)}return this},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr()}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J)},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause")},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this.fire("resume")},_end:function(Q){var R=this.get("duration")*1000;if(Q){this._runAttrs(R,R,this.get(P))}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)})},_runFrame:function(){var U=this._runtimeAttr.duration,S=new Date()-this.get(N),R=this.get(P),Q=(S>=U),T,V;this._runAttrs(S,U,R);this._actualFrames+=1;this._set(L,S);this.fire(I);if(Q){this._lastFrame()}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,S=B.Anim.behaviors,X=W.easing,Q=Y,R,T,U;if(V){Z=Y-Z;Q=0}for(U in W){if(W[U].to){R=W[U];T=(U in S&&"set" in S[U])?S[U].set:B.Anim.DEFAULT_SETTER;if(Z<Y){T(this,U,R.from,R.to,Z,Y,X,R.unit)}else{T(this,U,R.from,R.to,Q,Y,X,R.unit)}}}},_lastFrame:function(){var Q=this.get("iterations"),R=this.get(H);R+=1;if(Q==="infinite"||R<Q){if(this.get("direction")==="alternate"){this.set(P,!this.get(P))}this.fire("iteration")}else{R=0;this._end()}this._set(N,new Date());this._set(H,R)},_initAnimAttr:function(){var X=this.get("from")||{},W=this.get("to")||{},Q={duration:this.get("duration")*1000,easing:this.get("easing")},S=B.Anim.behaviors,V=this.get(D),U,T,R;B.each(W,function(b,Z){if(typeof b==="function"){b=b.call(this,V)}T=X[Z];if(T===undefined){T=(Z in S&&"get" in S[Z])?S[Z].get(this,Z):B.Anim.DEFAULT_GETTER(this,Z)}else{if(typeof T==="function"){T=T.call(this,V)}}var Y=B.Anim.RE_UNITS.exec(T);var a=B.Anim.RE_UNITS.exec(b);T=Y?Y[1]:T;R=a?a[1]:b;U=a?a[2]:Y?Y[2]:"";if(!U&&B.Anim.RE_DEFAULT_UNIT.test(Z)){U=B.Anim.DEFAULT_UNIT}if(!T||!R){B.error('invalid "from" or "to" for "'+Z+'"',"Anim");return }Q[Z]={from:T,to:R,unit:U}},this);this._runtimeAttr=Q},_getOffset:function(R){var T=this._node,U=T.getComputedStyle(R),S=(R==="left")?"getX":"getY",V=(R==="left")?"setX":"setY";if(U==="auto"){var Q=T.getStyle("position");if(Q==="absolute"||Q==="fixed"){U=T[S]();T[V](U)}else{U=0}}return U}};B.extend(B.Anim,B.Base,G)},"3.1.2",{requires:["base-base","node-style"]});YUI.add("anim-color",function(B){var A=Number;B.Anim.behaviors.color={set:function(F,D,I,H,C,G,E){I=B.Color.re_RGB.exec(B.Color.toRGB(I));H=B.Color.re_RGB.exec(B.Color.toRGB(H));if(!I||I.length<3||!H||H.length<3){B.error("invalid from or to passed to color behavior")}F._node.setStyle(D,"rgb("+[Math.floor(E(C,A(I[1]),A(H[1])-A(I[1]),G)),Math.floor(E(C,A(I[2]),A(H[2])-A(I[2]),G)),Math.floor(E(C,A(I[3]),A(H[3])-A(I[3]),G))].join(", ")+")")},get:function(D,C){var E=D._node.getComputedStyle(C);E=(E==="transparent")?"rgb(255, 255, 255)":E;return E}};B.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(C,D){B.Anim.behaviors[C]=B.Anim.behaviors.color})},"3.1.2",{requires:["anim-base"]});YUI.add("anim-curve",function(A){A.Anim.behaviors.curve={set:function(F,C,I,H,B,G,E){I=I.slice.call(I);H=H.slice.call(H);var D=E(B,0,100,G)/100;H.unshift(I);F._node.setXY(A.Anim.getBezier(H,D))},get:function(C,B){return C._node.getXY()}};A.Anim.getBezier=function(F,E){var G=F.length;var D=[];for(var C=0;C<G;++C){D[C]=[F[C][0],F[C][1]]}for(var B=1;B<G;++B){for(C=0;C<G-B;++C){D[C][0]=(1-E)*D[C][0]+E*D[parseInt(C+1,10)][0];D[C][1]=(1-E)*D[C][1]+E*D[parseInt(C+1,10)][1]}}return[D[0][0],D[0][1]]}},"3.1.2",{requires:["anim-xy"]});YUI.add("anim-easing",function(A){A.Easing={easeNone:function(C,B,E,D){return E*C/D+B},easeIn:function(C,B,E,D){return E*(C/=D)*C+B},easeOut:function(C,B,E,D){return -E*(C/=D)*(C-2)+B},easeBoth:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C+B}return -E/2*((--C)*(C-2)-1)+B},easeInStrong:function(C,B,E,D){return E*(C/=D)*C*C*C+B},easeOutStrong:function(C,B,E,D){return -E*((C=C/D-1)*C*C*C-1)+B},easeBothStrong:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+B}return -E/2*((C-=2)*C*C*C-2)+B},elasticIn:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B},elasticOut:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+B},elasticBoth:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G/2)===2){return B+H}if(!F){F=G*(0.3*1.5)}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+B},backIn:function(C,B,F,E,D){if(D===undefined){D=1.70158}if(C===E){C-=0.001}return F*(C/=E)*C*((D+1)*C-D)+B},backOut:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+B},backBoth:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+B}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+B},bounceIn:function(C,B,E,D){return E-A.Easing.bounceOut(D-C,0,E,D)+B},bounceOut:function(C,B,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+B}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+B}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+B}}}return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+B},bounceBoth:function(C,B,E,D){if(C<D/2){return A.Easing.bounceIn(C*2,0,E,D)*0.5+B}return A.Easing.bounceOut(C*2-D,0,E,D)*0.5+E*0.5+B}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(B){var A=function(C){C=(C)?B.merge(C):{};C.node=C.host;A.superclass.constructor.apply(this,arguments)};A.NAME="nodefx";A.NS="fx";B.extend(A,B.Anim);B.namespace("Plugin");B.Plugin.NodeFX=A},"3.1.2",{requires:["node-pluginhost","anim-base"]});YUI.add("anim-scroll",function(B){var A=Number;B.Anim.behaviors.scroll={set:function(F,G,I,J,K,E,H){var D=F._node,C=([H(K,A(I[0]),A(J[0])-A(I[0]),E),H(K,A(I[1]),A(J[1])-A(I[1]),E)]);if(C[0]){D.set("scrollLeft",C[0])}if(C[1]){D.set("scrollTop",C[1])}},get:function(D){var C=D._node;return[C.get("scrollLeft"),C.get("scrollTop")]}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-xy",function(B){var A=Number;B.Anim.behaviors.xy={set:function(F,D,I,H,C,G,E){F._node.setXY([E(C,A(I[0]),A(H[0])-A(I[0]),G),E(C,A(I[1]),A(H[1])-A(I[1]),G)])},get:function(C){return C._node.getXY()}}},"3.1.2",{requires:["anim-base","node-screen"]});YUI.add("anim",function(A){},"3.1.2",{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],skinnable:false});YUI.add("popupWidget",function(B){var A=function(E,H,D){var G=this;var K=false;var C;var J;var I;if(D!=null&&D.header!=null){I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">'+D.header+'</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}else{I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">&nbsp;</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}if(YAHOO.lang.isString(H)){C="popup"+YAHOO.util.Dom.generateId();J=I(C,H);E.append(J)}else{C=H.getAttribute("id");J=H}var F={width:"400px",height:"150px",fixedcenter:true,constraintoviewport:true,close:true,visible:false,draggable:false,modal:true,zIndex:10,buttons:[],needTranslation:true};D=YAHOO.lang.merge(F,D||{});if(D.autofillheight!=null){D.height=null}G.dialog=new YAHOO.widget.Dialog(C,D);G.hide=function(){if(K){G.dialog.hide();if(J){J.addClass("hidden")}}};G.destroy=function(){if(K){G.dialog.destroy()}};G.dialog.hideEvent.subscribe(G.hide);if(D.closeHandler){G.dialog.hideEvent.subscribe(D.closeHandler)}G.addUniqueID=function(N){var M=G.dialog.getButtons();for(var L=0;L<M.length;L++){M[L].id=""+N+""+L}};G.render=function(){if(B.UA.ie&&B.UA.ie<8){G.dialog.render(document.body)}else{G.dialog.render()}if(J&&D.needTranslation){J.translate()}K=true};G.center=function(){if(!K){G.render()}G.dialog.center()};G.show=function(){if(!K){G.render()}if(J){J.removeClass("hidden")}G.dialog.show()};G.node=function(){return J};G.update=function(L){G.dialog.setBody(L);K=false};G.id=function(){return C}};B.widgets=B.widgets||{};B.widgets.PopupWidget=A},"1.0.0",{requires:[]});YUI.add("wl-seats",function(F){var E="false";var D=null;var G=[];var C;var B="seats-overlays";F.components.Seats=function(AX){var AG=this;var AH=AX.compInstConfig;var H=AX.initData;var o=0;var I=0;var h=null;var AO;var AJ;var n;var U=[];var AK=H.selectedSeats||[];var m;var w=null;var K=H.partialExchange;var AW=false;var AR;var Z;var y="extraLegRoomOverlay";var AC="getFrequentFlyerAdviceOverlay";if(!C){C=F.Node.create('<div class="'+B+'"></div>');F.one("body").appendChild(C)}if(!AH.passengerSelectionEnabled){return false}AG.onRenderState={initialized:function(Ac){AG.fireEvent("show-submit",{forceInitialize:true,selector:".submit-placeholder",translationKey:"label.seats.continueToPayment"});d();n=F.components.Seats.SubmitHandler(AG.node.ancestor("form"),F.one("body"),AG.getHtml("_missingSeatsPopup"),AH.passengerSelectionRequired,AG.getHtml("_requiredSeatsPopup"));if(AX.initData.hasSelectableSeats){AO=F.components.Seats.FlightInfoBox(AG.node.one("#flight-list-infobox"),"flight-info-");AJ=F.components.Seats.SeatMap(AG.node.one("#seat-map-map-container"),"seat-map-segment-");U=T(AX.initData.itineraryParts);if(!U[o].selectableSeat){o=a()}AJ.loadSegment(o,o);F.on("seats:pax_selected",J);AO.collapseInactiveSegments(o);S(H.selectedSeats);var Ab=Ac.one("button.more-link");if(Ab){Ab.on("click",AP)}F.on("click",N,"a.skipSeatsSelection");F.on("click",AQ,"#flight-list-infobox .seat-map-segment");F.on("click",AS,".segment-pax .selectable");var Aa=F.all("a.nextFlight, a.prevFlight");if(Aa){F.on("click",AT,"a.prevFlight");F.on("click",R,"a.nextFlight")}F.delegate("click",p,Ac,".seat-map-unavailable-continue-button");F.delegate("click",f,Ac,".seat-map-seat-selectable");F.delegate("click",r,Ac,".seat-map-flights-chosen .seat-map-flights-action");F.delegate("mouseover",M,Ac,".seat-map-seat-selectable");F.delegate("mouseout",g,Ac,".seat-map-seat-selectable");F.delegate("click",v,Ac,".seat-map-seat-selectable-exit");F.delegate("mouseover",M,Ac,".seat-map-seat-selectable-exit");F.delegate("mouseout",g,Ac,".seat-map-seat-selectable-exit");F.delegate("click",x,C,"#btn-accept");F.delegate("click",P,C,"#btn-no");Q(o)}}};var W=null;AG.incomingEvents={submit_rendered:function(Aa){Aa.node.on("click",AI)},"cart-updated-with-seats-price":s,"view-seats":function(Aa){e(Aa)},"itinerary-selected":function(Aa){m=Aa.basketHashRefs}};var k=function(At){var Aq="seats-readonly-popup";var Al=At.rbdsAndPrices;var Aj=At.segmentList;var As=At.selectedSegmentIndex;var Ae=At.selectedBasketHashRef;var Ab;var Ac;var Af=false;var Ai=Ah(At.basketsHashRef);function Ak(Av){var Au;Au={header:"",width:"750px",height:"600px",closeHandler:An,fixedcenter:true,constraintoviewport:false,needTranslation:false};if(!C){C=F.Node.create('<div class="'+B+'"></div>');F.one("body").appendChild(C)}if(C){Ac=new F.widgets.PopupWidget(C,Av,Au);Ac.show()}}function Ah(Au){result=new Array();for(var Av in Au){result.push(Au[Av].brandedBasketHashRef)}return result}function An(){if(C){C.remove();C=null}}function Am(Au){openOverlayWithFlightData(F.decodeHtmlEntities(Au.partials["readOnly/__seatsOverlay"]));Ad(Ap);Ar(Ao)}function Ao(Au){preview=F.one("#seat-map-preview");legend=F.one("#seat-map-legend");preview.setContent(F.decodeHtmlEntities(Au.partials["readOnly/__seatMapPreview"]));legend.setContent(F.decodeHtmlEntities(Au.partials["readOnly/__seatMapLegend"]));overlay=F.one("#seats-readonly");Aa(overlay);b(false,preview);b(false,legend)}function Ap(Au){overlay=F.one("#seats-readonly");overlay.setContent(F.decodeHtmlEntities(Au.partials["readOnly/__seatsOverlay"]));Ag(overlay);Af=false;Ar(Ao)}function Ar(Av){var Au={data:{requestPartials:["readOnly/__seatMapLegend","readOnly/__seatMapPreview"]},on:{end:function(){},success:function(Ax,Aw){if(Aw){Av(Aw)}}}};AG.fireEvent("to-ajax",{cfg:Au,actionCode:"loadSeatMapAndLegend"})}function Ad(Av){var Au={data:{requestPartials:["readOnly/__seatsOverlay"],readOnlySeatsInfo:{selectedBrandIdsBasketHashRefs:m,basketHashRefs:Ai,selectedSegmentIndex:As,brandIdsAndPrices:Al,selectedBrandId:Ab,languageKey:F.translations.lang.toLowerCase(),segmentList:Aj,selectedBasketHashRef:Ae}},on:{end:function(){},success:function(Ax,Aw){if(Aw){Av(Aw)}}}};AG.fireEvent("to-ajax",{cfg:Au,actionCode:"loadFlightDetails"})}function Aa(Au){Au.all(".next-clickable").on("click",function(Av){Av.preventDefault();if(!Af){Af=true;As=As+1;Ad(Ap)}});Au.all(".prev-clickable").on("click",function(Av){Av.preventDefault();if(!Af){Af=true;As=As-1;Ad(Ap)}});Au.all(".try-again-clickable").on("click",function(Av){Av.preventDefault();if(!Af){Af=true;Ad(Ap)}})}function Ag(Au){Au.all(".next-clickable").on("click",function(Av){Av.preventDefault()});Au.all(".prev-clickable").on("click",function(Av){Av.preventDefault()});Au.all(".brand-id-select").on("change",function(Aw){var Av=F.one(".brand-id-select");Ab=Av.get("options").item(Av.get("selectedIndex")).getAttribute("value");Av.addClass("disabled");Av.set("disabled",true);Ad(Ap)})}return{initialize:function(){Ak('<div id="seats-readonly"></div>');Ad(Ap)}}};function e(Aa){seatsReadOnlyOverlay=new k(Aa);seatsReadOnlyOverlay.initialize()}function b(Aa,Ab){if(Ab==undefined){Ab=F.one("."+seatsReadOnlyNodeClass)}if(Ab){Aa?Ab.addClass("loading"):Ab.removeClass("loading")}}function AZ(){F.one(".seats").addClass("loading")}function s(){F.one(".seats").removeClass("loading")}function V(){var Ab=o+1;var Aa=U[Ab];return typeof Aa==="undefined"}function p(Aa){if(V()){AI(Aa)}else{R(Aa)}}function S(Ab){var Ae=0,Ad=0,Ac,Aa;if(Ab){for(Ac=Ab.length;Ae<Ac;Ae++){if(Ab[Ae]){for(Ad=0,Aa=Ab[Ae].length;Ad<Aa;Ad++){if(Ab[Ae][Ad]){u({code:Ab[Ae][Ad]},Ae,Ad)}}}}}}function AP(Aa){Aa.preventDefault();if(h){h.show()}else{F.use("popupWidget",function(Ab){h=new Ab.widgets.PopupWidget(AG.node,AG.getHtml("_marketingTextPopup"));h.show()})}}function M(Aa){AJ.showPaxNo(this,I+1)}function g(Aa){AJ.hidePaxNo(this)}function f(Aa){E="false";u({code:Aa.currentTarget.getAttribute("data-seat"),node:Aa.currentTarget},o,I)}function v(Ab){W=Ab;var Aa={width:"550px",autofillheight:"body",close:false,header:AG.getHtml("_exitRowTextPopupHeader")};if(!C){C=F.Node.create('<div class="'+B+'"></div>');F.one("body").appendChild(C)}if(C){F.use("popupWidget",function(Ac){D=new Ac.widgets.PopupWidget(C,AG.getHtml("_exitRowTextPopup"),Aa);D.show()})}}function x(Aa){E="true";Y(W.currentTarget.getAttribute("data-row_index"));u({code:W.currentTarget.getAttribute("data-seat"),node:W.currentTarget},o,I)}function Y(Aa){G.push(Aa)}function P(){D.hide()}function X(Ae,Aa){var Ad=U[Ae].passengers[Aa+1];if(Ad&&Ad.passengerType!=="INF"){return Aa}else{var Ab=U[Ae].passengers;for(var Ac=0;Ac<Ab.length;Ac++){pax=Ab[Ac];if(!pax.isSelected&&pax.seatSelectionEnabled){return Ac}}return -1}}function u(Aa,Ae,Ab){var Ag=Aa.node||AJ.getSeatNode(Ae,Aa.code);if(Ag){var Af={code:Aa.code,rowIndex:Ag.getAttribute("data-row_index"),columnIndex:Ag.getAttribute("data-column_index")};AK[Ae]=AK[Ae]||[];AK[Ae][Ab]=Af.code;AJ.selectSeat(Af,Ae,Ab);AO.selectSeat(Af,Ae,Ab);if(AH.reassociationMessagesEnabled&&K){AV()}var Ac=X(Ae,Ab);var Ad=function(){AG.fireEvent("notify-about-change",{forceInitialize:true,data:AK});if(Ac>=0){AO.selectPax(Ae,AO.getNextUnselectedPax(Ae,Ac))}else{if(!AH.multiStep){q(Ae+1)}}};AF(AK,Ad)}}function AF(Ab,Ac){AZ();var Aa={data:{selectedSeats:Ab},on:{end:function(){},success:Ac}};AG.fireEvent("to-ajax",{cfg:Aa,actionCode:"saveCurrentSelection"})}function r(Ad){var Ab=Ad.currentTarget._node.parentNode;var Aa=parseInt(Ab.getAttribute("data-pax_index"));var Ac=AK[o];var Ae=Ac&&Ac[Aa];AJ.deselectSeat(o,I);AO.deselectSeat(o,I);if(Ae){Ac[Aa]=null}AF(AK,function(){AG.fireEvent("notify-about-change",AK)});if(AH.reassociationMessagesEnabled&&K){AV()}}function a(){for(var Ab=0,Aa=U.length;Ab<Aa;Ab++){if(U[Ab].selectableSeat){return Ab}}return 0}function q(Aa){if(U[Aa].selectableSeat){if(w!=null){AU(w)}AO.deselectPax(o,I);AJ.loadSegment(o,Aa);AO.showSegment(Aa);o=parseInt(Aa);I=AO.getNextUnselectedPax(o,-1);AO.selectPax(o,I);AO.collapseInactiveSegments(Aa)}Q(Aa)}function AB(Aa,Ab){w=Aa;AG.fireEvent("add-messages",{data:{messages:[{id:Aa,code:"",level:"info",originalMessage:Ab}]}});AG.fireEvent("show-messages",{data:{messages:[{id:Aa,code:"",level:"info"}]}})}function AU(Aa){if(Aa){AG.fireEvent("remove-messages",{data:{messages:[Aa]}})}}function AT(Aa){Aa.preventDefault();q(o-1)}function R(Aa){Aa.preventDefault();q(o+1)}function Q(Aa){var Ac=F.all("a.prevFlight");if(Ac){AM(Aa)?Ac.removeClass("disabled"):Ac.addClass("disabled")}var Ab=F.all("a.nextFlight");if(Ab){L(Aa)?Ab.removeClass("disabled"):Ab.addClass("disabled")}}function L(Aa){var Ab=U[Aa+1];return Ab&&Ab.selectableSeat}function AM(Aa){var Ab=U[Aa-1];return Ab&&Ab.selectableSeat}function AQ(Ab){var Aa=parseInt(Ab.currentTarget.get("parentNode").getAttribute("data-segment_index"));if(o!=Aa){q(Aa)}}function N(Ab){var Aa=Ab.currentTarget.getAttribute("rel");if(Aa){window.location.href=Aa;t()}}function t(){AG.fireEvent("block-submit");F.all("a.skipSeatsSelection").removeAttribute("rel");F.all(".submit-placeholder input").setAttribute("disabled","disabled");F.all(".submit-placeholder input").addClass("disabled")}function AL(){AG.fireEvent("unblock_submit");F.all(".submit-placeholder input").removeAttribute("disabled");F.all(".submit-placeholder input").removeClass("disabled")}function AS(Ac){var Ab=Ac.currentTarget,Ad=parseInt(Ab.getAttribute("data-segment_index")),Aa=parseInt(Ab.getAttribute("data-pax_index"));if(o!=Ad){q(Ad)}AO.selectPax(Ad,Aa)}function J(Aa){I=parseInt(Aa&&Aa.paxIndex)||0;if(AH.reassociationMessagesEnabled){AN(I,Aa.segmentIndex)}}function z(Ab){var Aa=false;for(var Ac=0;Ac<U.length;Ac++){if(!U[Ac].selectableSeat){if(AY(Ab,Ac)){Aa=true}}}return Aa}function AY(Ab,Ac){var Ad=U[Ac].passengers[Ab];if(Ad.originalSeat){var Aa=U[Ac].segment.segmentStatus;if((Ad.originalSeat.paid==false)&&(!(Aa!=null&&Aa=="FLOWN"))){return false}}return true}function AV(){for(var Ad=0;Ad<U.length;Ad++){if(!U[Ad].selectableSeat){continue}for(var Ab=0;Ab<U[Ad].passengers.length;Ab++){var Ac=z(Ab);var Aa=U[Ad].passengers[Ab];if(Ac&&AY(Ab,Ad)&&Aa.originalSeat&&Aa.originalSeat.previousSeatCanBeReassociated&&!AD(Ad,Ab)){if(!AW){O()}t();AW=true;return }}}AL()}function AN(Aa,Ab){if(!AW&&K){AV()}var Ac=U[Ab].passengers[Aa];if(Ac.originalSeat){if(Ac.originalSeat.previousSeatCanBeReassociated&&l(Ab)){if(!AW){AB("seatCanBeReassociated",null)}}else{if(!Ac.originalSeat.previousSeatCanBeReassociated){}else{AB("seatCannotBeReassociated",Ac.originalSeat)}}}}function d(){Z=F.Node.create('<div class="seats-overlays"></div>');F.one("body").append(Z)}function O(){if(Z){var Aa={data:{requestPartials:[y]},on:{end:function(){},success:function(Ac,Ab){if(Ab){AA(F.decodeHtmlEntities(Ab.partials[y]))}}}};AG.fireEvent("to-ajax",{cfg:Aa,actionCode:AC})}}function AA(Aa){if(!AR){AR=new F.widgets.PopupWidget(Z,Aa,{header:"",width:"500px",height:"230px",fixedcenter:true,constraintoviewport:false,close:false});AE()}AR.show()}function c(Aa){Aa.preventDefault();AR.hide()}function AE(){if(Z){Z.delegate("click",c,".seats-extraLegRoomPopup-close")}}function AD(Ad,Ae){if(typeof AK[Ad]=="undefined"){return false}if(typeof AK[Ad][Ae]=="undefined"){return false}var Ab=AK[Ad][Ae];var Ac=U[Ad].paidSeats;for(var Aa=0;Aa<Ac.length;Aa++){if(Ac[Aa]==Ab){return true}}return false}function l(Ac){var Ab=U[Ac].paidSeats;if(AK&&AK[Ac]){if(AK[Ac].length<Ab.length){return true}else{for(i=0;i<AK[Ac].length;i++){var Aa=Ab.indexOf(AK[Ac][i]);if(Aa>-1){Ab.splice(Aa,1)}}}}return Ab.length>0}function AI(Aa){Aa.preventDefault();n.handleSubmit(AK)}function T(Ai){var Af,Ad,Ab,Aa,Ae=[],Ag,Ah,Ac=0;for(Af=0,Ab=Ai.length;Af<Ab;Af++){Ag=Ai[Af].segmentSeatMaps;for(Ad=0,Aa=Ag.length;Ad<Aa;Ad++){Ah=Ag[Ad];Ae[Ac]={passengers:Ah.passengers,segment:Ah.segment,seatMap:Ah.seatMap,selectableSeat:Ah.selectableSeat,paidSeats:A(Ah.seatMap)};AJ.addSegment(Ac);AO.addSegment(Ac,Ah);n.bindDataToSelectedSeatPattern(Ac,Ah);Ac++}}return Ae}};function A(H){var J=[];if(H!=null){for(i=0;i<H.seatRows.length;i++){var I=H.seatRows[i].seatRow;for(j=0;j<I.length;j++){var K=I[j];if(K.availableSeat&&K.paid&&!K.freeOfCharge){J.push(K.code)}}}}return J}F.components.Seats.SeatMap=function(I,R){var L=[],O=[];function H(T,S,U){L[T]=L[T]||[];L[T][S]=U}function P(T,S){H(T,S,null)}function K(T,S){return L[T]&&L[T][S]}function Q(S,T){return I.one("#seat-"+S+"-"+T)}function M(V,U){for(var T=0,S=V.length;T<S;T++){if(V[T]==U){return true}}return false}function J(T,S){var U=K(T,S);U.removeClass("seat-map-pax");if(M(G,U.getAttribute("data-row_index"))){U.addClass("seat-map-seat-selectable-exit")}else{U.addClass("seat-map-seat-selectable")}U.one("b").setContent("");P(T,S);F.fire("seats:seatMap:seat_deselected",{paxIndex:S,segmentIndex:T})}function N(S){var T=new F.Anim({node:S,from:{opacity:1},to:{opacity:0.5},duration:0.5});T.on("start",function(){S.removeClass("hidden")});return T}return{showPaxNo:function(T,S){T.one("b").setContent(S)},hidePaxNo:function(S){if(!S.hasClass("seat-map-pax")){S.one("b").setContent("")}},getSeatNode:Q,selectSeat:function(V,T,S){var U=V.node||Q(T,V.code);if(L[T]&&L[T][S]){J(T,S)}H(T,S,U);U.addClass("seat-map-pax");if(M(G,U.getAttribute("data-row_index"))){U.removeClass("seat-map-seat-selectable-exit");if(D!=null){D.hide()}}else{U.removeClass("seat-map-seat-selectable")}U.one("b").setContent(S+1);F.fire("seats:seatMap:seat_selected",{seatCode:V.code,paxIndex:S,segmentIndex:T})},deselectSeat:J,loadSegment:function(W,U){var V=O[W],T=O[U];V.anim.on("end",S);V.anim.run();function S(){V.anim.detach("end",S);V.addClass("hidden");V.removeAttribute("style");T.removeClass("hidden");F.fire("seats:segment_loaded",{segmentIndex:W})}},addSegment:function(S){O[S]=I.one("#"+R+S);O[S].anim=N(O[S])}}};F.components.Seats.FlightInfoBox=function(I,M){var O=[];function R(W,U){var V=O[W],X=V&&V.passengers[U];if(!X.node){X.node=V.node.one("#seat-map-flights-pax-"+W+"-"+U)}return X}function H(Y,Z,X){var V=Number(Y),U=Number(Z),W=Number(X);return O[V]&&O[V].seatMap&&O[V].seatMap.seatRows[U]&&O[V].seatMap.seatRows[U].seatRow[W]}function T(Y,X){var Z,V=O[Y].passengers;for(var W=X+1,U=V.length;W<U;W++){Z=V[W];if(!Z.isSelected&&Z.seatSelectionEnabled){return W}}return X>0?X:0}function J(W,U){var V=O[W],X=R(W,U);V.node.all(".seat-map-flights-pax").removeClass("seat-map-flights-selected")}function S(W,U){var V=O[W],X=R(W,U);V.node.all(".seat-map-flights-pax").removeClass("seat-map-flights-selected");if(X.node){X.node.addClass("seat-map-flights-selected")}F.fire("seats:pax_selected",{paxIndex:U,segmentIndex:W})}function L(X){var V=O[X].passengers,Y;for(var W=0,U=V.length;W<U;W++){Y=V[W];if(Y.seatSelectionEnabled){S(X,W);return }}}function Q(X){var V=O[X].passengers;for(var U in V){var W=V[U];if(!W.isSelected&&W.seatSelectionEnabled){S(X,U);return }}}function P(V,U){var X=V.one("ul"),W;X.set("id","togglee-"+U);W=new F.Anim({node:"#togglee-"+U,to:{height:X.get("scrollHeight")},from:{height:1},duration:0.2});W.on("end",function(){if(W.get("reverse")){V.addClass("seat-map-flights-collapsed")}});W.on("start",function(){if(!W.get("reverse")){L(U)}V.removeClass("seat-map-flights-collapsed")});return W}function K(V){var U=O[V].node.anim;if(!U.get("reverse")){U.set("reverse",true);U.run()}}function N(V){var W=F.all("ul.seatLegend");W.setStyle("display","none");W.removeClass("visible-seat-legend");var U=W.item(V);if(U){U.setStyle("display","block");U.addClass("visible-seat-legend")}}return{collapseInactiveSegments:function(W){for(var V=0,U=O.length;V<U;V++){if(V===W){if(O[V].selectableSeat){L(V)}else{W++}}else{if(O[V].selectableSeat){K(V)}}}N(W)},getNextUnselectedPax:T,showSegment:function(V){var U=O[V].node.anim;if(U.get("reverse")){U.set("reverse",false);U.run();N(V)}},deselectPax:J,selectPax:S,selectSeat:function(W,a,e){var Y=W.code;var f=W.rowIndex;var c=W.columnIndex;var Z=R(a,e);var d=H(a,f,c);var U,X,b,V;Z.node.removeClass("seat-map-flights-pending");Z.node.addClass("seat-map-flights-chosen");U=Z.node.one(".seat-map-flights-place-no");if(Y){U.setAttribute("wl:translate","label.seats.seatNumber.selected|"+Y)}U.removeClass("wasTranslated");X=Z.node.one(".seat-map-flights-price");b=F.one(".visible-seat-legend .seat-price-"+d.label);if(b!=null){V=b.cloneNode(true)}else{V="&nbsp;"}X.setContent(V);Z.node.translate();Z.isSelected=true;F.fire("seats:infoBox:seat_selected",{seatCode:Y,paxIndex:e,segmentIndex:a})},deselectSeat:function(X,U){var Y=R(X,U),V,W;Y.node.addClass("seat-map-flights-pending");Y.node.removeClass("seat-map-flights-chosen");V=Y.node.one(".seat-map-flights-place-no");V.setAttribute("wl:translate","label.seats.seatNumber.unselected");Y.node.translate();W=Y.node.one(".seat-map-flights-price");W.setContent(F.translateParametrized("label.seats.seatPrice.unselected"));Y.isSelected=false;Q(X);F.fire("seats:infoBox:seat_deselected",{paxIndex:U,segmentIndex:X})},addSegment:function(V,W){for(var U in W.passengers){W.passengers[U].isSelected=false}O[V]=F.merge(W,{node:I.one("#"+M+V)});O[V].node.anim=P(O[V].node,V)}}};F.components.Seats.SubmitHandler=function(I,V,U,H,P){var R=null,T=[];var S=null;function M(X){var Z,Y,W,a;for(Z=0,a=T.length;Z<a;Z++){if(T[Z]&&!X[Z]){return false}else{if(T[Z]){for(Y=0,W=T[Z].length;Y<W;Y++){if(!!T[Z][Y]!==!!X[Z][Y]){return false}}}}}return true}function O(W){if(R){R.show()}else{F.use("popupWidget",function(X){R=new X.widgets.PopupWidget(V,U,{buttons:[{text:X.translateParametrized("label.seats.missingSeatsOverlayCancel"),handler:J},{text:X.translateParametrized("label.seats.missingSeatsOverlayContinue"),handler:{fn:L,obj:W},isDefault:true}]});R.show();R.addUniqueID("missingSeatsPopupBtn_")})}}function Q(){if(S){S.show()}else{F.use("popupWidget",function(W){S=new W.widgets.PopupWidget(V,P,{buttons:[{text:W.translateParametrized("label.seats.missingSeatsOverlayContinue"),handler:J}]});S.show()})}}function J(){this.hide()}function L(X,W){F.all(".submit-placeholder button").setAttribute("disabled");N(W)}function K(X){var W=F.one("#testInput"),Y=F.JSON.stringify(X);W.set("value",Y)}function N(W){K(W);I.all('input[type="submit"]').setAttribute("disabled","disabled");I.all('input[type="submit"]').addClass("disabled");I.submit()}return{handleSubmit:function(W){if(H&&W.length==0){Q();return }if(M(W)){N(W)}else{O(W)}},bindDataToSelectedSeatPattern:function(Y,Z){var X,W;T[Y]=Z.seatMap&&!Z.seatMap.allUnavailable&&!Z.seatMap.allBlocked&&Z.selectableSeat?[]:null;if(T[Y]){for(X=0,W=Z.passengers.length;X<W;X++){T[Y][X]=Z.passengers[X].seatSelectionEnabled?1:0}}}}};F.Anim.behaviors.height=F.Anim.behaviors.height||{};F.Anim.behaviors.height.set=function(I,J,N,O,Q,H,K,P){N=Number(N),O=Number(O);var L=N-O,M=K(Q,N,O-N,H);M=L>0&&M>N?N:M;P=P||"";I._node.setStyle("height",M+P)}});YUI.add("wl-sbmt",function(A){A.components.Sbmt=function(E){var I=this;var X;I.incomingEvents={unblock:O,block:L,"show-in-seats":N,"remote-submit":H,"show-popup":Q,refresh:D,"update-on-hold-status":J,"validate-submit":C};E.initData=E.initData||{};E.initData.pageCode=sabre.config.pageCode;var V=E.initData.componentCodesUnblockDependency;var G=E.initData.disableSubmitPermanently;I.onRenderState={initialized:function(Z){R()},refund:function(Z){K(["label.sbmt.comfirmButton.yes","label.sbmt.comfirmButton.no"]);R()},exchange:function(Z){K(["label.sbmt.exchange.confirmButton.yes","label.sbmt.exchange.confirmButton.no"]);R()},changePaxDetails:function(Z){K(["label.sbmt.changePaxDetails.confirmButton.yes","label.sbmt.changePaxDetails.confirmButton.no"]);R()},upgrade:function(Z){K(["label.sbmt.upgrade.confirmButton.yes","label.sbmt.upgrade.confirmButton.no"]);R()}};function F(){return A.utilsUrl.buildExecutionUrl(E.initData.returnUrlSuffix)}function R(){T(I.node)}function T(a){var Z=a.ancestor("form");if(Z){Z.on("submit",function(b){Y(Z.get("id"),b);S()})}}function Y(a,Z){I.fireEvent("page-submitted",{cfg:{},actionCode:"ignoreTransaction",formId:a,event:Z})}function S(){A.all("a").each(function(a){a.set("href","#");a.set("onclick",function(){})});var Z=A.all('input[type="submit"]');Z.each(function(a){a.set("disabled","disabled");a.addClass("disabled")})}function H(Z){I.node.ancestor("form").submit()}function C(a){var Z=I.node.ancestor("form");Z.all("input[name=_eventId_next]").each(function(b){b.setAttribute("name","_eventId_runValidation")});Z.submit()}function N(b){var c=1;var a=A.all(b.selector);var Z=I.node.one(".sbmt-seats");a.each(function(e){e.set("innerHTML",Z.get("innerHTML"));var d=e.one("input.btn-next");d.setAttribute("id","btn-next-id"+c++);d.setAttribute("wl:translate",b.translationKey||E.initData.textKey);e.translate();T(e);I.fireEvent("seats-loaded",{node:e})})}function D(b){var a=I.node.one("input#btn-search");if(a){var Z=E.initData.textKey;if(X){Z+=".onHold"}if(b==="paypal"){Z="label.sbmt.submitPayment.paypal"}a.setAttribute("wl:translate",Z);a.set("value",A.translateParametrized(Z));A.translateNode(a)}}function J(Z){X=Z.isOnHoldEnabled;D("")}function P(a){var Z=A.Array.indexOf(V,a);if(Z!==-1){V.splice(Z,1)}}function W(a){var Z=A.Array.indexOf(V,a);if(Z===-1){V.push(a)}}function M(){return V.length==0&&!G}function O(a){if(a.data&&a.data.forceUnblock===true){G=false}if(a.type){P(a.type)}if(M()){var Z=I.node.one("input#btn-search");if(Z){Z.removeAttribute("disabled");Z.removeClass("disabled");I.fireEvent("unblocked")}}}function L(a){if(a.type){W(a.type)}var Z=I.node.one("input#btn-search");if(Z){Z.set("disabled","disabled").addClass("disabled");I.fireEvent("blocked")}}function K(b){var e;var a=A.Node.create('<div class="modalWrapper"></div>');var d=[];var c=A.getCurrentTranslations();var Z=I.node.one("#ignoreFlowPopup");d[0]={text:c[b[0]],handler:function(){if(E.compInstConfig.callIgnoreAction){B(a)}else{a.addClass("loading");location.href=F()}}};d[1]={text:c[b[1]],handler:function(){e.hide()}};e=new YAHOO.widget.Dialog("ignoreFlowPopup",{visible:false,draggable:false,zIndex:100,fixedcenter:true,modal:true,close:false,buttons:d,hideaftersubmit:false});U=function(f){f.preventDefault();btn_0=e.firstButton;btn_1=e.lastButton;btn_0.setAttribute("class","translate");btn_1.setAttribute("class","translate");btn_0.setAttribute("wl:translate",b[0]);btn_1.setAttribute("wl:translate",b[1]);Z.removeClass("hidden");a.removeClass("loading");e.center();e.show()};A.on("click",U,"#ignoreFlow");e.renderEvent.subscribe(function(){var f=Z.get("children");f.each(function(g){a.append(g)});Z.append(a)});e.render(document.body)}var U=function(){};function Q(Z){U(Z)}function B(a){var Z={on:{success:function(){location.href=A.utilsUrl.buildExecutionUrl("_eventId_redirectToCameFromURL")},failure:function(){a.removeClass("loading");A.log("Ajax call failed!","error")}}};a.addClass("loading");I.fireEvent("to-ajax",{cfg:Z,actionCode:"ignoreTransaction"})}}});YUI.add("forgotPassword",function(C){var R=function(T,S){T.preventDefault();L(S)};var G={NOT_AVAILABLE:"notAvailable"};var N;function L(T){var V=T.component.node;var S=V.one(".username");var X="send";var Z="label.login.forgotPasswordOverlayContinue";var U=null;var a="_forgotPasswordOverlayForm";var Y;if(S){var W=S.get("value");if(W==""){Y=T.getId()||T.initData.contextId;U={forgotPasswordError:"",contextId:Y};I(V,T,a,U,{buttonText:Z,mode:X,contextId:Y},P)}else{E(W,V,T)}}}function E(W,V,T){if(O(T.component.node)){return }I(V,T,"_loading");var U={overlayPartial:"_forgotPasswordOverlaySuccess",overlayData:null,buttonText:"label.login.close",buttonMode:"close"};var S={overlayPartial:"_forgotPasswordOverlayForm",overlayData:{forgotPasswordError:"label.login.usernameError",contextId:T.getId()},buttonText:"label.login.forgotPasswordOverlayContinue",buttonMode:"send"};M(V,T,W,U,S)}function O(S){return S.hasClass("loading")}function I(V,T,c,U,a,W){var Z=T.component;var e=A(T);var X=T.getId()||T.initData.contextId;var b="";if(c=="_forgotPasswordOverlaySuccess"){b=D()}else{if(c=="_forgotPasswordOverlayForm"){b=B(T,U.forgotPasswordError)}else{if(c=="_loading"){b=F()}}}var Y=a?K(X,a.mode,a.buttonText):"";var d=C.one(e.element);d.one(".overlay-content").set("innerHTML",b);d.one(".buttons").set("innerHTML",Y);if(C.Lang.isFunction(W)){W(V,T,d)}function S(){e.show()}Z.translateTemplate(T,C.one(e.element),S)}function M(X,V,Y,Z,U){var W=V.component;var T=function(c,b){Z=U;if(!c){Z.overlayData={forgotPasswordError:"label.login.ajaxError"}}else{if(G[b]){Z.overlayData={forgotPasswordError:"label.login."+G[b]}}}var a={buttonText:Z.buttonText,mode:Z.buttonMode};I(X,V,Z.overlayPartial,Z.overlayData,a,P)};var S={data:{username:escape((Y=="")?" ":Y)},on:{success:function(b,a){var c=a.verificationResult;if(c!=="OK"){T(true,c)}else{I(X,V,Z.overlayPartial,Z.overlayData,{buttonText:Z.buttonText,mode:Z.buttonMode},Q)}},failure:T}};W.fireEvent("to-ajax",{componentType:"login",cfg:S,actionCode:"resetPassword"})}function P(V,T,U){U.detach("forgetPassw|*");C.on("forgetPassw|click",function(W){J(W,U,V,T)},U.one(".btn-send-forgotten-password"));C.on("keypress",S,U.one(".ovUsername"));function S(W){if(W.charCode===13){J(W,U,V,T)}}}function J(V,T,U,S){V.halt();var W=T.one(".ovUsername").get("value");E(W,U,S)}function A(S){var U=S.component;if(!N){U.node.append(H());var V=U.node.one(".forgotPasswordOverlay");var T=C.Node.getDOMNode(V);U.translateTemplate(S,V);N=new YAHOO.widget.Dialog(T,{width:"320px",fixedcenter:true,draggable:false,close:true,visible:false,modal:false,zIndex:10});N.render(document.body)}return N}function Q(V,S,U){var T=A(S);U.on("forgetPassw|click",function(){T.hide()},".btn-send-forgotten-password")}function D(){return'<p class="translate" wl:translate="label.login.forgotPassword"></p>'}function B(V,U){var S=V.compInstConfig.maxLength;var T=V.getId()||V.initData.contextId;return'<p class="error translate" wl:translate="'+U+'"></p><p class="translate" wl:translate="label.login.forgotPasswordOverlayDescription"></p><p><label for="ovUsername-'+T+'" class="translate" wl:translate="label.login.forgotPasswordOverlayUsername"></label> <input id="ovUsername-'+T+'" class="textfield ovUsername" type="text" name="username" maxlength="'+S+'"/></p>'}function H(){return'<div class="forgotPasswordOverlay"><div class="forgot-password-form"><div class="hd">&nbsp;</div><div class="bd"><h3 class="translate" wl:translate="label.login.forgotPasswordOverlayHeader"></h3><div class="overlay-content"></div></div><div class="ft buttons"></div><div class="clear-both" /></div></div>'}function F(){return'<p class="loadingContainer"></p>'}function K(S,U,T){return'<div class="button button-smaller align-right"><input type="button" id="btn-send-forgotten-password-'+S+'" class="translate '+U+' btn-send-forgotten-password" wl:translate="'+T+'"/></div>'}C.widgets=C.widgets||{};C.widgets.ForgotPassword=R},"1.0.0",{requires:[]});YUI.add("wl-login",function(A){A.components.Login=function(v){var b=this;v.form=true;var h=false;var E;var m=false;b.incomingEvents={loginCheck:function(){if(m){b.fireEvent("logged-in");return true}return false},"block-submit":function(){h=true},travelBankViewBalance:function(){y()},"in-logged-out":function(AA){if(z()){if(v.initData.redemptionSearch){b.node.one(".login-component").removeClass("hidden");e();m=false;v.initData.user=null}}else{w()}},"in-internal-logged-in":function(AA){v.initData.user=AA.user;m=true;if(z()){if(v.initData.redemptionSearch){b.node.one(".login-component").addClass("hidden");e()}}else{if(AA.updateContent){b.node.addClass("loading");N(AA.user)}}},"set-logout-confirm":function(AA){H=AA.callback}};b.onRenderState={initialized:function(AA){k(AA)},rbeSelectFlights:function(AA){k(AA);s()},mybLanding:function(AB){AB.removeClass("loading");AB.purge(true,"submit");A.on("login|submit",g,AB);A.on("blur",A.wlValidation.validate,AB.all("input.textfield"));if(v.compInstConfig.forgotPasswordPopUpEnabled){A.on("click",a,AB.all(".forgot-password"))}var AA=v.initData.loginActionResult.authenticationResult;if(AA&&AA!="SUCCESSFUL"){O(AA,AB)}else{AB.one("input.username").setAttribute("wl:value","")}}};function k(AA){D(AA);if(v.initData.loggedIn){S(AA,v.initData.user)}}function e(){b.node.one("input.username").set("value","");b.node.one("input.password").set("value","");r(b.node.one(".component-section-error"),"")}function S(AC,AB){m=true;if(AB.travelBankCredentials){V(AB)}if(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled&&AB.travelBankCredentials){var AA=AC.one("#loginComponentTraveBankViewDetailsLink");if(AA){A.on("click",x,AA)}}else{F()}J(AB);AC.removeClass("loading");if(B()){A.on("login|click",P,AC.all(".logout"))}else{if(v.compInstConfig.agentUserConfiguration.logoutRedirectToAgentHome){A.on("login|click",Y,AC.all(".logout"))}}}function B(){return v.compInstConfig.byAjaxLogout}var H=function(){return false};function V(AA){var AC=A.one("#ExternalForms");if(AC){var AB=AC.one("#TravelBankViewDetailsForm");if(AB){G(AC,AA)}else{u(AC,AA)}}else{A.log("Cannot find #ExternalForms node.","warn")}}function G(AB,AA){var AD=AB.one("#loginComponentTraveBankViewDetailsUsername");if(AD){AD.set("value",AA.travelBankCredentials.username)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsUsername node.","warn")}var AC=AB.one("#loginComponentTraveBankViewDetailsPassword");if(AC){AC.set("value",AA.travelBankCredentials.password)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsPassword node.","warn")}}function F(){var AA=A.one("#TravelBankViewDetailsForm");if(AA){AA.remove()}}function u(AB,AA){var AC={username:AA.travelBankCredentials.username,password:AA.travelBankCredentials.password};b.renderPartialInNode("_travelBankViewDetailsForm",AC,AB,false)}function x(AA){AA.preventDefault();y();return false}function y(){document.TBDetails.action=sabre.config.satConfiguration.travelBankConfiguration.balanceUrlKey;document.TBDetails.method="POST";document.TBDetails.submit()}function J(AF){if(!AF){return }if(AF.frequentFlyerProfile){A.one("#loginComponentLoyaltyDiv").removeClass("hidden")}else{A.one("#loginComponentLoyaltyDiv").addClass("hidden")}if(AF.travelBankCredentials&&(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled||R(AF))){A.one("#loginComponentTraveBankDiv").removeClass("hidden")}else{A.one("#loginComponentTraveBankDiv").addClass("hidden")}var AH=AF.loyaltyTier;if(AH){var AB=A.translateParametrized("TierLevel."+AH);var AM="label.login.member|"+AB;var AK=A.translateParametrized(AM);var AI=A.one("#loyaltyTier");AI.setAttribute("wl:translate",AM);AI.setContent(AK)}if(AF.loyaltyBalanceRetrievalError){A.one("#balanceNotAvailable").removeClass("hidden");return }if(AF.agentProfile){var AJ=false;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");var AC=AF.agentInfoTO.superUser;T(AC,AJ,"agentName","agentNameEnabled",AF.firstName+" "+AF.lastName);T(AC,AJ,"agencyName","agencyNameEnabled",AF.agencyInfoTO.travelAgencyName);T(AC,AJ,"agencyIdentifier","agencyIATAEnabled",AF.agencyInfoTO.travelAgencyIdentifier);if(AF.creditLimitRetrievalError){A.one("#loginComponentAgencyBalanceDiv").addClass("hidden");return }T(AC,AJ,"agencyCreditLimit","creditLimitEnabled",X(AF.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AC,AJ,"agencyBalance","balanceEnabled",X(AF.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd");if(AF.creditLimitInformationTO.differentBalanceAndBookingCurrency&&sabre.config.satConfiguration.travelBankConfiguration.convertAgentCreditLimit){T(AC,AJ,"creditLimitInBookingCurrency","creditLimitEnabled");T(AC,AJ,"convertedAgencyCreditLimit","creditLimitEnabled",X(AF.creditLimitInformationTO.accountCreditLimit),"convertedCreditLimitDd");T(AC,AJ,"convertedAgencyBalance","balanceEnabled",X(AF.creditLimitInformationTO.accountBalance),"convertedBalanceDd")}}else{if(AF.agencyProfile){var AJ=true;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");T(AC,AJ,"agencyContactName","agencyContactNameEnabled",AF.firstName+" "+AF.lastName);T(AC,AJ,"agencyName","agencyNameEnabled",AF.agencyInfoTO.travelAgencyName);T(AC,AJ,"agencyCreditLimit","creditLimitEnabled",X(AF.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AC,AJ,"agencyBalance","balanceEnabled",X(AF.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd")}else{A.one("#loginComponentAgencyBalanceDiv").addClass("hidden")}}if(AF.loyaltyBalance==""){return }A.one("#balanceAmount").removeClass("hidden");A.one("#balanceAvailable").removeClass("hidden");var AN={thousandsSeparator:","};var AG=A.DataType.Number.format(parseInt(AF.loyaltyBalance,10),AN);K(AG);var AE=AF.balanceDate;if(AE!=0){var AA=sabre.config.satConfiguration.dateFormat;var AD=A.DataType.Date.format(new Date(AE),{format:AA});var AP="label.login.balanceDate|"+AD;var AL=A.translateParametrized(AP);var AO=A.one("#balanceDate");if(AO){AO.setContent(AL);AO.setAttribute("wl:translate",AP);AO.removeClass("hidden")}}}function T(AE,AH,AC,AG,AD,AA){var AF=A.one("#"+AC);var AB=v.compInstConfig.agentUserConfiguration;if(AE){AB=v.compInstConfig.agentSuperUserConfiguration}else{if(AH){AB=v.compInstConfig.agencyUserConfiguration}}if(AB[AG]){if(AA!=undefined){A.one("#"+AA).setContent(AD)}else{if(AD!=undefined){AF.setContent(AD)}}AF.removeClass("hidden")}else{AF.addClass("hidden")}}function R(AA){if(AA.agentProfile){var AB=v.compInstConfig.agentUserConfiguration;if(AA.agentInfoTO.superUser){AB=v.compInstConfig.agentSuperUserConfiguration}return AB.viewBalanceEnabled}else{if(AA.agencyProfile){return v.compInstConfig.agencyUserConfiguration.viewBalanceEnabled}}return false}function X(AA){if(!AA){return""}var AC={decimalPlaces:A.getDecimals(AA.currency.code)};var AB=A.DataType.Number.format(parseFloat(AA.amount),AC);return A.formatPrice({value:AB,currencyCode:AA.currency.code},{currencyCodeSeparator:" "})}function K(AB){var AA=A.one("#amount");AA.setContent(AB);var AD=sabre.config.satConfiguration.frequentFlyer.denomination||"";var AC=A.one("#denomination");AC.setContent("&nbsp;"+A.translateParametrized(AD));AC.setAttribute("wl:translate",AD)}function D(AA){AA.removeClass("loading");AA.purge(true,"submit");A.on("login|submit",Z,AA);if(v.compInstConfig.forgotPasswordPopUpEnabled){AA.delegate("click",a,".forgot-password")}AA.delegate("click",W,".toggler");AA.delegate("blur",A.wlValidation.validate,"input.textfield")}function O(AB,AD){var AA;switch(AB){case"FAILED":AA="_loginFailedAuthentication";break;case"SYSTEM_ERROR":AA="_loginFailedSystemError";break;case"NOT_ALLOWED":AA="_loginFailedStatusIsNotAllowed";break;default:var AC="No such result implemented "+AB;A.log(AC,"error");throw AC}AD.one(".login-mybooking .field").prepend(b.getHtml(AA));b.translateTemplate(v,AD.one(".login-mybooking .field"))}function Q(){var AB=b.node;var AA={togglee:AB.one(".togglee"),toggler:AB.one(".toggler a")};return AA.togglee&&AA.toggler?AA:null}function W(){var AA=Q();if(AA){AA.togglee.toggleClass("hidden");AA.toggler.toggleClass("open")}}function I(){var AA=Q();if(AA){AA.togglee.removeClass("hidden");AA.toggler.addClass("open")}}function t(){return h||b.node.hasClass("loading")}function Z(AA){AA.preventDefault();if(t()){return }if(!q()){return }b.node.addClass("loading");p();var AB=b.node.ancestor("form");if(z()){f(AB)}else{U(AB)}}function z(){return v.state==="rbeSelectFlights"}function g(AA){AA.preventDefault();if(!q()){return }var AB=b.node.ancestor("form");AB.submit()}function q(){A.wlValidation.validate(null,b.node.one(".username"));A.wlValidation.validate(null,b.node.one(".password"));return !b.node.one(".username").hasClass("error")&&!b.node.one(".password").hasClass("error")}function Y(AC){var AE=[{text:'<span class="translate" wl:translate="label.login.logoutPopup.cancel"></span>',handler:function(){this.hide()}},{text:"<span class='translate' wl:translate='label.login.logoutPopup.continue'></span>",handler:function(){window.location.href=v.initData.logoutUrl;this.hide()}}];var AB={buttons:AE,close:true,needTranslation:true};var AD='<h3><span class="translate" wl:translate="label.login.logoutPopup.title"></span></h3><p><span class="translate" wl:translate="label.login.logoutPopup.message"></span></p>';var AA=new A.widgets.PopupWidget(A.one(document.body),AD,AB);AA.show();AC.preventDefault()}function P(AA){AA.preventDefault();if(t()||H(M)){return }M()}function M(){b.node.addClass("loading");l()}function s(){var AA=A.one("#login_2");if(AA&&!m&&v.initData.redemptionSearch){var AB=A.one("#flow-message-ffNotLoggedIn");if(AB&&AB.hasClass("hidden")){AB.removeClass("hidden")}I()}}function c(){A.wlValidation.initializeForPartial(v.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,b.node)}function a(AA){new A.widgets.ForgotPassword(AA,v)}function p(){if(E){E.destroy();E=null}}function w(){m=false;v.initData.user=null;W();c();D(b.node)}function l(){var AA={data:{requestPartials:["initialized"]},on:{success:function(AF,AE){var AC=AE.partials.initialized;L(AC);b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AE.flowMessagesToEnable}});b.fireEvent("logged-out");var AD=null;C(AD);if(!v.compInstConfig.folded){I()}}}};var AB={cfg:AA,actionCode:"logout"};if(!B()){AB.url=v.initData.logoutUrl}b.fireEvent("to-ajax",AB)}function C(AA){b.fireEvent("update-data",{data:{loggedUser:AA}})}function N(AB){var AA={data:{requestPartials:["initialized"]},on:{end:function(){b.node.removeClass("loading")},success:function(AE,AD){var AC=AD.partials.initialized;L(AC);S(b.node,AB)}}};b.fireEvent("to-ajax",{cfg:AA,actionCode:"getLoginContent"})}function d(AA){return{username:escape(AA.one(".username").get("value")),password:escape(AA.one(".password").get("value"))}}function f(AB){var AA={data:d(AB),on:{end:function(){b.node.removeClass("loading")},success:function(AD,AC){switch(AC.authenticationResult){case"SUCCESSFUL":m=true;o(AC,true);break;case"TRAVEL_BANK_UNAVAILABLE":m=true;o(AC,true);break;case"FAILED":v.initData.username=AC.username;n("_loginFailedAuthentication");break;case"SYSTEM_ERROR":I();n("_loginFailedSystemError");break;case"NOT_ALLOWED":I();n("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("to-ajax",{cfg:AA,actionCode:"login"})}function U(AB){var AC=d(AB);AC.requestPartials=["initialized"];var AA={data:AC,on:{end:function(){b.node.removeClass("loading")},success:function(AF,AE){var AD=AE.partials.initialized;L(AD);switch(AE.authenticationResult){case"SUCCESSFUL":S(b.node,AE.user);o(AE,false);break;case"TRAVEL_BANK_UNAVAILABLE":S(b.node,AE.user);o(AE,false);break;case"FAILED":v.initData.username=AE.username;n("_loginFailedAuthentication");break;case"SYSTEM_ERROR":n("_loginFailedSystemError");break;case"NOT_ALLOWED":n("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("to-ajax",{cfg:AA,actionCode:"login"})}function n(AB){I();var AA=b.node.one(".component-section-error");r(AA,b.getHtml(AB));b.translateTemplate(v,AA);c()}function L(AA){r(b.node,A.decodeHtmlEntities(AA));b.translateTemplate(v,b.node)}function r(AB,AA){AB.set("innerHTML",AA)}function o(AC,AA){b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AC.flowMessagesToEnable}});b.fireEvent("out-internal-logged-in",{user:AC.user,updateContent:AA});if(AC.user.frequentFlyerProfile){b.fireEvent("ff-logged-in",{data:{forceRedemptionFaresReload:false}})}b.fireEvent("logged-in",AC);var AB={prefix:AC.user.prefix,firstName:AC.user.firstName,lastName:AC.user.lastName,tierLevel:AC.user.loyaltyTier,ffNumber:AC.user.ffNumber,emails:AC.user.emails};C(AB);if(!v.compInstConfig.byAjaxLogin){window.location.reload()}}}});YUI.add("wl-customhtml",function(A){A.components.Customhtml=function(B){}});YUI.add("wl-lang",function(A){A.components.Lang=function(E){var G=this;G.onRenderState={initialized:function(){L();if(sabre.config.satConfiguration.globalCurrencyConfiguration.currencySelectionEnabled){G.fireEvent("add-me-to-pos-change",{trigger:"fsc",actionCode:"changePointOfSale"})}},hidden:function(){L()}};G.incomingEvents={changeLanguage:D,change_lang:function(){O()},"before-changePointOfSale":F};function L(){A.on("change",K,"#select-language");if(A.one("#select-currency")){G.node.delegate("change",P,"#select-currency")}H();I(E.initData.currency)}function O(){var R=A.config.locale;var Q="pageTitle."+sabre.config.pageCode;if(A.translations[R]&&A.translations[R][Q]){document.title=A.translations[R][Q]}}function P(R){var Q=R.currentTarget.get("value");N(Q)}function I(R){var Q=G.node.one("#select-currency");if(Q){Q.setStyle("visibility","visible");if(R){A.config.currency=R;Q.set("value",R)}}return R}function D(R){var Q=R.currentTarget.get("id");B(Q)}function K(R){var Q=R.currentTarget.get("value");B(Q)}function H(S){S=S||sabre.config.global.language||sabre.config.defaultLang;var Q=A.one("body");if(A.config.locale&&A.config.locale!==S){Q.removeClass("LANGUAGE_"+A.config.locale)}Q.addClass("LANGUAGE_"+S);Q.setAttribute("lang",S.replace("_","-"));A.config.locale=S;sabre.config.global.language=S;var R=G.node.one("#select-language");if(R){R.set("value",S);if(E.state!="hidden"){R.setStyle("visibility","visible")}}return S}function B(S){var R="wl-lang-"+S;var Q=sabre.config.global.storefrontResourcesPath;if(sabre.config.global.configurationVersion){Q+=sabre.config.global.configurationVersion+"/"}Q+=sabre.config.templateFolder+sabre.config.translationDir+"/";sabre.config.groups["wl-noncombine"].modules[R]={fullpath:Q+S+".js"+sabre.config.global.versionNumber};A.use(R,function(U,T){U.translations[S]=T.success?U.translations[S]:"Translations not found";J(S)})}function J(S){var Q=sabre.config.global.language;H(S);var R={data:{selectedLang:S},on:{success:function(){G.fireEvent("change_lang",{data:S});A.wlValidation.refreshOverlaysAlignment(Q);G.fireEvent("update-data",{data:{language:S}})},complete:function(){var T=A.one("#progressContainer");if(T){T.remove()}}}};G.fireEvent("to-ajax",{cfg:R,actionCode:"setSelectedLang"})}function N(S){var R=G.node.one("#language-content");R.addClass("loading");M();var Q={data:{selectedCurrency:S},on:{complete:function(){R.removeClass("loading")},success:function(){C();G.fireEvent("change_currency",{data:S});G.fireEvent("update-data",{data:{currency:S}})}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setSelectedCurrency"})}function M(){G.fireEvent("block_submit")}function C(){G.fireEvent("unblock_submit",{data:{}})}function F(){var R=G.node.one("#language-content");R.addClass("loading");M();var S="__currency";var Q={data:{requestPartials:[S]},on:{end:function(){R.removeClass("loading")},success:function(X,V){C();var U=G.node.one(".currency-section");if(U){var W=A.Node.create(A.decodeHtmlEntities(V.partials[S]));U.replace(W);var T=G.node.one("#select-currency").get("value");G.fireEvent("change_currency",{data:T});G.fireEvent("update-data",{data:{currency:T}})}}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setDefaultCurrency"})}}});YUI.add("wl-ibedata",function(A){A.components.Ibedata=function(C){var D=this;var B=C.initData;D.onRenderState={initialized:function(){WhiteLabel.setIbeData(B)}};D.incomingEvents={"update-data":function(E){if(E.data){B=A.merge(B,E.data);WhiteLabel.setIbeData(B)}}}}});(function(){var D=YAHOO.util;var C=function(G,H,B,A){if(!G){}this.init(G,H,B,A)};C.NAME="Anim";C.prototype={toString:function(){var B=this.getEl()||{};var A=B.id||B.tagName;return(this.constructor.NAME+": "+A)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(F,A,B){return this.method(this.currentFrame,A,B-A,this.totalFrames)},setAttribute:function(H,A,B){var G=this.getEl();if(this.patterns.noNegatives.test(H)){A=(A>0)?A:0}if(H in G&&!("style" in G&&H in G.style)){G[H]=A}else{D.Dom.setStyle(G,H,A+B)}},getAttribute:function(L){var J=this.getEl();var B=D.Dom.getStyle(J,L);if(B!=="auto"&&!this.patterns.offsetUnit.test(B)){return parseFloat(B)}var K=this.patterns.offsetAttribute.exec(L)||[];var A=!!(K[3]);var I=!!(K[2]);if("style" in J){if(I||(D.Dom.getStyle(J,"position")=="absolute"&&A)){B=J["offset"+K[0].charAt(0).toUpperCase()+K[0].substr(1)]}else{B=0}}else{if(L in J){B=J[L]}}return B},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px"}return""},setRuntimeAttribute:function(M){var A;var L;var K=this.attributes;this.runtimeAttributes[M]={};var B=function(E){return(typeof E!=="undefined")};if(!B(K[M]["to"])&&!B(K[M]["by"])){return false}A=(B(K[M]["from"]))?K[M]["from"]:this.getAttribute(M);if(B(K[M]["to"])){L=K[M]["to"]}else{if(B(K[M]["by"])){if(A.constructor==Array){L=[];for(var J=0,N=A.length;J<N;++J){L[J]=A[J]+K[M]["by"][J]*1}}else{L=A+K[M]["by"]*1}}}this.runtimeAttributes[M].start=A;this.runtimeAttributes[M].end=L;this.runtimeAttributes[M].unit=(B(K[M].unit))?K[M]["unit"]:this.getDefaultUnit(M);return true},init:function(T,O,P,B){var A=false;var S=null;var Q=0;T=D.Dom.get(T);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(P)?P:1;this.method=B||D.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=D.AnimMgr.fps;this.setEl=function(E){T=D.Dom.get(E)};this.getEl=function(){return T};this.isAnimated=function(){return A};this.getStartTime=function(){return S};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(D.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}D.AnimMgr.registerElement(this);return true};this.stop=function(E){if(!this.isAnimated()){return false}if(E){this.currentFrame=this.totalFrames;this._onTween.fire()}D.AnimMgr.stop(this)};var M=function(){this.onStart.fire();this.runtimeAttributes={};for(var E in this.attributes){this.setRuntimeAttribute(E)}A=true;Q=0;S=new Date()};var N=function(){var E={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};E.toString=function(){return("duration: "+E.duration+", currentFrame: "+E.currentFrame)};this.onTween.fire(E);var F=this.runtimeAttributes;for(var G in F){this.setAttribute(G,this.doMethod(G,F[G].start,F[G].end),F[G].unit)}Q+=1};var R=function(){var F=(new Date()-S)/1000;var E={duration:F,frames:Q,fps:Q/F};E.toString=function(){return("duration: "+E.duration+", frames: "+E.frames+", fps: "+E.fps)};A=false;Q=0;this.onComplete.fire(E)};this._onStart=new D.CustomEvent("_start",this,true);this.onStart=new D.CustomEvent("start",this);this.onTween=new D.CustomEvent("tween",this);this._onTween=new D.CustomEvent("_tween",this,true);this.onComplete=new D.CustomEvent("complete",this);this._onComplete=new D.CustomEvent("_complete",this,true);this._onStart.subscribe(M);this._onTween.subscribe(N);this._onComplete.subscribe(R)}};D.Anim=C})();YAHOO.util.AnimMgr=new function(){var I=null;var J=[];var F=0;this.fps=1000;this.delay=1;this.registerElement=function(A){J[J.length]=A;F+=1;A._onStart.fire();this.start()};this.unRegister=function(A,B){B=B||G(A);if(!A.isAnimated()||B===-1){return false}A._onComplete.fire();J.splice(B,1);F-=1;if(F<=0){this.stop()}return true};this.start=function(){if(I===null){I=setInterval(this.run,this.delay)}};this.stop=function(A){if(!A){clearInterval(I);for(var B=0,C=J.length;B<C;++B){this.unRegister(J[0],0)}J=[];I=null;F=0}else{this.unRegister(A)}};this.run=function(){for(var A=0,C=J.length;A<C;++A){var B=J[A];if(!B||!B.isAnimated()){continue}if(B.currentFrame<B.totalFrames||B.totalFrames===null){B.currentFrame+=1;if(B.useSeconds){H(B)}B._onTween.fire()}else{YAHOO.util.AnimMgr.stop(B,A)}}};var G=function(A){for(var B=0,C=J.length;B<C;++B){if(J[B]===A){return B}}return -1};var H=function(E){var B=E.totalFrames;var C=E.currentFrame;var D=(E.currentFrame*E.duration*1000/E.totalFrames);var L=(new Date()-E.getStartTime());var A=0;if(L<E.duration*1000){A=Math.round((L/D-1)*E.currentFrame)}else{A=B-(C+1)}if(A>0&&isFinite(A)){if(E.currentFrame+A>=B){A=B-(C+1)}E.currentFrame+=A}};this._queue=J;this._getIndex=G};YAHOO.util.Bezier=new function(){this.getPosition=function(I,J){var H=I.length;var K=[];for(var L=0;L<H;++L){K[L]=[I[L][0],I[L][1]]}for(var G=1;G<H;++G){for(L=0;L<H-G;++L){K[L][0]=(1-J)*K[L][0]+J*K[parseInt(L+1,10)][0];K[L][1]=(1-J)*K[L][1]+J*K[parseInt(L+1,10)][1]}}return[K[0][0],K[0][1]]}};(function(){var E=function(C,D,B,A){E.superclass.constructor.call(this,C,D,B,A)};E.NAME="ColorAnim";E.DEFAULT_BGCOLOR="#fff";var G=YAHOO.util;YAHOO.extend(E,G.Anim);var F=E.superclass;var H=E.prototype;H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(B){if(B.length==3){return B}var A=this.patterns.hex.exec(B);if(A&&A.length==4){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}A=this.patterns.rgb.exec(B);if(A&&A.length==4){return[parseInt(A[1],10),parseInt(A[2],10),parseInt(A[3],10)]}A=this.patterns.hex3.exec(B);if(A&&A.length==4){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}return null};H.getAttribute=function(J){var C=this.getEl();if(this.patterns.color.test(J)){var A=YAHOO.util.Dom.getStyle(C,J);var B=this;if(this.patterns.transparent.test(A)){var D=YAHOO.util.Dom.getAncestorBy(C,function(I){return !B.patterns.transparent.test(A)});if(D){A=G.Dom.getStyle(D,J)}else{A=E.DEFAULT_BGCOLOR}}}else{A=F.getAttribute.call(this,J)}return A};H.doMethod=function(K,A,D){var B;if(this.patterns.color.test(K)){B=[];for(var C=0,L=A.length;C<L;++C){B[C]=F.doMethod.call(this,K,A[C],D[C])}B="rgb("+Math.floor(B[0])+","+Math.floor(B[1])+","+Math.floor(B[2])+")"}else{B=F.doMethod.call(this,K,A,D)}return B};H.setRuntimeAttribute=function(K){F.setRuntimeAttribute.call(this,K);if(this.patterns.color.test(K)){var C=this.attributes;var A=this.parseColor(this.runtimeAttributes[K].start);var D=this.parseColor(this.runtimeAttributes[K].end);if(typeof C[K]["to"]==="undefined"&&typeof C[K]["by"]!=="undefined"){D=this.parseColor(C[K].by);for(var B=0,L=A.length;B<L;++B){D[B]=A[B]+D[B]}}this.runtimeAttributes[K].start=A;this.runtimeAttributes[K].end=D}};G.ColorAnim=E})();YAHOO.util.Easing={easeNone:function(H,E,F,G){return F*H/G+E},easeIn:function(H,E,F,G){return F*(H/=G)*H+E},easeOut:function(H,E,F,G){return -F*(H/=G)*(H-2)+E},easeBoth:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H+E}return -F/2*((--H)*(H-2)-1)+E},easeInStrong:function(H,E,F,G){return F*(H/=G)*H*H*H+E},easeOutStrong:function(H,E,F,G){return -F*((H=H/G-1)*H*H*H-1)+E},easeBothStrong:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+E}return -F/2*((H-=2)*H*H*H-2)+E},elasticIn:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return -(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H},elasticOut:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return N*Math.pow(2,-10*M)*Math.sin((M*J-L)*(2*Math.PI)/K)+I+H},elasticBoth:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J/2)==2){return H+I}if(!K){K=J*(0.3*1.5)}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}if(M<1){return -0.5*(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H}return N*Math.pow(2,-10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K)*0.5+I+H},backIn:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*(J/=H)*J*((I+1)*J-I)+F},backOut:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*((J=J/H-1)*J*((I+1)*J+I)+1)+F},backBoth:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}if((J/=H/2)<1){return G/2*(J*J*(((I*=(1.525))+1)*J-I))+F}return G/2*((J-=2)*J*(((I*=(1.525))+1)*J+I)+2)+F},bounceIn:function(H,E,F,G){return F-YAHOO.util.Easing.bounceOut(G-H,0,F,G)+E},bounceOut:function(H,E,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+E}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+E}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+E}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+E},bounceBoth:function(H,E,F,G){if(H<G/2){return YAHOO.util.Easing.bounceIn(H*2,0,F,G)*0.5+E}return YAHOO.util.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+E}};(function(){var G=function(C,D,B,A){if(C){G.superclass.constructor.call(this,C,D,B,A)}};G.NAME="Motion";var I=YAHOO.util;YAHOO.extend(G,I.ColorAnim);var H=G.superclass;var K=G.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(C,A,B){if(this.patterns.points.test(C)){B=B||"px";H.setAttribute.call(this,"left",A[0],B);H.setAttribute.call(this,"top",A[1],B)}else{H.setAttribute.call(this,C,A,B)}};K.getAttribute=function(B){if(this.patterns.points.test(B)){var A=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")]}else{A=H.getAttribute.call(this,B)}return A};K.doMethod=function(E,A,D){var B=null;if(this.patterns.points.test(E)){var C=this.method(this.currentFrame,0,100,this.totalFrames)/100;B=I.Bezier.getPosition(this.runtimeAttributes[E],C)}else{B=H.doMethod.call(this,E,A,D)}return B};K.setRuntimeAttribute=function(A){if(this.patterns.points.test(A)){var S=this.getEl();var Q=this.attributes;var T;var E=Q.points["control"]||[];var R;var D,B;if(E.length>0&&!(E[0] instanceof Array)){E=[E]}else{var F=[];for(D=0,B=E.length;D<B;++D){F[D]=E[D]}E=F}if(I.Dom.getStyle(S,"position")=="static"){I.Dom.setStyle(S,"position","relative")}if(J(Q.points["from"])){I.Dom.setXY(S,Q.points["from"])}else{I.Dom.setXY(S,I.Dom.getXY(S))}T=this.getAttribute("points");if(J(Q.points["to"])){R=L.call(this,Q.points["to"],T);var C=I.Dom.getXY(this.getEl());for(D=0,B=E.length;D<B;++D){E[D]=L.call(this,E[D],T)}}else{if(J(Q.points["by"])){R=[T[0]+Q.points["by"][0],T[1]+Q.points["by"][1]];for(D=0,B=E.length;D<B;++D){E[D]=[T[0]+E[D][0],T[1]+E[D][1]]}}}this.runtimeAttributes[A]=[T];if(E.length>0){this.runtimeAttributes[A]=this.runtimeAttributes[A].concat(E)}this.runtimeAttributes[A][this.runtimeAttributes[A].length]=R}else{H.setRuntimeAttribute.call(this,A)}};var L=function(C,A){var B=I.Dom.getXY(this.getEl());C=[C[0]-B[0]+A[0],C[1]-B[1]+A[1]];return C};var J=function(A){return(typeof A!=="undefined")};I.Motion=G})();(function(){var F=function(C,D,B,A){if(C){F.superclass.constructor.call(this,C,D,B,A)}};F.NAME="Scroll";var H=YAHOO.util;YAHOO.extend(F,H.ColorAnim);var G=F.superclass;var E=F.prototype;E.doMethod=function(D,A,C){var B=null;if(D=="scroll"){B=[this.method(this.currentFrame,A[0],C[0]-A[0],this.totalFrames),this.method(this.currentFrame,A[1],C[1]-A[1],this.totalFrames)]}else{B=G.doMethod.call(this,D,A,C)}return B};E.getAttribute=function(C){var A=null;var B=this.getEl();if(C=="scroll"){A=[B.scrollLeft,B.scrollTop]}else{A=G.getAttribute.call(this,C)}return A};E.setAttribute=function(D,A,B){var C=this.getEl();if(D=="scroll"){C.scrollLeft=A[0];C.scrollTop=A[1]}else{G.setAttribute.call(this,D,A,B)}};H.Scroll=F})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});YUI.add("wl-cart-stick-to-screen",function(B){var L=function(N){var M=N;while(true){var O=M.ancestor(".lay > .lay");if(O!==null){M=O}else{return M}}};var D=function(M){return M.all("> .lay")};var F=function(O,N){for(var M=0;M<O.size();M++){if(O.item(M).contains(N)){return O.item(M)}}return null};var I=function(M){return M.getY()};var K=function(M){return M.get("offsetHeight")};var A=function(M){return I(M)+K(M)};var H=function(M){window.setTimeout(M,1)};var G=function(M){M()};var E=(function(g){var Z=g.ancestor(".lay").ancestor(".lay");var a=g.getY();var b="initial";var U=L(g);var c=D(U);var e=F(c,g);var T=function(){return K(g)};var l=function(){return A(Z)};var Y=function(){return B.DOM.docScrollY()};var S=function(){return B.DOM.winHeight()};var m=function(){return Y()+S()};var P=function(){return T()>S()};var X=function(o,p){g.setStyle("position",o);g.setStyle("top",(p!=null)?p+"px":null)};var M=function(o,p){if(b!==o){p();b=o}};var n=function(){M("bottomOfContainer",function(){B.log("Fixing cart position at the bottom of the container","debug");var o=function(){X("relative",(l()-a-T()))};if(B.UA.ie>0&&B.UA.ie<8){X(null,null);H(o)}else{G(o)}})};var Q=function(){M("initial",function(){B.log("Fixing cart position at the original position","debug");X(null,null)})};var O=function(){M("topOfViewport",function(){B.log("Sticking cart to the top of the viewport","debug");X("fixed",0)})};var h=function(){M("bottomOfViewport",function(){B.log("Sticking cart to the bottom of the viewport","debug");X("fixed",S()-T())})};var k=function(){if(Y()<a){Q()}else{if(Y()+T()>=l()){n()}else{O()}}};var V=function(){if(m()>=l()){n()}else{if(a+T()<m()){h()}else{Q()}}};var R=function(){var p=0;var o=null;c.each(function(r){var q=K(r);if(q>=p){o=r;p=q}});return o};var d=function(){return e.compareTo(R())};var N=function(){if(P()){V()}else{k()}};var W=function(o){if(d()){return }else{N()}};var f=function(o){b="unknown";N()};return{onScroll:W,onSizeChanged:f}});var C=function(){var M=B.Node.create("<div></div>");M.setStyle("position","fixed");return(M.getStyle("position")==="fixed")};var J=function(N){B.log("Attaching scroll handler for shopping cart movement","debug");var M=E(N);B.on("scroll",M.onScroll);B.on("resize",M.onSizeChanged);B.on("cart:sizeChanged",M.onSizeChanged)};B.on("cart:stickToScreen",function(M){if(C()){J(M.container.ancestor(".lay"))}else{B.log("Running on browser that doesn't support position: fixed. Skipping scroll handler for shopping cart movement attachment","warn")}})});YUI.add("wl-cart",function(A){A.components.Cart=function(AL){var m=this;var Al=AL.compInstConfig;var X=AL.initData;var Ak=AL.state;var AZ=Al.insuranceEnabled;var M=AZ&&Al.insuranceAPartOfFareBreakdown;var Ag=!!X.retainedDirection;var b={};var W="bookingFee";var g=[];var J=X.itineraryParts;var AT=X.itineraryParts.length;var AE=[];var AC="";var d,p;var f="initialized";m.incomingEvents={show_rules:n,modify_search_rendered:function(){Af(false)},change_state_unbundled:Ac,change_state:q,clear_invalid_selected_flights:V,update_for_lazy_flc:o,"update-with-insurance":AJ,"update-with-ancillary":R,"update-with-hotel":AS,"update-with-seat-selected":v,"update-with-fop-surcharge":AH,"update-with-slider":AR,"before-completedCarSelectAjax":AQ,"update-with-bnpl":AX,clear_cart:L,change_lang:function(){var Ao=m.node.all(".fare-family-name");Ao.each(function(As){var Ar=As.getAttribute("wl:translate"),Aq,At;if(Ar){Aq=Ar.split("|");At=As.getAttribute("wl:ff");Aq[1]=AV(At);Ar=Aq.join("|");As.setAttribute("wl:translate",Ar);As.setContent(A.translateParametrized(Ar))}});var Ap=m.node.all(".fare-summary");Ap.each(function(Ar){var As=Ar.getAttribute("wl:ff");var Aq=AP(As);Aq=A.decodeHtmlEntities(Aq);Ar.setContent(Aq)})}};function y(){m.node.removeClass("ftl-created");m.getDomEvents()}function K(){return(Al.stickToScreen===true)}function AW(){A.fire("cart:stickToScreen",{container:m.node})}m.onCreate=function(Ao,Ap){Ab();y();if(K()){AW()}};m.onRenderState={initialized:function(Ao){AG(Ao);u(Ao);AM(Ao);A.fire("cart:sizeChanged");m.fireEvent("cart-updated-with-seats-price",{});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"completedCarSelect"});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"reload"});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"removeCar"})},flightChanged:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchangeReview:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchange:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchangeFlightSelect:function(Ao){f="exchangeFlightSelect";AG(Ao);u(Ao);A.fire("cart:sizeChanged")}};function AM(As){var Ao=X.retainedPart;var Ar=X.retainedDirection;var Aq=X.retainedPart;if(Ao&&Ao.length&&Ar&&Aq&&Aq.length){var Ap=As.one("#cart_itinerariesDetails").one("."+Ar.toLowerCase());if(Ap){A.Event.purgeElement(Ap,true);Ap.setContent(Y(Ao));As.translate()}}}function AG(Ap){AB(Ap);var Aq=A.all("#fare-rules-anchor");Aq.each(function(Ar){Ar.on("click",Ae)});var Ao=A.one("#modify-search-trigger");if(Ao){Ao.on("click",AU)}A.delegate("click",AA,"#cart-component","em.crossToggler");A.delegate("click",e,"#cart-component","em.toggler");A.delegate("click",Ah,"#cart-component",".fare-family-toggler");A.delegate("click",Q,"#cart-component","em.paxToggler")}function AB(Ao){if(b.flightFare){var Ap=Ao.one(".price-details");if(Ap){Ap.removeClass("hidden")}}}function u(Ao){if(Ao){Ao.delegate("mouseover",C,".fare-indicator-icon");Ao.delegate("mouseout",U,".fare-indicator-icon")}}function C(As){As.preventDefault();if(d==null){var Av=As.currentTarget;var Aq={header:"",context:[As.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[Al.fareIndicatorOverlayHorizontalPosition,Al.fareIndicatorOverlayVerticalPosition]],underlay:"none",modal:false,fixedcenter:false,constraintoviewport:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}};var Ao=Av.ancestor();var Au=Ao.one(".fiTranslation").get("innerHTML");var Ap=Ao.ancestor();var Ar=new A.Node.create('<div class="fare-indicator-overlay hidden"></div>');p=new A.Node.create('<div id="fare-indicator-overlay-container"></div>');Ap.appendChild(Ar);Ap.appendChild(p);var At='<div class="fare-indicator-overlay-content">'+Au+"</div>";Aq.width=Ar.getStyle("width");Aq.height=Ar.getStyle("height");d=new A.widgets.PopupWidget(p,At,Aq);d.show()}}function U(Ar){Ar.preventDefault();var As=Ar.currentTarget;if(d){d.hide();d=null;var Ao=As.ancestor();var Ap=Ao.ancestor();var Aq=Ap.one(".fare-indicator-overlay");Ap.removeChild(Aq);Ap.removeChild(p)}}function T(){if(X.itineraryParts.length===2){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||X.itineraryParts[1].shoppingBasketHash}else{if(X.itineraryParts.length===1){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash}else{if(X.itineraryParts.length===0){g[0]=g[0]||X.outboundsSelectedBasketHash;g[1]=g[1]||X.inboundsSelectedBasketHash}}}}function Ab(){if(X.itineraryParts.length===2){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||X.itineraryParts[1].shoppingBasketHash}else{if(X.itineraryParts.length===1){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash}}}function o(Ar){var Aq=Ar.data.step;g[Aq]=Ar.data.selectedHashRef||Ar.data.offerHashCode;g=g.slice(0,Aq+1);if(AT===g.length){X.itinerarySelected=true;var Ao=g[g.length-1];var Ap={selectedBasketRefs:[Ao]};G(Ap,"lazy",Ao)}else{X.itinerarySelected=false;A.Array.each(J,function(At,As){if(As===Aq){J[As]=Ar.data.itinerary}else{if(As>Aq){J[As].segments=null}}});X.itineraryParts=J;N(X.itineraryParts);AI();l(Ar.data.index);AD([X.itineraryParts])}c()}function Ac(Aq){T();var Ao=Aq.data.direction==="inbounds"?1:0;g[Ao]=Aq.data.selectedBasketRefs;AE[Ao]=Aq.data.itinerary.price;if(g[0]&&g[1]){var Ap={selectedBasketRefs:g};G(Ap,Aq.data.direction,Aq.data.selectedBasketRefs,true)}else{E(Aq.data.itinerary,Ao);var Ar=[null,null];Ar[Ao]=Aq.data.itinerary;AD(Ar,true);AK(Aq.data.direction,Aq.data.selectedBasketRefs)}c();A.fire("cart:sizeChanged")}function q(Ap){g=[Ap.data.selectedBasketRefs];AE[0]=Ap.data.itinerary.price;var Ao={selectedBasketRefs:g};G(Ao,Ap.data.direction,Ap.data.selectedBasketRefs);c();A.fire("cart:sizeChanged")}function V(Ar){var Aq=Ar.data.revisedSelectedHashRefs||[];var As=false;var Ap;for(Ap=0;Ap<X.itineraryParts.length;Ap++){X.itineraryParts[Ap]={departureDate:X.itineraryParts[Ap].departureDate};As=true}if(As){X.itinerarySelected=false;N(X.itineraryParts);AI()}else{var Ao;if(data.context.state=="lazy"){Ao={selectedBasketRefs:[Aq[Aq.length-1]]};G(Ao,"checkPrice",[Aq[Aq.length-1]])}else{Ao={selectedBasketRefs:Aq};G(Ao,"checkPrice",Aq)}}}function N(Ap){var Ao=m.node.one("#cart_itinerariesDetails");if(!Ao){return }A.Array.each(Ap,function(Aq,Ar){E(Aq,Ar)})}function E(Aq,Ao){Ao=Ao||0;var Ar=m.node.one("#cart_itinerariesDetails");if(!Ar){return }var As=Ar.all(".cart_itinerariesDetails_itinerary");var Ap=As.item(Ao);var At=A.Node.create(Y(Aq));Ap.replace(At);At.translate();Ap.destroy()}function AJ(Ao){AC=Ao.data.offerCode;s()}function AR(Ao){s()}function v(Ao){H(Ao)}function AQ(Ao){h(Ao)}function R(Ao){Z(Ao)}function AS(Ao){O(Ao)}function AX(Ao){r(Ao)}function AH(Ao){S(Ao.data)}function n(){T();z()}function Ae(Ao){Ao.preventDefault();n()}function z(){Af(true);m.fireEvent("showFareRules",{forceInitialize:true,data:{allFlightsSelected:An(),callback:function(){Af(false)}}})}function Af(Ap){var Ao=A.one("#cart-component");if(Ao){Ap?Ao.addClass("loading"):Ao.removeClass("loading")}}function An(){return X.itinerarySelected}function AU(Ao){Ao.preventDefault();Af(true);m.fireEvent("modify_search",{forceInitialize:true})}function k(Ao){m.node.set("innerHTML",A.decodeHtmlEntities(Ao));y()}function t(Aq,Ap){Af(true);var Ao={data:{requestPartials:[Ak]},on:{end:function(){Af(false)},success:function(As,Ar){if(Ar){X=Ar.model;k(Ar.partials[Ak])}if(Aq.cfg&&"function"==typeof Aq.cfg.callback){Aq.cfg.callback()}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:Ap})}function Z(Ao){t(Ao,"updatePriceWithAncillary")}function O(Ao){t(Ao,"updatePriceWithHotel")}function r(Ao){t(Ao,"updatePriceWithBNPL")}function x(Ap){var Ao=[];A.Object.each(Ap,function(As,Ar){var Aq=new Number(Ar);if(isFinite(Aq)){Ao.push(As)}});return Ao}function H(Aq){Af(true);Aq=x(Aq);var Ap={selectedSeats:Aq,requestPartials:[Ak]};var Ao={data:Ap,on:{end:function(){Af(false);m.fireEvent("cart-updated-with-seats-price",{})},success:function(As,Ar){if(Ar){X=Ar.model;k(Ar.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithSeatSelected"})}function h(Aq){var Ap={requestPartials:[Ak]};var Ao={data:Ap,on:{success:function(As,Ar){if(Ar){X=Ar.model;k(Ar.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithCarSelected"})}function s(){Af(true);var Ao={data:{selectedInsuranceCode:AC,requestPartials:["initialized"]},on:{end:function(){Af(false)},success:function(Ar,Ap){if(Ap){X=Ap.model;var Aq=Ap.partials.initialized;k(Aq)}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithInsuranceOrSlider"})}function S(Ap){Af(true);var Ao={data:{selectedInsuranceCode:AC,requestPartials:[Ak]},on:{end:function(){Af(false)},success:function(Ar,Aq){if(Aq){X=Aq.model;k(Aq.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithFopSurcharge"})}function G(Ar,At,Ao,As){Af(true);var Ap={data:A.merge({requestPartials:[f]},Ar),on:{end:function(){Af(false)},success:function(Aw,Au){if(Au){X=Au.model;var Av=Au.partials[f];k(Av);if(Au.model.itinerarySelected){AK(At,Ao);if(!Au.model.redemptionUserCannotAffordItinerary){Am()}}else{a()}if(A.Lang.isArray(Au.messages)&&Au.messages.length>0){m.fireEvent("add-messages",{data:{messages:Au.messages}})}AD(X.itineraryParts,As);Ad(X.total)}}}};var Aq=At?"checkPrice":"clearSelection";m.fireEvent("remove-all-component-messages");m.fireEvent("to-ajax",{cfg:Ap,actionCode:Aq})}function L(){g=[];Af(true);var Ao={data:{requestPartials:[f]},on:{end:function(){Af(false)},success:function(Ar,Ap){if(Ap){X=Ap.model;var Aq=Ap.partials[f];k(Aq);Ad(X.total);m.fireEvent("cleared")}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"clearSelection"})}function B(Ao){if(Ao&&Ao.priceAlternatives){return Ao.priceAlternatives}return{}}function P(Ap){if(!Ap||!Ap.segments){return null}var Aq=[];for(var Ar=0;Ar<Ap.segments.length;Ar++){var As=Ap.segments[Ar];var Ao={departure:As.departureDate,arrival:As.arrivalDate,departureAirport:As.departureCode,arrivalAirport:As.arrivalCode,flightNumber:As.flightNumber[0],airlineCode:As.airlineCodes[0],operatingAirlineCode:As.operatingCarrier[0],brandId:Ap.fareFamily,bookingClass:As.bookingClass,fareBasis:As.fareBasis,cabinClass:As.classOfService[0],nextDayIndicator:As.nextDayIndicator};Aq.push(Ao)}return{segments:Aq}}function AD(Au,Ar){var As=[];var Aq,At;for(Aq=0;Aq<Au.length;Aq++){var Ao=P(Au[Aq]);As.push(Ao)}var Ap=[];if(Ar&&As.length===2){for(Aq=0;Aq<2;Aq++){At=B(AE[Aq]);Ap[Aq]={parts:As[Aq]?[As[Aq]]:null,fareAmount:At}}}else{At=B(AE[0]);Ap[0]={parts:As,fareAmount:At}}m.fireEvent("update-data",{data:{selectedOffers:Ap}})}function Ad(Ao){m.fireEvent("update-data",{data:{total:B(Ao)}})}function Q(As){var Ar=As.currentTarget;var Aq=Ar.one("a");var Ap=Ar.ancestor("div.cart-pax");if(Ap){var Ao=Ap.one("ol");if(Ao){isOpen=Aq.hasClass("open");if(isOpen){Aq.removeClass("open");Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.view");Ao.setStyle("display","none")}else{Aq.addClass("open");Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.hide");Ao.setStyle("display","block")}}}m.translateTemplate(AL,Ar);A.fire("cart:sizeChanged");As.preventDefault()}function AA(Ao){e(Ao,true)}function e(Av,Ar){var Au=Av.currentTarget;var At=Au.ancestor("li");var Ap=At.one("ol");var Aq=Au.one("a").hasClass("open");var As=Au.one("a");if(Aq){As.removeClass("open");if(!Ar){As.addClass("translate");As.setAttribute("wl:translate","label.cart.priceSummary.view")}if(Ap){Ap.setStyle("display","none")}}else{As.addClass("open");if(!Ar){As.addClass("translate");As.setAttribute("wl:translate","label.cart.priceSummary.hide")}if(Ap){Ap.setStyle("display","block");Ap.setAttribute("style","display: block;")}}var Ao=A.all(".cartPrices");Ao.each(function(Aw){m.translateTemplate(AL,Aw)});A.fire("cart:sizeChanged");Av.preventDefault()}function Ah(Ar){var As=Ar.currentTarget;var Aq=As.one("a");var Ap=Aq.hasClass("open");var Ao=As.one("div.fare-summary");if(Ap){Aq.removeClass("open");Aq.setAttribute("wl:translate","label.cart.fareSummary.viewDetails");Aq.addClass("translate");if(Ao){Ao.setStyle("display","none")}}else{Aq.addClass("open");Aq.setAttribute("wl:translate","label.cart.fareSummary.hideDetails");Aq.addClass("translate");if(Ao){Ao.setStyle("display","block");Ao.setAttribute("style","display: block;")}}A.translateNode(As);A.fire("cart:sizeChanged");Ar.preventDefault()}function I(Ap){var Aq="initialized";var Ao;for(Ao in Ap){Aq=(!Ap||!A.Lang.isArray(Ap.segments)||Ap.segments[0].blank)?"initialized":"flightSelected"}return Aq}function F(Ap,Ao,Ar){var Aq=A.all(Ao);Aq.each(function(At){var Au=m.getPartial(Ar,Ap);var As=A.Node.create(Au);At.set("innerHTML",As.get("innerHTML"));A.translateNode(At);As=null})}function AI(){var Ao=AF();if(A.one("#cart-total-price")){A.one("#cart-total-price").remove(true)}F(Ao,".cart-price-details-container","_priceInfo");F(Ao,"#price-summary","_flightChanged_PriceInfo");F(Ao,"#price-info-exchange","_priceInfoExchangeReview")}function AF(){var Ao={};Ao.farePrice=Aa("fare");Ao.taxesPrice=Aa("taxes");Ao.discountPrice="";Ao.feesPrice=Aa("fees");Ao.insurancePrice="";if(AL.state==="exchangeReview"){Ao.newTripTotalPrice=Aa("newTrip")}else{Ao.newTripTotalPrice=Aa("newPrice")}Ao.originalTripPrice=Aa("originalPrice");Ao.changeFeePrice=Aa("changeFee");Ao.ancillariesPrice=Aa("ancillaries");Ao.seatsPrice=Aa("seats");Ao.uniqueFareIndicators="";return Ao}function Aa(Ao){return m.getPartial("_priceInfoItem",{pricePartType:Ao,pricePartLink:"",pricePartValue:""})}function AY(Ap,Ao){if(!X.showClassOfServicePerSegment){return m.getPartial("_chosenClass_cabinClass",{classOfService:A.translateParametrized("Cabin."+Ap),index:Ao})}return""}function Y(Ao){var A6="";var BA,A8;var Aw=[];var A0=I(Ao);var A7=[];var Ax=[];var BC=(BA==0)?"outbound":"inbound";var Av=Ao.fareIndicators;var As;var A1=Ao.fareFamily;if(A1&&Ao.basketsRef){As=Ao.basketsRef[A1];Av=As.fareIndicators}if(Ao.segments&&Ao.segments.length>0){var A5=Ao.segments[0].arrivalDate;for(A8=0;A8<Ao.segments.length;A8++){var A2;var Aq=Ao.segments[A8];var A4=Aq.departureCode;var Ay=Aq.departureDate;var BB=Aq.arrivalCode;var Au=As?As.classOfService:Aq.classOfService;var Ap=As?As.fareBasis:Aq.fareBasis;if(A.Lang.isArray(Au)&&Au.length>0){A2=Au[0];A6=A2}Ap=Ap.replace(/\/.*/g,"");var Ar=(A8==0)?"depart":"connection";A7.push(w(A4,A5,Ay,Ap,Ar,BA,A8,A2));A7.push(Ai(BA,A8,A2));var A9=AN(Aq.flightNumber[0],Aq.airlineCodes[0],Aq.operatingCarrier[0]);Ax.push(A9);A5=Aq.arrivalDate}A7.push(w(BB,A5,Ay,Ap,"arrive",BA,A8))}if(A.Lang.isArray(Ao.overrideClassOfService)&&Ao.overrideClassOfService.length>0){A6=Ao.overrideClassOfService[0]}var BD={direction:BC,itineraryPrice:(Ao&&Ao.price&&Ao.price.amount!=0&&!Ag)?AO(Ao.price):"",partSegments:A7.join(""),flightNumbers:Ax.join(" | "),fareFamily:"",cabinClass:AY(A6,BA),fareIndicators:D(Av)};if(A1){var Az=A.decodeHtmlEntities(AP(A1));var At=X.fareFamilyGroupDataMap[A1];var A3=At?At.familyGroupId:"undefinedGroup";BD.fareFamily=m.getPartial("_chosenClass_fareFamily",{fareFamily:AV(A1),fareFamilyKey:A1,fareFamilyGroupKey:A3,fareSummary:Az,index:BA})}return m.getPartials("_flightDetails_"+A0,BD)}function D(Ao){if(Ao){var Ap="";A.Array.each(Ao,function(Aq){Ap+=m.getPartial("_fareIndicator",{name:Aq.name,iconUrl:Aq.iconUrl,translationKey:Aq.translationKey})});return m.getPartial("_fareIndicators",{fareIndicators:Ap})}return""}function Ai(Aq,Ap,Ao){if(X.showClassOfServicePerSegment){var Ar={part_index:Aq,segment_index:Ap+1,classOfService:A.translateParametrized("Cabin."+Ao)};return m.getPartial("_segmentClassOfService",Ar)}return""}function Aj(Ap,As){var Ao=X.fareFamilyDataMap[Ap];if(Ao){var Aq=A.getCurrentLanguage();var Ar=Ao.localizedData[Aq];if(Ar&&Ar[As]){return Ar[As]}}return"&nbsp;"}function AV(Ao){return Aj(Ao,"label")}function AP(Ao){return Aj(Ao,"marketingText")}function AN(Ar,Aq,Ao){var Ap=Al.flightNumberFormat;var As=A.getFullAirlineName(Ao);return m.getPartial("_flightNumber_"+Ap.toLowerCase(),{flightNumber:Ar,airlineCode:Aq,operatingCarrier:As})}function w(Ap,Au,Av,Aw,Aq,At,Ar){var Ao=A.airports[Ap];var As={flightCode:Ap,cityCode:Ao&&Ao.city||Ap,stateCode:Ao&&Ao.stateProvince||Ap,countryCode:Ao&&Ao.country||Ap,arrivalFlightDate:Au,departureFlightDate:Av,fareBasis:Aw,flightType:Aq,partIndex:At,segmentIndex:Ar+1};if(Aq=="depart"){return m.getPartial("_segmentDetailsForDeparture",As)}else{if(Aq=="arrive"){return m.getPartial("_segmentDetailsForArrival",As)}}return m.getPartial("_segmentDetailsForConnection",As)}function AO(Ao){return A.formatPrice(Ao,{currencyCodeSeparator:"&nbsp;"})}function Am(){m.fireEvent("unblock_submit")}function c(){m.fireEvent("block_submit")}function AK(Ap,Ao){setTimeout(function(){m.fireEvent("refresh_flc",{data:{direction:Ap,brandedBasketHashRef:Ao}})},100)}function l(Ao){m.fireEvent("refresh_lazy_flc",{data:{index:Ao,selectedHashRefs:g}})}function a(){g=[];m.fireEvent("reset_selection")}}});YUI.add("wl-yui2-log-control",function(A){if(YAHOO&&YAHOO.widget){YAHOO.widget.Logger=function(){};YAHOO.widget.LogWriter=function(){return{log:function(){}}}}},"1.0.0");(function(){YAHOO.util.Config=function(D){if(D){this.init(D)}if(!D){YAHOO.log("No owner specified for Config object","error","Config")}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE)},checkNumber:function(D){return(!isNaN(D))},fireEvent:function(D,F){YAHOO.log("Firing Config event: "+D+"="+F,"info","Config");var E=this.config[D];if(E&&E.event){E.event.fire(F)}},addProperty:function(E,D){E=E.toLowerCase();YAHOO.log("Added property: "+E,"info","Config");this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner)}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value)}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value}}}return D},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value}else{return undefined}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true}}else{return false}},setProperty:function(E,G,D){var F;E=E.toLowerCase();YAHOO.log("setProperty: "+E+"="+G,"info","Config");if(this.queueInProgress&&!D){this.queueProperty(E,G);return true}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G])}return true}}else{return false}}},queueProperty:function(S,P){S=S.toLowerCase();YAHOO.log("queueProperty: "+S+"="+P,"info","Config");var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false}else{if(!B.isUndefined(P)){R.value=P}else{P=R.value}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P])}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break}}}}}YAHOO.log("Config event queue: "+this.outputEventQueue(),"info","Config");return true}else{return false}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D)}else{this.fireEvent(D,E.value)}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F]}}this.initialConfig=E}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F])}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D)}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H)}return true}else{return false}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G)}else{return false}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]"}return D},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", "}}return D},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true}}while(G--)}return false};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider)}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1}}else{if(E>11){while(E>11){E-=12;B+=1}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break}return F},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B)}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A)}}}D.setDate(D.getDate()+C)},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return this.getDate(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(D,B,G){B=B||0;G=G||this.WEEK_ONE_JAN_DATE;var H=this.clearTime(D),L,M;if(H.getDay()===B){L=H}else{L=this.getFirstDayOfWeek(H,B)}var I=L.getFullYear();M=new Date(L.getTime()+6*this.ONE_DAY_MS);var F;if(I!==M.getFullYear()&&M.getDate()>=G){F=1}else{var E=this.clearTime(this.getDate(I,0,G)),A=this.getFirstDayOfWeek(E,B);var J=Math.round((H.getTime()-A.getTime())/this.ONE_DAY_MS);var K=J%7;var C=(J-K)/7;F=C+1}return F},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C)},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(12,0,0,0);return A},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1}if(D>=100){B=new Date(D,A,C)}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0)}return B}};(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,E=YAHOO.lang,D=YAHOO.widget.DateMath;function F(I,G,H){this.init.apply(this,arguments)}F.IMG_ROOT=null;F.DATE="D";F.MONTH_DAY="MD";F.WEEKDAY="WD";F.RANGE="R";F.MONTH="M";F.DISPLAY_DAYS=42;F.STOP_RENDER="S";F.SHORT="short";F.LONG="long";F.MEDIUM="medium";F.ONE_CHAR="1char";F.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date(),supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};F._DEFAULT_CONFIG=F.DEFAULT_CONFIG;var B=F.DEFAULT_CONFIG;F._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};F.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};F._STYLES=F.STYLES;F.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(H){var G={id:null,container:null,config:null};if(H&&H.length&&H.length>0){switch(H.length){case 1:G.id=null;G.container=H[0];G.config=null;break;case 2:if(E.isObject(H[1])&&!H[1].tagName&&!(H[1] instanceof String)){G.id=null;G.container=H[0];G.config=H[1]}else{G.id=H[0];G.container=H[1];G.config=null}break;default:G.id=H[0];G.container=H[1];G.config=H[2];break}}else{this.logger.log("Invalid constructor/init arguments","error")}return G},init:function(J,H,I){var G=this._parseArgs(arguments);J=G.id;H=G.container;I=G.config;this.oDomContainer=C.get(H);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=C.generateId()}if(!J){J=this.oDomContainer.id+"_t"}this.id=J;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("Calendar "+this.id);this.initEvents();this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();C.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);C.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(I){this.cfg.applyConfig(I,true)}this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(I,H,J){var G=H[0];if(!this.parent){if(C.inDocument(this.oDomContainer)){if(G){var K=C.getStyle(this.oDomContainer,"position");if(K=="absolute"||K=="relative"){if(!C.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";C.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){C.addClass(this.iframe,this.Style.CSS_FIXED_SIZE)}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null}}}}},configTitle:function(H,G,I){var K=G[0];if(K){this.createTitleBar(K)}else{var J=this.cfg.getProperty(B.CLOSE.key);if(!J){this.removeTitleBar()}else{this.createTitleBar("&#160;")}}},configClose:function(H,G,I){var K=G[0],J=this.cfg.getProperty(B.TITLE.key);if(K){if(!J){this.createTitleBar("&#160;")}this.createCloseButton()}else{this.removeCloseButton();if(!J){this.removeTitleBar()}}},initEvents:function(){var G=F._EVENT_TYPES,I=YAHOO.util.CustomEvent,H=this;H.beforeSelectEvent=new I(G.BEFORE_SELECT);H.selectEvent=new I(G.SELECT);H.beforeDeselectEvent=new I(G.BEFORE_DESELECT);H.deselectEvent=new I(G.DESELECT);H.changePageEvent=new I(G.CHANGE_PAGE);H.beforeRenderEvent=new I(G.BEFORE_RENDER);H.renderEvent=new I(G.RENDER);H.beforeDestroyEvent=new I(G.BEFORE_DESTROY);H.destroyEvent=new I(G.DESTROY);H.resetEvent=new I(G.RESET);H.clearEvent=new I(G.CLEAR);H.beforeShowEvent=new I(G.BEFORE_SHOW);H.showEvent=new I(G.SHOW);H.beforeHideEvent=new I(G.BEFORE_HIDE);H.hideEvent=new I(G.HIDE);H.beforeShowNavEvent=new I(G.BEFORE_SHOW_NAV);H.showNavEvent=new I(G.SHOW_NAV);H.beforeHideNavEvent=new I(G.BEFORE_HIDE_NAV);H.hideNavEvent=new I(G.HIDE_NAV);H.beforeRenderNavEvent=new I(G.BEFORE_RENDER_NAV);H.renderNavEvent=new I(G.RENDER_NAV);H.beforeSelectEvent.subscribe(H.onBeforeSelect,this,true);H.selectEvent.subscribe(H.onSelect,this,true);H.beforeDeselectEvent.subscribe(H.onBeforeDeselect,this,true);H.deselectEvent.subscribe(H.onDeselect,this,true);H.changePageEvent.subscribe(H.onChangePage,this,true);H.renderEvent.subscribe(H.onRender,this,true);H.resetEvent.subscribe(H.onReset,this,true);H.clearEvent.subscribe(H.onClear,this,true)},doPreviousMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.previousMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_LEFT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doNextMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.nextMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_RIGHT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doSelectCell:function(M,G){var R,O,I,L;var N=A.getTarget(M),H=N.tagName.toLowerCase(),K=false;while(H!="td"&&!C.hasClass(N,G.Style.CSS_CELL_SELECTABLE)){if(!K&&H=="a"&&C.hasClass(N,G.Style.CSS_CELL_SELECTOR)){K=true}N=N.parentNode;H=N.tagName.toLowerCase();if(N==this.oDomContainer||H=="html"){return }}if(K){A.preventDefault(M)}R=N;if(C.hasClass(R,G.Style.CSS_CELL_SELECTABLE)){L=G.getIndexFromId(R.id);if(L>-1){O=G.cellDates[L];if(O){I=D.getDate(O[0],O[1]-1,O[2]);var Q;G.logger.log("Selecting cell "+L+" via click","info");if(G.Options.MULTI_SELECT){Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}var J=G.cellDates[L];var P=G._indexOfSelectedFieldArray(J);if(P>-1){G.deselectCell(L)}else{G.selectCell(L)}}else{Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}G.selectCell(L)}}}}},doCellMouseOver:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.addClass(G,H.Style.CSS_CELL_HOVER)}},doCellMouseOut:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.removeClass(G,H.Style.CSS_CELL_HOVER)}},setupConfig:function(){var G=this.cfg;G.addProperty(B.TODAY.key,{value:new Date(B.TODAY.value.getTime()),supercedes:B.TODAY.supercedes,handler:this.configToday,suppressEvent:true});G.addProperty(B.PAGEDATE.key,{value:B.PAGEDATE.value||new Date(B.TODAY.value.getTime()),handler:this.configPageDate});G.addProperty(B.SELECTED.key,{value:B.SELECTED.value.concat(),handler:this.configSelected});G.addProperty(B.TITLE.key,{value:B.TITLE.value,handler:this.configTitle});G.addProperty(B.CLOSE.key,{value:B.CLOSE.value,handler:this.configClose});G.addProperty(B.IFRAME.key,{value:B.IFRAME.value,handler:this.configIframe,validator:G.checkBoolean});G.addProperty(B.MINDATE.key,{value:B.MINDATE.value,handler:this.configMinDate});G.addProperty(B.MAXDATE.key,{value:B.MAXDATE.value,handler:this.configMaxDate});G.addProperty(B.MULTI_SELECT.key,{value:B.MULTI_SELECT.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.START_WEEKDAY.key,{value:B.START_WEEKDAY.value,handler:this.configOptions,validator:G.checkNumber});G.addProperty(B.SHOW_WEEKDAYS.key,{value:B.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_HEADER.key,{value:B.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_FOOTER.key,{value:B.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.HIDE_BLANK_WEEKS.key,{value:B.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.NAV_ARROW_LEFT.key,{value:B.NAV_ARROW_LEFT.value,handler:this.configOptions});G.addProperty(B.NAV_ARROW_RIGHT.key,{value:B.NAV_ARROW_RIGHT.value,handler:this.configOptions});G.addProperty(B.MONTHS_SHORT.key,{value:B.MONTHS_SHORT.value,handler:this.configLocale});G.addProperty(B.MONTHS_LONG.key,{value:B.MONTHS_LONG.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_1CHAR.key,{value:B.WEEKDAYS_1CHAR.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_SHORT.key,{value:B.WEEKDAYS_SHORT.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_MEDIUM.key,{value:B.WEEKDAYS_MEDIUM.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_LONG.key,{value:B.WEEKDAYS_LONG.value,handler:this.configLocale});var H=function(){G.refireEvent(B.LOCALE_MONTHS.key);G.refireEvent(B.LOCALE_WEEKDAYS.key)};G.subscribeToConfigEvent(B.START_WEEKDAY.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_LONG.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_1CHAR.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_MEDIUM.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_LONG.key,H,this,true);G.addProperty(B.LOCALE_MONTHS.key,{value:B.LOCALE_MONTHS.value,handler:this.configLocaleValues});G.addProperty(B.LOCALE_WEEKDAYS.key,{value:B.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});G.addProperty(B.YEAR_OFFSET.key,{value:B.YEAR_OFFSET.value,supercedes:B.YEAR_OFFSET.supercedes,handler:this.configLocale});G.addProperty(B.DATE_DELIMITER.key,{value:B.DATE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_FIELD_DELIMITER.key,{value:B.DATE_FIELD_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_RANGE_DELIMITER.key,{value:B.DATE_RANGE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.MY_MONTH_POSITION.key,{value:B.MY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_YEAR_POSITION.key,{value:B.MY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_MONTH_POSITION.key,{value:B.MD_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_DAY_POSITION.key,{value:B.MD_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_MONTH_POSITION.key,{value:B.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_DAY_POSITION.key,{value:B.MDY_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_YEAR_POSITION.key,{value:B.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_POSITION.key,{value:B.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_YEAR_POSITION.key,{value:B.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_SUFFIX.key,{value:B.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});G.addProperty(B.MY_LABEL_YEAR_SUFFIX.key,{value:B.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});G.addProperty(B.NAV.key,{value:B.NAV.value,handler:this.configNavigator});G.addProperty(B.STRINGS.key,{value:B.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:B.STRINGS.supercedes})},configStrings:function(H,G,I){var J=E.merge(B.STRINGS.value,G[0]);this.cfg.setProperty(B.STRINGS.key,J,true)},configPageDate:function(H,G,I){this.cfg.setProperty(B.PAGEDATE.key,this._parsePageDate(G[0]),true)},configMinDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MINDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configMaxDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MAXDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configToday:function(I,H,J){var K=H[0];if(E.isString(K)){K=this._parseDate(K)}var G=D.clearTime(K);if(!this.cfg.initialConfig[B.PAGEDATE.key]){this.cfg.setProperty(B.PAGEDATE.key,G)}this.today=G;this.cfg.setProperty(B.TODAY.key,G,true)},configSelected:function(I,G,K){var H=G[0],J=B.SELECTED.key;if(H){if(E.isString(H)){this.cfg.setProperty(J,this._parseDates(H),true)}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(J)}},configOptions:function(H,G,I){this.Options[H.toUpperCase()]=G[0]},configLocale:function(H,G,I){this.Locale[H.toUpperCase()]=G[0];this.cfg.refireEvent(B.LOCALE_MONTHS.key);this.cfg.refireEvent(B.LOCALE_WEEKDAYS.key)},configLocaleValues:function(J,I,K){J=J.toLowerCase();var M=I[0],H=this.cfg,N=this.Locale;switch(J){case B.LOCALE_MONTHS.key:switch(M){case F.SHORT:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_SHORT.key).concat();break;case F.LONG:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_LONG.key).concat();break}break;case B.LOCALE_WEEKDAYS.key:switch(M){case F.ONE_CHAR:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case F.SHORT:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case F.MEDIUM:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case F.LONG:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_LONG.key).concat();break}var L=H.getProperty(B.START_WEEKDAY.key);if(L>0){for(var G=0;G<L;++G){N.LOCALE_WEEKDAYS.push(N.LOCALE_WEEKDAYS.shift())}}break}},configNavigator:function(H,G,I){var J=G[0];if(YAHOO.widget.CalendarNavigator&&(J===true||E.isObject(J))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages){this.oNavigator.erase()}},this,true)}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}}},initStyles:function(){var G=F.STYLES;this.Style={CSS_ROW_HEADER:G.CSS_ROW_HEADER,CSS_ROW_FOOTER:G.CSS_ROW_FOOTER,CSS_CELL:G.CSS_CELL,CSS_CELL_SELECTOR:G.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:G.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:G.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:G.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:G.CSS_CELL_TODAY,CSS_CELL_OOM:G.CSS_CELL_OOM,CSS_CELL_OOB:G.CSS_CELL_OOB,CSS_HEADER:G.CSS_HEADER,CSS_HEADER_TEXT:G.CSS_HEADER_TEXT,CSS_BODY:G.CSS_BODY,CSS_WEEKDAY_CELL:G.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:G.CSS_WEEKDAY_ROW,CSS_FOOTER:G.CSS_FOOTER,CSS_CALENDAR:G.CSS_CALENDAR,CSS_SINGLE:G.CSS_SINGLE,CSS_CONTAINER:G.CSS_CONTAINER,CSS_NAV_LEFT:G.CSS_NAV_LEFT,CSS_NAV_RIGHT:G.CSS_NAV_RIGHT,CSS_NAV:G.CSS_NAV,CSS_CLOSE:G.CSS_CLOSE,CSS_CELL_TOP:G.CSS_CELL_TOP,CSS_CELL_LEFT:G.CSS_CELL_LEFT,CSS_CELL_RIGHT:G.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:G.CSS_CELL_BOTTOM,CSS_CELL_HOVER:G.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:G.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:G.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:G.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:G.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:G.CSS_WITH_TITLE,CSS_FIXED_SIZE:G.CSS_FIXED_SIZE,CSS_LINK_CLOSE:G.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(B.PAGEDATE.key))},_buildMonthLabel:function(G){var I=this.Locale.LOCALE_MONTHS[G.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,H=(G.getFullYear()+this.Locale.YEAR_OFFSET)+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return H+I}else{return I+H}},buildDayLabel:function(G){return G.getDate()},createTitleBar:function(G){var H=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");H.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;H.innerHTML=G;this.oDomContainer.insertBefore(H,this.oDomContainer.firstChild);C.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return H},removeTitleBar:function(){var G=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}C.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var K=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,J=this.Style.CSS_LINK_CLOSE,M="us/my/bn/x_d.gif",L=C.getElementsByClassName(J,"a",this.oDomContainer)[0],G=this.cfg.getProperty(B.STRINGS.key),H=(G&&G.close)?G.close:"";if(!L){L=document.createElement("a");A.addListener(L,"click",function(O,N){N.hide();A.preventDefault(O)},this)}L.href="#";L.className=J;if(F.IMG_ROOT!==null){var I=C.getElementsByClassName(K,"img",L)[0]||document.createElement("img");I.src=F.IMG_ROOT+M;I.className=K;L.appendChild(I)}else{L.innerHTML='<span class="'+K+" "+this.Style.CSS_CLOSE+'">'+H+"</span>"}this.oDomContainer.appendChild(L);return L},removeCloseButton:function(){var G=C.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}},renderHeader:function(Q){this.logger.log("Rendering header","render");var P=7,O="us/tr/callt.gif",G="us/tr/calrt.gif",N=this.cfg,K=N.getProperty(B.PAGEDATE.key),L=N.getProperty(B.STRINGS.key),V=(L&&L.previousMonth)?L.previousMonth:"",H=(L&&L.nextMonth)?L.nextMonth:"",M;if(N.getProperty(B.SHOW_WEEK_HEADER.key)){P+=1}if(N.getProperty(B.SHOW_WEEK_FOOTER.key)){P+=1}Q[Q.length]="<thead>";Q[Q.length]="<tr>";Q[Q.length]='<th colspan="'+P+'" class="'+this.Style.CSS_HEADER_TEXT+'">';Q[Q.length]='<div class="'+this.Style.CSS_HEADER+'">';var X,U=false;if(this.parent){if(this.index===0){X=true}if(this.index==(this.parent.cfg.getProperty("pages")-1)){U=true}}else{X=true;U=true}if(X){M=this._buildMonthLabel(D.subtract(K,D.MONTH,1));var R=N.getProperty(B.NAV_ARROW_LEFT.key);if(R===null&&F.IMG_ROOT!==null){R=F.IMG_ROOT+O}var I=(R===null)?"":' style="background-image:url('+R+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+I+' href="#">'+V+" ("+M+")</a>"}var W=this.buildMonthLabel();var S=this.parent||this;if(S.cfg.getProperty("navigator")){W='<a class="'+this.Style.CSS_NAV+'" href="#">'+W+"</a>"}Q[Q.length]=W;if(U){M=this._buildMonthLabel(D.add(K,D.MONTH,1));var T=N.getProperty(B.NAV_ARROW_RIGHT.key);if(T===null&&F.IMG_ROOT!==null){T=F.IMG_ROOT+G}var J=(T===null)?"":' style="background-image:url('+T+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+J+' href="#">'+H+" ("+M+")</a>"}Q[Q.length]="</div>\n</th>\n</tr>";if(N.getProperty(B.SHOW_WEEKDAYS.key)){Q=this.buildWeekdays(Q)}Q[Q.length]="</thead>";return Q},buildWeekdays:function(H){H[H.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(B.SHOW_WEEK_HEADER.key)){H[H.length]="<th>&#160;</th>"}for(var G=0;G<this.Locale.LOCALE_WEEKDAYS.length;++G){H[H.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[G]+"</th>"}if(this.cfg.getProperty(B.SHOW_WEEK_FOOTER.key)){H[H.length]="<th>&#160;</th>"}H[H.length]="</tr>";return H},renderBody:function(n,l){this.logger.log("Rendering body","render");var AL=this.cfg.getProperty(B.START_WEEKDAY.key);this.preMonthDays=n.getDay();if(AL>0){this.preMonthDays-=AL}if(this.preMonthDays<0){this.preMonthDays+=7}this.monthDays=D.findMonthEnd(n).getDate();this.postMonthDays=F.DISPLAY_DAYS-this.preMonthDays-this.monthDays;this.logger.log(this.preMonthDays+" preciding out-of-month days","render");this.logger.log(this.monthDays+" month days","render");this.logger.log(this.postMonthDays+" post-month days","render");n=D.subtract(n,D.DAY,this.preMonthDays);this.logger.log("Calendar page starts on "+n,"render");var Y,N,M="w",f="_cell",c="wd",y="d",P,v,AD=this.today,O=this.cfg,W=AD.getFullYear(),w=AD.getMonth(),J=AD.getDate(),AC=O.getProperty(B.PAGEDATE.key),I=O.getProperty(B.HIDE_BLANK_WEEKS.key),k=O.getProperty(B.SHOW_WEEK_FOOTER.key),b=O.getProperty(B.SHOW_WEEK_HEADER.key),U=O.getProperty(B.MINDATE.key),a=O.getProperty(B.MAXDATE.key),T=this.Locale.YEAR_OFFSET;if(U){U=D.clearTime(U)}if(a){a=D.clearTime(a)}l[l.length]='<tbody class="m'+(AC.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AJ=0,Q=document.createElement("div"),m=document.createElement("td");Q.appendChild(m);var AB=this.parent||this;for(var AF=0;AF<6;AF++){Y=D.getWeekNumber(n,AL);N=M+Y;if(AF!==0&&I===true&&n.getMonth()!=AC.getMonth()){break}else{l[l.length]='<tr class="'+N+'">';if(b){l=this.renderRowHeader(Y,l)}for(var AK=0;AK<7;AK++){P=[];this.clearElement(m);m.className=this.Style.CSS_CELL;m.id=this.id+f+AJ;this.logger.log("Rendering cell "+m.id+" ("+n.getFullYear()+T+"-"+(n.getMonth()+1)+"-"+n.getDate()+")","cellrender");if(n.getDate()==J&&n.getMonth()==w&&n.getFullYear()==W){P[P.length]=AB.renderCellStyleToday}var Z=[n.getFullYear(),n.getMonth()+1,n.getDate()];this.cellDates[this.cellDates.length]=Z;if(n.getMonth()!=AC.getMonth()){P[P.length]=AB.renderCellNotThisMonth}else{C.addClass(m,c+n.getDay());C.addClass(m,y+n.getDate());for(var AE=0;AE<this.renderStack.length;++AE){v=null;var z=this.renderStack[AE],AM=z[0],H,e,L;switch(AM){case F.DATE:H=z[1][1];e=z[1][2];L=z[1][0];if(n.getMonth()+1==H&&n.getDate()==e&&n.getFullYear()==L){v=z[2];this.renderStack.splice(AE,1)}break;case F.MONTH_DAY:H=z[1][0];e=z[1][1];if(n.getMonth()+1==H&&n.getDate()==e){v=z[2];this.renderStack.splice(AE,1)}break;case F.RANGE:var h=z[1][0],g=z[1][1],o=h[1],S=h[2],X=h[0],AI=D.getDate(X,o-1,S),K=g[1],u=g[2],G=g[0],AH=D.getDate(G,K-1,u);if(n.getTime()>=AI.getTime()&&n.getTime()<=AH.getTime()){v=z[2];if(n.getTime()==AH.getTime()){this.renderStack.splice(AE,1)}}break;case F.WEEKDAY:var R=z[1][0];if(n.getDay()+1==R){v=z[2]}break;case F.MONTH:H=z[1][0];if(n.getMonth()+1==H){v=z[2]}break}if(v){P[P.length]=v}}}if(this._indexOfSelectedFieldArray(Z)>-1){P[P.length]=AB.renderCellStyleSelected}if((U&&(n.getTime()<U.getTime()))||(a&&(n.getTime()>a.getTime()))){P[P.length]=AB.renderOutOfBoundsDate}else{P[P.length]=AB.styleCellDefault;P[P.length]=AB.renderCellDefault}for(var AA=0;AA<P.length;++AA){this.logger.log("renderer["+AA+"] for ("+n.getFullYear()+T+"-"+(n.getMonth()+1)+"-"+n.getDate()+")","cellrender");if(P[AA].call(AB,n,m)==F.STOP_RENDER){break}}n.setTime(n.getTime()+D.ONE_DAY_MS);n=D.clearTime(n);if(AJ>=0&&AJ<=6){C.addClass(m,this.Style.CSS_CELL_TOP)}if((AJ%7)===0){C.addClass(m,this.Style.CSS_CELL_LEFT)}if(((AJ+1)%7)===0){C.addClass(m,this.Style.CSS_CELL_RIGHT)}var q=this.postMonthDays;if(I&&q>=7){var V=Math.floor(q/7);for(var AG=0;AG<V;++AG){q-=7}}if(AJ>=((this.preMonthDays+q+this.monthDays)-7)){C.addClass(m,this.Style.CSS_CELL_BOTTOM)}l[l.length]=Q.innerHTML;AJ++}if(k){l=this.renderRowFooter(Y,l)}l[l.length]="</tr>"}}l[l.length]="</tbody>";return l},renderFooter:function(G){return G},render:function(){this.beforeRenderEvent.fire();var H=D.findMonthStart(this.cfg.getProperty(B.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;A.purgeElement(this.oDomContainer,true);var G=[];G[G.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(H.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';G=this.renderHeader(G);G=this.renderBody(H,G);G=this.renderFooter(G);G[G.length]="</table>";this.oDomContainer.innerHTML=G.join("\n");this.applyListeners();this.cells=C.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(B.TITLE.key);this.cfg.refireEvent(B.CLOSE.key);this.cfg.refireEvent(B.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var P=this.oDomContainer,H=this.parent||this,L="a",S="click";var M=C.getElementsByClassName(this.Style.CSS_NAV_LEFT,L,P),I=C.getElementsByClassName(this.Style.CSS_NAV_RIGHT,L,P);if(M&&M.length>0){this.linkLeft=M[0];A.addListener(this.linkLeft,S,this.doPreviousMonthNav,H,true)}if(I&&I.length>0){this.linkRight=I[0];A.addListener(this.linkRight,S,this.doNextMonthNav,H,true)}if(H.cfg.getProperty("navigator")!==null){this.applyNavListeners()}if(this.domEventMap){var J,G;for(var R in this.domEventMap){if(E.hasOwnProperty(this.domEventMap,R)){var N=this.domEventMap[R];if(!(N instanceof Array)){N=[N]}for(var K=0;K<N.length;K++){var Q=N[K];G=C.getElementsByClassName(R,Q.tag,this.oDomContainer);for(var O=0;O<G.length;O++){J=G[O];A.addListener(J,Q.event,Q.handler,Q.scope,Q.correct)}}}}}A.addListener(this.oDomContainer,"click",this.doSelectCell,this);A.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);A.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var H=this.parent||this,I=this,G=C.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(G.length>0){A.addListener(G,"click",function(N,M){var L=A.getTarget(N);if(this===L||C.isAncestor(this,L)){A.preventDefault(N)}var J=H.oNavigator;if(J){var K=I.cfg.getProperty("pagedate");J.setYear(K.getFullYear()+I.Locale.YEAR_OFFSET);J.setMonth(K.getMonth());J.show()}})}},getDateByCellId:function(H){var G=this.getDateFieldsByCellId(H);return(G)?D.getDate(G[0],G[1]-1,G[2]):null},getDateFieldsByCellId:function(G){G=this.getIndexFromId(G);return(G>-1)?this.cellDates[G]:null},getCellIndex:function(I){var H=-1;if(I){var G=I.getMonth(),N=I.getFullYear(),M=I.getDate(),K=this.cellDates;for(var J=0;J<K.length;++J){var L=K[J];if(L[0]===N&&L[1]===G+1&&L[2]===M){H=J;break}}}return H},getIndexFromId:function(I){var H=-1,G=I.lastIndexOf("_cell");if(G>-1){H=parseInt(I.substring(G+5),10)}return H},renderOutOfBoundsDate:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOB);G.innerHTML=H.getDate();return F.STOP_RENDER},renderRowHeader:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+H+"</th>";return G},renderRowFooter:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+H+"</th>";return G},renderCellDefault:function(H,G){G.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(H)+"</a>"},styleCellDefault:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(H,G){C.addClass(G,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOM);G.innerHTML=H.getDate();return F.STOP_RENDER},renderBodyCellRestricted:function(H,G){C.addClass(G,this.Style.CSS_CELL);C.addClass(G,this.Style.CSS_CELL_RESTRICTED);G.innerHTML=H.getDate();return F.STOP_RENDER},addMonths:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.MONTH,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractMonths:function(G){this.addMonths(-1*G)},addYears:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.YEAR,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractYears:function(G){this.addYears(-1*G)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(B.SELECTED.key);this.cfg.resetProperty(B.PAGEDATE.key);this.resetEvent.fire()},clear:function(){this.cfg.setProperty(B.SELECTED.key,[]);this.cfg.setProperty(B.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(I){this.logger.log("Select: "+I,"info");var L=this._toFieldArray(I),H=[],K=[],M=B.SELECTED.key;this.logger.log("Selection field array: "+L,"info");for(var G=0;G<L.length;++G){var J=L[G];if(!this.isDateOOB(this._toDate(J))){if(H.length===0){this.beforeSelectEvent.fire();K=this.cfg.getProperty(M)}H.push(J);if(this._indexOfSelectedFieldArray(J)==-1){K[K.length]=J}}}if(H.length===0){this.logger.log("All provided dates were OOB. beforeSelect and select events not fired","info")}if(H.length>0){if(this.parent){this.parent.cfg.setProperty(M,K)}else{this.cfg.setProperty(M,K)}this.selectEvent.fire(H)}return this.getSelectedDates()},selectCell:function(J){var H=this.cells[J],N=this.cellDates[J],M=this._toDate(N),I=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);this.logger.log("Select: "+M,"info");if(!I){this.logger.log("The cell at cellIndex:"+J+" is not a selectable cell. beforeSelect, select events not fired","info")}if(I){this.beforeSelectEvent.fire();var L=B.SELECTED.key;var K=this.cfg.getProperty(L);var G=N.concat();if(this._indexOfSelectedFieldArray(G)==-1){K[K.length]=G}if(this.parent){this.parent.cfg.setProperty(L,K)}else{this.cfg.setProperty(L,K)}this.renderCellStyleSelected(M,H);this.selectEvent.fire([G]);this.doCellMouseOut.call(H,null,this)}return this.getSelectedDates()},deselect:function(K){this.logger.log("Deselect: "+K,"info");var G=this._toFieldArray(K),J=[],M=[],N=B.SELECTED.key;this.logger.log("Deselection field array: "+G,"info");for(var H=0;H<G.length;++H){var L=G[H];if(!this.isDateOOB(this._toDate(L))){if(J.length===0){this.beforeDeselectEvent.fire();M=this.cfg.getProperty(N)}J.push(L);var I=this._indexOfSelectedFieldArray(L);if(I!=-1){M.splice(I,1)}}}if(J.length===0){this.logger.log("All provided dates were OOB. beforeDeselect and deselect events not fired")}if(J.length>0){if(this.parent){this.parent.cfg.setProperty(N,M)}else{this.cfg.setProperty(N,M)}this.deselectEvent.fire(J)}return this.getSelectedDates()},deselectCell:function(K){var H=this.cells[K],N=this.cellDates[K],I=this._indexOfSelectedFieldArray(N);var J=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(!J){this.logger.log("The cell at cellIndex:"+K+" is not a selectable/deselectable cell","info")}if(J){this.beforeDeselectEvent.fire();var L=this.cfg.getProperty(B.SELECTED.key),M=this._toDate(N),G=N.concat();if(I>-1){if(this.cfg.getProperty(B.PAGEDATE.key).getMonth()==M.getMonth()&&this.cfg.getProperty(B.PAGEDATE.key).getFullYear()==M.getFullYear()){C.removeClass(H,this.Style.CSS_CELL_SELECTED)}L.splice(I,1)}if(this.parent){this.parent.cfg.setProperty(B.SELECTED.key,L)}else{this.cfg.setProperty(B.SELECTED.key,L)}this.deselectEvent.fire([G])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var J=B.SELECTED.key,G=this.cfg.getProperty(J),H=G.length,I=G.concat();if(this.parent){this.parent.cfg.setProperty(J,[])}else{this.cfg.setProperty(J,[])}if(H>0){this.deselectEvent.fire(I)}return this.getSelectedDates()},_toFieldArray:function(H){var G=[];if(H instanceof Date){G=[[H.getFullYear(),H.getMonth()+1,H.getDate()]]}else{if(E.isString(H)){G=this._parseDates(H)}else{if(E.isArray(H)){for(var I=0;I<H.length;++I){var J=H[I];G[G.length]=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}}}return G},toDate:function(G){return this._toDate(G)},_toDate:function(G){if(G instanceof Date){return G}else{return D.getDate(G[0],G[1]-1,G[2])}},_fieldArraysAreEqual:function(I,H){var G=false;if(I[0]==H[0]&&I[1]==H[1]&&I[2]==H[2]){G=true}return G},_indexOfSelectedFieldArray:function(K){var J=-1,G=this.cfg.getProperty(B.SELECTED.key);for(var I=0;I<G.length;++I){var H=G[I];if(K[0]==H[0]&&K[1]==H[1]&&K[2]==H[2]){J=I;break}}return J},isDateOOM:function(G){return(G.getMonth()!=this.cfg.getProperty(B.PAGEDATE.key).getMonth())},isDateOOB:function(I){var J=this.cfg.getProperty(B.MINDATE.key),K=this.cfg.getProperty(B.MAXDATE.key),H=D;if(J){J=H.clearTime(J)}if(K){K=H.clearTime(K)}var G=new Date(I.getTime());G=H.clearTime(G);return((J&&G.getTime()<J.getTime())||(K&&G.getTime()>K.getTime()))},_parsePageDate:function(G){var J;if(G){if(G instanceof Date){J=D.findMonthStart(G)}else{var K,I,H;H=G.split(this.cfg.getProperty(B.DATE_FIELD_DELIMITER.key));K=parseInt(H[this.cfg.getProperty(B.MY_MONTH_POSITION.key)-1],10)-1;I=parseInt(H[this.cfg.getProperty(B.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;J=D.getDate(I,K,1)}}else{J=D.getDate(this.today.getFullYear(),this.today.getMonth(),1)}return J},onBeforeSelect:function(){if(this.cfg.getProperty(B.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}}},onSelect:function(G){},onBeforeDeselect:function(){},onDeselect:function(G){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(I){var J=I.split(this.Locale.DATE_FIELD_DELIMITER),G;if(J.length==2){G=[J[this.Locale.MD_MONTH_POSITION-1],J[this.Locale.MD_DAY_POSITION-1]];G.type=F.MONTH_DAY}else{G=[J[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,J[this.Locale.MDY_MONTH_POSITION-1],J[this.Locale.MDY_DAY_POSITION-1]];G.type=F.DATE}for(var H=0;H<G.length;H++){G[H]=parseInt(G[H],10)}return G},_parseDates:function(H){var O=[],N=H.split(this.Locale.DATE_DELIMITER);for(var M=0;M<N.length;++M){var L=N[M];if(L.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var G=L.split(this.Locale.DATE_RANGE_DELIMITER),K=this._parseDate(G[0]),P=this._parseDate(G[1]),J=this._parseRange(K,P);O=O.concat(J)}else{var I=this._parseDate(L);O.push(I)}}return O},_parseRange:function(G,K){var H=D.add(D.getDate(G[0],G[1]-1,G[2]),D.DAY,1),J=D.getDate(K[0],K[1]-1,K[2]),I=[];I.push(G);while(H.getTime()<=J.getTime()){I.push([H.getFullYear(),H.getMonth()+1,H.getDate()]);H=D.add(H,D.DAY,1)}return I},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(G){G.innerHTML="&#160;";G.className=""},addRenderer:function(G,H){var J=this._parseDates(G);for(var I=0;I<J.length;++I){var K=J[I];if(K.length==2){if(K[0] instanceof Array){this._addRenderer(F.RANGE,K,H)}else{this._addRenderer(F.MONTH_DAY,K,H)}}else{if(K.length==3){this._addRenderer(F.DATE,K,H)}}}},_addRenderer:function(H,I,G){var J=[H,I,G];this.renderStack.unshift(J);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(H,G){this._addRenderer(F.MONTH,[H],G)},addWeekdayRenderer:function(H,G){this._addRenderer(F.WEEKDAY,[H],G)},clearAllBodyCellStyles:function(G){for(var H=0;H<this.cells.length;++H){C.removeClass(this.cells[H],G)}},setMonth:function(I){var G=B.PAGEDATE.key,H=this.cfg.getProperty(G);H.setMonth(parseInt(I,10));this.cfg.setProperty(G,H)},setYear:function(H){var G=B.PAGEDATE.key,I=this.cfg.getProperty(G);I.setFullYear(parseInt(H,10)-this.Locale.YEAR_OFFSET);this.cfg.setProperty(G,I)},getSelectedDates:function(){var I=[],H=this.cfg.getProperty(B.SELECTED.key);for(var K=0;K<H.length;++K){var J=H[K];var G=D.getDate(J[0],J[1]-1,J[2]);I.push(G)}I.sort(function(M,L){return M-L});return I},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire()}},browser:(function(){var G=navigator.userAgent.toLowerCase();if(G.indexOf("opera")!=-1){return"opera"}else{if(G.indexOf("msie 7")!=-1){return"ie7"}else{if(G.indexOf("msie")!=-1){return"ie"}else{if(G.indexOf("safari")!=-1){return"safari"}else{if(G.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}})(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var G=this;if(G.navigator){G.navigator.destroy()}if(G.cfg){G.cfg.destroy()}A.purgeElement(G.oDomContainer,true);C.removeClass(G.oDomContainer,G.Style.CSS_WITH_TITLE);C.removeClass(G.oDomContainer,G.Style.CSS_CONTAINER);C.removeClass(G.oDomContainer,G.Style.CSS_SINGLE);G.oDomContainer.innerHTML="";G.oDomContainer=null;G.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=F;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();(function(){var D=YAHOO.util.Dom,F=YAHOO.widget.DateMath,A=YAHOO.util.Event,E=YAHOO.lang,G=YAHOO.widget.Calendar;function B(J,H,I){if(arguments.length>0){this.init.apply(this,arguments)}}B.DEFAULT_CONFIG=B._DEFAULT_CONFIG=G.DEFAULT_CONFIG;B.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var C=B.DEFAULT_CONFIG;B.prototype={init:function(K,I,J){var H=this._parseArgs(arguments);K=H.id;I=H.container;J=H.config;this.oDomContainer=D.get(I);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=D.generateId()}if(!K){K=this.oDomContainer.id+"_t"}this.id=K;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("CalendarGroup "+this.id);this.initEvents();this.initStyles();this.pages=[];D.addClass(this.oDomContainer,B.CSS_CONTAINER);D.addClass(this.oDomContainer,B.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(J){this.cfg.applyConfig(J,true)}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}this.logger.log("Initialized "+this.pages.length+"-page CalendarGroup","info")},setupConfig:function(){var H=this.cfg;H.addProperty(C.PAGES.key,{value:C.PAGES.value,validator:H.checkNumber,handler:this.configPages});H.addProperty(C.YEAR_OFFSET.key,{value:C.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:C.YEAR_OFFSET.supercedes,suppressEvent:true});H.addProperty(C.TODAY.key,{value:new Date(C.TODAY.value.getTime()),supercedes:C.TODAY.supercedes,handler:this.configToday,suppressEvent:false});H.addProperty(C.PAGEDATE.key,{value:C.PAGEDATE.value||new Date(C.TODAY.value.getTime()),handler:this.configPageDate});H.addProperty(C.SELECTED.key,{value:[],handler:this.configSelected});H.addProperty(C.TITLE.key,{value:C.TITLE.value,handler:this.configTitle});H.addProperty(C.CLOSE.key,{value:C.CLOSE.value,handler:this.configClose});H.addProperty(C.IFRAME.key,{value:C.IFRAME.value,handler:this.configIframe,validator:H.checkBoolean});H.addProperty(C.MINDATE.key,{value:C.MINDATE.value,handler:this.delegateConfig});H.addProperty(C.MAXDATE.key,{value:C.MAXDATE.value,handler:this.delegateConfig});H.addProperty(C.MULTI_SELECT.key,{value:C.MULTI_SELECT.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.START_WEEKDAY.key,{value:C.START_WEEKDAY.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.SHOW_WEEKDAYS.key,{value:C.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_HEADER.key,{value:C.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_FOOTER.key,{value:C.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.HIDE_BLANK_WEEKS.key,{value:C.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.NAV_ARROW_LEFT.key,{value:C.NAV_ARROW_LEFT.value,handler:this.delegateConfig});H.addProperty(C.NAV_ARROW_RIGHT.key,{value:C.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_SHORT.key,{value:C.MONTHS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_LONG.key,{value:C.MONTHS_LONG.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_1CHAR.key,{value:C.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_SHORT.key,{value:C.WEEKDAYS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_MEDIUM.key,{value:C.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_LONG.key,{value:C.WEEKDAYS_LONG.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_MONTHS.key,{value:C.LOCALE_MONTHS.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_WEEKDAYS.key,{value:C.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});H.addProperty(C.DATE_DELIMITER.key,{value:C.DATE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_FIELD_DELIMITER.key,{value:C.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_RANGE_DELIMITER.key,{value:C.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.MY_MONTH_POSITION.key,{value:C.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_YEAR_POSITION.key,{value:C.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_MONTH_POSITION.key,{value:C.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_DAY_POSITION.key,{value:C.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_MONTH_POSITION.key,{value:C.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_DAY_POSITION.key,{value:C.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_YEAR_POSITION.key,{value:C.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_POSITION.key,{value:C.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_YEAR_POSITION.key,{value:C.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_SUFFIX.key,{value:C.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.MY_LABEL_YEAR_SUFFIX.key,{value:C.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.NAV.key,{value:C.NAV.value,handler:this.configNavigator});H.addProperty(C.STRINGS.key,{value:C.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:C.STRINGS.supercedes})},initEvents:function(){var J=this,L="Event",M=YAHOO.util.CustomEvent;var I=function(O,R,N){for(var Q=0;Q<J.pages.length;++Q){var P=J.pages[Q];P[this.type+L].subscribe(O,R,N)}};var H=function(N,Q){for(var P=0;P<J.pages.length;++P){var O=J.pages[P];O[this.type+L].unsubscribe(N,Q)}};var K=G._EVENT_TYPES;J.beforeSelectEvent=new M(K.BEFORE_SELECT);J.beforeSelectEvent.subscribe=I;J.beforeSelectEvent.unsubscribe=H;J.selectEvent=new M(K.SELECT);J.selectEvent.subscribe=I;J.selectEvent.unsubscribe=H;J.beforeDeselectEvent=new M(K.BEFORE_DESELECT);J.beforeDeselectEvent.subscribe=I;J.beforeDeselectEvent.unsubscribe=H;J.deselectEvent=new M(K.DESELECT);J.deselectEvent.subscribe=I;J.deselectEvent.unsubscribe=H;J.changePageEvent=new M(K.CHANGE_PAGE);J.changePageEvent.subscribe=I;J.changePageEvent.unsubscribe=H;J.beforeRenderEvent=new M(K.BEFORE_RENDER);J.beforeRenderEvent.subscribe=I;J.beforeRenderEvent.unsubscribe=H;J.renderEvent=new M(K.RENDER);J.renderEvent.subscribe=I;J.renderEvent.unsubscribe=H;J.resetEvent=new M(K.RESET);J.resetEvent.subscribe=I;J.resetEvent.unsubscribe=H;J.clearEvent=new M(K.CLEAR);J.clearEvent.subscribe=I;J.clearEvent.unsubscribe=H;J.beforeShowEvent=new M(K.BEFORE_SHOW);J.showEvent=new M(K.SHOW);J.beforeHideEvent=new M(K.BEFORE_HIDE);J.hideEvent=new M(K.HIDE);J.beforeShowNavEvent=new M(K.BEFORE_SHOW_NAV);J.showNavEvent=new M(K.SHOW_NAV);J.beforeHideNavEvent=new M(K.BEFORE_HIDE_NAV);J.hideNavEvent=new M(K.HIDE_NAV);J.beforeRenderNavEvent=new M(K.BEFORE_RENDER_NAV);J.renderNavEvent=new M(K.RENDER_NAV);J.beforeDestroyEvent=new M(K.BEFORE_DESTROY);J.destroyEvent=new M(K.DESTROY)},configPages:function(T,R,N){var L=R[0],J=C.PAGEDATE.key,W="_",M,O=null,S="groupcal",V="first-of-type",K="last-of-type";for(var I=0;I<L;++I){var U=this.id+W+I,Q=this.containerId+W+I,P=this.cfg.getConfig();P.close=false;P.title=false;P.navigator=null;if(I>0){M=new Date(O);this._setMonthOnDate(M,M.getMonth()+I);P.pageDate=M}var H=this.constructChild(U,Q,P);D.removeClass(H.oDomContainer,this.Style.CSS_SINGLE);D.addClass(H.oDomContainer,S);if(I===0){O=H.cfg.getProperty(J);D.addClass(H.oDomContainer,V)}if(I==(L-1)){D.addClass(H.oDomContainer,K)}H.parent=this;H.index=I;this.pages[this.pages.length]=H}},configPageDate:function(O,N,L){var J=N[0],M;var K=C.PAGEDATE.key;for(var I=0;I<this.pages.length;++I){var H=this.pages[I];if(I===0){M=H._parsePageDate(J);H.cfg.setProperty(K,M)}else{var P=new Date(M);this._setMonthOnDate(P,P.getMonth()+I);H.cfg.setProperty(K,P)}}},configSelected:function(J,H,L){var K=C.SELECTED.key;this.delegateConfig(J,H,L);var I=(this.pages.length>0)?this.pages[0].cfg.getProperty(K):[];this.cfg.setProperty(K,I,true)},delegateConfig:function(I,H,L){var M=H[0];var K;for(var J=0;J<this.pages.length;J++){K=this.pages[J];K.cfg.setProperty(I,M)}},setChildFunction:function(K,I){var H=this.cfg.getProperty(C.PAGES.key);for(var J=0;J<H;++J){this.pages[J][K]=I}},callChildFunction:function(M,I){var H=this.cfg.getProperty(C.PAGES.key);for(var L=0;L<H;++L){var K=this.pages[L];if(K[M]){var J=K[M];J.call(K,I)}}},constructChild:function(K,I,J){var H=document.getElementById(I);if(!H){H=document.createElement("div");H.id=I;this.oDomContainer.appendChild(H)}return new G(K,I,J)},setMonth:function(L){L=parseInt(L,10);var M;var I=C.PAGEDATE.key;for(var K=0;K<this.pages.length;++K){var J=this.pages[K];var H=J.cfg.getProperty(I);if(K===0){M=H.getFullYear()}else{H.setFullYear(M)}this._setMonthOnDate(H,L+K);J.cfg.setProperty(I,H)}},setYear:function(J){var I=C.PAGEDATE.key;J=parseInt(J,10);for(var L=0;L<this.pages.length;++L){var K=this.pages[L];var H=K.cfg.getProperty(I);if((H.getMonth()+1)==1&&L>0){J+=1}K.setYear(J)}},render:function(){this.renderHeader();for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.render()}this.renderFooter()},select:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.select(H)}return this.getSelectedDates()},selectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.selectCell(H)}return this.getSelectedDates()},deselect:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselect(H)}return this.getSelectedDates()},deselectAll:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.deselectAll()}return this.getSelectedDates()},deselectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselectCell(H)}return this.getSelectedDates()},reset:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.reset()}},clear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.clear()}this.cfg.setProperty(C.SELECTED.key,[]);this.cfg.setProperty(C.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextMonth()}},previousMonth:function(){for(var I=this.pages.length-1;I>=0;--I){var H=this.pages[I];H.previousMonth()}},nextYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextYear()}},previousYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.previousYear()}},getSelectedDates:function(){var J=[];var I=this.cfg.getProperty(C.SELECTED.key);for(var L=0;L<I.length;++L){var K=I[L];var H=F.getDate(K[0],K[1]-1,K[2]);J.push(H)}J.sort(function(N,M){return N-M});return J},addRenderer:function(H,I){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addRenderer(H,I)}},addMonthRenderer:function(K,H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.addMonthRenderer(K,H)}},addWeekdayRenderer:function(I,H){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addWeekdayRenderer(I,H)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(H){this.callChildFunction("addMonths",H)},subtractMonths:function(H){this.callChildFunction("subtractMonths",H)},addYears:function(H){this.callChildFunction("addYears",H)},subtractYears:function(H){this.callChildFunction("subtractYears",H)},getCalendarPage:function(K){var M=null;if(K){var N=K.getFullYear(),J=K.getMonth();var I=this.pages;for(var L=0;L<I.length;++L){var H=I[L].cfg.getProperty("pagedate");if(H.getFullYear()===N&&H.getMonth()===J){M=I[L];break}}}return M},_setMonthOnDate:function(I,J){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(J<0||J>11)){var H=F.add(I,F.MONTH,J-I.getMonth());I.setTime(H.getTime())}else{I.setMonth(J)}},_fixWidth:function(){var H=0;for(var J=0;J<this.pages.length;++J){var I=this.pages[J];H+=I.oDomContainer.offsetWidth}if(H>0){this.oDomContainer.style.width=H+"px"}},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var J=this;if(J.navigator){J.navigator.destroy()}if(J.cfg){J.cfg.destroy()}A.purgeElement(J.oDomContainer,true);D.removeClass(J.oDomContainer,B.CSS_CONTAINER);D.removeClass(J.oDomContainer,B.CSS_MULTI_UP);for(var I=0,H=J.pages.length;I<H;I++){J.pages[I].destroy();J.pages[I]=null}J.oDomContainer.innerHTML="";J.oDomContainer=null;this.destroyEvent.fire()}}};B.CSS_CONTAINER="yui-calcontainer";B.CSS_MULTI_UP="multi";B.CSS_2UPTITLE="title";B.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(B,G,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=B;YAHOO.widget.CalendarGroup=B;YAHOO.widget.Calendar2up=function(J,H,I){this.init(J,H,I)};YAHOO.extend(YAHOO.widget.Calendar2up,B);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(A){this.init(A)};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A._DEFAULT_CFG=A.DEFAULT_CONFIG;A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(this._doc.compatMode=="BackCompat")))},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render()}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask()}},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(A){if(A>=0&&A<12){this._month=A}this._updateMonthUI()},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B}this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off")}this._setFirstLastElements()},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px")}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>"}E[E.length]="</select>"}return E},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+'_submit">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+'_cancel">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI())}}function C(){this.setMonth(this._getMonthFromUI())}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true)}this.applyKeyListeners()},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask)}this.purgeKeyListeners()},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){var C=this;window.setTimeout(function(){C._update(B)},A)}else{this._update(B)}}},_update:function(B){var A=YAHOO.widget.DateMath.getDate(this.getYear()-B.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);B.cfg.setProperty("pagedate",A);B.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select()}catch(B){}}else{if(C=="month"){A=this.monthEl}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus()}catch(D){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML=""}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl)}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl)}this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none")}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex}else{return 0}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10)}}return A},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit()}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break}if(B){G.preventDefault(H);try{this.yearEl.select()}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus()}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus()}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D]}else{return(A!==true&&A[D])?A[D]:C[D]}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});YUI.add("wl-calendar",function(C){var D={};var O=[];var H=[];var K={};var E=sabre.config.global.currentTimeInMillis;C.wlCalendar={reset:function(){O=[]},setFlightDates:function(R,S){O=[];var T=R.previous();var Q=T?C.DataType.Date.parse(T.get("value")):new Date(E);if(!Q){Q=new Date()}H[S]=H[S]||{};H[S].date=Q;H[S].textInput=R;H[S].hiddenInput=R.previous();H[S].calendar=null},loadCalendar:function(R,T,S){K.dateFormat=S.dateFormat;K.showCalendar=S.show;K.onSelectCallback=S.onSelectCallback||function(){};var Q=R.get("id");R=C.one("#"+Q);var U=F(Q);if(!D[Q]){D[Q]=L(Q);T.registerContainer(D[Q]);D[Q].hideEvent.subscribe(function(){C.wlValidation.validate(null,R.previous());var W=C.one(O[U].oDomContainer);W.removeClass("calendar-container");W.addClass("hidden")})}I(Q);var V=C.one(D[Q].body);V.addClass("loadingContainer");D[Q].show();C.later(5,C,function(){C.use("yui2-calendar",function(Z){if(!Z.Lang.isValue(O[U])){O[U]=new YAHOO.widget.CalendarGroup("calendar-"+Q,{iframe:false});O[U].selectEvent.subscribe(function(k,Y,l){B(l,D[Q],Q,K.dateFormat,T);K.onSelectCallback()},O[U],true);O[U].renderEvent.subscribe(function(){Z.one(O[U].oDomContainer).removeClass("hidden");D[Q].fireEvent("changeContent")});H[U].calendar=O[U]}var f=new Date(E);var e=O[U]&&O[U].getSelectedDates()[0];var d=YAHOO.widget.DateMath;if(document.getElementById("formattedOutboundDepartureDate")&&document.getElementById("formattedOutboundDepartureDate").value){var W=Z.DataType.Date.parse(document.getElementById("formattedOutboundDepartureDate").value)}else{var a=H[U-1];var W=a?Z.DataType.Date.parse(a.hiddenInput.get("value"))||f:f}var g=d.add(W,d.DAY,365);var c=Z.one("#date"+(U+1));if(c&&c.get("disabled")){var h=Z.one("#date_hidden"+(U+1));if(h){g=Z.DataType.Date.parse(h.get("value"))}}var X=e||W;var b=O[U].cfg;b.setProperty("locale_weekdays","medium");b.setProperty("mindate",W);b.setProperty("maxdate",g);b.setProperty("pagedate",X);b.setProperty("start_weekday",sabre.config.satConfiguration.calendarStartDay);if(T.getTripType()==="oneway"){O[U].removeRenderers()}else{G(O,U)}J(O[U]);O[U].render();Z.on("keyup",function(Y){if(Y.charCode===27){D[Q].hide()}});V.addClass("calendar-container");V.removeClass("loadingContainer");I(Q)})})}};function L(R){var Q=new YAHOO.widget.Panel("container-"+R,{visible:false,draggable:false,zIndex:520,close:true});Q.showEvent.subscribe(function(){Q.fireEvent("changeContent")});Q.setBody('<div class="calendar-container" id="calendar-'+R+'"></div>');Q.render(document.body);return Q}function B(a,b,Q,d,c){var S=C.one("#"+Q);var k=S.previous();var V;var W;if(a.getSelectedDates().length>0){var R=a.getSelectedDates()[0];var f=R.getDate();var m=R.getMonth();var Y=R.getFullYear();V=C.DataType.Date.format(R,{format:d});W=M(Y,m,f);var l=(m+1)+"/"+f+"/"+Y;var g,X,Z,e;var U=F(Q);for(g=U+1;g<H.length;g++){e=H[g];var T=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R>T){e.calendar&&e.calendar.select(l);e.date=R;X=H[g].textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}for(g=U-1;g>-1;g--){e=H[g];var h=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R<h){e.calendar&&e.calendar.select(l);e.date=R;X=e.textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}}else{V="";W=0}S.set("value",V);k.set("value",W);b.hide();if(c.persistInputState){c.persistInputState(Q,W);c.persistInputState("textForField"+Q,V)}}function M(R,S,Q){return C.DataType.Date.format(new Date(R,S,Q),{format:sabre.config.dateInputFormat})}function F(R){var S=new RegExp("^[a-z_\\-]+(\\d+)$","i");var Q=R.match(S);return Q?C.DataType.Number.parse(Q[1]):null}function G(T,U){var W=T[U];var V;var Q;for(var R=0;R<T.length;R++){var S=T[R]&&T[R].getSelectedDates()[0]||H[R].date;if(S){if(!V&&!Q){V=S;Q=S}if(S<V){V=S}if(S>Q){Q=S}}}V=V||new Date(E);Q=Q||new Date(E);W.removeRenderers();W.addRenderer(A(W,V,Q),W.renderCellStyleHighlight1)}function A(T,Q,R){var S=T.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.DATE_RANGE_DELIMITER.key);return(N(T,Q)+S+N(T,R))}function N(U,T){var R=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;var Q=[];Q[U.cfg.getProperty(R.MDY_MONTH_POSITION.key)-1]=(T.getMonth()+1);Q[U.cfg.getProperty(R.MDY_DAY_POSITION.key)-1]=T.getDate();Q[U.cfg.getProperty(R.MDY_YEAR_POSITION.key)-1]=T.getFullYear();var S=U.cfg.getProperty(R.DATE_FIELD_DELIMITER.key);return Q.join(S)}function J(S){var T=C.config.locale;if(C.DataType.Date.Locale){var R=C.DataType.Date.Locale[T];P(R,S)}else{var Q=T.replace("_","-");C.use("lang/datatype-date-format_"+Q,function(V){V.Intl.setLang("datatype-date-format",Q);var U=V.Intl.get("datatype-date-format");P(U,S)})}}function P(Q,T){if(Q){var R={b:"MONTHS_SHORT",B:"MONTHS_LONG",a:"WEEKDAYS_MEDIUM",A:"WEEKDAYS_LONG"};for(var S in R){if(R.hasOwnProperty(S)){T.cfg.setProperty(R[S],Q[S])}}T.render()}}function I(R){var S=C.isCurrentLanguageRtl();var T=S?"br":"bl";var Q=S?"tr":"tl";D[R].cfg.setProperty("context",[R,Q,T,["beforeShow","windowResize"]])}},"1.0.0",{requires:[]});YUI.add("wl-airport-finder",function(A){A.wlAirportFinder=function(k,V,W){var g;var E;var G={};var I="";var f="";var S=[];var K=[];var h={};W=W||{};var o=W.cityListFormat||"%airport (%code)";var n=W.defaultOriginLabel||"";var H=W.defaultDestinationLabel||"";var a=W.maxRowCount||16;var Z='<div class="table-container"><table><tbody><tr class="ondhead"><td id="originInfoErrorMessage" class="translate" wl:translate="label.fsc.noOriginMatch"></td></tr><tr class="foot"><td colspan="5"></td></tr></tbody></table></div>';var O=false;return{showAirportList:N,createAirportList:B,updateAirportInputTranslation:Y,formatCityList:P,setRbeBooking:L};function L(p){O=p}function N(s,r,q,p){A.use("wl-routes",function(t){b(s,r,q,p)})}function M(q,s){var r=A.isCurrentLanguageRtl();var t=r?"br":"bl";var p=r?"tr":"tl";q.cfg.setProperty("context",[s.get("id"),p,t,["beforeShow","windowResize"]])}function b(x,z,p,AD){var AE;var AA;var AB;var y;var v;B(z);var u=z.hasClass("origin_airport");var t=z.get("id");var w=z.previous();if(!w){A.log("Cannot show airport finder - unable to find connected input control","warn");return }if(u){AA=w.get("id");y=t;AB=AA.replace("origin","destination");v=y.replace("origin","destination");g=AE=G[y];E=G[v]}else{AB=w.get("id");v=t;AA=AB.replace("destination","origin");y=v.replace("destination","origin");E=AE=G[v];g=G[y]}var AC=x&&x.type==="keyup"?x.charCode:null;var s=AE.cfg.getProperty("visible");if(AC===27||AC===13){AE.hide();if(u){K=R(null,A.one(E.body),AB,AA,p);if(!d(AB)){A.one("#"+AB).next().fire("originChosen")}}}else{if(!s||AC!==null){var r=[9,13];AC=!AC||A.Array.indexOf(r,AC)!==-1?null:AC;var q=A.one(AE.body);q.addClass("loadingContainer");AE.cfg.setProperty("visible",true);M(AE,z);h=A.routes||[];q.removeClass("loadingContainer");if(u){S=m(AC,q,AA,AD)}else{K=R(AC,q,AB,AA,p)}AE.fireEvent("changeContent");if(AC===null){J(t);z.select()}if(u){A.on("click",function(){K=R(null,A.one(E.body),AB,AA,p);if(!d(AB)){U(AB)}},A.one(g.element).one("a.container-close"))}}}M(AE,z)}function J(p){U(p,F(p))}function P(v){var q=A.airports[v]||{};var r=q.code||v;var u=q.city||r;var t=A.translateParametrized("Airport."+r);var x=A.translateParametrized("AirportShort."+r);var w=A.translateParametrized("City."+u);var p=A.translateParametrized("StateProvince."+q.stateProvince);var s=A.translateParametrized("Country."+q.country);return A.formatText(o,{code:r,airport:t||"",airportShort:x||"",cityCode:u||"",city:w||"",stateProvince:p||"",country:s||""})}function d(p){return !!F(p).length}function F(w){var t=A.one("#"+w);var s=A.Lang.trim(t.get("value"));if(s.length>0){var r=t.hasClass("origin_airport")?S:K;for(var q=0;q<r.length;q++){var v=r[q][0];var u=P(v);if(u===s){return[u,v]}var p=new RegExp(s,"i");if(u.search(p)>-1){return[u,v]}}}return[]}function X(p,q,r){q=q||"";r=r||"";p.previous().set("value",r);p.previous().set("wl:value",r);p.set("wl:value","");p.set("value",q)}function U(u,q){var p=A.one("#"+u);if(q&&q.length===2){X(p,q[0],q[1])}else{var t=p.hasClass("origin_airport");var s=A.getCurrentTranslations();var r=t?s[n]:s[H];X(p,r)}}function T(s,v,t,x,w){var q=null;var r=v.get("id");var u={visible:false,draggable:false,zIndex:520,close:true};var p=new YAHOO.widget.Panel(s,u);var y;p.setBody("");p.renderEvent.subscribe(function(){y=A.one("#"+s);y.setStyles({display:"none"});A.delegate("click",function(AB){var AA=AB.target;v=A.one("#"+r);v.set("value",AA.get("innerHTML"));var z=v.previous();z.set("value",AA.get("rel"));if(t){K=R(null,A.one(E.body),x,w,q);if(!d(x)){A.one("#"+x).next().fire("originChosen")}}p.hide();AB.preventDefault()},p.element,"span")});p.render(document.body);p.cfg.setProperty("context",[r,"tl","bl",["beforeShow","windowResize"]]);p.hideEvent.subscribe(function(){v=A.one("#"+r);J(r);if(V.persistInputState){V.persistInputState(r,v.previous().get("value"))}if(V.getTripType()==="roundtrip"){C(W.airportInputsIds,r,v.previous().get("value"))}A.fire("fsc:inputChanged");A.wlValidation.validate(null,v.previous());y.setStyles({display:"none"});if(p.handle){p.handle.detach();p.handle=null}});p.showEvent.subscribe(function(){y.setStyles({display:"block"});p.focus();A.Lang.later(10,null,function(){if(!p.handle){p.handle=A.on("click",function(AA){var z=AA.target;if(!z.inRegion(p.element,true)){p.hide()}},document)}})});V.registerContainer(p);return p}function B(r){var p=r.get("id");var t;var s;var u=r.hasClass("origin_airport");if(u){t=r.previous().get("id");s=t.replace("origin","destination")}else{s=r.previous().get("id");t=s.replace("destination","origin")}if(!G[p]){var q=p+"-cont";G[p]=T(q,r,u,s,t)}}function C(p,q,u){var t=new RegExp("^([a-z_]+)(\\d+)$","i");var s=q.match(t);if(s){var r=s[1];if(r===p.departure){r=p.arrival}else{if(r===p.arrival){r=p.departure}}if(V.setStoredInputValue){V.setStoredInputValue(r,1,u)}}}function D(q){q=q||[];for(var p in q){if(e(q[p])){return true}}return false}function e(p){return p===1||(A.Lang.isObject(p)&&((!O&&p.b2c!==0)||(O&&p.rbe!==0)))}function m(z,r,u,AA){var w=[];var AB=A.one("#"+u);var s=A.Lang.trim(AB.next().get("value"));var x=s||"";x=c(x);var q=new RegExp("^"+x,"i");var p=new RegExp(",\\s"+x,"i");var v=u.split("origin_airport_hidden")[1];for(var y in h){if(!D(h[y])){continue}if(A.airports[y]){if(!AA||AA.length===0||AA.length===1&&v>1||v>=AA.length||AA[v]===null||A.airports[y].country===AA[v]){var t=P(y);if(z!=null&&(A.Lang.trim(x)!=""&&A.Lang.trim(x)!=f)){if(y.match(q)||t.match(q)||t.match(p)){w.push(new Array(y,t))}}else{w.push(new Array(y,t))}}}else{A.log("origin airport not found:"+y,"warn")}}l(w,r,"origins");return w}function R(AJ,w,s,v,p){var AF=[];var AI=A.one("#"+s);var AH=A.one("#"+v);var z=A.Lang.trim(AI.next().get("value"));var AG=z||"";AG=c(AG);var AD=new RegExp("^"+AG,"i");var AC=new RegExp(",\\s"+AG,"i");var AE=[];var y=h[AH.get("value")];if(A.Lang.isValue(y)){AE=y}else{var AB=[];for(var r in h){AB.push(r)}for(var u=0;u<AB.length;u++){for(var t in h[AB[u]]){AE[t]=h[AB[u]][t]}}}var x=s.split("destination_airport_hidden")[1];for(var AA in AE){if(!e(AE[AA])){continue}if(A.airports[AA]){if(!p||p.length===0||x>=p.length||p[x]===null||A.airports[AA].country===p[x]){var q=P(AA)||"";if(AJ!=null&&(A.Lang.trim(AG)!=""&&A.Lang.trim(AG)!=I)){if(AA.match(AD)||q.match(AD)||q.match(AC)){AF.push([AA,q])}}else{AF.push([AA,q])}}}else{A.log("destination airport not found: "+AA,"warn")}}l(AF,w,"destinations");return AF}function Y(){A.all(".airport-picker").each(function(r){var q=r.previous();p(r,q)});function p(r,q){if(!r||!q){return }var s=q.get("value");if(!s){return }var t=P(s);r.set("value",t);r.setAttribute("wl:value",t)}}function l(w,r,y){w.sort(Q);r.addClass("airportsList");if(w.length==0){r.set("innerHTML",Z);r.translate();return }if(!r.one("table")){var z=A.Node.create('<div class="table-container"><table><tbody><tr></tr></tbody></table></div>');r.set("innerHTML","");r.append(z)}var x=r.one("table").one("tr");x.all("td").remove();var p;var s;for(var t=0;t<w.length;t++){var q=w[t][0];var AB=P(q);var AA=A.Node.create("<li></li>");var v=A.Node.create('<span class="airport-name" id="'+y+"-"+q+'" rel="'+q+'">'+AB+"</span>");AA.append(v);if(t===0||(t%a)===0){s=A.Node.create("<ul></ul>");s.append(AA);var u=document.createElement("td");p=A.one(u);p.append(s);x.append(p)}else{if((t%a)!==0){s.append(AA)}}}}function c(q){var p=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return q.replace(p,"\\$&")}function Q(q,p){if(q[0]===""){return -1}if(p[0]===""){return 1}if(q[1]<p[1]){return -1}if(p[1]<q[1]){return 1}return 0}}});YUI.add("wl-fsc-multicity",function(E){var D;var C={init:function(F){D=F}};C.commonMulticityDomEvents=function(G){var F=G.one("#addMoreFlights");if(F){F.on("click",B)}E.on("click",A,".multiFlight-delete-leg")};function B(F){F.preventDefault();D.addFlight()}function A(G){G.preventDefault();var F=E.DataType.Number.parse(this.get("id"));D.removeFlight(F)}E.widgets=E.widgets||{};E.widgets.multicity=C});YUI.add("wl-fsc-modifySearch",function(D){var B;var G;var C,I;var E;var F=false;var H={init:function(L,O,M,K){G=K.errorMsg||"";I=L;C=O;var N=D.one("#"+M);E=N?N.get("innerHTML"):""},create:function(N,K,L){var M={visible:true,draggable:false,fixedcenter:"contained",modal:true,close:true,postmethod:"form",hideaftersubmit:false,monitorresize:true};var P=D.merge(M,L);if(B){B.destroy()}var O=D.one("#"+N);if(!O){O=D.Node.create('<div id="'+N+'"></div>');O.set("innerHTML",E);if(F){D.translateNode(O)}D.one("body").appendChild(O)}B=new YAHOO.widget.Dialog(N,P);B.renderEvent.subscribe(function(){this.cfg.setProperty("zIndex",100);this.sizeMask();var Q=D.one("#modify-search");Q.removeClass("hidden");B.center();D.on("modifySearchOverlay|click",A,"#btn-modify-search");D.on("modifySearchOverlay|click",function(){B.hide()},"#btn-cancel");if(G){J(G)}if(D.Lang.isFunction(K.render)){K.render.call(this,this)}I.fireEvent("modify_search_rendered")});B.hideEvent.subscribe(function(){D.detach("modifySearchOverlay|*");D.wlValidation.errorRendering.hideAllOverlays();if(D.Lang.isFunction(K.hide)){K.hide.call(this,this)}});B.render(document.body)},updateErrorMessages:function(K){G=K;J(K)},getErrorMessages:function(){return G},setTranslationRequired:function(){F=true}};D.widgets=D.widgets||{};D.widgets.modifySearch=H;function A(){D.one(B.element).addClass("loading");B.submit()}function J(L){var K=D.one("#errors");var M={message:L};I.renderPartialInNode("_flowMessage",M,K,true);K.removeClass("hidden")}});YUI.add("wl-fsc",function(B){var A={ONE_WAY:"oneway",ROUND_TRIP:"roundtrip",MULTI_CITY:"multicity"};B.components.Fsc=function(AE){var n=this;var Y=AE.initData||{};var Ab=AE.compInstConfig||{};var C=new YAHOO.widget.OverlayManager();var o=Ab.dateFormat;var q=Ab.originCityDefaultValueKey||"";var w=Ab.destinationCityDefaultValueKey||"";var t=Y.destinationAirportCountriesFilter;var D=Y.originAirportCountriesFilter;var H=Y.restrictOriginAndDestination&&Y.nonRefundableAncillariesIncluded;var S=Y.mybWasAwardBooking;var J=Y.frequentFlyerUserLoggedIn||false;var AS=sabre.config.satConfiguration.frequentFlyer.requireLogin;var N=sabre.config.satConfiguration.frequentFlyer.allowedJourneyTypes;var AG=sabre.config.techSwitchesConfiguration.profileSystemAvailable;var AQ=sabre.config.techSwitchesConfiguration.loyaltyProgramAvailable;var d=Y.awardBooking||false;var L=(!d&&Y.redeemMiles)||false;var AY=Ab.rbeTabEnabled||false;var l=Ab.awardBookingEnabled&&AQ;var AW=Y.partialExchange;var F=!AG&&AS;var AP=S||!l||F;var AJ=Y.journey||Ab.journey.defaultValue;var y=A[AJ];var g={};var m="INF_id";var AN="redeem_miles";B.widgets.multicity.init(g);var AT=B.wlAirportFinder(n,g,{cityListFormat:Ab.cityListFormat,maxRowCount:Ab.maxRowCount,defaultOriginLabel:q,defaultDestinationLabel:w,airportInputsIds:{departure:"origin_airport",arrival:"destination_airport"}});var z;n.incomingEvents={load_overlay:function(Ag){g.setTripType(Y.journey);O(Ag.errorMessage)},change_lang:function(){b();if(AE.state==="modifySearch"){B.widgets.modifySearch.setTranslationRequired()}},"ff-logged-in":function(){J=true;AC();K();Q()},"logged-in":function(){AC();K()},"logged-out":function(){J=false;AC();K();Q()}};n.onRenderState={exchange:function(Ag){Ac(Ag)},modifySearch:function(Ah){var Ag=B.Lang.isObject(AE.validationMessages)&&B.Object.size(AE.validationMessages)?"validationError":null;B.widgets.modifySearch.init(n,g,"modify-search",{errorMsg:Ag});if(Ag||Y.alwaysShowModifySearch){O()}},searchPage:function(Ag){B.wlProfiler.add("fsc rendered");Ac(Ag);G(Ag)}};g.getTripType=function(){return y};g.setTripType=function(Ag){AJ=A[Ag]?Ag:"ROUND_TRIP";y=A[Ag];return y};g.getTripTypeKey=function(Ag){return A[Ag]};g.registerContainer=function(Ag){C.register(Ag)};g.toggleRedemptionSearchAllowed=function(){var Aj=false;if(!T(AJ)){Aj=true}else{var Ai=n.node.one("#"+m);if(Ai){var Ah=Ai.get("value");if(Ah>0){Aj=true}}}var Ag=n.node.one("#"+AN);AR(Ag,Aj);AC()};g.addFlight=function(){AX()};g.removeFlight=function(Ag){r(Ag)};function O(Ag){if(Ag){B.widgets.modifySearch.updateErrorMessages(Ag)}B.widgets.modifySearch.create("modify-search",{render:function(Ah){n.node=B.one(Ah.element);Ac(n.node)},hide:function(Ah){AH(Y.journey);C.hideAll()}})}function Ac(Ai){Ai.delegate("click",a,".trip-type-input");Ai.delegate("click",V,".fsc-tab");if(!H){Ai.delegate("click",Af,".airport-trigger")}if(H){AK()}var Ag=Ai.one(".componentContentHolder")||Ai;Ag.addClass(y);AD(Ai);var Ah=Ai.one("#ADT_id");if(Ah){f.apply(Ah);if(B.UA.ie){Ah.on("change",f)}else{Ai.delegate("change",f,"#ADT_id")}}AC();AF(AP);if(l&&!AY){W();g.toggleRedemptionSearchAllowed();Ai.delegate("click",h,"#"+AN);Q();M(Ai)}K()}function G(Ag){Ag.delegate("change",k,"#fsc-pointOfSale")}function AK(){for(var Ag in A){var Ah=n.node.one("#journey_"+Ag+"_el");if(Ah&&!Ah.get("checked")){AR(Ah,true)}}}function AD(Ag){Ae(Ag);Ag.all(".airport-picker").each(function(Ah){if(!Ah.get("disabled")){Ah.on("click",AZ);Ah.on("keyup",AL);Ah.on("key",AM,"down:13");x(Ah)}});b();Ag.all(".date_departure_inp, .date_return_inp").each(function(Ai,Ah){AV(Ai,Ah);if(!Ai.get("disabled")){Ai.on("focus",U)}});Ag.all("input, select").on("blur",AO);if(y==="multicity"){B.widgets.multicity.commonMulticityDomEvents(Ag)}}function Ae(Ag){B.wlValidation.initializeForPartial(AE.getType(),B.wlValidation.validationEngineRules,B.wlValidation.validationConfiguration,Ag)}function b(){AT.updateAirportInputTranslation();C.hideAll()}function AF(Ag){var Ah=n.node.one("#redeemMiles");if(Ah&&Ag){Ah.addClass("hidden")}}function Q(){if(J){return }var Ag=n.node.one(".redeem-miles-label");if(Ag){if(!L){Ag.removeClass("warning")}else{if(l&&!J&&AS){Ag.addClass("warning")}}}}function M(Ah){var Ai;if(l){for(Ai in A){var Ag=Ah.one("#journey_"+Ai+"_el");var Aj=!T(Ai)&&L;AR(Ag,Aj)}var Am=Ah.one("#cabin_class");var Ak=Ah.one("#fare_type");var Ap=Ah.one("#travelOptionsHotelReservation");var Al=Ah.one("#travelOptionsCarRental");AR(Am,L);AR(Ak,L);AR(Ap,L);AR(Al,L);var An=Ah.one("#travelOptionsNumberOfRooms");if(L&&An){An.set("value",1)}AR(An,L);var Ao=Ah.one("#"+m);if(L&&Ao){Ao.set("value",0)}AR(Ao,L)}}function h(Ag){L=Ag.currentTarget.get("checked");M(n.node);K();AC();Q();R(L)}function W(){L=Y.redeemMiles||false;var Ag=n.node.one("#"+AN);if(Ag){Ag.set("checked",L)}R(L)}function R(Ag){var Ai=n.node.one("#"+AN+"_val_holder");if(Ai){Ai.set("value",Ag?"true":"false")}var Ah=n.node.one("#award_booking_val_holder");if(Ah){Ah.set("value",Ag?"true":"false")}}function T(Ag){return(B.Array.indexOf(N,Ag)>-1)}function U(Ag){C.hideAll();B.wlCalendar.loadCalendar(Ag.target,g,{dateFormat:o,show:true})}function AV(Ah,Ag){B.wlCalendar.setFlightDates(Ah,Ag)}function x(Ag){if(AE.state!=="modifySearch"){B.use("wl-routes",function(Ah){n.node.all(".origin_airport").removeClass("disabled");n.node.all(".destination_airport").removeClass("disabled")})}AT.createAirportList(Ag)}function AZ(Ag){C.hideAll();AT.showAirportList(Ag,Ag.currentTarget,t,D)}function Af(Ah){Ah.preventDefault();var Ag=this.previous();C.hideAll();AT.showAirportList(null,Ag,t,D)}function AL(Ag){if(Ag.charCode===9){C.hideAll()}AT.showAirportList(Ag,Ag.currentTarget,t,D)}function AM(Ag){Ag.halt()}function K(){if(J||!(L||d)){v()}else{if(AS&&(L||d)){v();AI()}}}function v(){var Ag=n.node.one(".redeem-miles-label");if(Ag){Ag.removeClass("warning")}u("#flow-message-ffNotLoggedIn");u("#flow-message-ffLoginNeeded");u("#flow-message-ffInvalidProfileType")}function u(Ag){var Ah=B.one(Ag);if(Ah){Ah.addClass("hidden")}}function AI(){var Ah=n.node.one(".redeem-miles-label");var Ag=B.one("#flow-message-ffNotLoggedIn");var Ak=B.one("#flow-message-ffLoginNeeded");var Aj=B.one("#flow-message-ffInvalidProfileType");var Ai=(Ag!=null||Ak!=null||Aj!=null);if(Aj){Aj.removeClass("hidden")}else{if(Ak){Ak.removeClass("hidden")}else{if(Ag){Ag.removeClass("hidden")}}}if(Ah&&Ai){Ah.addClass("warning")}}function AC(){if(!J&&AS&&(L||d)){B.on("pageHtmlLoaded",e);e()}else{B.on("pageHtmlLoaded",Ad);Ad()}}function e(){if(AE.state!=="modifySearch"){n.fireEvent("block_submit")}else{var Ag=n.node.one("#btn-modify-search");if(Ag){Ag.set("disabled","disabled");Ag.addClass("disabled")}}}function Ad(){if(AE.state!=="modifySearch"){n.fireEvent("unblock_submit");n.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}else{var Ag=n.node.one("#btn-modify-search");if(Ag){Ag.removeAttribute("disabled");Ag.removeClass("disabled")}}}function AR(Ah,Ag){if(Ah){if(Ag){Ah.set("disabled",true);Ah.addClass("disabled");Ah.set("checked",false)}else{Ah.removeAttribute("disabled");Ah.removeClass("disabled")}}}function s(Ag){return parseInt(Ag.get("value"),10)}function AA(Ai,Ag){var Ah="";Ag.purge(true);z=z||Ag.all("option");z.each(function(Aj){var Ak=parseInt(Aj.get("value"),10);if(Ak<=Ai){Ah+='<option value="'+Ak+'">'+Ak+"</option>"}});Ag.setContent(Ah)}function I(Ag,Aj,Ah){var Ak=parseInt(Ag,10);var Ai=Ak>Aj?Aj:Ak;Ah.set("selectedIndex",Ai)}function f(){var Ai=s(this);var Ag=n.node.one("#"+m);if(Ag){var Ah=Ag.get("value");AA(Ai,Ag);I(Ah,Ai,Ag);Aa()}}function AO(Ag){if(!this.hasClass("airport-picker")&&!this.hasClass("date-picker")){B.wlValidation.validate(Ag)}}function Aa(){B.on("change",g.toggleRedemptionSearchAllowed,"#"+m)}function AU(Ah,Ag){Ah.purge(true);Ah.set("innerHTML",B.decodeHtmlEntities(Ag));AD(Ah)}function AB(Ai,Ag){var Ah=n.node.one("#"+Ai+Ag);return Ah?Ah.get("value"):null}function c(Ah){if(!Ah){return null}var Ag=B.DataType.Date.parse(Ah,sabre.config.dateInputFormat);return B.DataType.Date.format(Ag,{format:sabre.config.dateTimeJSONFormat})}function V(Ag){d=this.hasClass("fsc-tab-rbe");K();AC();p({isRbe:d});Ag.preventDefault()}function a(Ah){var Ag=Ah.target;var Ai=Ag.get("value");AH(Ai)}function AH(Ag){n.node.removeClass(y);var Ah=X();g.setTripType(Ag);n.node.addClass(y);Z({actionCode:"changeTripType",itineraryParts:Ah})}function E(Ag){return{origin:AB("origin_airport_hidden",Ag),destination:AB("destination_airport_hidden",Ag),date:c(AB("date_hidden",Ag)),timeRange:AB("time_range",Ag)}}function P(Ag){return Ag.origin||Ag.destination||Ag.date||Ag.timeRange}function X(){var Ai=[];for(var Ah=0;;Ah++){var Ag=E(Ah);if(P(Ag)){Ai.push(Ag)}else{break}}if("roundtrip"==y&&Ai.length>1){Ai[1].origin=Ai[0].destination;Ai[1].destination=Ai[0].origin}return Ai}function r(Ag){Z({actionCode:"deleteFlight",deletedFlightIndex:Ag})}function AX(){Z({actionCode:"addFlight"})}function p(Ai){var Ah=n.node;if(!Ah){return }n.addLoadingOverlay();var Ag={data:{rbeTabSelected:Ai.isRbe,journey:AJ,requestPartials:[AE.state]},on:{success:function(Ak,Aj){if(Aj){Ah.purge(true);Ah.set("innerHTML",B.decodeHtmlEntities(Aj.partials[AE.state]));AD(Ah);K();AT.setRbeBooking(Ai.isRbe);if(AE.state==="modifySearch"){n.onRenderState.modifySearch(Ah);O()}}},complete:function(){n.removeLoadingOverlay()}}};n.fireEvent("to-ajax",{cfg:Ag,actionCode:"loadFscPartial"})}function Z(Al){var Ak=Al.itineraryParts||X();var Ah="__"+(AE.state==="modifySearch"?"modifySearch":"searchPage")+"_"+AJ.toLowerCase();var Aj=n.node.one("#airports-dates-container");if(!Aj){return }var Ai=n.node.all(".trip-type-input");Aj.addClass("loading");Ai.each(function(Am){Am.set("disabled","disabled")});var Ag={data:{actionCode:Al.actionCode,deletedFlightIndex:Al.deletedFlightIndex,requestPartials:[Ah],journey:AJ,fscItineraryParts:Ak},on:{success:function(An,Am){if(Am){AU(Aj,Am.partials[Ah]);g.toggleRedemptionSearchAllowed()}},complete:function(){Aj.removeClass("loading");Ai.each(function(Am){if(!Am.hasClass("disabled")){Am.removeAttribute("disabled")}})}}};n.fireEvent("to-ajax",{cfg:Ag,actionCode:"loadFscPartial"})}function k(Ah){var Aj=n.node.one("#fsc-pointOfSale");var Ak=Aj.ancestor(".component-section");if(Ak){Ak.addClass("loading")}var Ai=Aj.get("value");var Ag={data:{pointOfSale:Ai},on:{end:function(){if(Ak){Ak.removeClass("loading")}},success:function(Am,Al){n.fireEvent("update-data",{data:{pointOfSale:Ai}})}}};n.fireEvent("to-ajax",{cfg:Ag,actionCode:"changePointOfSale"})}}});YUI.add("wl-farerules",function(A){A.components.Farerules=function(C){var K=this;var L;var M={};var P=false;var D=C.compInstConfig;K.incomingEvents={showFareRules:B};K.onRenderState={initialized:function(Q){H(Q);if(D.tabHash){A.on("pageHtmlLoaded",function(){K.fireEvent("add_tabs_callback",{data:{tabHash:D.tabHash,additionalCallback:function(R){if(R.newValue){Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})})}},ajax:function(R){if(D.enabled){function Q(){R.removeClass("loading")}R.addClass("loading");O(I,Q,true)}},overlay:function(Q){N()}};function B(R){if(C.state!="overlay"){return }var S=R.data||{};var Q=A.Lang.isFunction(S.callback)&&S.callback;O(G,Q,S.allFlightsSelected)}function O(U,R,T){var S=T?"__fareRulesContent":"__unavailableFareRules";var Q={data:{requestPartials:[S],flightsSelected:T},on:{end:R||function(){},success:function(X,W){if(W){var V=W.partials[S];U(V);H(K.node)}},failure:U}};K.fireEvent("to-ajax",{context:C,type:"farerules",cfg:Q,actionCode:"getFareRules"})}function E(Q){M[C.state]=Q.one(".fare-rules-container")}function H(R){var Q=R.one("ul");if(Q){Q.delegate("click",J,"li")}E(R);F()}function J(S){S.preventDefault();var T=S.currentTarget;if(T.hasClass("selected")){return }T.addClass("selected");T.siblings().removeClass("selected");var Q=T.get("parentNode").get("children").indexOf(T);var R=K.node.one(".yui-content").get("children");R.addClass("yui-hidden");R.item(Q).removeClass("yui-hidden")}function N(){L=new YAHOO.widget.Dialog("fare-rules-overlay",{visible:false,draggable:false,fixedcenter:true,zIndex:520,width:"700px",close:true});L.hideEvent.subscribe(function(){P=false;if(!M[C.state]){E(currentNode)}if(!M[C.state]){return }M[C.state].purge(true);M[C.state].set("innerHTML","")})}function I(Q){K.node.one(".fare-rules-list").set("innerHTML",A.decodeHtmlEntities(Q))}function G(Q){if(C.state=="overlay"){if(P){return }P=true;A.one("#fare-rules-overlay").removeClass("hidden");L.render(document.body);L.show();var R=A.one(L.element);if(R){K.node=R;I(Q)}L.center()}}function F(){var Q=C.compInstConfig;K.fireEvent("cssFareRules",{forceInitialize:true,data:{status:Q.status}})}}});YUI.add("wl-googleanalytics",function(A){A.components.Googleanalytics=function(B){this.create=false;this.render=false}});