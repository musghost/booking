var SSRUPSELL={ssrSelected:false,fancyBoxObj:null,ssrUpsellSaveSelection:false,outBoundIndex:0,inBoundIndex:0,outBoundBrand:"",inBoundBrand:"",formatAmtEnabled:false,flightChanged:true,showLightbox:function(b){var a=sswJQuery(document).height();sswJQuery("#disableControls").removeClass("disablePageElements");sswJQuery("#disableControls").addClass("grayoutPage");sswJQuery("#disableControls").height(a);sswJQuery("#disableControls").show();sswJQuery("#preloading").show();this.getSSRs(b);this.ssrSelected=true;this.flightChanged=false},resetSSRUpsell:function(b,c,a){this.ssrSelected=false;this.flightChanged=true;this.ssrUpsellSaveSelection=true;if(a=="out"){this.outBoundBrand=c;this.outBoundIndex=b}else{if(a=="in"){this.inBoundBrand=c;this.inBoundIndex=b}}},setFancyBoxObject:function(){SSRUPSELL.fancyBoxObj=sswJQuery("#flightSelectLBshow").fancybox({hideOnOverlayClick:false,scrolling:"no",centerOnScroll:true,onComplete:function(){SSRUPSELL.handleLightBoxPos()},onCleanup:function(){SSRUPSELL.handleLightBoxClosing()}});SSRUPSELL.fancyBoxObj.trigger("click")},getSSRs:function(a){a+="&outBoundIndex="+this.outBoundIndex;a+="&inBoundIndex="+this.inBoundIndex;a+="&outBoundBrand="+this.outBoundBrand;a+="&inBoundBrand="+this.inBoundBrand;a+="&flightChanged="+this.flightChanged;sswJQuery.ajax({type:"POST",url:a,cache:false,data:"ajxcall=true",success:this.onSuccessSSRCall,error:this.onFailureSSRCall})},updateTotals:function(a,f,d,b){var j=sswJQuery("#checboxId");var h=0;var c=parseFloat(sswJQuery("#ssrUpsellTotalPriceAmt").text().replace(/,/g,""));var g=parseFloat(sswJQuery("#ssrUpsellSSRFareTaxesAmt").text().replace(/,/g,""));if(c==0){c=parseFloat(sswJQuery("#totalPriceSC").text().replace(/,/g,""));sswJQuery("#ssrUpsellAirFareTaxesAmt").text(this.Delimiter(c.toFixed(b)))}var e=parseFloat(f)*parseInt(d);if(a){h=c+e;g=g+e}else{h=c-e;g=g-e}g=this.Delimiter(g.toFixed(b));sswJQuery("#ssrUpsellSSRFareTaxesAmt").text(g);h=this.Delimiter(h.toFixed(b));sswJQuery("#ssrUpsellTotalPriceAmt").text(h)},continueClicked:function(a){SSRUPSELL.ssrUpsellSaveSelection=true;var c="";var b=sswJQuery(".ssrUpsellInputBox");for(i=0;i<b.length;i++){if(b[i].checked){c=c!=""?c+=",":c;c+=b[i].name}}a+="&selectedSSRs="+c;sswJQuery.ajax({type:"POST",url:a,cache:false,data:"ajxcall=true",success:SSRUPSELL.onSuccessSSRSave,error:SSRUPSELL.onFailureSSRSave})},updateCartTotal:function(e,a,c){var f="totalPriceSC";var b=sswJQuery("#"+f);var d=sswJQuery(b).text().trim();if(d.indexOf(",")!=-1){d=d.replace(/,/g,"")}e+="";if(e.indexOf(",")!=-1){e=e.replace(/,/g,"")}if(a=="add"){d=this.addValue(d,e)}else{d=this.subtractValue(d,e)}d=this.Delimiter(d.toFixed(c));sswJQuery(b).text(d)},addValue:function(a,b){return(+a+ +b)},subtractValue:function(b,a){return(+b-+a)},Delimiter:function(f){var e=this.formatAmtEnabled;if(e){var b=f.split(".");var d=b[0];var c=b.length>1?"."+b[1]:"";var a=/(\d+)(\d{3})/;while(a.test(d)){d=d.replace(a,"$1,$2")}return d+c}else{return f}},onSuccessSSRCall:function(a){if(a.indexOf("No_SSR_AVAILABLE")!=-1){submit();return}SSRUPSELL.setFancyBoxObject();sswJQuery("#disableControls").hide();sswJQuery("#preloading").hide();sswJQuery("#ssrDiv").html(a)},onFailureSSRCall:function(a){sswJQuery("#disableControls").hide();sswJQuery("#preloading").hide();sswJQuery("#ssrDiv").html(a);submit()},onSuccessSSRSave:function(a){sswJQuery("#tax1").after(a);SSRUPSELL.handleLightBoxClosing();sswJQuery("#disableControls").show();sswJQuery("#preloading").show();submit()},onFailureSSRSave:function(a){SSRUPSELL.handleLightBoxClosing();sswJQuery("#disableControls").show();sswJQuery("#preloading").show();submit()},handleLightBoxClosing:function(){sswJQuery.fancybox.close()},handleLightBoxPos:function(){window.scroll(0,0);sswJQuery("#fancybox-wrap").css({top:"30px",bottom:"auto"})}};