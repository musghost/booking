var PFS={passenger:0,transaction:null,xml_response:null,form:null,baseUrl:null,callback:{success:function(g){try{if((g.responseXML.firstChild==null&&g.responseText!=null&&g.responseText.length!=0)||(g.responseXML.firstChild!=null&&g.responseXML.firstChild.nodeName=="xml-stylesheet")){var c=g.responseText.toString();if(c.indexOf("<message>")>=0&&c.indexOf("</message>")>=0){var a=c.substring(c.indexOf("<message>")+9,c.indexOf("</message>"))}var b=c.substring(c.indexOf("<status"),c.indexOf("<error>"));if(b.indexOf("false")>=0){var f="false"}else{var f="true"}}else{var h=g.responseXML.firstChild;if(h!=null&&h.nodeName=="xml"){h=g.responseXML.childNodes[1];var a=h.childNodes[1].childNodes[0].text;var f=h.childNodes[0].getAttribute("succeed")}else{var a=h.childNodes[3].childNodes[1].textContent;var f=h.childNodes[1].getAttribute("succeed")}}if(f=="true"){PFS.pfsSubmit(PFS.form,PFS.baseUrl)}else{YAHOO.util.Dom.get("ajax_spinner").style.display="none";YAHOO.util.Dom.get("ajax_error_msg").innerHTML='<div class="error">'+a+"</div>"}}catch(d){YAHOO.util.Dom.get("ajax_spinner").style.display="none";YAHOO.util.Dom.get("ajax_session_expire").style.display="inline"}},failure:function(a){alert("Connection lost")}},setExitSeatSelection:function(b,d){try{YAHOO.util.Dom.get("pfsExitSeatDisclaimer").style.display="block";var a=YAHOO.util.Dom.get("seatExitDisclaimerYes");YAHOO.util.Event.addListener(a,"click",function(){PFS.setSeatSelection(b,d);YAHOO.util.Dom.get("pfsExitSeatDisclaimer").style.display="none";YAHOO.util.Event.removeListener(a)});var c=YAHOO.util.Dom.get("seatExitDisclaimerNo");YAHOO.util.Event.addListener(c,"click",function(){YAHOO.util.Dom.get("pfsExitSeatDisclaimer").style.display="none";YAHOO.util.Event.removeListener(a)})}catch(f){alert(f)}},setSeatSelection:function(a,c){var e=PFS.getPassenger();var h=YAHOO.util.Dom.get("pax_id_"+e);var b=YAHOO.util.Dom.get("seatNumberForSeat_"+e);var d=YAHOO.util.Dom.get("priceForSeat_"+e);var g=YAHOO.util.Dom.get("seatImage_"+a);var i=YAHOO.util.Dom.get("removeSeat_"+e);var f=YAHOO.util.Dom.get("selectedSeatImage").innerHTML;PFS.setPassenger(PFS.getPassenger()+1);if(!h){return}if(d.innerHTML!==""){lastSeatImageElement=YAHOO.util.Dom.get("seatImage_"+b.innerHTML);YAHOO.util.Dom.removeClass(lastSeatImageElement,"selected");lastSeatImageElement.setAttribute("onclick",lastSeatImageElement.getAttribute("onchange"));lastSeatImageElement.setAttribute("src",lastSeatImageElement.getAttribute("tempCont"));lastSeatImageElement.setAttribute("onchange","")}i.style.display="inline";h.value=a;b.innerHTML=a;d.innerHTML=c;YAHOO.util.Dom.addClass(g,"selected");g.setAttribute("onchange",g.getAttribute("onclick"));g.setAttribute("onclick","");g.setAttribute("tempCont",g.getAttribute("src"));g.setAttribute("src",f)},submitSeats:function(a,e,d,b,c){PFS.form=d;PFS.baseUrl=c;if(b==true){var e=e.join("&");YAHOO.util.Dom.get("ajax_spinner").style.display="inline";PFS.transaction=YAHOO.util.Connect.asyncRequest("POST",a,PFS.callback,e)}else{PFS.pfsSubmit(d,c)}},pfsSubmit:function(d,c){var b=c;for(var a=0;a<d.length;a++){if(d.elements[a].type!="button"){b=b+d.elements[a].name+"="+d.elements[a].value+"&"}}window.location.replace(b)},setPassenger:function(c){if(PFS.getPassenger()!=c){if(!(YAHOO.util.Dom.get("seatRow_"+c))){c=1}if(PFS.getPassenger()!=0){var a=YAHOO.util.Dom.get("seatRow_"+PFS.getPassenger());YAHOO.util.Dom.removeClass(a,"active");YAHOO.util.Dom.addClass(a,"unactive")}var b=YAHOO.util.Dom.get("seatRow_"+c);YAHOO.util.Dom.addClass(b,"active");YAHOO.util.Dom.removeClass(b,"unactive")}PFS.passenger=c},removeSeat:function(e){var d=YAHOO.util.Dom.get("pax_id_"+e);var c=YAHOO.util.Dom.get("seatNumberForSeat_"+e);var f=YAHOO.util.Dom.get("priceForSeat_"+e);var b=YAHOO.util.Dom.get("seatImage_"+c.innerHTML);var a=YAHOO.util.Dom.get("removeSeat_"+e);b.setAttribute("onclick",b.getAttribute("onchange"));b.setAttribute("onchange","");b.setAttribute("src",b.getAttribute("tempCont"));d.value="";c.innerHTML="";f.innerHTML="";a.style.display="none";YAHOO.util.Dom.removeClass(b,"selected")},getPassenger:function(){return PFS.passenger}};