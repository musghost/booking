window.onload=function(){(function(){var d=$(".seat-map-keys").first(),g=$(".seat-map-invocation").first(),b=$(".seat-map-footer-links").first(),f=$("#flight-list-infobox");
g.after(d);f.append(b);(function(){var h=false;$("#booking-process").addClass("active");$("#booking-process li").each(function(i){$(this).addClass(((i+1)%2===0)?"two":"one");
});$("#booking-process li").each(function(i){if(h){if($(this).hasClass("stepPast")){$(this).removeClass("stepPast").addClass("stepFuture");}if($(this).hasClass("stepPast_prevPast")){$(this).removeClass("stepPast_prevPast").addClass("stepFuture_prevFuture");
}if($(this).hasClass("prevPast")){$(this).removeClass("prevPast").addClass("prevFuture");}}if($(this).hasClass("stepCurrent")){h=true;}});})();$(".seat-map-flights-list").each(function(){$(this).html("<span class='seat-map-text-info'>Additional information</span>");
});$(".seat-map-flights-pax-name").after("<div class='seat-labels'><span class='num-seat-label'>Desired seat</span><span class='price-seat-label'>Seat fee</span></div>");
$(".seat-map-header-links").hide();$(".seat-map-planemap tr").each(function(h){$(this).find("td").each(function(i){var j=$(this).find("strong").first();
if(j.children().length>0){if(i===0){j.html("<img src='https://s3.amazonaws.com/aeromexico/ancillaries/new_v_exitleft.png'>");}else{j.html("<img src='https://s3.amazonaws.com/aeromexico/ancillaries/new_v_exitright.png'>");
}}});});var c=function(){var h=function(m){var l=["January","February","March","April","May","June","July","August","September","October","November","December"],o=m.split("/"),n={};
n.month=l[parseInt(o[1])-1];n.day=parseInt(o[0]);return n;},k=[],j=function(p){var o=$("<div class='flight-info-sidebar'>"),m='<div class="head"><h2><i></i>Flight Information</h2></div>',l=$(".component-section.cart-pax").find("span"),n="",q=$("<h3 class='passenger'>");
l.each(function(r){if(r===0||r===1){n+=$(this).html();}});q.html(n);o.append(m);$.each(p,function(t,s){var r=$("<div class='body'>"),w=$("<h3>"),u=parseInt(s.stopover),v=$("<h3 class='scale'>");
if(t===0){w.attr("id","title-search");}w.html(s.actionTo);r.append(w);$.each(s.destinations,function(y,x){var A=$("<ul class='airp'>"),z=$("<h3 class='date'>");
z.html(x.date);A.append("<li><span>"+x.from+"</span><span>"+x.hourDep+"</span></li>");A.append("<li class='middle'><i></i></li>");A.append("<li><span>"+x.to+"</span><span>"+x.hourArr+"</span></li>");
r.append(z);r.append(A);});if(u===0||u<0){v.html("Nonstop");}else{if(u==1){v.html("1 layover");}else{v.html(u+" layovers");}}r.append(v);o.append(r);});
o.append(q);o.append(i());$("#cart-component").prepend(o);},i=function(){var n=$("<div class='total-price'>"),l=$("<ul>"),m="";$(".cartPrices").last().find(".price-type").each(function(){var o=$("<li>"),p=$(this).find("span").eq(0).html(),q=$(this).find(".price-value");
if(q.length>0){q=$(this).find(".price-value").first().html();}else{q="";}o.append("<span>"+p+"</span>","<span>"+q+"</span>");l.append(o);});$("#cart-total-price .prices-alternative > span").each(function(o){if(o==1){m+="<span class='amount'>"+$(this).html()+"</span>";
}if(o==0){m+="<span class='currency'>"+$(this).html()+"</span>";}});l.append("<li><span>"+$("#total-price-label").html()+"</span><span>"+m+"</span></li>");
n.append(l);return n;};$(".cart-departing, .cart-arriving").each(function(){var m=[],p=$(this).find("li.city"),q=$(this).find("dd"),l=0,o=$(this).find("h4").first().html(),n=p.length-2;
p.each(function(s){var w=$(this).clone(),v=p.eq(s-1).clone();w.children().remove();v.children().remove();w=$.trim(w.html()).substr(1,3);v=$.trim(v.html()).substr(1,3);
if(s>0){var u=h(q.eq(l).html().split(" ")[2]),t=q.eq(l++).html().substr(0,7),r=q.eq(l++).html().substr(0,7);destination={from:v,to:w,date:u.day+", "+u.month,hourDep:t,hourArr:r};
m.push(destination);}});departing={stopover:n,destinations:m,actionTo:o};k.push(departing);});j(k);$("#cart-component .flight-info-sidebar").append($("#fare-rules-anchor"));
$("#modify-search-trigger").addClass("modify");},a=function(){if($(".flight-info-sidebar").length<1){$("#cart-component .component-top").append($("#modify-search-trigger"));
c();$("#title-search").append($("#modify-search-trigger"));}e=setTimeout(function(){a();},100);};var e=setTimeout(function(){a();},100);})();};