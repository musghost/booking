window.onload=function(){(function(){var d=$(".seat-map-keys").first(),g=$(".seat-map-invocation").first(),b=$(".seat-map-footer-links").first(),f=$("#flight-list-infobox");
g.after(d);f.append(b);(function(){var h=false;$("#booking-process").addClass("active");$("#booking-process li").each(function(i){$(this).addClass(((i+1)%2===0)?"two":"one");
});$("#booking-process li").each(function(i){if(h){if($(this).hasClass("stepPast")){$(this).removeClass("stepPast").addClass("stepFuture");}if($(this).hasClass("stepPast_prevPast")){$(this).removeClass("stepPast_prevPast").addClass("stepFuture_prevFuture");
}if($(this).hasClass("prevPast")){$(this).removeClass("prevPast").addClass("prevFuture");}}if($(this).hasClass("stepCurrent")){h=true;}});})();$(".seat-map-flights-list").each(function(){$(this).html("<span class='seat-map-text-info'>Additional information</span>");
});$(".seat-map-flights-pax-name").after("<div class='seat-labels'><span class='num-seat-label'>Desired seat</span><span class='price-seat-label'>Seat fee</span></div>");
$(".seat-map-header-links").hide();$(".seat-map-planemap tr").each(function(h){$(this).find("td").each(function(i){var j=$(this).find("strong").first();
if(j.children().length>0){if(i===0){j.html("<img src='https://s3.amazonaws.com/aeromexico/ancillaries/new_v_exitleft.png'>");}else{j.html("<img src='https://s3.amazonaws.com/aeromexico/ancillaries/new_v_exitright.png'>");
}}});});var c=function(){var i=function(n){var m=["January","February","March","April","May","June","July","August","September","October","November","December"],p=n.split("/"),o={};
o.month=m[parseInt(p[1])-1];o.day=parseInt(p[0]);return o;},l=[],h=function(){var r=window.innerHeight,n=r-$("#footer").height(),m=$("#cart-component").height(),q=$("body").scrollTop(),o=$("#ROOT").height();
if(n<m){var p=window.innerHeight-$("#cnt_4").height();if(q>=(o-r-150)){p-=90;$("#cnt_4").css({position:"fixed",top:p+"px"});}else{$("#cnt_4").css({position:"fixed",top:p+"px"});
}}},k=function(q){var p=$("<div class='flight-info-sidebar'>"),n='<div class="head"><h2><i></i>Flight Information</h2></div>',m=$(".component-section.cart-pax").find("span"),o="",r=$("<h3 class='passenger'>");
m.each(function(s){if(s===0||s===1){o+=$(this).html();}});r.html(o);p.append(n);$.each(q,function(u,t){var s=$("<div class='body'>"),x=$("<h3>"),v=parseInt(t.stopover),w=$("<h3 class='scale'>");
if(u===0){x.attr("id","title-search");}x.html(t.actionTo);s.append(x);$.each(t.destinations,function(z,y){var B=$("<ul class='airp'>"),A=$("<h3 class='date'>");
A.html(y.date);B.append("<li><span>"+y.from+"</span><span>"+y.hourDep+"</span></li>");B.append("<li class='middle'><i></i></li>");B.append("<li><span>"+y.to+"</span><span>"+y.hourArr+"</span></li>");
s.append(A);s.append(B);});if(v===0||v<0){w.html("Nonstop");}else{if(v==1){w.html("1 layover");}else{w.html(v+" layovers");}}s.append(w);p.append(s);});
p.append(r);p.append(j());$("#cart-component").prepend(p);},j=function(){var o=$("<div class='total-price'>"),m=$("<ul>"),n="";$(".cartPrices").last().find(".price-type").each(function(){var p=$("<li>"),r=$(this).find("span").eq(0).html(),s=$(this).find(".price-value"),q=$(this).find(".toggler a").first().html(),u=$("<a href='#' class='view-details'>"),t=$(this).find(".price-element-details").first().clone(),w=$("<span>"),v=$("<span>");
if(s.length>0){s=$(this).find(".price-value").first().html();}else{s="";}u.append(q,"<span class='more-less'>&nbsp;+</span>");w.append(r,u);v.html(s);p.append(w,v,t);
m.append(p);u.click(function(x){x.preventDefault();var y=$(this).parent().parent().find("ol").first(),A=$(this),z=$(this).find(".more-less");if(y.hasClass("hidden-low-prior")){y.removeClass("hidden-low-prior");
z.html("&nbsp;-");h();}else{y.addClass("hidden-low-prior");z.html("&nbsp;+");}});});$("#cart-total-price .prices-alternative > span").each(function(p){if(p==1){n+="<span class='amount'>"+$(this).html()+"</span>";
}if(p==0){n+="<span class='currency'>"+$(this).html()+"</span>";}});m.append("<li><span>"+$("#total-price-label").html()+"</span><span>"+n+"</span></li>");
o.append(m);return o;};$(".cart-departing, .cart-arriving").each(function(){var n=[],q=$(this).find("li.city"),r=$(this).find("dd"),m=0,p=$(this).find("h4").first().html(),o=q.length-2;
q.each(function(t){var x=$(this).clone(),w=q.eq(t-1).clone();x.children().remove();w.children().remove();x=$.trim(x.html()).substr(1,3);w=$.trim(w.html()).substr(1,3);
if(t>0){var v=i(r.eq(m).html().split(" ")[2]),u=r.eq(m++).html().substr(0,7),s=r.eq(m++).html().substr(0,7);destination={from:w,to:x,date:v.day+", "+v.month,hourDep:u,hourArr:s};
n.push(destination);}});departing={stopover:o,destinations:n,actionTo:p};l.push(departing);});k(l);$("#cart-component .flight-info-sidebar").append($("#fare-rules-anchor"));
$("#modify-search-trigger").addClass("modify");},a=function(){if($(".flight-info-sidebar").length<1){$(".seat-map-planemap").first().find(".seat-map-legend").each(function(){var h=$(this).attr("id");
if(typeof h!=="undefined"&&h!==false){var k=h.split("-")[2],m=$("<div class='seatmap-advice'>"),j=$("<div class='seat-map-advice-content'>"),i=$(".num-seat-label").first().html(),l="";
if($(this).hasClass("seat-map-seat-selectable")||$(this).hasClass("seat-map-seat-selectable-exit")){l="Aviable";}else{l="Unaviable";}j.html("<p>"+i+" "+k+"<br>"+l+"</p>");
m.append(j);$(this).on("mouseover.seat",function(){$(this).append(m);});$(this).on("mouseout.seat",function(){$(this).find(".seatmap-advice").remove();
});}});$("#cart-component .component-top").append($("#modify-search-trigger"));c();$("#title-search").append($("#modify-search-trigger"));}e=setTimeout(function(){a();
},100);};var e=setTimeout(function(){a();},100);})();};