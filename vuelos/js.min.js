window.onload=function(){$("#booking-process").addClass("active");$("#booking-process li").each(function(g){$(this).addClass(((g+1)%2===0)?"two":"one");
});$(".flight-info").each(function(g){if(g===0){$(this).prepend("<span class='step'>A</span>");}else{$(this).prepend("<span class='step'>B</span>");}});
$(".flight-info h2").eq(0).html("Opciones del vuelo de salida");$(".flight-info h2").eq(1).html("Opciones del vuelo de regreso");var e=[];$(".flight-info dl").each(function(){var j=$(this).find("dd").clone();
j.children().remove();var i=$.trim(j.eq(0).html()),g=$.trim(j.eq(1).html()),h={};h.nodea=i.substr(1,3);h.nodeb=g.substr(1,3);e.push(h);});var c=function(){var g=function(l){var k=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],n=l.split("/"),m={};
m.month=k[parseInt(n[1])-1];m.day=parseInt(n[0]);return m;},j=[],i=function(m){var l=$("<div class='flight-info-sidebar'>"),k='<div class="head"><h2><i></i>Informaci√≥n de vuelo</h2></div>';
l.append(k);$.each(m,function(p,o){var n=$("<div class='body'>"),s=$("<h3>"),q=parseInt(o.stopover),r=$("<h3 class='scale'>");if(p===0){s.attr("id","title-search");
}s.html("Voy");n.append(s);$.each(o.destinations,function(u,t){var w=$("<ul class='airp'>"),v=$("<h3 class='date'>");v.html(t.date);w.append("<li><span>"+t.from+"</span><span>"+t.hourDep+"</span></li>");
w.append("<li class='middle'><i></i></li>");w.append("<li><span>"+t.to+"</span><span>"+t.hourArr+"</span></li>");n.append(v);n.append(w);});if(q===0||q<0){r.html("Sin escalas");
}else{if(q==1){r.html("1 escala");}else{r.html(q+" escalas");}}n.append(r);l.append(n);});l.append(h());$("#cart-component").prepend(l);},h=function(){var m=$("<div class='total-price'>"),k=$("<ul>"),l="";
$(".cartPrices").last().find(".price-type").each(function(){var n=$("<li>"),o=$(this).find("span").eq(0).html(),p=$(this).find(".price-value");if(p.length>0){p=$(this).find(".price-value").first().html();
}else{p="";}n.append("<span>"+o+"</span>","<span>"+p+"</span>");k.append(n);});$("#cart-total-price .prices-alternative > span").each(function(n){if(n==1){l+="<span class='amount'>"+$(this).html()+"</span>";
}if(n==0){l+="<span class='currency'>"+$(this).html()+"</span>";}});k.append("<li><span>"+$("#total-price-label").html()+"</span><span>"+l+"</span></li>");
m.append(k);return m;};$(".cart-departing, .cart-arriving").each(function(){var l=[],n=$(this).find("li.city"),o=$(this).find("dd"),k=0,m=n.length-2;n.each(function(q){var u=$(this).clone(),t=n.eq(q-1).clone();
u.children().remove();t.children().remove();u=$.trim(u.html()).substr(1,3);t=$.trim(t.html()).substr(1,3);if(q>0){var s=g(o.eq(k).html().split(" ")[2]),r=o.eq(k++).html().substr(0,7),p=o.eq(k++).html().substr(0,7);
destination={from:t,to:u,date:s.day+", "+s.month,hourDep:r,hourArr:p};l.push(destination);}});departing={stopover:m,destinations:l};j.push(departing);});
i(j);$("#modify-search-trigger").addClass("modify");},d=function(j){var i=[],g=[],h=0;i[0]=b(j[0])*-1,i[1]=b(j[1])*-1,i[2]=b(j[2])*-1,h=Math.min(i[0],i[1],i[2]),$.each(i,function(k,l){if(l!==0){g.push(l);
}});$.each(j,function(k,l){var m=b(l)*-1;l.hide();if(m===h){l.show();}});},b=function(h){var g=h.find(".prices-amount"),g=g.clone();if(g.length<1){return 0;
}g.find("span").remove();return parseInt(g.replace(/\,/g,""));};var a=function(){var h=$("#booking-process li").last();if($("#dtcontainer-outbounds ul.airp").length<1){$("#dtcontainer-outbounds table tr").each(function(k){$(this).find(".prices-amount").each(function(){$(this).prepend("<span>$</span>");
});if(k===0){var m=$(this).find("th");m.eq(1).hide();m.eq(2).hide();m.eq(3).hide();m.eq(4).hide();m.eq(6).hide();m.eq(7).hide();m.eq(0).width("190px");
}else{var o=$(this).find("td");o.eq(4).hide();o.eq(1).hide();o.eq(2).hide();o.eq(3).hide();d(o.eq(5),o.eq(6),o.eq(7));var j=o.eq(2).find("span").html(),i=o.eq(3).find("span").html(),p=$.trim(o.eq(4).html());
console.log("hour1: "+j+", typeof:"+(typeof j));console.log("hour2: "+i+", typeof:"+(typeof i));var n=$("<ul class='airp'>"),l=$('<h3 class="scale">');
n.html("<li><span>"+e[0]["nodea"]+"</span><span>"+j+'</span></li><li class="middle"><i></i></li><li><span>'+e[0]["nodeb"]+"</span><span>"+i+"</span></li>");
l.html("Sin escalas");if($(this).attr("id")==="flight-advisory-outbound-row"){$(this).remove();return;}o.eq(0).prepend(n,l);$(this).find("a").addClass("info-plus").html("<i></i><span>M&aacute;s informaci&oacute;n de vuelo</span>");
}});$("#cart-component .component-top").append($("#fare-rules-anchor"),$("#modify-search-trigger"));$(".flight-info-sidebar").remove();c();$(".flight-info-sidebar").first().append($("#fare-rules-anchor"));
$("#title-search").append($("#modify-search-trigger"));}if($("#dtcontainer-inbounds ul.airp").length<1){$("#dtcontainer-inbounds table tr").each(function(k){$(this).find(".prices-amount").each(function(){$(this).prepend("<span>$</span>");
});if(k===0){var m=$(this).find("th");m.eq(1).hide();m.eq(2).hide();m.eq(3).hide();m.eq(4).hide();m.eq(0).width("190px");}else{var o=$(this).find("td");
o.eq(4).hide();o.eq(1).hide();o.eq(2).hide();o.eq(3).hide();var j=o.eq(2).find("span").html(),i=o.eq(3).find("span").html(),p=$.trim(o.eq(4).html());console.log("hour1: "+j+", typeof:"+(typeof j));
console.log("hour2: "+i+", typeof:"+(typeof i));var n=$("<ul class='airp'>"),l=$('<h3 class="scale">');n.html("<li><span>"+e[0]["nodeb"]+"</span><span>"+j+'</span></li><li class="middle"><i></i></li><li><span>'+e[0]["nodea"]+"</span><span>"+i+"</span></li>");
l.html("Sin escalas");if($(this).attr("id")==="flight-advisory-inbound-row"){$(this).remove();return;}o.eq(0).prepend(n,l);$(this).find("a").addClass("info-plus").html("<i></i><span>M&aacute;s informaci&oacute;n de vuelo</span>");
}});$("#cart-component .component-top").append($("#fare-rules-anchor"),$("#modify-search-trigger"));$(".flight-info-sidebar").remove();c();$(".flight-info-sidebar").first().append($("#fare-rules-anchor"));
$("#title-search").append($("#modify-search-trigger"));}if($("#dtcontainer-both ul.airp").length<1){$("#dtcontainer-both table tr").each(function(k){$(this).find(".prices-amount").each(function(){$(this).prepend("<span>$</span>");
});if(k===0){var m=$(this).find("th");m.eq(1).hide();m.eq(2).hide();m.eq(3).hide();m.eq(4).hide();m.eq(0).width("190px");}else{var o=$(this).find("td");
o.eq(4).hide();o.eq(1).hide();o.eq(2).hide();o.eq(3).hide();var j=o.eq(2).find("span").html(),i=o.eq(3).find("span").html(),p=$.trim(o.eq(4).html());console.log("hour1: "+j+", typeof:"+(typeof j));
console.log("hour2: "+i+", typeof:"+(typeof i));var n=$("<ul class='airp'>"),l=$('<h3 class="scale">');n.html("<li><span>"+e[0]["nodea"]+"</span><span>"+j+'</span></li><li class="middle"><i></i></li><li><span>'+e[0]["nodeb"]+"</span><span>"+i+"</span></li>");
l.html("Sin escalas");if($(this).attr("id")==="flight-advisory-both-row"){$(this).remove();return;}o.eq(0).prepend(n,l);$(this).find("a").addClass("info-plus").html("<i></i><span>M&aacute;s informaci&oacute;n de vuelo</span>");
}});}if(!h.hasClass("one")&&!h.hasClass("two")){var g=$("#booking-process li");g.removeClass("one two");g.each(function(i){$(this).addClass(((i+1)%2===0)?"two":"one");
});}f=setTimeout(function(){a();},300);},f=setTimeout(function(){a();},300);(function(){$(".seats-remaining").each(function(){var g=$(this).html().split(" ")[0];
$(this).html("!S&oacute;lo quedan "+g+"!");});$("#customhtmlDisclosure").prepend("<i></i>");})();(function(){$(".ancillary-component").find(".ancillary-item").each(function(g){var h=$(this).attr("id");
$(this).find(".ancillary-image").after("<div class='ancillary-icon ancillary-icon-"+h+"'><i></i></div>");});})();};