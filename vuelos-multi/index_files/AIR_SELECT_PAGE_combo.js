YUI.add("yui2-animation",function(A){},"0.1");YUI.add("yui2-calendar",function(A){},"0.1");YUI.add("wl-scc",function(A){A.components.Scc=function(C){var D=this;var F=C.compInstConfig;D.incomingEvents={hide:function(H){var G=A.Lang.isArray(H.componentsToHide)?H.componentsToHide:[];if(A.Array.indexOf(D.getId(),G)){C.state="empty";D.renderHtml(C,D.node)}},show:function(){}};D.onCreate=function(G,H){if(G.state==="text"){var I=F.textKey;if(I){D.renderHtml({textKey:I})}}};D.onRenderState={script:function(H){var G=window[F.functionName];A.log("Function "+F.functionName+" from file "+F.scriptPath+" is about to be executed.");if(typeof G==="function"){try{G(A.Node.getDOMNode(H))}catch(I){A.log("Error executing function "+F.functionName+" from file "+F.scriptPath+" Stack trace: "+I.stack,"error")}}else{A.log("Cannot find function "+F.functionName+" which supposed to be defined in file "+F.scriptPath,"error")}D.translateTemplate(C,H)},text:function(){var G=D.node.one(".scc-text");if(G){G.removeClass("hidden")}}};D.scriptConfiguredToBeLinkedStatically=function(){return -1===A.Array.indexOf(F.scriptsForcedToStayInHead,F.scriptPath)};if(C.state==="header"||C.state==="footer"){D.create=false;D.node=A.one("#"+C.getId());D.node.set("innerHTML",A.replaceTemplateData(null,D.node.get("innerHTML")));D.node.translate()}else{if(C.state==="script"){D.render=false;var B="wl-custom_script-"+C.getId();var E=sabre.config.global.commonResourcesPath+"js/"+F.scriptPath;sabre.config.groups["wl-noncombine"].modules[B]={fullpath:E};if(D.scriptConfiguredToBeLinkedStatically()){D.node=A.one("#"+B);if(D.node){D.onRenderState.script(D.node)}else{A.log("Cannot load custom script "+B+". There is no script node for "+E,"warn")}C.componentRendered()}else{A.use(B,function(H,G){if(G.success){D.onRenderState.script(D.node)}else{H.log("Cannot load custom script. "+G.msg,"warn")}C.componentRendered()})}}}}});YUI.add("wl-prbar",function(A){A.components.Prbar=function(B,H){var G=this;var C={REINITIALIZE:"reinitialize"};G.incomingEvents={flight_changed:F,ancillary_changed:F,state_changed:function(){I(J)}};G.onRenderState={initialized:function(K){A.delegate("click",function(L){L.preventDefault()},K,".stepFuture a, .lastStep a")}};function I(L){var M="_elements";var K={data:{requestPartials:[M]},on:{end:function(){},success:function(O,N){if(N){L(N,M)}}}};G.fireEvent("to-ajax",{cfg:K,actionCode:C.REINITIALIZE})}function J(L,M){var K=G.node.one("#booking-process");K.set("innerHTML",A.decodeHtmlEntities(L.partials[M]));F()}function E(K,L){K.setAttribute("class",L.join(" "))}function D(){var N=G.node.all("li");var M=G.node.one("li.stepCurrent");var L=N.indexOf(M);var K=N._nodes.slice(L+1);return A.all(K)}function F(){var K=D();var L=K.size()-1;K.each(function(N,M){var O=["stepFuture"];if(M===0){O.push("prevCurrent");O.push("stepFuture_prevCurrent")}else{O.push("prevFuture");O.push("stepFuture_prevFuture")}if(M===L){O.push("lastStep");O.push("stepFuture_lastStep")}E(N,O)})}}});YUI.add("wl-flomes",function(A){A.components.Flomes=function(D,B){var F=this;F.incomingEvents={"add-messages":function(L){var K=L.data.messages;var J=G(K);var O="flow-messages-component-"+L.type;var N=A.one("#"+O);var I=A.one("#flow-messages-component");if(!N){N=A.Node.create('<div id="'+O+'"></div>');I.append(N)}N.set("innerHTML",J);I.translate();N.removeClass("hidden");var M=I.getXY();window.scrollTo(M[0],M[1])},"show-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.removeClass("hidden")}}var P=A.one("#flow-messages-component");var O=P.getXY();window.scrollTo(O[0],O[1])},"remove-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.addClass("hidden")}}},"remove-all-messages":function(){A.all(".flow-message-error").each(function(I){I.remove()})},"remove-all-component-messages":function(I){var K="flow-messages-component-"+I.type;var J=A.one("#"+K);if(J){J.set("innerHTML","")}},"block-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.set("disabled","disabled").addClass("disabled")}},"unblock-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.removeAttribute("disabled");I.removeClass("disabled")}}};F.onRenderState={initialized:function(K){var J=D.initData.messages;for(var I in J){if(E[J[I].id]){E[J[I].id]()}}}};function G(K){var M="";for(var I in K){var J=K[I];var L=J.id;var N=F.getHtml("_flowMessage_"+L);if(!N){N=F.getHtml("_flowMessage")}M+=F.replaceData({level:J.level,id:J.id,code:J.code,originalMessage:J.originalMessage},N);if(null!==A.one("#flow-message-"+L)){A.one("#flow-message-"+L).remove(true)}}return M}var E={priceDiscrepancyError:function(){A.on("click",H,"#select-flights-link");A.on("click",C,"#accept-new-price-btn")},ssrInsufficientInfantProvision:function(){F.fireEvent("block_submit",{forceInitialize:true})}};function H(I){location.href=A.utilsUrl.buildExecutionUrl("_eventId=goto&gotoPageCode=AIR_SELECT_PAGE")}function C(I){F.fireEvent("sbmt-after-price-discrepancy")}}});YUI.add("popupWidget",function(B){var A=function(E,H,D){var G=this;var K=false;var C;var J;var I;if(D!=null&&D.header!=null){I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">'+D.header+'</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}else{I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">&nbsp;</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}if(YAHOO.lang.isString(H)){C="popup"+YAHOO.util.Dom.generateId();J=I(C,H);E.append(J)}else{C=H.getAttribute("id");J=H}var F={width:"400px",height:"150px",fixedcenter:true,constraintoviewport:true,close:true,visible:false,draggable:false,modal:true,zIndex:10,buttons:[],needTranslation:true};D=YAHOO.lang.merge(F,D||{});if(D.autofillheight!=null){D.height=null}G.dialog=new YAHOO.widget.Dialog(C,D);G.hide=function(){if(K){G.dialog.hide();if(J){J.addClass("hidden")}}};G.destroy=function(){if(K){G.dialog.destroy()}};G.dialog.hideEvent.subscribe(G.hide);if(D.closeHandler){G.dialog.hideEvent.subscribe(D.closeHandler)}G.addUniqueID=function(N){var M=G.dialog.getButtons();for(var L=0;L<M.length;L++){M[L].id=""+N+""+L}};G.addStyleClassToButtons=function(L){var N=G.dialog.getButtons();for(var M=0;M<N.length;M++){if(N[M].className===""){N[M].className+=L}else{N[M].className+=" "+L}}};G.addStyleClassToPopup=function(L){if(J){J.addClass(L)}};G.render=function(){if(D&&D.renderInsideBody){G.dialog.render(document.body)}else{G.dialog.render()}if(J&&D.needTranslation){J.translate()}K=true};G.center=function(){if(!K){G.render()}G.dialog.center()};G.show=function(){if(!K){G.render()}if(J){J.removeClass("hidden")}G.dialog.show()};G.node=function(){return J};G.update=function(L){G.dialog.setBody(L);K=false};G.id=function(){return C}};B.widgets=B.widgets||{};B.widgets.PopupWidget=A},"1.0.0",{requires:[]});YUI.add("wl-bagfee",function(A){A.components.Bagfee=function(G){var H=this;var D;var F="bagFeePopupContent";var B="__content";H.onRenderState={overlay:function(K){var J=A.one("#bagfee-anchor");if(J){J.on("click",I)}},initialized:function(J){}};function I(L){L.preventDefault();var K="default";var J={data:{actionCode:K,requestPartials:[B]},on:{end:function(){D.node().one(".bd").removeClass("loading")},success:function(N,M){if(M){C(M);D.node().one(".bd").removeClass("loading")}else{A.log("No Data returned from server","error")}}}};if(!D){E()}D.show();D.node().one(".bd").addClass("loading");H.fireEvent("to-ajax",{cfg:J,actionCode:K})}function C(J){var K=J.partials[B];var L=A.one("#"+F);if(L){L.set("innerHTML",A.decodeHtmlEntities(K))}}function E(){var K='<h4 class="bagfee-overlay-title" >'+A.translateParametrized("label.bagfee.overlay.title")+"</h4>";var J={buttons:[],header:K,close:true,width:"600px",autofillheight:"body"};D=new A.widgets.PopupWidget(A.one(document.body),'<div id="'+F+'"></div>',J)}}},"1.0.0",{requires:[]});YUI.add("attribute-base",function(C){C.State=function(){this.data={}};C.State.prototype={add:function(O,Y,f){var e=this.data;e[Y]=e[Y]||{};e[Y][O]=f},addAll:function(O,d){var Y;for(Y in d){if(d.hasOwnProperty(Y)){this.add(O,Y,d[Y])}}},remove:function(O,Y){var e=this.data;if(e[Y]&&(O in e[Y])){delete e[Y][O]}},removeAll:function(O,e){var Y=this.data;C.each(e||Y,function(f,d){if(C.Lang.isString(d)){this.remove(O,d)}else{this.remove(O,f)}},this)},get:function(O,Y){var e=this.data;return(e[Y]&&O in e[Y])?e[Y][O]:undefined},getAll:function(O){var e=this.data,Y;C.each(e,function(f,d){if(O in e[d]){Y=Y||{};Y[d]=f[O]}},this);return Y}};var K=C.Object,F=C.Lang,L=C.EventTarget,X=".",U="Change",N="getter",M="setter",P="readOnly",Z="writeOnce",V="initOnly",c="validator",H="value",Q="valueFn",E="broadcast",S="lazyAdd",J="_bypassProxy",b="added",B="initializing",I="initValue",W="published",T="defaultValue",A="lazy",R="isLazyAdd",G,a={};a[P]=1;a[Z]=1;a[N]=1;a[E]=1;function D(){var d=this,O=this.constructor.ATTRS,Y=C.Base;d._ATTR_E_FACADE={};L.call(d,{emitFacade:true});d._conf=d._state=new C.State();d._stateProxy=d._stateProxy||null;d._requireAddAttr=d._requireAddAttr||false;if(O&&!(Y&&d instanceof Y)){d.addAttrs(this._protectAttrs(O))}}D.INVALID_VALUE={};G=D.INVALID_VALUE;D._ATTR_CFG=[M,N,c,H,Q,Z,P,S,E,J];D.prototype={addAttr:function(Y,O,e){var f=this,h=f._state,g,d;e=(S in O)?O[S]:e;if(e&&!f.attrAdded(Y)){h.add(Y,A,O||{});h.add(Y,b,true)}else{if(!f.attrAdded(Y)||h.get(Y,R)){O=O||{};d=(H in O);if(d){g=O.value;delete O.value}O.added=true;O.initializing=true;h.addAll(Y,O);if(d){f.set(Y,g)}h.remove(Y,B)}}return f},attrAdded:function(O){return !!this._state.get(O,b)},modifyAttr:function(Y,O){var d=this,f,e;if(d.attrAdded(Y)){if(d._isLazyAttr(Y)){d._addLazyAttr(Y)}e=d._state;for(f in O){if(a[f]&&O.hasOwnProperty(f)){e.add(Y,f,O[f]);if(f===E){e.remove(Y,W)}}}}},removeAttr:function(O){this._state.removeAll(O)},get:function(O){return this._getAttr(O)},_isLazyAttr:function(O){return this._state.get(O,A)},_addLazyAttr:function(Y){var d=this._state,O=d.get(Y,A);d.add(Y,R,true);d.remove(Y,A);this.addAttr(Y,O)},set:function(O,d,Y){return this._setAttr(O,d,Y)},reset:function(O){var d=this,Y;if(O){if(d._isLazyAttr(O)){d._addLazyAttr(O)}d.set(O,d._state.get(O,I))}else{Y=d._state.data.added;C.each(Y,function(e,f){d.reset(f)},d)}return d},_set:function(O,d,Y){return this._setAttr(O,d,Y,true)},_getAttr:function(d){var e=this,i=d,f=e._state,g,O,h,Y;if(d.indexOf(X)!==-1){g=d.split(X);d=g.shift()}if(e._tCfgs&&e._tCfgs[d]){Y={};Y[d]=e._tCfgs[d];delete e._tCfgs[d];e._addAttrs(Y,e._tVals)}if(e._isLazyAttr(d)){e._addLazyAttr(d)}h=e._getStateVal(d);O=f.get(d,N);if(O&&!O.call){O=this[O]}h=(O)?O.call(e,h,i):h;h=(g)?K.getValue(h,g):h;return h},_setAttr:function(d,g,O,e){var k=true,Y=this._state,h=this._stateProxy,m=Y.data,j,n,o,f,i,l;if(d.indexOf(X)!==-1){n=d;o=d.split(X);d=o.shift()}if(this._isLazyAttr(d)){this._addLazyAttr(d)}j=(!m.value||!(d in m.value));if(h&&d in h&&!this._state.get(d,J)){j=false}if(this._requireAddAttr&&!this.attrAdded(d)){}else{i=Y.get(d,Z);l=Y.get(d,B);if(!j&&!e){if(i){k=false}if(Y.get(d,P)){k=false}}if(!l&&!e&&i===V){k=false}if(k){if(!j){f=this.get(d)}if(o){g=K.setValue(C.clone(f),o,g);if(g===undefined){k=false}}if(k){if(l){this._setAttrVal(d,n,f,g)}else{this._fireAttrChange(d,n,f,g,O)}}}}return this},_fireAttrChange:function(h,g,e,d,O){var j=this,f=h+U,Y=j._state,i;if(!Y.get(h,W)){j.publish(f,{queuable:false,defaultTargetOnly:true,defaultFn:j._defAttrChangeFn,silent:true,broadcast:Y.get(h,E)});Y.add(h,W,true)}i=(O)?C.merge(O):j._ATTR_E_FACADE;i.type=f;i.attrName=h;i.subAttrName=g;i.prevVal=e;i.newVal=d;j.fire(i)},_defAttrChangeFn:function(O){if(!this._setAttrVal(O.attrName,O.subAttrName,O.prevVal,O.newVal)){O.stopImmediatePropagation()}else{O.newVal=this.get(O.attrName)}},_getStateVal:function(O){var Y=this._stateProxy;return Y&&(O in Y)&&!this._state.get(O,J)?Y[O]:this._state.get(O,H)},_setStateVal:function(O,d){var Y=this._stateProxy;if(Y&&(O in Y)&&!this._state.get(O,J)){Y[O]=d}else{this._state.add(O,H,d)}},_setAttrVal:function(m,l,i,g){var o=this,j=true,d=o._state,e=d.get(m,c),h=d.get(m,M),k=d.get(m,B),n=this._getStateVal(m),Y=l||m,f,O;if(e){if(!e.call){e=this[e]}if(e){O=e.call(o,g,Y);if(!O&&k){g=d.get(m,T);O=true}}}if(!e||O){if(h){if(!h.call){h=this[h]}if(h){f=h.call(o,g,Y);if(f===G){j=false}else{if(f!==undefined){g=f}}}}if(j){if(!l&&(g===n)&&!F.isObject(g)){j=false}else{if(d.get(m,I)===undefined){d.add(m,I,g)}o._setStateVal(m,g)}}}else{j=false}return j},setAttrs:function(O,Y){return this._setAttrs(O,Y)},_setAttrs:function(Y,d){for(var O in Y){if(Y.hasOwnProperty(O)){this.set(O,Y[O])}}return this},getAttrs:function(O){return this._getAttrs(O)},_getAttrs:function(e){var g=this,j={},f,Y,O,h,d=(e===true);e=(e&&!d)?e:K.keys(g._state.data.added);for(f=0,Y=e.length;f<Y;f++){O=e[f];h=g.get(O);if(!d||g._getStateVal(O)!=g._state.get(O,I)){j[O]=g.get(O)}}return j},addAttrs:function(O,Y,d){var e=this;if(O){e._tCfgs=O;e._tVals=e._normAttrVals(Y);e._addAttrs(O,e._tVals,d);e._tCfgs=e._tVals=null}return e},_addAttrs:function(Y,d,e){var g=this,O,f,h;for(O in Y){if(Y.hasOwnProperty(O)){f=Y[O];f.defaultValue=f.value;h=g._getAttrInitVal(O,f,g._tVals);if(h!==undefined){f.value=h}if(g._tCfgs[O]){delete g._tCfgs[O]}g.addAttr(O,f,e)}}},_protectAttrs:function(Y){if(Y){Y=C.merge(Y);for(var O in Y){if(Y.hasOwnProperty(O)){Y[O]=C.merge(Y[O])}}}return Y},_normAttrVals:function(O){return(O)?C.merge(O):null},_getAttrInitVal:function(O,Y,e){var f,d;if(!Y[P]&&e&&e.hasOwnProperty(O)){f=e[O]}else{f=Y[H];d=Y[Q];if(d){if(!d.call){d=this[d]}if(d){f=d.call(this)}}}return f}};C.mix(D,L,false,null,1);C.Attribute=D},"3.1.2",{requires:["event-custom"]});YUI.add("base-base",function(B){var I=B.Object,K=B.Lang,J=".",G="destroy",R="init",Q="initialized",H="destroyed",D="initializer",N="bubbleTargets",E="_bubbleTargets",C=Object.prototype.constructor,M="deep",S="shallow",P="destructor",A=B.Attribute;function F(){A.call(this);var L=B.Plugin&&B.Plugin.Host;if(this._initPlugins&&L){L.call(this)}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments)}F._ATTR_CFG=A._ATTR_CFG.concat("cloneDefaultValue");F.NAME="base";F.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};F.prototype={init:function(L){this._yuievt.config.prefix=this._eventPrefix;this.publish(R,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(L);this.fire(R,{cfg:L});return this},_preInitEventCfg:function(O){if(O){if(O.on){this.on(O.on)}if(O.after){this.after(O.after)}}var T,L,V,U=(O&&N in O);if(U||E in this){V=U?(O&&O.bubbleTargets):this._bubbleTargets;if(K.isArray(V)){for(T=0,L=V.length;T<L;T++){this.addTarget(V[T])}}else{if(V){this.addTarget(V)}}}},destroy:function(){this.publish(G,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(G);this.detachAll();return this},_defInitFn:function(L){this._initHierarchy(L.cfg);if(this._initPlugins){this._initPlugins(L.cfg)}this._set(Q,true)},_defDestroyFn:function(L){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins()}this._set(H,true)},_getClasses:function(){if(!this._classes){this._initHierarchyData()}return this._classes},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData()}return this._attrs},_filterAttrCfgs:function(V,O){var T=null,L,U=V.ATTRS;if(U){for(L in U){if(U.hasOwnProperty(L)&&O[L]){T=T||{};T[L]=O[L];delete O[L]}}}return T},_initHierarchyData:function(){var T=this.constructor,O=[],L=[];while(T){O[O.length]=T;if(T.ATTRS){L[L.length]=T.ATTRS}T=T.superclass?T.superclass.constructor:null}this._classes=O;this._attrs=this._aggregateAttrs(L)},_aggregateAttrs:function(Y){var V,Z,U,L,a,O,X,T=F._ATTR_CFG,W={};if(Y){for(O=Y.length-1;O>=0;--O){Z=Y[O];for(V in Z){if(Z.hasOwnProperty(V)){U=B.mix({},Z[V],true,T);L=U.value;X=U.cloneDefaultValue;if(L){if((X===undefined&&(C===L.constructor||K.isArray(L)))||X===M||X===true){U.value=B.clone(L)}else{if(X===S){U.value=B.merge(L)}}}a=null;if(V.indexOf(J)!==-1){a=V.split(J);V=a.shift()}if(a&&W[V]&&W[V].value){I.setValue(W[V].value,a,L)}else{if(!a){if(!W[V]){W[V]=U}else{B.mix(W[V],U,true,T)}}}}}}}return W},_initHierarchy:function(W){var T=this._lazyAddAttrs,X,Y,Z,U,O,V=this._getClasses(),L=this._getAttrCfgs();for(Z=V.length-1;Z>=0;Z--){X=V[Z];Y=X.prototype;if(X._yuibuild&&X._yuibuild.exts){for(U=0,O=X._yuibuild.exts.length;U<O;U++){X._yuibuild.exts[U].apply(this,arguments)}}this.addAttrs(this._filterAttrCfgs(X,L),W,T);if(Y.hasOwnProperty(D)){Y.initializer.apply(this,arguments)}}},_destroyHierarchy:function(){var V,O,U,L,T=this._getClasses();for(U=0,L=T.length;U<L;U++){V=T[U];O=V.prototype;if(O.hasOwnProperty(P)){O.destructor.apply(this,arguments)}}},toString:function(){return this.constructor.NAME+"["+B.stamp(this)+"]"}};B.mix(F,A,false,null,1);F.prototype.constructor=F;B.Base=F},"3.1.2",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(C){var A=C.Base,B=C.Plugin.Host;C.mix(A,B,false,null,1);A.plug=B.plug;A.unplug=B.unplug},"3.1.2",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(D){var B=D.Base,A=D.Lang,C;B._build=function(F,L,P,T,S,O){var U=B._build,G=U._ctor(L,O),J=U._cfg(L,O),R=U._mixCust,N=J.aggregates,E=J.custom,I=G._yuibuild.dynamic,M,K,H,Q;if(I&&N){for(M=0,K=N.length;M<K;++M){H=N[M];if(L.hasOwnProperty(H)){G[H]=A.isArray(L[H])?[]:{}}}}for(M=0,K=P.length;M<K;M++){Q=P[M];D.mix(G,Q,true,null,1);R(G,Q,N,E);G._yuibuild.exts.push(Q)}if(T){D.mix(G.prototype,T,true)}if(S){D.mix(G,U._clean(S,N,E),true);R(G,S,N,E)}G.prototype.hasImpl=U._impl;if(I){G.NAME=F;G.prototype.constructor=G}return G};C=B._build;D.mix(C,{_mixCust:function(G,F,I,H){if(I){D.aggregate(G,F,true,I)}if(H){for(var E in H){if(H.hasOwnProperty(E)){H[E](E,G,F)}}}},_tmpl:function(E){function F(){F.superclass.constructor.apply(this,arguments)}D.extend(F,E);return F},_impl:function(H){var K=this._getClasses(),J,F,E,I,L,G;for(J=0,F=K.length;J<F;J++){E=K[J];if(E._yuibuild){I=E._yuibuild.exts;L=I.length;for(G=0;G<L;G++){if(I[G]===H){return true}}}}return false},_ctor:function(E,F){var G=(F&&false===F.dynamic)?false:true,H=(G)?C._tmpl(E):E;H._yuibuild={id:null,exts:[],dynamic:G};return H},_cfg:function(E,F){var G=[],J={},I,H=(F&&F.aggregates),L=(F&&F.custom),K=E;while(K&&K.prototype){I=K._buildCfg;if(I){if(I.aggregates){G=G.concat(I.aggregates)}if(I.custom){D.mix(J,I.custom,true)}}K=K.superclass?K.superclass.constructor:null}if(H){G=G.concat(H)}if(L){D.mix(J,F.cfgBuild,true)}return{aggregates:G,custom:J}},_clean:function(K,J,G){var I,F,E,H=D.merge(K);for(I in G){if(H.hasOwnProperty(I)){delete H[I]}}for(F=0,E=J.length;F<E;F++){I=J[F];if(H.hasOwnProperty(I)){delete H[I]}}return H}});B.build=function(G,E,H,F){return C(G,E,H,null,null,F)};B.create=function(E,H,G,F,I){return C(E,H,G,F,I)};B.mix=function(E,F){return C(null,E,F,null,null,{dynamic:false})};B._buildCfg={custom:{ATTRS:function(G,F,E){F[G]=F[G]||{};if(E[G]){D.aggregate(F[G],E[G],true)}}},aggregates:["_PLUG","_UNPLUG"]}},"3.1.2",{requires:["base-base"]});YUI.add("base",function(A){},"3.1.2",{use:["base-base","base-pluginhost","base-build"]});YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",P="reverse",H="iterationCount",A=Number;var F={},O={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);O[B.stamp(this)]=this};B.Anim.NAME="anim";B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(R,Q,T,S){return T*R/S+Q};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(R,Q){return R._getOffset(Q)}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(U,R,X,W,Q,V,S,T){T=T||"";U._node.setStyle(R,S(Q,A(X),A(W)-A(X),V)+T)};B.Anim.DEFAULT_GETTER=function(Q,R){return Q._node.getComputedStyle(R)};B.Anim.ATTRS={node:{setter:function(Q){Q=B.one(Q);this._node=Q;if(!Q){}return Q}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(Q){if(typeof Q==="string"&&B.Easing){return B.Easing[Q]}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)]},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){for(var Q in O){if(O[Q].run){O[Q].run()}}};B.Anim.pause=function(){for(var Q in F){if(F[Q].pause){F[Q].pause()}}B.Anim._stopTimer()};B.Anim.stop=function(){for(var Q in F){if(F[Q].stop){F[Q].stop()}}B.Anim._stopTimer()};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime)}};B.Anim._stopTimer=function(){clearInterval(E);E=0};B.Anim._runFrame=function(){var Q=true;for(var R in F){if(F[R]._runFrame){Q=false;F[R]._runFrame()}}if(Q){B.Anim._stopTimer()}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume()}else{if(!this.get(C)){this._start()}}return this},pause:function(){if(this.get(C)){this._pause()}return this},stop:function(Q){if(this.get(C)||this.get(K)){this._end(Q)}return this},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr()}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J)},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause")},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this.fire("resume")},_end:function(Q){var R=this.get("duration")*1000;if(Q){this._runAttrs(R,R,this.get(P))}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)})},_runFrame:function(){var U=this._runtimeAttr.duration,S=new Date()-this.get(N),R=this.get(P),Q=(S>=U),T,V;this._runAttrs(S,U,R);this._actualFrames+=1;this._set(L,S);this.fire(I);if(Q){this._lastFrame()}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,S=B.Anim.behaviors,X=W.easing,Q=Y,R,T,U;if(V){Z=Y-Z;Q=0}for(U in W){if(W[U].to){R=W[U];T=(U in S&&"set" in S[U])?S[U].set:B.Anim.DEFAULT_SETTER;if(Z<Y){T(this,U,R.from,R.to,Z,Y,X,R.unit)}else{T(this,U,R.from,R.to,Q,Y,X,R.unit)}}}},_lastFrame:function(){var Q=this.get("iterations"),R=this.get(H);R+=1;if(Q==="infinite"||R<Q){if(this.get("direction")==="alternate"){this.set(P,!this.get(P))}this.fire("iteration")}else{R=0;this._end()}this._set(N,new Date());this._set(H,R)},_initAnimAttr:function(){var X=this.get("from")||{},W=this.get("to")||{},Q={duration:this.get("duration")*1000,easing:this.get("easing")},S=B.Anim.behaviors,V=this.get(D),U,T,R;B.each(W,function(b,Z){if(typeof b==="function"){b=b.call(this,V)}T=X[Z];if(T===undefined){T=(Z in S&&"get" in S[Z])?S[Z].get(this,Z):B.Anim.DEFAULT_GETTER(this,Z)}else{if(typeof T==="function"){T=T.call(this,V)}}var Y=B.Anim.RE_UNITS.exec(T);var a=B.Anim.RE_UNITS.exec(b);T=Y?Y[1]:T;R=a?a[1]:b;U=a?a[2]:Y?Y[2]:"";if(!U&&B.Anim.RE_DEFAULT_UNIT.test(Z)){U=B.Anim.DEFAULT_UNIT}if(!T||!R){B.error('invalid "from" or "to" for "'+Z+'"',"Anim");return }Q[Z]={from:T,to:R,unit:U}},this);this._runtimeAttr=Q},_getOffset:function(R){var T=this._node,U=T.getComputedStyle(R),S=(R==="left")?"getX":"getY",V=(R==="left")?"setX":"setY";if(U==="auto"){var Q=T.getStyle("position");if(Q==="absolute"||Q==="fixed"){U=T[S]();T[V](U)}else{U=0}}return U}};B.extend(B.Anim,B.Base,G)},"3.1.2",{requires:["base-base","node-style"]});YUI.add("anim-color",function(B){var A=Number;B.Anim.behaviors.color={set:function(F,D,I,H,C,G,E){I=B.Color.re_RGB.exec(B.Color.toRGB(I));H=B.Color.re_RGB.exec(B.Color.toRGB(H));if(!I||I.length<3||!H||H.length<3){B.error("invalid from or to passed to color behavior")}F._node.setStyle(D,"rgb("+[Math.floor(E(C,A(I[1]),A(H[1])-A(I[1]),G)),Math.floor(E(C,A(I[2]),A(H[2])-A(I[2]),G)),Math.floor(E(C,A(I[3]),A(H[3])-A(I[3]),G))].join(", ")+")")},get:function(D,C){var E=D._node.getComputedStyle(C);E=(E==="transparent")?"rgb(255, 255, 255)":E;return E}};B.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(C,D){B.Anim.behaviors[C]=B.Anim.behaviors.color})},"3.1.2",{requires:["anim-base"]});YUI.add("anim-curve",function(A){A.Anim.behaviors.curve={set:function(F,C,I,H,B,G,E){I=I.slice.call(I);H=H.slice.call(H);var D=E(B,0,100,G)/100;H.unshift(I);F._node.setXY(A.Anim.getBezier(H,D))},get:function(C,B){return C._node.getXY()}};A.Anim.getBezier=function(F,E){var G=F.length;var D=[];for(var C=0;C<G;++C){D[C]=[F[C][0],F[C][1]]}for(var B=1;B<G;++B){for(C=0;C<G-B;++C){D[C][0]=(1-E)*D[C][0]+E*D[parseInt(C+1,10)][0];D[C][1]=(1-E)*D[C][1]+E*D[parseInt(C+1,10)][1]}}return[D[0][0],D[0][1]]}},"3.1.2",{requires:["anim-xy"]});YUI.add("anim-easing",function(A){A.Easing={easeNone:function(C,B,E,D){return E*C/D+B},easeIn:function(C,B,E,D){return E*(C/=D)*C+B},easeOut:function(C,B,E,D){return -E*(C/=D)*(C-2)+B},easeBoth:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C+B}return -E/2*((--C)*(C-2)-1)+B},easeInStrong:function(C,B,E,D){return E*(C/=D)*C*C*C+B},easeOutStrong:function(C,B,E,D){return -E*((C=C/D-1)*C*C*C-1)+B},easeBothStrong:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+B}return -E/2*((C-=2)*C*C*C-2)+B},elasticIn:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B},elasticOut:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+B},elasticBoth:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G/2)===2){return B+H}if(!F){F=G*(0.3*1.5)}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+B},backIn:function(C,B,F,E,D){if(D===undefined){D=1.70158}if(C===E){C-=0.001}return F*(C/=E)*C*((D+1)*C-D)+B},backOut:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+B},backBoth:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+B}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+B},bounceIn:function(C,B,E,D){return E-A.Easing.bounceOut(D-C,0,E,D)+B},bounceOut:function(C,B,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+B}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+B}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+B}}}return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+B},bounceBoth:function(C,B,E,D){if(C<D/2){return A.Easing.bounceIn(C*2,0,E,D)*0.5+B}return A.Easing.bounceOut(C*2-D,0,E,D)*0.5+E*0.5+B}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(B){var A=function(C){C=(C)?B.merge(C):{};C.node=C.host;A.superclass.constructor.apply(this,arguments)};A.NAME="nodefx";A.NS="fx";B.extend(A,B.Anim);B.namespace("Plugin");B.Plugin.NodeFX=A},"3.1.2",{requires:["node-pluginhost","anim-base"]});YUI.add("anim-scroll",function(B){var A=Number;B.Anim.behaviors.scroll={set:function(F,G,I,J,K,E,H){var D=F._node,C=([H(K,A(I[0]),A(J[0])-A(I[0]),E),H(K,A(I[1]),A(J[1])-A(I[1]),E)]);if(C[0]){D.set("scrollLeft",C[0])}if(C[1]){D.set("scrollTop",C[1])}},get:function(D){var C=D._node;return[C.get("scrollLeft"),C.get("scrollTop")]}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-xy",function(B){var A=Number;B.Anim.behaviors.xy={set:function(F,D,I,H,C,G,E){F._node.setXY([E(C,A(I[0]),A(H[0])-A(I[0]),G),E(C,A(I[1]),A(H[1])-A(I[1]),G)])},get:function(C){return C._node.getXY()}}},"3.1.2",{requires:["anim-base","node-screen"]});YUI.add("anim",function(A){},"3.1.2",{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],skinnable:false});YUI.add("wl-select-flights",function(A){A.WlSelectFlights=function(l,a,G,j,Q){var i={isFlightExchanged:Q.isFlightExchanged,lazyStep:Q.lazyStep,hashCodesPath:Q.hashCodesPath};var f=j.flightList;var S=a.one(".componentContentHolder")||a;if(!A.one("#"+G)){var J=A.Node.create('<div id="'+G+'" class="flight-list-container"></div>');S.appendChild(J);J=null}var W=A.one("#"+G);S=null;var b=this;b.direction=G;var D=7;var L=new Date(sabre.config.global.currentTimeInMillis);L=L.getTime()-(L.getTime()%(1000*60*60*24));L=A.DataType.Date.parse(L);var c;var Z;var B;var U;var O;var I=Math.floor(D/2);var Y=Math.floor(D/2);var E=365;var H=new Date(sabre.config.global.currentTimeInMillis);H=H.getTime()-(H.getTime()%(1000*60*60*24));H=A.DataType.Date.parse(H);H=H.setDate(H.getDate()+E);H=A.DataType.Date.parse(H);var K=H;var h=l.initData.discountApplied;var k=l.initData.negoFarePresent;function P(n){var o;if(G==="multicity"){o=n.outboundCalendarPrices}else{if(G==="inbounds"){o=n.inboundCalendarPrices}else{o=n.outboundCalendarPrices}}if(!o){A.log(o+" is undefined. Alternate tabs will not be displayed","warn","Flight List")}return o}b.showMarketingTextOverlay=function(n,p,o){c.showMarketingTextOverlay(n,p,o,G)};b.showMarketingTextOverlayWithDelay=function(n,p,o){c.showMarketingTextOverlayWithDelay(n,p,o,G)};b.showFareIndicatorTextOverlay=function(n){c.showFareIndicatorTextOverlay(n,"fareIndicator")};b.hideMarketingTextOverlay=function(n){c.hideMarketingTextOverlay(n)};b.hideFareIndicatorTextOverlay=function(n){c.hideFareIndicatorTextOverlay(n)};b.hideMarketingTextOverlayIfNotInOverlayRegion=function(n){c.hideMarketingTextOverlayIfNotInOverlayRegion(n)};b.getNode=function(){return W};b.getColumnKeyByHeader=function(n){return c.getColumnKeyByHeader(n)};b.getStoredColumnKey=function(n){return c.getStoredColumnKey(n)};var m={itineraryHeader:function(n){n.translate()},dateRange:function(v){var n=P(l.initData);n=n||[];D=n.length||D;var q=Math.floor(D/2);v.purge(true);var o=(n[q]&&n[q].date)||"";if(!Z){Z=A.DataType.Number.parse(new Date(o.replace(/-/g,"/")))}for(var r=0;r<n.length;r++){var w=A.DataType.Date.parse(n[r].date.replace(/-/g,"/"));n[r].timestamp=w.getTime()}var x=G+"-"+q+"-menu";var t=v.one("#"+x);var p=v.one("a.dates-prev"),s=v.one("a.dates-next");var u=p&&!p.hasClass("disabled");var y=s&&!s.hasClass("disabled");if(t){e(t,n);X(v,n,q,{prev:u,next:y})}v.translate()},dataTable:function(n,o){c.applyEvents(n,o)},classOfService:function(){},discountIndicator:function(){C()},negoFareIndicator:function(){T()},nextDayLegend:function(){},filterOptions:function(){}};b.renderHtml=function(n){l.htmlBody={unbundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableUnbundled"))},bundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableBundled"))},oneway:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},exchange:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},multicity:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableMulticity"))},lazy:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableLazy"))}};W.purge(true);W=A.one("#"+G);if(!W){W=A.one(".flight-list-container");if(W){W.addClass("loading");A.log("Different result type - reloading page","warn");window.location.reload()}else{A.log("Cannot render flight list","error")}return }c=f.selectFlightDataTable(G,i);var o=W.get("children");o.each(function(q){var p=q.getAttribute("wl:section");if(p){m[p](q,n)}})};b.getSelectedHashRef=function(){return c?c.getSelectedHashRef():null};b.getSelectedBasketPrice=function(){return c?c.getSelectedBasketPrice():null};b.resetSelection=function(){c.resetSelection()};b.translateBrands=function(){if(typeof c.translateBrands==="function"){c.translateBrands(W)}};b.getCurrentDate=function(){return A.DataType.Date.parse(Z)};b.getActiveDate=function(){return Z};b.getActiveClass=function(){return B};b.hideAlternateDates=function(){};b.showProgress=function(){var n=W.one(".loading-mask");if(n){n.removeClass("hidden")}else{n=A.Node.create('<div class="loading-mask"></div>');W.append(n)}if(A.UA.ie>0&&A.UA.ie<7){W.all("select").addClass("select-fix");n.setStyle("height",n.ancestor().getStyle("height"))}};b.hideProgress=function(){var n=W.one(".loading-mask");if(n){n.addClass("hidden")}if(A.UA.ie>0&&A.UA.ie<7){W.all("select").removeClass("select-fix")}};function C(){var n=".discount-indicator-container";if(h&&N(W,".cell-discount-indicator,.cell-discount-negofare-indicator")){M(n)}else{g(n)}}function T(){k=l.initData.negoFarePresent;var n=".negofare-indicator-container";if(k&&N(W,".cell-negofare-indicator,.cell-discount-negofare-indicator")){M(n)}else{g(n)}}function M(n){var o=b.getNode();if(o){o.all(n).removeClass("hidden")}}function g(n){var o=b.getNode();if(o){o.all(n).addClass("hidden")}}b.disablePrev7AndNext7Buttons=function(){var n=W.one("a.dates-next");if(n){n.addClass("disabled")}var o=W.one("a.dates-prev");if(o){o.addClass("disabled")}};function N(o,n){var p=o.all(n);return p&&!p.isEmpty()}b.setFirstActiveDate=function(n){U=n};b.setLastActiveDate=function(n){O=n};b.reselectFlights=function(n,o){if(c){c.reselectFlights(W,G,n,o)}};b.updateDataTableFromSelectedBasketHash=function(n){if(c){c.updateDataTableFromSelectedBasketHash(W,G,n)}};function X(o,s,q,r){var v=r.prev;var w=r.next;var x=[],t=o.one("a.dates-next"),p=o.one("a.dates-prev");var y=s.length*(1000*60*60*24);var u=s[q].timestamp;if(v){x.push("#"+o.get("id")+" a.dates-prev")}else{o.one("a.dates-prev").addClass("disabled")}if(w){x.push("#"+o.get("id")+" a.dates-next")}else{o.one("a.dates-next").addClass("disabled")}if(x.length>0){var n=A.on("prevNextHandler|click",function(AD){AD.preventDefault();var AC;var AB={};if(AD.currentTarget.hasClass("dates-prev")){var z=u-y;if(U&&U.getTime()>z){z=U.getTime()}AC=-y;AB.dateDirection=-1;AB.id=z;AB.active=v}else{var AE=u+y;if(O&&O.getTime()<AE){AE=O.getTime()}AC=y;AB.dateDirection=1;AB.id=AE;AB.active=w}if(AB.active){var AA=(s[I]&&s[I].date)||"";AC=AC+A.DataType.Number.parse(new Date(AA.replace(/-/g,"/")));AC=V(AC,K);n.detach();R(AD,AB)}},x.join(","))}}function e(n,p){var o=n.all("li");o.each(function(r,q){var s={index:q,date:p[q].timestamp,menuItems:o};if(!r.hasClass("yuimenubaritem-disabled")){r.on("click",F,r,s)}else{r.on("click",d)}},b)}function d(n){n.preventDefault()}function V(q,n){var p=A.DataType.Date.parse(q);var o=1000*60*60*24;if(p.getTime()<L){Y=I;I=I+Math.floor((L.getTime()-p.getTime())/(o));p=L}if(p.getTime()>H){Y=I;I=I-Math.floor((p.getTime()-H.getTime())/(o));p=H}if(p.getTime()>n){Y=I;I=I-Math.floor((p.getTime()-n.getTime())/(o));p=n}return A.DataType.Number.parse(p)}function F(o,n){o.preventDefault();I=n.index;Z=n.date;n.menuItems.removeClass("active");this.addClass("active");j.handleDateChange(G)}function R(o,n){Z=n.id;j.handleDatesPeriodChange(G)}};A.WlSelectFlights.DataTable={}});YUI.add("wl-flight-list-abstract",function(C){var D=function(F,E){var G=this;G.renderItineraryHeader=function(P,I,N,H,J){var K,O;if(P==="inbounds"){K=J?"returning.new":"returning";O=I&&I[1]}else{K=J?"departing.new":"departing";O=I&&I[0]}var M=O?O.departureCode:"";var Q=O?O.arrivalCode:"";var L={direction:K,fromAirport:C.formatAirport(M,N),toAirport:C.formatAirport(Q,N)};return E.replaceData(L,H)};G.selectFlightDataTable=function(I,H){return new C.WlSelectFlights.DataTable.Regular(F,E,I)}};C.WlFlightList=D;var B=function(G,E,I){var H=this;B.superclass.constructor.call(H,G,E);var F={multicity:function(N,L,K,J){var O="";for(var M=0;M<L.length;M++){O+=E.replaceData({no:M+1,fromAirport:C.formatAirport(L[M].departureCode,K)},J)}O+=E.getHtml("_itineraryHeaderDisclaimer");return O}};if(C.Lang.isFunction(F[I])){H.renderItineraryHeader=F[I]}H.selectFlightDataTable=function(K,J){return new C.WlSelectFlights.DataTable.Multicity(G,E,K)}};C.extend(B,D);C.WlFlightList.Bundled=B;var A=function(F,E){var G=this;A.superclass.constructor.call(G,F,E);G.selectFlightDataTable=function(I,H){return new C.WlSelectFlights.DataTable.Lazy(F,E,I,H)};G.renderItineraryHeader=function(O,I,M,H){var J,N;if(O==="lazy1"){J="returning";N=I&&I[1]}else{J="departing";N=I&&I[0]}var L=N?N.departureCode:"";var P=N?N.arrivalCode:"";var K={direction:J,fromAirport:C.formatAirport(L,M),toAirport:C.formatAirport(P,M)};return E.replaceData(K,H)}};C.extend(A,D);C.WlFlightList.Lazy=A});YUI.add("wl-select-flights-datatable-formatters-common",function(A){A.WlSelectFlights.DataTable.CommonFormatters=function(F){var I=F.timeFormat;var K=F.departAirportFormat;var B=F.arriveAirportFormat;var D=F.destinationAirportFormat;var L=F.originAirportFormat;var N=F.stopsAirportFormat;YAHOO.widget.DataTable=YAHOO.widget.DataTable||{};YAHOO.widget.DataTable.Formatter=YAHOO.widget.DataTable.Formatter||{};YAHOO.widget.DataTable.Formatter.dateNumberFormatter=function(R,S,Q){return Q?'<em wl:date="'+Q+"+"+I+'">'+O(Q)+"</em>":""};YAHOO.widget.DataTable.Formatter.dateFormatter=function(T,U,S){var R=C(T,U);var Q=J(T,U);return R+Q};YAHOO.widget.DataTable.Formatter.departDateAndAirportCode=function(R,S,Q){return G(R,S,K)};YAHOO.widget.DataTable.Formatter.arriveDateAndAirportCode=function(R,S,Q){return G(R,S,B)};YAHOO.widget.DataTable.Formatter.flightDuration=function(S,T,Q){var R=S.flightDuration;return E(S,T,R)};YAHOO.widget.DataTable.Formatter.flightNumber=function(R,S,Q){return Q?P(Q,null):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCode=function(R,S,Q){return R?P(Q,R.airlineCodes):""};YAHOO.widget.DataTable.Formatter.flightNumberNoLink=function(R,S,Q){return Q?H(R.flightNumber,null,false):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCodeNoLink=function(R,S,Q){return R?H(R.flightNumber,R.airlineCodes,false):""};YAHOO.widget.DataTable.Formatter.availableSeats=function(R,S,Q){if(R.seatsPreviewLinkEnabled){return'<p class="view-seats"><a href="#" class="translate" wl:translate="label.flc.viewSeats"></a></p>'}else{return'<p><span class="translate" wl:translate="label.flc.viewSeats.unavailable"></span></p>'}};YAHOO.widget.DataTable.Formatter.operatingCarrierFullName=function(U,W,T){if(!T){return""}var S="";var Q=U.wetLeaseCarrier;if(A.Lang.isArray(T)){for(var R=0;R<T.length;R++){var V=A.getFullAirlineName(T[R]);if(Q&&Q[R]!=null){V=Q[R]}S+="<p>"+A.getFullAirlineName(V)+"</p>"}}else{if(Q){S+=Q}else{S+=A.getFullAirlineName(T)}}return S};YAHOO.widget.DataTable.Formatter.operatingCarrierImage=function(T,U,S){if(!S){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+='<p class="operating-carrier-image carrier-'+S[Q]+'">'+S[Q]+"</p>"}}else{R+='<p class="operating-carrier-image carrier-'+S+'">'+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.arrayToString=function(T,U,S){if(S===null||typeof S==="undefined"){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+="<p>"+S[Q]+"</p>"}}else{R+="<p>"+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.destinationFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],D)+"</p>"}else{Q+="<p>"+A.formatAirport(R,D)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.originFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],L)+"</p>"}else{Q+="<p>"+A.formatAirport(R,L)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.classOfService=function(R,S,Q){return Q?'<p class="translate" wl:translate="label.flc.cabin.'+Q+'">'+Q+"</p>":""};YAHOO.widget.DataTable.Formatter.rowNumber=function(T,U,R){if(!R){return""}var Q=T.index;var S="";if(A.Lang.isArray(Q)&&Q.length>2){S=Q[2]}if(S==="bundled"){return'<em class="translate" wl:translate="label.flc.bundled.direction'+parseInt(R,10)+'">'+A.translateParametrized("label.flc.bundled.direction"+parseInt(R))+"</em>"}else{return"<em>"+(parseInt(R,10)+1)+"</em>"}};YAHOO.widget.DataTable.Formatter.flightStops=function(U,V,T){if(!T){return""}var S;if(A.Lang.isArray(T)){S=T.length}else{S=A.DataType.Number.parse(T)}if(S>0){var R=[];for(var Q in T){R[Q]=A.formatAirport(T[Q],N)}S+=" ("+R.join(", ")+")"}return S};YAHOO.widget.DataTable.Formatter.rowFormatter=function(Q,R){M.call(this,Q,R);return true};YAHOO.widget.DataTable.Formatter.mcRowFormatter=function(Q,T){var S=A.one(Q);var R=T.index;if(R==null){S.addClass("emptyTableRow")}else{if(A.Lang.isArray(R)){R=R[0]}if(R===0){S.addClass("first")}else{S.addClass("rest")}}M.call(this,Q,T);return true};var M=function(Q,V){var T=V.pricePerPerson;var S=V.index;var U=this.getContainerEl().id.split("-")[1];var R;if(T&&T.itineraryData){R={segments:T.itineraryData.segments}}A.WlSelectFlights.DataTable.EventHandlers.storeData(this.getContainerEl().id,V.getId(),{index:S,direction:U,data:R})};function C(T,Q){var S=T[Q];var R;if(A.Lang.isArray(S)){if(/departureDate/.test(Q)){R=S[0]}if(/arrivalDate/.test(Q)){R=S[S.length-1]}}else{R=S}return O(R)}function O(Q){return'<span class="translate" wl:date="'+Q+","+I+'">'+A.DataType.Date.format(new Date(Q),{format:I})+"</span>"}function G(W,X,R){var V=X.replace("DateAndCode","");var U=W[V+"Date"];var S=O(U);var T=W[V+"Code"];var Q=J(W,X);return'<span class="airport_code">'+A.formatAirport(T,R)+"</span>"+S+Q}function J(U,T){if(/arrival/.test(T)){var R=U.arrivalDate;var V=U.departureDate;var S=A.DataType.Date.parse(V);var Q=A.DataType.Date.parse(R);if(Q.getDate()!==S.getDate()){return A.getHtml("flc","_nextDayIndicator")}}return""}function H(W,X,R){var T="";var U=R?'<a href="#">':"";var Q=R?"</a>":"";if(A.Lang.isArray(W)){for(var S=0;S<W.length;S++){var V=X&&X[S]?X[S]:"";if(S===0){T+='<p class="flight-number">'+U+V+" "+W[S]+Q+"</p>"}else{T+='<p class="flight-number">'+U+V+" "+W[S]+' <img alt="Connecting Flight" src="'+sabre.config.global.commonResourcesPath+'images/logo-tiny.gif">'+Q+"</p>"}}}else{T+='<p class="flight-number">'+U+X+" "+W+Q+"</p>"}return T}function P(Q,R){return H(Q,R,true)}function E(S,T,R){var Q="label.flc.durationFormat|"+Math.floor(R/3600000)+"|"+Math.ceil((R%3600000)/60000);return R?'<p class="translate" wl:translate="'+Q+'">'+A.translateParametrized(Q)+"</p>":""}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-eventhandlers",function(A){A.WlSelectFlights.DataTable.EventHandlers=A.WlSelectFlights.DataTable.EventHandlers||(function(){var C={};function F(G,I,H){C[G]=C[G]||{};C[G][I]=H}function D(G,H){return C[G]&&C[G][H]}function E(H,I){var G=H.replace("#","");C[G]=C[G]||{};I(H,C[G])}function B(G){C[G]={}}return{storeData:F,clearStoredData:B,attachHandlers:E,getStoredData:D}}())},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-common",function(A){A.WlSelectFlights.DataTable.selectedBasketHashRef=A.WlSelectFlights.DataTable.selectedBasketHashRef||{};A.WlSelectFlights.DataTable.selectedBasketPrice=A.WlSelectFlights.DataTable.selectedBasketPrice||{};A.WlSelectFlights.DataTable.Common=function(q,p,I){var e=this;var n=q.compInstConfig;var O=n.flightListCurrencyOrder?n.flightListCurrencyOrder.toLowerCase():"before";var Y=n.flightListMilesPosition?n.flightListMilesPosition.toLowerCase():"before";var U=n.showFaresOnExchange;var F=q.initData.flightExchanged;var h="_flightDetailsOverlay";var C="_flightDetailsOverlayRow";var c="_marketingTextOverlay";var d="_fareIndicatorTextOverlay";var P="_compareBenefitsOverlay";var B=[];var N=q.htmlBody[q.state].dataTable.overlayColumnDefs;var Q={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","wetLeaseCarrier"]};var E={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","index","wetLeaseCarrier"]};var T=q.state==="lazy"?"lazy":I==="multicity"?"bundled":I;var m=A.WlSelectFlights.DataTable.selectedBasketHashRef;var W=A.WlSelectFlights.DataTable.selectedBasketPrice;var G="flight-fare";e.itineraryPartsCount=q.initData.airSearchCriteria.itineraryAirportPairs.length;var a=q.compInstConfig.tableColumns.split(",");A.Array.each(a,function(s,r){a[r]=A.Lang.trim(a[r])});function R(s,t,r){if(!s.one("#dtcontainer-"+t)){s.append('<div id="dtcontainer-'+t+'"></div>')}A.Event.purgeElement("#dtcontainer-"+t,true);A.WlSelectFlights.DataTable.EventHandlers.attachHandlers("#dtcontainer-"+t,r);return"dtcontainer-"+t}function H(s,x,AA,r,w){var y=x+r;var z=A.one("#"+y);if(!z){if(!w){var t=p.getPartial(AA,{id:x});s.append(t)}}var v=new YAHOO.widget.Dialog(y,{visible:false,draggable:false,zIndex:520,close:true});var u=true;v.showEvent.subscribe(function(AB){A.one(this.element).translate();A.on(y+"|click",function(AD){if(u){u=false}else{var AC=AD.target;if(!AC.inRegion(v.element,true)){v.hide()}}},A.one("#ROOT"))});v.hideEvent.subscribe(function(){A.detach(y+"|click");u=true});B[AA]=v;v.render(document.body);return A.one("#"+y)}function j(s,y,AA,r,x){var z=y+r;var v=A.one("#"+z);if(!v){if(!x){var t=p.getPartial(AA,{id:y});s.append(t)}}var w=new YAHOO.widget.Dialog(z,{visible:false,draggable:false,zIndex:520,close:true});var u=true;w.showEvent.subscribe(function(AB){A.one(this.element).translate();A.on(z+"|click",function(AD){if(u){u=false}else{var AC=AD.target;if(!AC.inRegion(w.element,true)){w.hide()}}},document)});w.hideEvent.subscribe(function(){A.detach(z+"|click");u=true});B[AA]=w;w.render(document.body);return A.one("#"+z)}function o(s,t){var r=H(s,t,h,"-flightDetails",true);r.addClass("modal flight-details")}function V(s,v,r){var u=s;var t=v;r.all(".view-seats").on("click",function(AB){AB.preventDefault();var z=AB.currentTarget;if(t===null){var AD=u[z.ancestor("tr").get("id")];var y=J(z.ancestor("tr").get("id"));var w=0}else{var AD=u[t];var y=J(t);var w=D(AB)}var AA=AD.data;var AC=AA.segments;if(AD.direction=="multicity"||AD.direction=="bundled"){var x=b(u,t!=null?t:z.ancestor("tr").get("id"));w=w+x.segmentIndexOffset;AC=x.segments}p.fireEvent("view-seats",{basketsHashRef:AA.basketsRef,rbdsAndPrices:y,selectedSegmentIndex:w,segmentList:AC,selectedBasketHashRef:K(I,AA.basketsRef)})})}function b(w,u){var v=new Array();var t=0;var x=true;var r=u.substring(0,u.lastIndexOf("-"));for(var y in w){var AA=y.substring(0,y.lastIndexOf("-"));if(AA==r){if(y==u){x=false}for(var z in w[y].data.segments){if(x){t++}v.push(w[y].data.segments[z])}}}return{segments:v,segmentIndexOffset:t}}function J(t){var s=A.one("#"+t).all(".price");var v=new Array();var r=new Array();var u=new Array();v.push(u);v.push(r);s.each(function(w){if(!g(w)){u.push(w.getAttribute("fare-family-key"));if(w.one(".prices-all")==null){r.push("soldOut")}else{if(w.hasClass("insufficient-miles")){r.push("insufficientMiles")}else{if(w.hasClass("invalid-flight")){r.push("invalidFlight")}else{r.push(w.one(".prices-all")._node.outerHTML.replace("&nbsp;"," "))}}}}});return v}function g(r){return !r.hasAttribute("fare-family-key")||r.getAttribute("fare-family-key")==="default"}function D(r){allSeatsLinks=A.all(".view-seats")._nodes;index=0;for(seatsLink in allSeatsLinks){if(allSeatsLinks[seatsLink]===r.currentTarget._node){return index}index++}return 0}function i(AH,AI,s,AC,AD,x){if(!B[h]){o(A.one("body"),AH)}var AB=B[h];if(AB){X();var AJ=A.templateHtml.flc[C];var y=[];for(var AF=0;AF<AC.length;AF++){var v=AC[AF];var r={};for(var AE=0;AE<s.length;AE++){var t=s[AE];r[t.key+"_"+t.formatter]=YAHOO.widget.DataTable.Formatter[t.formatter](v,t.key,v[t.key])}y.push(p.replaceData(r,AJ))}var u=A.templateHtml.flc[h];var AG=p.replaceData({id:AH,tableRows:y.join("")},u);AB.setBody(AG);var z=A.isCurrentLanguageRtl();var AA=z?"tr":"tl";var w=z?"br":"bl";AB.cfg.setProperty("context",[A.Node.getDOMNode(AI),w,AA,["beforeShow","windowResize"],[0,0]]);AB.show();V(AD,x,A.one(".flight-details"))}}function X(){B[h].hide()}function K(u,v){var t=A.WlSelectFlights.DataTable.selectedBasketHashRef[u];if(t!=null){for(var s in v){var r=v[s];if(r){if(r.brandedBasketHashRef&&r.brandedBasketHashRef==t){return t}}}}return null}function Z(s){e.createFareIndicatorTextOverlay(A.one("body"));var v=e.overlayContainers;if(v[d]){var t=s.currentTarget;var y=t._node.getAttribute("data-translationkey");var u=v[d];var x=A.one(u.element);var AD=x.one(".marketingOverlayContent");var AE=A.Node.create("<span wl:translate="+y+"></span>");AE.addClass("translate");AD.append(AE);AD.translate();var AC=p.node.get("id");var AA=t.get("id");var AB=YAHOO.util.Dom.getXY(AC)[0];var AG=YAHOO.util.Dom.getXY(AA)[0];var AF=p.node.get("offsetWidth");var w="tl";var r="br";var z=3;if(AG>=AB+AF/2){w="tr";r="bl";z=-z}u.cfg.setProperty("context",[AA,w,r,["beforeShow","windowResize"],[z,-23]]);f(x)}}function k(u){var t=A.getCurrentTranslations();var r=u.marketingText;var s=t[r];if(s===undefined){s=r}else{s='<span wl:translate="'+r+'" class="translate">'+s+"</span>"}return s.replace(/&apos;/g,"'")}function f(r){r.setStyle("opacity",0);r.setStyle("visibility","visible");var s=new A.Anim({node:"#"+r.get("id"),from:{opacity:0},to:{opacity:1},duration:0.3});s.run()}A.WlSelectFlights.DataTable.Formaters=A.WlSelectFlights.DataTable.Formaters||function(){A.WlSelectFlights.DataTable.CommonFormatters(n);return true}();function L(y,s){y.preventDefault();var t=y.currentTarget;var u=t.ancestor("tr").get("id");var r=s[u];var x=r.index;var z=r.direction;var w=r.data;if(!y.target.hasClass("price")&&!y.target.hasClass(G)){if(!w){if(A.Lang.isArray(x)){w=q.initData.offers[x[1]].parts[x[0]]}else{w=(z==="both"?q.initData.outbounds[x]:q.initData[z][x])}}var AA=q.compInstConfig.overlayTableColumns.split(",");var v=M(N,AA);i(z,t,v,w.segments,s,u)}}function M(s,z){var u=[];var v=[],x,r;for(r in s){var y=s[r].key;var w=A.Array.indexOf(z,y);if(w>=0){v[w]=s[r]}}for(x=0;x<=v.length;x++){if(A.Lang.isObject(v[x])){var t=u.length;u[t]=v[x]}}return u}function l(y,s){y.preventDefault();var t=y.currentTarget;var u=t.ancestor("tr").get("id");var r=s[u];var x=r.index;var AA=r.direction;var w=r.data;if(!w){if(A.Lang.isArray(x)){w=q.initData.offers[x[1]].parts[x[0]]}else{w=(AA==="both"?q.initData.outbounds[x]:q.initData[AA][x])}}var v=y.target.getAttribute("index");var AB=w.segments[v];var z=new A.widgets.OnTimePerformanceWidget(q,AB);z.show()}function S(s){if(!F||(F&&U)){var r=s.textValue?Y:O;return A.formatPrice(s,{currencyCodePosition:r,priceTemplate:"<em> {price} </em>"})}return""}e.responseSchema=function(){return E}();e.overlayColumns=function(){return N}();e.overlayResponseSchema=function(){return Q}();e.configurationColumns=function(){return a}();e.flightDetailsOverlayContainerName=function(){return h}();e.marketingTextOverlayContainerName=function(){return c}();e.fareIndicatorTextOverlayName=function(){return d}();e.compareBenefitsOverlayContainerName=function(){return P}();e.overlayContainers=function(){return B}();e.getSelectedHashRef=function(){return m[T]};e.getSelectedBasketPrice=function(){return W[T]};e.resetSelection=function(){m[T]=null;W[T]=null};e.createDataTableContainer=R;e.createOverlay=H;e.createFareIndicatorOverlay=j;e.showFlightDetailsOverlay=i;e.hideFlightDetailsOverlay=X;e.showFareIndicatorTextOverlay=Z;e.formatPrice=S;e.commonEventHandlers=function(s,t){var r=A.one(s);if(r){r=r.get("parentNode");if(q.initData.onTimePerformanceAvailable){A.delegate("click",l,r,".flight-number",A,t);A.delegate("click",l,r,".flight-number-and-direction",A,t);A.delegate("click",L,r,".flight-number-details",A,t);V(t,null,r)}else{A.delegate("click",L,r,".flight-number",A,t);A.delegate("click",L,r,".flight-number-and-direction",A,t);V(t,null,r)}}e.createAdvisorsSuccessHandler=function u(y,x,z,w){return function v(AJ,AC){var AD="flight-advisory-"+w+"-row";var AI=A.one("#"+AD);var AG=w+"-selected-with-advisors";var AF=A.all("."+AG);AF.each(function(AM){AM.removeClass(AG)});if(AI){AI.remove(false)}var AE=AC.partials;if(AE){var AH=AE[z];if(AH.length>0){var AA=A.one("#"+y);var AB=AA.one("div");AB.addClass(AG);var AL=document.createElement("tr");AL.id=AD;var AK=document.createElement("td");AK.colSpan=1000;AK.innerHTML=A.decodeHtmlEntities(AH);AL.appendChild(AK);x.insert(AL,"after")}}}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-multicity",function(A){A.WlSelectFlights.DataTable.Multicity=function(C,K,P){var H=this;A.augment(H,A.WlSelectFlights.DataTable.Common,false,null,[C,K,P]);var I="__flightAdvisorOutboundRow";var T=H.fareIndicatorTextOverlayName;var M=H.overlayContainers;var L;var F=0;var R=[];var N=H.responseSchema;var G=C.compInstConfig.bundledAndMulticityTablesColumns.split(",");A.Array.each(G,function(V,U){G[U]=A.Lang.trim(G[U])});function E(U){return H.createDataTableContainer(U,P,function(V,W){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(V);A.delegate("click",D,V,"td.multicityPrice",A,W);H.commonEventHandlers(V,W);B()})}H.applyEvents=function(W){var U=E(W);var V=C.initData.offers;S(V,U);K.getDomEvents()};function S(Z,W){var Y,U=Z.length;for(Y=0;Y<U;Y++){A.WlSelectFlights.DataTable.EventHandlers.storeData(W,"td-"+Y,{index:[0,Y,Z.dynamicState],basketHashRef:Z[Y].basketHashRef,price:Z[Y].offerPrice});var a=Z[Y].parts;for(var X=0,V=a.length;X<V;X++){A.WlSelectFlights.DataTable.EventHandlers.storeData(W,"tr-"+Y+"-"+X,{index:Y,direction:P,data:a[X]})}}}function Q(X){var b=[],Z,W,V;for(W in X.offers){if(W>0){b[b.length]={}}var c=X.offers[W];var a=true;for(Z in c.parts){var Y=c.parts[Z];var U=b.length;b[U]={};for(V in Y.itineraryPartData){b[U][V]=Y.itineraryPartData[V]}if(a===true){b[U].pricePerPerson={basketHashRef:c.basketHashRef,price:c.offerPrice,discountApplied:c.discountApplied,negotiatedFare:c.negotiatedFare,moreMilesRequired:c.moreMilesRequired,seatsRemaining:c.seatsRemaining,disabled:c.disabled};a=false}b[U].index=[Z,W,X.dynamicState]}R[W]=c.parts.length}return b}function J(){A.all("tr.rest td.yui-dt-col-pricePerPerson").remove();A.all("tr.first td.yui-dt-col-pricePerPerson").each(function(V,U){V.setAttribute("rowspan",R[U]||1)})}function B(){var U=A.all(".price-cell");U.each(function(W){var X=W.one(".content-holder");var V=W.get("offsetHeight");X.setStyle("height",V)})}H.hideFareIndicatorTextOverlay=function(U){if(M[T]){M[T].destroy(true)}};H.createFareIndicatorTextOverlay=function(U){H.createFareIndicatorOverlay(U,"fareIndicator",T,"-marketingTextDetails")};H.showCompareBenefitsOverlay=function(W,V){if(!M[_compareBenefitsOverlayContainerName]){H.createCompareBenefitsOverlay(A.one("body"),V)}W.preventDefault();A.log("show compare benefits");if(M[_compareBenefitsOverlayContainerName]){var U=M[_compareBenefitsOverlayContainerName];U.cfg.setProperty("fixedcenter",true);U.cfg.setProperty("modal",true);U.show()}};function D(a,U){var X=a.currentTarget;var W=X.get("id");var d=U[W];var c=d.basketHashRef;var Y=d.price;var Z=d.index;var V=C.initData.offers[Z[1]];a.stopImmediatePropagation();var b=X.one("input");if(!b){return }b.set("checked",true);K.showProgressOnSelectFlights();C.initData.multicitySelectedBasketHash=c;A.WlSelectFlights.DataTable.selectedBasketHashRef.bundled=c;A.WlSelectFlights.DataTable.selectedBasketPrice.bundled=Y;O(W,d);K.flightWasSelected("multicity",V.parts,c)}function O(W,Y){var X="outbound";var V=I;var c=A.one("#"+W).ancestor();var U=c.next(".emptyTableRow");var a=U==null?a=c.ancestor().one("> tr:last-of-type"):a=U.previous();var b="flight-advisory-"+X+"-row";a=a.getAttribute("id")==b?a.previous():a;var Z={data:{basketHashRefs:[Y.basketHashRef],direction:X,requestPartials:[V]},on:{success:H.createAdvisorsSuccessHandler(W,a,V,X)}};K.fireEvent("to-ajax",{cfg:Z,actionCode:"getAdvisors"})}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-lazy",function(A){A.WlSelectFlights.DataTable.Lazy=function(B,M,V,E){var J=this;var N;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[B,M,V]);var X=J.fareIndicatorTextOverlayName;var D="__lazyViewWrapperInbounds";var L="__flightAdvisorOutboundRow";var W="__flightAdvisorInboundRow";var I=E.lazyStep;var K=B.initData.selectedParts[I];var F=0;var P=J.responseSchema;var O=J.overlayContainers;P.fields.push("step","pricePerPerson");var H=B.compInstConfig.tableColumns.split(",");A.Array.each(H,function(Z,Y){H[Y]=A.Lang.trim(H[Y])});function C(Y){return J.createDataTableContainer(Y,V,function(Z,a){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(Z);A.delegate("click",R,Z,"td.lazyPrice",A,a);J.commonEventHandlers(Z,a)})}J.applyEvents=function(a,Z){var Y=C(a);T(Z,Y);M.getDomEvents()};J.destroy=function(){if(N){var Y=A.one(N.getContainerEl());N.destroy();N=null;Y.purge(true);Y.remove()}};J.getSelectedHashRef=function(){return K};J.resetSelection=function(){K=null};J.createFareIndicatorTextOverlay=function(Y){J.createFareIndicatorOverlay(Y,"fareIndicator",X,"-marketingTextDetails")};J.hideFareIndicatorTextOverlay=function(Y){if(O[X]){O[X].destroy(true)}};function T(b,Z){var d=b;var a,Y=d.length;for(a=0;a<Y;a++){var c={departureDate:d[a].itineraryPart.itineraryPartData.departureDate,segments:d[a].itineraryPart.segments,fareIndicators:d[a].itineraryPart.fareIndicators};A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"td-lazy-"+I+"-"+a,{step:I,index:a,brandedBasketHashRef:d[a].basketHashRef,offerHashCode:d[a].offerHashCode,itineraryData:c,price:d[a].minPrice});A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"tr-lazy-"+I+"-"+a,{index:a,direction:V,data:c})}}function U(d){var b=[],a,Z;for(a in d){var c=d[a];var Y=b.length;b[Y]=b[Y]||{};for(Z in c.itineraryPart.itineraryPartData){b[Y][Z]=c.itineraryPart.itineraryPartData[Z]}b[Y].pricePerPerson={basketHashRef:c.basketHashRef,offerHashCode:c.offerHashCode,price:c.minPrice,discountApplied:c.discountApplied,negotiatedFare:c.negotiatedFare,moreMilesRequired:c.moreMilesRequired,seatsRemaining:c.seatsRemaining,disabled:c.disabled,itineraryData:{departureDate:c.itineraryPart.itineraryPartData.departureDate,segments:c.itineraryPart.segments}};b[Y].index=a}return b}function R(c,Y){c.stopImmediatePropagation();var a=c.currentTarget;var d=a.one("input");if(!d||d.get("disabled")){return }d.set("checked",true);var Z=a.get("id");var h=Y[Z];var f=h.brandedBasketHashRef;var g=h.offerHashCode;K=g;M.showProgressOnSelectFlights();M.fireEvent("lazy-flight-selection",{data:{step:h.step,index:h.index,selectedHashRef:f,offerHashCode:g,itinerary:h.itineraryData}});if(!f&&g&&M.rendered){M.showProgressOnSelectFlights();var b={data:{basketHashRefs:[g],requestPartials:[D]},on:{success:S}};M.fireEvent("to-ajax",{cfg:b,actionCode:"itineraryPartSelected"})}Q(Z,h);M.unblockSubmitIfFlightsSelected()}function Q(c,Z){var b=Z.step==1?"inbound":"outbound";var d=Z.step==1?W:L;var a=A.one("#"+c).ancestor();var Y={data:{step:Z.step,offerIndex:Z.index,requestPartials:[d]},on:{success:J.createAdvisorsSuccessHandler(c,a,d,b)}};M.fireEvent("to-ajax",{cfg:Y,actionCode:"getAdvisors"})}function G(Z,Y){return Z==="both"?B.initData.outbounds[Y]:B.initData[Z][Y]}var S=function(c,a){var b=a.partials;if(b){var Z=b[D];var Y=M.node.one("#lazy"+(I+1));if(Y){Y.set("innerHTML",A.decodeHtmlEntities(Z));M.renderLazySelectFlights(I+1,a.model.offers);M.hideProgressOnSelectFlights()}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable",function(A){A.WlSelectFlights.DataTable.Regular=function(C,N,Y){var J=this;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[C,N,Y]);var O;var R="";var f="_compareBenefitsOverlayTableHeaderCell";var E="_compareBenefitsOverlayTableCell";var d="_compareBenefitsOverlayTable";var K="__flightAdvisorOutboundRow";var a="__flightAdvisorInboundRow";var I=J.marketingTextOverlayContainerName;var T=J.compareBenefitsOverlayContainerName;var g=J.fareIndicatorTextOverlayName;var P=J.overlayContainers;var B=null;var Z=null;function D(h){return J.createDataTableContainer(h,Y,function(i,j){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(i);A.delegate("click",F,i,"td.price",A,j);J.commonEventHandlers(i,j)})}J.applyEvents=function(i){R=D(i);var h=C.initData[Y]||C.initData.outbounds;var j=C.initData[Y+"FareFamilies"]||C.initData.outboundsFareFamilies;e(h,j,R);N.fire("widget-rendered",Y)};J.translateBrands=function(h){if(C.compInstConfig.brandedDescriptionEnabled){var i=C.initData[Y+"FareFamilies"]||C.initData.outboundsFareFamilies;A.Array.each(i,function(l){var k=U(l.brandLabel);if(k){var j=h.one(".translate-brand-name-"+l.brandId);j.setContent(k)}})}};J.showTableMessage=function(h,i){O.showTableMessage(h,i)};J.getRow=function(h){return O.getTrEl(h)};function e(o,q,j){var m,p,k=o.length,h=q.length;for(m=0;m<k;m++){A.WlSelectFlights.DataTable.EventHandlers.storeData(j,"tr-"+Y+"-"+m,{index:m,direction:Y,data:o[m]});for(p=0;p<h;p++){var l=q[p].brandId;A.WlSelectFlights.DataTable.EventHandlers.storeData(j,Y+"-"+l,{ffKey:l});if(o[m].basketsRef[l]&&!H(o[m].basketsRef[l].brandedBasketHashRef)){A.WlSelectFlights.DataTable.EventHandlers.storeData(j,"td-"+Y+"-"+l+"-"+m,{fareFamily:l,index:m,direction:Y,brandedBasketHashRef:o[m].basketsRef[l].brandedBasketHashRef,price:o[m].basketsRef[l].prices})}}}}function H(i){var h=N.getValidBasketRefs(Y);return A.Lang.isArray(h)&&A.Array.indexOf(h,i)===-1}function M(s){var t=P[T];var k=C.initData[s+"FareFamilies"]||C.initData.outboundsFareFamilies;var m=A.templateHtml.flc[f];var v=A.templateHtml.flc[E];var l=A.templateHtml.flc[d];var n=[];var p=[],o;for(o=0;o<k.length;o++){var u=U(X(k[o].marketingTexts));if(u!=""){var q={key:k[o].brandId,label:U(k[o].brandLabel),text:u};n.push(N.replaceData(q,m));p.push(N.replaceData(q,v))}}if(A.Object.size(p)>0){var r=N.replaceData({tableHeader:n.join(""),tableRow:p.join("")},l);A.one("#"+s+"-compareBenefitsOverlayTable").set("innerHTML",r);if(A.UA.ie>0){var h=A.one(t.element).one("table").getComputedStyle("width");h=parseInt(h,10);var j=A.one(t.element).get("winWidth");h=h>j*0.9?j*0.9:h;t.cfg.setProperty("width",h)}t.fireEvent("changeContent")}else{if(A.UA.ie>0){t.cfg.setProperty("width","0px")}}}function F(m,h){if(m.target.get("nodeName")==="LABEL"){return }m.stopImmediatePropagation();var i=m.currentTarget;var k=i.one("input");if(!k||k.get("disabled")){return }k.set("checked",true);var l=i.get("id");var j=h[l];W(l,j);Q(l,j)}J.updateDataTableFromSelectedBasketHash=function(l,n,m){var j="#"+n+m;var i=l.one(j);if(i){var h=i.ancestor("td").get("id");var k=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+n,h);C.initData[n+"SelectedBasketHash"]=m;A.WlSelectFlights.DataTable.selectedBasketHashRef[n]=m;A.WlSelectFlights.DataTable.selectedBasketPrice[n]=k.price}};J.reselectFlights=function(l,o,m,n){var j="#"+o+m;var i=l.one(j);if(i){var h=i.ancestor("td").get("id");var k=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+o,h);if(L(k.price,n)){i.set("checked",true);W(h,k)}else{i.set("checked",false)}}};function L(i,h){return A.JSON.stringify(i)===A.JSON.stringify(h)}function W(h,p){var l=p.brandedBasketHashRef;var i=p.price;var k=p.direction;var j=p.index;var m=p.fareFamily;var n=G(k,j);N.showProgressOnSelectFlights();C.initData[k+"SelectedBasketHash"]=l;A.WlSelectFlights.DataTable.selectedBasketHashRef[k]=l;A.WlSelectFlights.DataTable.selectedBasketPrice[k]=i;var o=A.merge(n,{fareFamily:m,price:i,departureDate:n.itineraryPartData.departureDate});N.flightWasSelected(k,o,l)}function Q(l,i){var k=i.direction=="inbounds"?"inbound":"outbound";var m=i.direction=="inbounds"?a:K;var j=A.one("#"+l).ancestor();var h={data:{basketHashRefs:[i.brandedBasketHashRef],direction:i.direction,requestPartials:[m]},on:{success:J.createAdvisorsSuccessHandler(l,j,m,k)}};N.fireEvent("to-ajax",{cfg:h,actionCode:"getAdvisors"})}function G(i,h){return i==="both"?C.initData.outbounds[h]:C.initData[i][h]}function X(k){var h=[],j;for(j=0;j<k.length;j++){var m=k[j].languageId;var l=k[j].marketingText;h.push({languageId:m,marketingText:A.decodeHtmlEntities(l)})}return h}function c(k){var j=A.getCurrentTranslations();var h=k.marketingText;var i=j[h];if(i===undefined){i=h}else{i='<span wl:translate="'+h+'" class="translate">'+i+"</span>"}return i.replace(/&apos;/g,"'")}function U(j){var i=A.translations.lang;i=i.toLowerCase();var h="";if(j&&A.Lang.isArray(j)){A.Array.some(j,function(k){if(i===k.languageId.toLowerCase()){h=c(k);return true}})}return h}function V(j){var i=A.translations.lang;i=i.toLowerCase();var h="";if(j&&A.Lang.isArray(j)){A.Array.some(j,function(k){if(i===k.languageId.toLowerCase()){h=k.brandLabelUrl;return true}})}return h}function S(k,j){var o=k.pageX;var m=k.pageY;j=A.one(j);var l=j.get("region").top;var n=j.get("region").bottom;var i=j.get("region").left;var h=j.get("region").right;return o>i&&o<h&&m>l&&m<n}function b(h){if(h){h.cancel()}}J.createMarketingTextOverlay=function(i,j){J.createOverlay(i,j,I,"-marketingTextDetails");var h=i.one("#"+j+"-compare-benefits-link");if(h){h.on("click",J.showCompareBenefitsOverlay,A,j)}A.on("load",function(l){var k=l.target.get("parentNode");k.removeClass("loading");k.removeClass("loading-iframe");l.target.removeClass("hidden")},".marketing-iframe")};J.createFareIndicatorTextOverlay=function(h){J.createFareIndicatorOverlay(h,"fareIndicator",g,"-marketingTextDetails")};J.createCompareBenefitsOverlay=function(h,i){J.createOverlay(h,i,T,"-compareBenefitsDetails");M(i);A.on("click",J.hideCompareBenefitsOverlay,"#"+i+"-close-compare-benefits")};J.getColumnKeyByHeader=function(h){return O.getColumn(A.Node.getDOMNode(h)).getKey()};J.getStoredColumnKey=function(h){var i=A.WlSelectFlights.DataTable.EventHandlers.getStoredData(R,h.get("id"));return i&&i.ffKey};J.showMarketingTextOverlay=function(n,q,k,p){if(!P[I]){J.createMarketingTextOverlay(A.one("body"),p)}if(P[I]){var i=P[I];var m=A.one(i.element);if(k==="hover"){A.on("marketingTextMessage|mouseout",J.hideMarketingTextOverlayIfNotInOverlayRegion,m)}if(q){if(C.compInstConfig.contentFromUrl){var j=m.one(".marketing-iframe");j.addClass("hidden");var l=j.get("parentNode");l.addClass("loading loading-iframe");j.set("src",V(q.brandLabel).replace(/&amp;/g,"&"))}else{var h=m.one(".marketingOverlayHeader");var o=m.one(".marketingOverlayText");h.set("innerHTML",U(q.brandLabel));o.set("innerHTML",U(X(q.marketingTexts)));A.translateNode(m)}i.cfg.setProperty("context",[n.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[0,-10]]);i.show()}}};J.showMarketingTextOverlayWithDelay=function(i,k,j,h){if(i.target===i.currentTarget||!i.currentTarget.contains(i.relatedTarget)){b(B);b(Z);Z=A.later(300,null,J.showMarketingTextOverlay,[i,k,j,h])}};J.hideMarketingTextOverlay=function(h){if(P[I]){P[I].hide()}};J.hideFareIndicatorTextOverlay=function(h){if(P[g]){P[g].destroy(true)}};J.hideMarketingTextOverlayIfNotInOverlayRegion=function(h){if(!h.currentTarget.contains(h.relatedTarget)){b(B);b(Z);B=A.later(100,null,function(i){if(P[I]&&!S(i,P[I].element)){J.hideMarketingTextOverlay()}},h)}};J.showCompareBenefitsOverlay=function(j,i){if(!P[T]){J.createCompareBenefitsOverlay(A.one("body"),i)}j.preventDefault();A.log("show compare benefits");if(P[T]){var h=P[T];h.cfg.setProperty("fixedcenter",true);h.cfg.setProperty("modal",true);h.show()}};J.hideCompareBenefitsOverlay=function(h){if(P[T]){P[T].hide()}}}},"1.0.0",{requires:[]});YUI.add("onTimePerformanceWidget",function(B){var A=function(E,R){var L=this;var H=B.one("body");var C="onTimePerformance";var M;if(E.otpDialog){E.otpDialog.hide();E.otpDialog.destroy()}var G=sabre.config.satConfiguration.onTimePerformanceConfiguration;var N="_onTimePerformanceOverlay";var D=G.width;var Q=G.height;var O=P();var F={visible:false,draggable:false,zIndex:520,close:true,fixedcenter:true};if(G.displayInNewWindow){window.open(O,"FlightPerformance","width="+D+", height="+Q)}else{var J={link:O,width:D,height:Q};var I=E.component.getPartial(N,J);H.append(I);M=new YAHOO.widget.Dialog(C,F);var K=true;M.showEvent.subscribe(function(){B.one(this.element).translate();B.on(C+"|click",function(U){if(K){K=false}else{var T=U.target;if(!T.inRegion(M.element,true)){M.hide()}}},document)});M.hideEvent.subscribe(function(){B.detach(C+"|click");K=true});M.render(document.body);E.otpDialog=M}function P(){var V=B.DataType.Date.parse(R.departureDate);var T={flightNumber:R.flightNumber[0],origin:R.departureCode,destination:R.arrivalCode,departureDate:S(V,G.dateFormat),departureTime:S(V,G.timeFormat)};var U=B.decodeHtmlEntities(G.url);return E.component.replaceData(T,U)}function S(T,U){return B.DataType.Date.format(T,{format:U})||null}L.show=function(){M.show()}};B.widgets=B.widgets||{};B.widgets.OnTimePerformanceWidget=A},"1.0.0",{requires:[]});YUI.add("wl-flc",function(A){A.components.Flc=function(AG){var b=this;var N={};var Aa;var T;var S;var Ab=AG.compInstConfig;AG.state=AG.initData.dynamicState||"oneway";var l,c;AO();var O,F,AS,m,AU,G,I,e,y,AN;var AR;b.onCreate=function(){i(AG.initData);X(AG,b.node,function(){D();AQ()});AE()};function Ac(){A.Object.each(N,Af)}function Af(Ag){if(!Ag){return }if(P(Ag)){return }var Ai=Ag.direction;if(Ai==="both"){Ai="outbounds"}var Ah;if(Ai==="outbounds"){Ah=O.outboundsSelectedBasketHash}else{if(Ai==="inbounds"){Ah=O.inboundsSelectedBasketHash}}if(Ah){Ag.updateDataTableFromSelectedBasketHash(Ah)}}b.onRenderState={async:function(){},oneway:function(){x();s();AK();AA();AC()},multicity:function(){AA();AC();s()},bundled:function(){AC();s()},unbundled:function(){x();s();AK();AA();AC()},exchange:function(){x();AK();AC()},lazy:function(){AA();s();AC()}};function z(){if(AG.state==="lazy"&&N[1]){delete N[1]}}b.incomingEvents={refresh_list:function(Ag){if(AG.state==="unbundled"){AF(Ag)}else{b.hideProgressOnSelectFlights()}AQ()},reset_selection:function(Ag){z();d(AW);h();AQ()},refresh_lazy_flc:function(Ag){var Ah=Ag.data.selectedHashRefs;V(Ah);AQ()},"ff-logged-in":function(Ah){var Ag=Ah.data&&Ah.data.forceRedemptionFaresReload;if(Ag||(AG.initData.airSearchCriteria.awardBooking&&!AG.initData.invalidRedemptionFaresDisabled)){AG.initData.invalidRedemptionFaresDisabled=true;M()}b.fireEvent("unblock_submit",{type:"login"})},"logged-out":function(Ag){if(AG.initData.airSearchCriteria.awardBooking){AG.initData.invalidRedemptionFaresDisabled=false;b.fireEvent("block_submit",{type:"login"})}},"block-list":function(Ag){b.showProgressOnSelectFlights()},refresh_search:function(Ag){d(n);AZ();AQ()},change_lang:function(Ag){d(AL)},cart_cleared:function(Ag){if(AG.initData.airSearchCriteria.journey==="ROUND_TRIP"){L(T);L(S)}}};b.on("widget-rendered",function(Ah){N[Ah].rendered=true;var Ag=true;for(var Ai in N){if(!N[Ai].rendered){Ag=false}}if(Ag){Ac();b.getDomEvents()}});function AE(){A.on("pageHtmlLoaded",function(){b.node.all(".enable-when-pageHtmlLoaded").each(function(Ag){Ag.set("disabled","")})})}function AO(){var Ag=365;var Ai=new Date(sabre.config.global.currentTimeInMillis);Ai=Ai.getTime()-(Ai.getTime()%(1000*60*60*24))+1000*60*Ai.getTimezoneOffset();l=A.DataType.Date.parse(Ai);var Ah=new Date(sabre.config.global.currentTimeInMillis);Ah=Ah.getTime()-(Ah.getTime()%(1000*60*60*24));Ah=A.DataType.Date.parse(Ah);Ah=Ah.setDate(Ah.getDate()+Ag);c=A.DataType.Date.parse(Ah)}function i(Ag){AG.initData=Ag;O=Ag;F=O.inboundCalendarPrices||[];AS=O.outboundCalendarPrices||[];m=O.offers||[];AU=O.flightExchanged;G=O.invalidPassengerType;I=O.outbounds||[];e=O.inbounds||[];y=F.length&&AS.length;AN=O.airSearchCriteria.itineraryAirportPairs.length}function AC(){b.node.all(".filter_sort").on("change",AY);b.node.all(".filter-checkbox").on("click",U)}function AD(Ag){if(Ag.indexOf("inbounds")===0){return"inbounds"}else{if(Ag.indexOf("outbounds")===0){return"outbounds"}else{return"multicity"}}}function J(Ag){return Ag==="outbounds"?0:1}function AY(Am){Am.stopImmediatePropagation();var Al=Am.currentTarget.get("offsetParent");Al.addClass("loading");var Ah=Am.currentTarget.get("id");var An=Am.currentTarget.get("value");var Ak=AD(Ah);var Aj=J(Ak);var Ai=k(AG.state,Ak);var Ag={data:{direction:Ak,sortOption:An,requestPartials:[Ai]},on:{end:function(){Al.removeClass("loading")},success:function(Ap,Ao){r(Aj,Ao,Ai)}}};b.fireEvent("to-ajax",{cfg:Ag,actionCode:"sortFlights"})}function U(Am){Am.stopImmediatePropagation();var Al=Am.currentTarget.get("offsetParent");Al.addClass("loading");var Ah=Am.target.get("id");var Ak=AD(Ah);var Aj=J(Ak);var Ai=k(AG.state,Ak);var Ag={data:{direction:Ak,nonStop:Am.target.get("checked"),requestPartials:[Ai]},on:{end:function(){Al.removeClass("loading")},success:function(Ao,An){r(Aj,An,Ai)}}};b.fireEvent("to-ajax",{cfg:Ag,actionCode:"filterChanged"})}function V(Ag){AR=Ag.length;C(b.node,AR,O.offers,Ag);d(f)}function AW(Ag){Ag.resetSelection()}function p(Ah,Ag){b.fireEvent("render_retained",{data:{node:Ah,label:Ag}})}function AQ(){var Ag=sabre.config.satConfiguration.frequentFlyer.loyaltyProviderString=="CONVERSION_LOGIC";if(Ag&&O.awardBooking&&!O.conversionRatesFound){b.fireEvent("add-messages",{data:{messages:[{id:"noConversionRatesFound",level:"warn"}]}});b.fireEvent("modify_search",{forceInitialize:true})}else{b.fireEvent("remove-messages",{data:{messages:["noConversionRatesFound"]}})}}function AJ(Ah){var Ag=["ffInsufficientMiles","ffInsufficientMilesPartial"];b.fireEvent("remove-messages",{data:{messages:Ag}});if(null!==Ah&&-1!==A.Array.indexOf(Ag,Ah.id)){b.fireEvent("add-messages",{data:{messages:[Ah]}})}}function AB(Ai,Aj,Ag,Ah){if(asyncExec.containsTimeoutError()){u();Y("timeout")}else{if(Ah.errorUrl){window.location.href=A.decodeHtmlEntities(Ah.errorUrl)}else{if(Ah.model){i(Ah.model);Ai.state=Ai.initData.dynamicState||"oneway";X(Ai,Aj,Ag);AJ(Ah.insufficientMilesMessage)}}}}function u(){b.getDomEvents()}function X(Ah,Ai,Ag){switch(Ah.state){case"async":if(asyncExec.results){AB(Ah,Ai,Ag,asyncExec.results)}else{asyncExec.callback=function(Aj){AB(Ah,Ai,Ag,Aj)}}break;case"exchange":A.use("wl-select-flights-datatable",function(An){b.flightList=new An.WlFlightList(Ah,b);var Aj=Ai.get("parentNode");var Ao=An.Node.create('<div id="retained-leg"></div>');if(Ah.initData.retainInbound){Aa=new An.WlSelectFlights(Ah,Ai,"outbounds",b,{isFlightExchanged:AU});N.outbounds=Aa;Aa.setFirstActiveDate(l);if(Ah.initData.inbounds[0]&&Ah.initData.inbounds[0].segments[0]){var Am=An.DataType.Date.parse(Ah.initData.inbounds[0].segments[0].departureDate);Aa.setLastActiveDate(Am)}Aj.append(Ao);p(Ao,"retained.inbound")}else{Aj.prepend(Ao);p(Ao,"retained.outbound");var Al=An.DataType.Date.parse(Ah.initData.outbounds[0].segments[0].departureDate);Aa=new An.WlSelectFlights(Ah,Ai,"inbounds",b,{isFlightExchanged:AU});N.inbounds=Aa;var Ak=(Al<l)?l:Al;Aa.setFirstActiveDate(Ak);Aa.setLastActiveDate(c)}Ag();Aa.renderHtml(Ah.initData)});break;case"unbundled":A.use("wl-select-flights-datatable",function(Al){b.flightList=new Al.WlFlightList(Ah,b);T=new Al.WlSelectFlights(Ah,Ai,"outbounds",b,{isFlightExchanged:AU});S=new Al.WlSelectFlights(Ah,Ai,"inbounds",b,{isFlightExchanged:AU});N.outbounds=T;N.inbounds=S;var Ak=Al.DataType.Date.parse(Ah.initData.airSearchCriteria.inboundDate);N.outbounds.setLastActiveDate(Ak);var Aj=Al.DataType.Date.parse(Ah.initData.airSearchCriteria.outboundDate);N.inbounds.setFirstActiveDate(Aj);N.outbounds.setFirstActiveDate(l);N.inbounds.setLastActiveDate(c);Ag();N.outbounds.renderHtml(Ah.initData);N.inbounds.renderHtml(Ah.initData)});break;case"multicity":case"bundled":A.use("wl-select-flights-datatable-multicity",function(Aj){Ai.addClass("flights-multi");b.flightList=new Aj.WlFlightList.Bundled(Ah,b,Ah.state);Aa=new Aj.WlSelectFlights(Ah,Ai,Ah.state,b,{isFlightExchanged:AU});N[Ah.state]=Aa;Ag();Aa.renderHtml(Ah.initData)});break;case"lazy":A.use("wl-select-flights-datatable-lazy",function(Aj){Ai.addClass("flights-lazy");b.flightList=new Aj.WlFlightList.Lazy(Ah,b,"lazy");AP(Ah.initData.selectedParts,Ai);Ag()});break;default:A.use("wl-select-flights-datatable",function(Aj){b.flightList=new Aj.WlFlightList(Ah,b);Aa=new Aj.WlSelectFlights(Ah,Ai,"both",b,{isFlightExchanged:AU});N.both=Aa;Ag();Aa.renderHtml(Ah.initData)});break}}function AP(Ah,Ag){A.use("wl-select-flights-datatable-lazy",function(Aj){var Ai;for(Ai=0;Ai<=AN;Ai++){AR=Ai;if(AR==0||Ah[AR]){C(Ag,Ai,AG.initData.offers,Ah)}}})}function C(Aj,Ai,Ah,Ak){var Ag=Ak.slice(0,Ai);N[Ai]=new A.WlSelectFlights(AG,Aj,"lazy"+Ai,b,{isFlightExchanged:AU,lazyStep:Ai,hashCodesPath:Ag});b.renderLazySelectFlights(Ai,Ah)}b.renderLazySelectFlights=function(Ah,Ag){N[Ah].renderHtml(Ag[Ah]||[])};function x(){d(a);AK()}function s(){d(AI)}b.showProgressOnSelectFlights=function(){d(n)};b.hideProgressOnSelectFlights=function(){d(f)};b.unblockSubmitIfFlightsSelected=function(){AA()};b.flightWasSelected=function(Aj,Ag,Ah){var Ai=AG.state==="unbundled"?"send_value_unb":"send_value";Ae();b.fireEvent(Ai,{data:{tripType:AG.state,direction:Aj,itinerary:Ag,selectedBasketRefs:Ah}});b.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})};b.getValidBasketRefs=function(Ah){if(!AG.initData.flightExchanged||AG.state==="unbundled"){var Ai,Aj,Ag;if(Ah=="outbounds"){Ai=N.inbounds.getSelectedHashRef();Aj=AG.initData.brandedInOutMappings}else{if(Ah=="inbounds"){Ai=N.outbounds.getSelectedHashRef();Aj=AG.initData.brandedOutInMappings}}if(Ai){Ag=Aj[Ai]}return Ag}};function a(Ag){var Ah=AV(AG.initData);if(Ag&&Ab.brandedDescriptionEnabled){Ag.getNode().all("th.price").each(function(Aj){var Ai=A.Event.getListeners(Aj);var Ak=b.rendered?AX(Ag.getStoredColumnKey(Aj),Ah):AX(Ag.getColumnKeyByHeader(Aj),Ah);if(!Ai&&Ak&&((Ak.marketingTexts&&Ak.marketingTexts.length>0)||(Ab.contentFromUrl&&Ak.brandLabel&&A.Lang.isArray(Ak.brandLabel)&&Ak.brandLabel.length>0))){if(Ab.brandedHoveringEnabled){A.on("marketingMessage|mouseover",Ag.showMarketingTextOverlayWithDelay,Aj,null,Ak,"hover");A.on("marketingMessage|mouseout",Ag.hideMarketingTextOverlayIfNotInOverlayRegion,Aj)}else{if(Ab.brandedClickingEnabled){A.on("marketingMessage|click",Ag.showMarketingTextOverlay,Aj,null,Ak,"click")}}}})}}function AI(Ag){var Ah=Ag.getNode();Ah.delegate("mouseover",Ag.showFareIndicatorTextOverlay,".fare-indicator-row");Ah.delegate("mouseout",Ag.hideFareIndicatorTextOverlay,".fare-indicator-row")}function AV(Ag){var Ah=[];W(Ah,Ag.outboundsFareFamilies);W(Ah,Ag.inboundsFareFamilies);return Ah}function W(Ah,Ak){var Ag;if(Ak){for(Ag in Ak){var Aj=Ak[Ag].brandId;var Ai=AX(Aj,Ah)!=null;if(!Ai){Ah.push(Ak[Ag])}}}}function AX(Ai,Ah){var Ag;for(Ag in Ah){if(Ah[Ag].brandId===Ai){return Ah[Ag]}}return null}function AL(Ag){Ag.translateBrands()}function n(Ag){Ag.showProgress()}function f(Ag){Ag.hideProgress()}function AM(Ag){Ag.disablePrev7AndNext7Buttons()}function v(){var Ah;var Ag;if(AG.state==="unbundled"){Ah=T.getCurrentDate();Ag=S.getCurrentDate()}else{if(AG.state==="exchange"){if(AG.initData.retainInbound){Ah=Aa.getCurrentDate();Ag=A.DataType.Date.parse(AG.initData.inbounds[0].segments[0].departureDate)}else{Ah=Aa.getCurrentDate();Ag=A.DataType.Date.parse(AG.initData.outbounds[0].segments[0].departureDate)}}else{Ah=Aa.getCurrentDate();Ag=null}}return{departureDate:Q(Ah),returnDate:Q(Ag)}}function K(Aj){var Ai=v();var Ah=function(Al,Ak){i(Ak.model);if(AG.initData.airSearchCriteria.journey==="ROUND_TRIP"){if(!AG.initData.flightExchanged||AG.state==="unbundled"){T.setLastActiveDate(S.getCurrentDate());S.setFirstActiveDate(T.getCurrentDate())}}D();Ad(Ak);R();b.translateTemplate(AG,b.node);E(Ai);AJ(Ak.insufficientMilesMessage);b.fireEvent("search_refreshed")};var Ag=B(o(),Aj);AH(Ai,Ag,Ah)}function L(Ah){if(Ah){var Ai=P(Ah);var Ag=Ah.getSelectedBasketPrice();if(Ai&&Ag){Ah.reselectFlights(Ai,Ag)}}}function B(Ag,Ah){if("outbounds"===Ah){Ag[0]=null}else{if("inbounds"===Ah){Ag[1]=null}}return Ag}b.handleDateChange=function(Ag){R();d(n);d(AM);K(Ag)};function k(Ai,Ah){var Ag="__"+Ai;if(Ai=="lazy"){if(Ah=="inbounds"){Ag="__lazyViewWrapperInbounds"}else{Ag="__lazyViewWrapperOutbound"}}return Ag}function r(Al,Ai,Aj){AG.initData=Ai.model;i(AG.initData);var Ak=Ai.partials;if(Ak){var Ah=Ak[Aj];if(AG.state==="lazy"){var Ag=b.node.one("#lazy"+(Al));if(Ag){Ag.set("innerHTML",A.decodeHtmlEntities(Ah))}b.renderLazySelectFlights(Al,Ai.model.offers)}else{Ad(Ai,Aj)}}}b.handleDatesPeriodChange=function(Ag){R();d(n);d(AM);K(Ag)};function Ad(Ag,Ah){Ah=Ah||k(AG.state);b.node.purge(true);b.node.setContent(A.decodeHtmlEntities(Ag.partials[Ah]));d(function(Ai){Ai.renderHtml(AG.initData)});b.hideProgressOnSelectFlights()}function Q(Ag){return A.DataType.Date.format(Ag,{format:sabre.config.dateTimeJSONFormat})||null}function AH(Ak,Ah,Aj){var Ai=k(AG.state);var Ag={data:{basketHashRefs:Ah,departureDate:Ak.departureDate,returnDate:Ak.returnDate,requestPartials:[Ai]},on:{success:Aj,end:function(){b.hideProgressOnSelectFlights()}}};b.fireEvent("to-ajax",{cfg:Ag,actionCode:"dateChanged"})}function E(Ai){var Ah=AG.initData.airSearchCriteria.itineraryAirportPairs;var Aj=[];for(var Ag=0;Ag<Ah.length;Ag++){Aj.push({departureAirport:Ah[Ag].departureCode,arrivalAirport:Ah[Ag].arrivalCode,date:Ag===0?Ai.departureDate:Ai.returnDate})}b.fireEvent("update-data",{data:{itineraryParts:Aj}})}function M(){R();var Ah="initialized";var Ag={data:{requestPartials:[Ah]},on:{complete:function(){d(f)},success:function(Aj,Ai){z();Z(Ai,Ah);D();if(j()){Ae()}else{b.fireEvent("search_refreshed")}}}};d(n);b.fireEvent("to-ajax",{cfg:Ag,actionCode:"updateRedemptionFares"})}function AZ(){R();var Ah="__"+AG.state;var Ag={data:{requestPartials:[Ah]},on:{complete:function(){d(f)},success:function(Aj,Ai){AG.initData=Ai.model;Z(Ai,Ah);D();d(AA);b.fireEvent("search_refreshed")}}};b.fireEvent("to-ajax",{cfg:Ag,actionCode:"refreshSearch"})}function R(){b.fireEvent("block_submit")}function AA(){if(j()){Ae()}}function j(){var Ag=true;A.Object.each(N,function(Ah){if(!P(Ah)){Ag=false}});return Ag}function P(Ag){return Ag.getSelectedHashRef()}function q(Ag){return Ag.getSelectedBasketPrice()}function Ae(){b.fireEvent("unblock_submit",{data:{},forceInitialize:true})}function D(){if(t()||AT()){return }var Ag=(F&&F.length)||false;var Ai=(AS&&AS.length)||false;var Ah=I.length;var Aj=e.length;switch(AG.state){case"unbundled":if(!(Ah&&Aj)){if(!Ag&&!Ai){Y("noFlightsAvailableOverlay")}else{if(Ag&&!Ai){Y("noFlightsAvailableOverlayOutbound")}else{if(!Ag&&Ai){Y("noFlightsAvailableOverlayInbound")}}}}else{if(!(Ag&&Ai)){d(g)}}break;case"lazy":case"multicity":case"bundled":if(!m.length){Y("noFlightsAvailableOverlay");R()}break;case"oneway":if(!Ah&&!Ai){Y("noFlightsAvailableOverlay")}else{if(!Ai){d(g)}}break}}function d(Ag){var Ah=Array.prototype.slice.call(arguments,1);A.Object.each(N,function(Ai){Ag.apply(Ai,[Ai].concat(Ah))})}function g(Ag){Ag.hideAlternateDates()}function AK(){if((y&&(F.length==0||AS.length==0))||(!y&&(AS.length==0&&F.length==0))){R()}}function t(){if(G){Y("invalidPassengerType");return true}return false}function AT(){if(AG.initData.tooManyPassengerTypes){Y("tooManyPassengerTypes");return true}return false}function Y(Ag){b.fireEvent("modify_search",{errorMessage:Ag,forceInitialize:true})}function o(){var Ag=[];if(A.Lang.isObject(N.inbounds)&&A.Lang.isObject(N.outbounds)){Ag.push(N.outbounds.getSelectedHashRef());Ag.push(N.inbounds.getSelectedHashRef())}else{for(var Ah in N){Ag.push(N[Ah].getSelectedHashRef())}}return Ag}function Z(Ai,Ag){i(Ai.model);var Ah=Ai.partials;if(Ah){AG.state=AG.initData.dynamicState||"oneway";Ad(Ai,Ag)}}function H(Aj,Ai){var Ah=o();b.fireEvent("itinerary-selected",{basketHashRefs:Ah});var Ag={data:{basketHashRefs:Ah,requestPartials:[Aj]},on:{success:function(Al,Ak){Ai(Ak,Aj)}}};b.fireEvent("to-ajax",{cfg:Ag,actionCode:"itineraryPartSelected"})}function h(Ah){Ah=Ah||Z;var Ag="__"+AG.state;H(Ag,Ah)}function AF(Ah){var Ag=Ah.data.direction;if(Ag=="outbounds"){w("inbounds")}else{if(Ag=="inbounds"){w("outbounds")}}}function w(Ai){var Ah=function(An,Al){i(An.model);var Am=An.partials;if(Am){var Ak=Am[Al];var Aj=b.node.one("#"+Ai);if(Aj){Aj.set("innerHTML",A.decodeHtmlEntities(Ak));N[Ai].renderHtml(AG.initData);b.hideProgressOnSelectFlights()}}};b.showProgressOnSelectFlights();var Ag="__unbundled_"+Ai;H(Ag,Ah)}}});YUI.add("wl-customhtml",function(A){A.components.Customhtml=function(B){}});YUI.add("forgotPassword",function(C){var R=function(T,S){T.preventDefault();L(S)};var G={NOT_AVAILABLE:"notAvailable"};var N;function L(T){var V=T.component.node;var S=V.one(".username");var X="send";var Z="label.login.forgotPasswordOverlayContinue";var U=null;var a="_forgotPasswordOverlayForm";var Y;if(S){var W=S.get("value");if(W==""){Y=T.getId()||T.initData.contextId;U={forgotPasswordError:"",contextId:Y};I(V,T,a,U,{buttonText:Z,mode:X,contextId:Y},P)}else{E(W,V,T)}}}function E(W,V,T){if(O(T.component.node)){return }I(V,T,"_loading");var U={overlayPartial:"_forgotPasswordOverlaySuccess",overlayData:null,buttonText:"label.login.close",buttonMode:"close"};var S={overlayPartial:"_forgotPasswordOverlayForm",overlayData:{forgotPasswordError:"label.login.usernameError",contextId:T.getId()},buttonText:"label.login.forgotPasswordOverlayContinue",buttonMode:"send"};M(V,T,W,U,S)}function O(S){return S.hasClass("loading")}function I(V,T,c,U,a,W){var Z=T.component;var e=A(T);var X=T.getId()||T.initData.contextId;var b="";if(c=="_forgotPasswordOverlaySuccess"){b=D()}else{if(c=="_forgotPasswordOverlayForm"){b=B(T,U.forgotPasswordError)}else{if(c=="_loading"){b=F()}}}var Y=a?K(X,a.mode,a.buttonText):"";var d=C.one(e.element);d.one(".overlay-content").set("innerHTML",b);d.one(".buttons").set("innerHTML",Y);if(C.Lang.isFunction(W)){W(V,T,d)}function S(){e.show()}Z.translateTemplate(T,C.one(e.element),S)}function M(X,V,Y,Z,U){var W=V.component;var T=function(c,b){Z=U;if(!c){Z.overlayData={forgotPasswordError:"label.login.ajaxError"}}else{if(G[b]){Z.overlayData={forgotPasswordError:"label.login."+G[b]}}}var a={buttonText:Z.buttonText,mode:Z.buttonMode};I(X,V,Z.overlayPartial,Z.overlayData,a,P)};var S={data:{username:escape((Y=="")?" ":Y)},on:{success:function(b,a){var c=a.verificationResult;if(c!=="OK"){T(true,c)}else{I(X,V,Z.overlayPartial,Z.overlayData,{buttonText:Z.buttonText,mode:Z.buttonMode},Q)}},failure:T}};W.fireEvent("to-ajax",{componentType:"login",cfg:S,actionCode:"resetPassword"})}function P(V,T,U){U.detach("forgetPassw|*");C.on("forgetPassw|click",function(W){J(W,U,V,T)},U.one(".btn-send-forgotten-password"));C.on("keypress",S,U.one(".ovUsername"));function S(W){if(W.charCode===13){J(W,U,V,T)}}}function J(V,T,U,S){V.halt();var W=T.one(".ovUsername").get("value");E(W,U,S)}function A(S){var U=S.component;if(!N){U.node.append(H());var V=U.node.one(".forgotPasswordOverlay");var T=C.Node.getDOMNode(V);U.translateTemplate(S,V);N=new YAHOO.widget.Dialog(T,{width:"320px",fixedcenter:true,draggable:false,close:true,visible:false,modal:false,zIndex:10});N.render(document.body)}return N}function Q(V,S,U){var T=A(S);U.on("forgetPassw|click",function(){T.hide()},".btn-send-forgotten-password")}function D(){return'<p class="translate" wl:translate="label.login.forgotPassword"></p>'}function B(V,U){var S=V.compInstConfig.maxLength;var T=V.getId()||V.initData.contextId;return'<p class="error translate" wl:translate="'+U+'"></p><p class="translate" wl:translate="label.login.forgotPasswordOverlayDescription"></p><p><label for="ovUsername-'+T+'" class="translate" wl:translate="label.login.forgotPasswordOverlayUsername"></label> <input id="ovUsername-'+T+'" class="textfield ovUsername" type="text" name="username" maxlength="'+S+'"/></p>'}function H(){return'<div class="forgotPasswordOverlay"><div class="forgot-password-form"><div class="hd">&nbsp;</div><div class="bd"><h3 class="translate" wl:translate="label.login.forgotPasswordOverlayHeader"></h3><div class="overlay-content"></div></div><div class="ft buttons"></div><div class="clear-both" /></div></div>'}function F(){return'<p class="loadingContainer"></p>'}function K(S,U,T){return'<div class="button button-smaller align-right"><input type="button" id="btn-send-forgotten-password-'+S+'" class="translate '+U+' btn-send-forgotten-password" wl:translate="'+T+'"/></div>'}C.widgets=C.widgets||{};C.widgets.ForgotPassword=R},"1.0.0",{requires:[]});YUI.add("wl-login",function(A){A.components.Login=function(t){var b=this;t.form=true;var h=false;var E;var k=false;b.incomingEvents={loginCheck:function(){if(k){b.fireEvent("logged-in");return true}return false},"block-submit":function(){h=true},travelBankViewBalance:function(){w()},"in-logged-out":function(y){if(x()){if(t.initData.redemptionSearch){b.node.one(".login-component").removeClass("hidden");e();k=false;t.initData.user=null}}else{u()}},"in-internal-logged-in":function(y){t.initData.user=y.user;k=true;if(x()){if(t.initData.redemptionSearch){b.node.one(".login-component").addClass("hidden");e()}}else{if(y.updateContent){b.node.addClass("loading");N(y.user)}}},"set-logout-confirm":function(y){H=y.callback},"sso-token-deleted":function(){if(k){if(B()){M()}else{var y=A.one("a.logout");if(y){var z=y.getAttribute("href");if(z){window.location.href=z}}}}}};b.onRenderState={initialized:function(y){i(y)},rbeSelectFlights:function(y){i(y);q()},mybLanding:function(z){z.removeClass("loading");z.purge(true,"submit");A.on("login|submit",g,z);A.on("blur",A.wlValidation.validate,z.all("input.textfield"));if(t.compInstConfig.forgotPasswordPopUpEnabled){A.on("click",a,z.all(".forgot-password"))}var y=t.initData.loginActionResult.authenticationResult;if(y&&y!="SUCCESSFUL"){O(y,z)}else{z.one("input.username").setAttribute("wl:value","")}}};function i(y){D(y);if(t.initData.loggedIn){S(y,t.initData.user)}}function e(){b.node.one("input.username").set("value","");b.node.one("input.password").set("value","");p(b.node.one(".component-section-error"),"")}function S(AA,z){k=true;if(z.travelBankCredentials){V(z)}if(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled&&z.travelBankCredentials){var y=AA.one("#loginComponentTraveBankViewDetailsLink");if(y){A.on("click",v,y)}}else{F()}J(z);AA.removeClass("loading");if(B()){A.on("login|click",P,AA.all(".logout"))}else{if(t.compInstConfig.agentUserConfiguration.logoutRedirectToAgentHome){A.on("login|click",Y,AA.all(".logout"))}}}function B(){return t.compInstConfig.byAjaxLogout}var H=function(){return false};function V(y){var AA=A.one("#ExternalForms");if(AA){var z=AA.one("#TravelBankViewDetailsForm");if(z){G(AA,y)}else{s(AA,y)}}else{A.log("Cannot find #ExternalForms node.","warn")}}function G(z,y){var AB=z.one("#loginComponentTraveBankViewDetailsUsername");if(AB){AB.set("value",y.travelBankCredentials.username)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsUsername node.","warn")}var AA=z.one("#loginComponentTraveBankViewDetailsPassword");if(AA){AA.set("value",y.travelBankCredentials.password)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsPassword node.","warn")}}function F(){var y=A.one("#TravelBankViewDetailsForm");if(y){y.remove()}}function s(z,y){var AA={username:y.travelBankCredentials.username,password:y.travelBankCredentials.password};b.renderPartialInNode("_travelBankViewDetailsForm",AA,z,false)}function v(y){y.preventDefault();w();return false}function w(){document.TBDetails.action=sabre.config.satConfiguration.travelBankConfiguration.balanceUrlKey;document.TBDetails.method="POST";document.TBDetails.submit()}function J(AD){if(!AD){return }if(AD.frequentFlyerProfile){A.one("#loginComponentLoyaltyDiv").removeClass("hidden")}else{A.one("#loginComponentLoyaltyDiv").addClass("hidden")}if(AD.travelBankCredentials&&(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled||R(AD))){A.one("#loginComponentTraveBankDiv").removeClass("hidden")}else{A.one("#loginComponentTraveBankDiv").addClass("hidden")}var AF=AD.loyaltyTier;if(AF){var z=A.translateParametrized("TierLevel."+AF);var AK="label.login.member|"+z;var AI=A.translateParametrized(AK);var AG=A.one("#loyaltyTier");AG.setAttribute("wl:translate",AK);AG.setContent(AI)}if(AD.loyaltyBalanceRetrievalError){A.one("#balanceNotAvailable").removeClass("hidden");return }if(AD.agentProfile){var AH=false;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");var AA=AD.agentInfoTO.superUser;T(AA,AH,"agentName","agentNameEnabled",AD.firstName+" "+AD.lastName);T(AA,AH,"agencyName","agencyNameEnabled",AD.agencyInfoTO.travelAgencyName);T(AA,AH,"agencyIdentifier","agencyIATAEnabled",AD.agencyInfoTO.travelAgencyIdentifier);if(AD.creditLimitRetrievalError){A.one("#loginComponentAgencyBalanceDiv").addClass("hidden");return }T(AA,AH,"agencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AA,AH,"agencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd");if(AD.creditLimitInformationTO.differentBalanceAndBookingCurrency&&sabre.config.satConfiguration.travelBankConfiguration.convertAgentCreditLimit){T(AA,AH,"creditLimitInBookingCurrency","creditLimitEnabled");T(AA,AH,"convertedAgencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.accountCreditLimit),"convertedCreditLimitDd");T(AA,AH,"convertedAgencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.accountBalance),"convertedBalanceDd")}}else{if(AD.agencyProfile){var AH=true;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");T(AA,AH,"agencyContactName","agencyContactNameEnabled",AD.firstName+" "+AD.lastName);T(AA,AH,"agencyName","agencyNameEnabled",AD.agencyInfoTO.travelAgencyName);if(!AD.creditLimitRetrievalError){T(AA,AH,"agencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AA,AH,"agencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd")}}else{A.one("#loginComponentAgencyBalanceDiv").addClass("hidden")}}if(AD.loyaltyBalance==""){return }A.one("#balanceAmount").removeClass("hidden");A.one("#balanceAvailable").removeClass("hidden");var AL={thousandsSeparator:","};var AE=A.DataType.Number.format(parseInt(AD.loyaltyBalance,10),AL);K(AE);var AC=AD.balanceDate;if(AC!=0){var y=sabre.config.satConfiguration.dateFormat;var AB=A.DataType.Date.format(new Date(AC),{format:y});var AN="label.login.balanceDate|"+AB;var AJ=A.translateParametrized(AN);var AM=A.one("#balanceDate");if(AM){AM.setContent(AJ);AM.setAttribute("wl:translate",AN);AM.removeClass("hidden")}}}function T(AC,AF,AA,AE,AB,y){var AD=A.one("#"+AA);var z=t.compInstConfig.agentUserConfiguration;if(AC){z=t.compInstConfig.agentSuperUserConfiguration}else{if(AF){z=t.compInstConfig.agencyUserConfiguration}}if(z[AE]){if(y!=undefined){A.one("#"+y).setContent(AB)}else{if(AB!=undefined){AD.setContent(AB)}}AD.removeClass("hidden")}else{AD.addClass("hidden")}}function R(y){if(y.agentProfile){var z=t.compInstConfig.agentUserConfiguration;if(y.agentInfoTO.superUser){z=t.compInstConfig.agentSuperUserConfiguration}return z.viewBalanceEnabled}else{if(y.agencyProfile){return t.compInstConfig.agencyUserConfiguration.viewBalanceEnabled}}return false}function X(y){if(!y){return""}var AA={decimalPlaces:A.getDecimals(y.currency.code)};var z=A.DataType.Number.format(parseFloat(y.amount),AA);return A.formatPrice({value:z,currencyCode:y.currency.code},{currencyCodeSeparator:" "})}function K(z){var y=A.one("#amount");y.setContent(z);var AB=sabre.config.satConfiguration.frequentFlyer.denomination||"";var AA=A.one("#denomination");AA.setContent("&nbsp;"+A.translateParametrized(AB));AA.setAttribute("wl:translate",AB)}function D(y){y.removeClass("loading");y.purge(true,"submit");A.on("login|submit",Z,y);if(t.compInstConfig.forgotPasswordPopUpEnabled){y.delegate("click",a,".forgot-password")}y.delegate("click",W,".toggler");y.delegate("blur",A.wlValidation.validate,"input.textfield")}function O(z,AB){var y;switch(z){case"FAILED":y="_loginFailedAuthentication";break;case"SYSTEM_ERROR":y="_loginFailedSystemError";break;case"NOT_ALLOWED":y="_loginFailedStatusIsNotAllowed";break;default:var AA="No such result implemented "+z;A.log(AA,"error");throw AA}AB.one(".login-mybooking .field").prepend(b.getHtml(y));b.translateTemplate(t,AB.one(".login-mybooking .field"))}function Q(){var z=b.node;var y={togglee:z.one(".togglee"),toggler:z.one(".toggler a")};return y.togglee&&y.toggler?y:null}function W(){var y=Q();if(y){y.togglee.toggleClass("hidden");y.toggler.toggleClass("open")}}function I(){var y=Q();if(y){y.togglee.removeClass("hidden");y.toggler.addClass("open")}}function r(){return h||b.node.hasClass("loading")}function Z(y){y.preventDefault();if(r()){return }if(!o()){return }b.node.addClass("loading");n();var z=b.node.ancestor("form");if(x()){f(z)}else{U(z)}}function x(){return t.state==="rbeSelectFlights"}function g(y){y.preventDefault();if(!o()){return }var z=b.node.ancestor("form");z.submit()}function o(){A.wlValidation.validate(null,b.node.one(".username"));A.wlValidation.validate(null,b.node.one(".password"));return !b.node.one(".username").hasClass("error")&&!b.node.one(".password").hasClass("error")}function Y(AA){var AC=[{text:'<span class="translate" wl:translate="label.login.logoutPopup.cancel"></span>',handler:function(){this.hide()}},{text:"<span class='translate' wl:translate='label.login.logoutPopup.continue'></span>",handler:function(){window.location.href=t.initData.logoutUrl;this.hide()}}];var z={buttons:AC,close:true,needTranslation:true};var AB='<h3><span class="translate" wl:translate="label.login.logoutPopup.title"></span></h3><p><span class="translate" wl:translate="label.login.logoutPopup.message"></span></p>';var y=new A.widgets.PopupWidget(A.one(document.body),AB,z);y.show();AA.preventDefault()}function P(y){y.preventDefault();if(r()||H(M)){return }M()}function M(){b.node.addClass("loading");j()}function q(){var y=A.one("#login_2");if(y&&!k&&t.initData.redemptionSearch){var z=A.one("#flow-message-ffNotLoggedIn");if(z&&z.hasClass("hidden")){z.removeClass("hidden")}I()}}function c(){A.wlValidation.initializeForPartial(t.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,b.node)}function a(y){new A.widgets.ForgotPassword(y,t)}function n(){if(E){E.destroy();E=null}}function u(){k=false;t.initData.user=null;W();c();D(b.node)}function j(){var y={data:{requestPartials:["initialized"]},on:{success:function(AD,AC){var AA=AC.partials.initialized;L(AA);b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AC.flowMessagesToEnable}});b.fireEvent("logged-out");var AB=null;C(AB);if(!t.compInstConfig.folded){I()}}}};var z={cfg:y,actionCode:"logout"};if(!B()){z.url=t.initData.logoutUrl}b.fireEvent("to-ajax",z)}function C(y){b.fireEvent("update-data",{data:{loggedUser:y}})}function N(z){var y={data:{requestPartials:["initialized"]},on:{end:function(){b.node.removeClass("loading")},success:function(AC,AB){var AA=AB.partials.initialized;L(AA);S(b.node,z)}}};b.fireEvent("to-ajax",{cfg:y,actionCode:"getLoginContent"})}function d(y){return{username:escape(y.one(".username").get("value")),password:escape(y.one(".password").get("value"))}}function f(z){var y={data:d(z),on:{end:function(){b.node.removeClass("loading")},success:function(AB,AA){switch(AA.authenticationResult){case"SUCCESSFUL":k=true;m(AA,true);break;case"TRAVEL_BANK_UNAVAILABLE":k=true;m(AA,true);break;case"FAILED":t.initData.username=AA.username;l("_loginFailedAuthentication");break;case"SYSTEM_ERROR":I();l("_loginFailedSystemError");break;case"NOT_ALLOWED":I();l("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("login-started",{header:"ssoIgnore",callback:function(){b.fireEvent("to-ajax",{cfg:y,actionCode:"login",ignoreHeaders:true})}})}function U(z){var AA=d(z);AA.requestPartials=["initialized"];var y={data:AA,on:{end:function(){b.fireEvent("login-finished",{header:"ssoIgnore"});b.node.removeClass("loading")},success:function(AD,AC){var AB=AC.partials.initialized;L(AB);switch(AC.authenticationResult){case"SUCCESSFUL":S(b.node,AC.user);m(AC,false);break;case"TRAVEL_BANK_UNAVAILABLE":S(b.node,AC.user);m(AC,false);break;case"FAILED":t.initData.username=AC.username;l("_loginFailedAuthentication");break;case"SYSTEM_ERROR":l("_loginFailedSystemError");break;case"NOT_ALLOWED":l("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("login-started",{header:"ssoIgnore",callback:function(){b.fireEvent("to-ajax",{cfg:y,actionCode:"login",ignoreHeaders:true})}})}function l(z){I();var y=b.node.one(".component-section-error");p(y,b.getHtml(z));b.translateTemplate(t,y);c()}function L(y){p(b.node,A.decodeHtmlEntities(y));b.translateTemplate(t,b.node)}function p(z,y){z.set("innerHTML",y)}function m(AA,y){b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AA.flowMessagesToEnable}});b.fireEvent("out-internal-logged-in",{user:AA.user,updateContent:y});if(AA.user.frequentFlyerProfile){b.fireEvent("ff-logged-in",{data:{forceRedemptionFaresReload:false}})}b.fireEvent("logged-in",AA);var z={prefix:AA.user.prefix,firstName:AA.user.firstName,lastName:AA.user.lastName,tierLevel:AA.user.loyaltyTier,ffNumber:AA.user.ffNumber,emails:AA.user.emails};C(z);if(!t.compInstConfig.byAjaxLogin){window.location.reload()}}}});YUI.add("wl-sbmt",function(A){A.components.Sbmt=function(E){var I=this;var X;I.incomingEvents={unblock:O,block:L,"show-in-seats":N,"remote-submit":H,"show-popup":Q,refresh:D,"update-on-hold-status":J,"validate-submit":C};E.initData=E.initData||{};E.initData.pageCode=sabre.config.pageCode;var V=E.initData.componentCodesUnblockDependency;var G=E.initData.disableSubmitPermanently;I.onRenderState={initialized:function(Z){R()},refund:function(Z){K(["label.sbmt.comfirmButton.yes","label.sbmt.comfirmButton.no"]);R()},exchange:function(Z){K(["label.sbmt.exchange.confirmButton.yes","label.sbmt.exchange.confirmButton.no"]);R()},changePaxDetails:function(Z){K(["label.sbmt.changePaxDetails.confirmButton.yes","label.sbmt.changePaxDetails.confirmButton.no"]);R()},upgrade:function(Z){K(["label.sbmt.upgrade.confirmButton.yes","label.sbmt.upgrade.confirmButton.no"]);R()}};function F(){return A.utilsUrl.buildExecutionUrl(E.initData.returnUrlSuffix)}function R(){T(I.node)}function T(a){var Z=a.ancestor("form");if(Z){Z.on("submit",function(b){Y(Z.get("id"),b);S()})}}function Y(a,Z){I.fireEvent("page-submitted",{cfg:{},actionCode:"ignoreTransaction",formId:a,event:Z})}function S(){A.all("a").each(function(a){a.set("href","#");a.set("onclick",function(){})});var Z=A.all('input[type="submit"]');Z.each(function(a){a.set("disabled","disabled");a.addClass("disabled")})}function H(Z){I.node.ancestor("form").submit()}function C(a){var Z=I.node.ancestor("form");Z.all("input[name=_eventId_next]").each(function(b){b.setAttribute("name","_eventId_runValidation")});Z.submit()}function N(b){var c=1;var a=A.all(b.selector);var Z=I.node.one(".sbmt-seats");a.each(function(e){e.set("innerHTML",Z.get("innerHTML"));var d=e.one("input.btn-next");d.setAttribute("id","btn-next-id"+c++);d.setAttribute("wl:translate",b.translationKey||E.initData.textKey);e.translate();T(e);I.fireEvent("seats-loaded",{node:e})})}function D(b){var a=I.node.one("input#btn-search");if(a){var Z=E.initData.textKey;if(X){Z+=".onHold"}if(b==="paypal"){Z="label.sbmt.submitPayment.paypal"}a.setAttribute("wl:translate",Z);a.set("value",A.translateParametrized(Z));A.translateNode(a)}}function J(Z){X=Z.isOnHoldEnabled;D("")}function P(a){var Z=A.Array.indexOf(V,a);if(Z!==-1){V.splice(Z,1)}}function W(a){var Z=A.Array.indexOf(V,a);if(Z===-1){V.push(a)}}function M(){return V.length==0&&!G}function O(a){if(a.data&&a.data.forceUnblock===true){G=false}if(a.type){P(a.type)}if(M()){var Z=I.node.one("input#btn-search");if(Z){Z.removeAttribute("disabled");Z.removeClass("disabled");I.fireEvent("unblocked")}}}function L(a){if(a.type){W(a.type)}var Z=I.node.one("input#btn-search");if(Z){Z.set("disabled","disabled").addClass("disabled");I.fireEvent("blocked")}}function K(b){var e;var a=A.Node.create('<div class="modalWrapper"></div>');var d=[];var c=A.getCurrentTranslations();var Z=I.node.one("#ignoreFlowPopup");d[0]={text:c[b[0]],handler:function(){if(E.compInstConfig.callIgnoreAction){B(a)}else{a.addClass("loading");location.href=F()}}};d[1]={text:c[b[1]],handler:function(){e.hide()}};e=new YAHOO.widget.Dialog("ignoreFlowPopup",{visible:false,draggable:false,zIndex:100,fixedcenter:true,modal:true,close:false,buttons:d,hideaftersubmit:false});U=function(f){if(typeof f.preventDefault=="function"){f.preventDefault()}btn_0=e.firstButton;btn_1=e.lastButton;btn_0.setAttribute("class","translate");btn_1.setAttribute("class","translate");btn_0.setAttribute("wl:translate",b[0]);btn_1.setAttribute("wl:translate",b[1]);Z.translate();Z.removeClass("hidden");a.removeClass("loading");e.center();e.show()};A.on("click",U,"#ignoreFlow");e.renderEvent.subscribe(function(){var f=Z.get("children");f.each(function(g){a.append(g)});Z.append(a)});e.render(document.body)}var U=function(){};function Q(Z){U(Z)}function B(a){var Z={on:{success:function(){location.href=A.utilsUrl.buildExecutionUrl("_eventId_redirectToCameFromURL")},failure:function(){a.removeClass("loading");A.log("Ajax call failed!","error")}}};a.addClass("loading");I.fireEvent("to-ajax",{cfg:Z,actionCode:"ignoreTransaction"})}}});YUI.add("wl-lang",function(A){A.components.Lang=function(E){var G=this;G.onRenderState={initialized:function(){L();if(sabre.config.satConfiguration.globalCurrencyConfiguration.currencySelectionEnabled){G.fireEvent("add-me-to-pos-change",{trigger:"fsc",actionCode:"changePointOfSale"})}},hidden:function(){L()}};G.incomingEvents={changeLanguage:D,change_lang:function(){O()},"before-changePointOfSale":F};function L(){A.on("change",K,"#select-language");if(A.one("#select-currency")){A.on("change",P,"#select-currency")}H();I(E.initData.currency)}function O(){var R=A.config.locale;var Q="pageTitle."+sabre.config.pageCode;if(A.translations[R]&&A.translations[R][Q]){document.title=A.translations[R][Q]}}function P(R){var Q=R.currentTarget.get("value");N(Q)}function I(R){var Q=G.node.one("#select-currency");if(Q){Q.setStyle("visibility","visible");if(R){A.config.currency=R;Q.set("value",R)}}return R}function D(R){var Q=R.currentTarget.get("id");B(Q)}function K(R){var Q=R.currentTarget.get("value");B(Q)}function H(T){T=T||sabre.config.global.language||sabre.config.defaultLang;var S=T.replace("_","-");A.one("html").setAttribute("lang",S);var Q=A.one("body");if(A.config.locale&&A.config.locale!==T){Q.removeClass("LANGUAGE_"+A.config.locale)}Q.addClass("LANGUAGE_"+T);Q.setAttribute("lang",S);A.config.locale=T;sabre.config.global.language=T;var R=G.node.one("#select-language");if(R){R.set("value",T);if(E.state!="hidden"){R.setStyle("visibility","visible")}}return T}function B(S){var R="wl-lang-"+S;var Q=sabre.config.global.storefrontResourcesPath;if(sabre.config.global.configurationVersion){Q+=sabre.config.global.configurationVersion+"/"}Q+=sabre.config.templateFolder+sabre.config.translationDir+"/";sabre.config.groups["wl-noncombine"].modules[R]={fullpath:Q+S+".js"+sabre.config.global.versionNumber};A.use(R,function(U,T){U.translations[S]=T.success?U.translations[S]:"Translations not found";J(S)})}function J(S){var Q=sabre.config.global.language;H(S);var R={data:{selectedLang:S},on:{success:function(){G.fireEvent("change_lang",{data:S});A.wlValidation.refreshOverlaysAlignment(Q);G.fireEvent("update-data",{data:{language:S}})},complete:function(){var T=A.one("#progressContainer");if(T){T.remove()}}}};G.fireEvent("to-ajax",{cfg:R,actionCode:"setSelectedLang"})}function N(S){var R=G.node.one("#language-content");R.addClass("loading");M();var Q={data:{selectedCurrency:S},on:{complete:function(){R.removeClass("loading")},success:function(){C();G.fireEvent("change_currency",{data:S});G.fireEvent("update-data",{data:{currency:S}})}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setSelectedCurrency"})}function M(){G.fireEvent("block_submit")}function C(){G.fireEvent("unblock_submit",{data:{}})}function F(){var R=G.node.one("#language-content");R.addClass("loading");M();var S="__currency";var Q={data:{requestPartials:[S]},on:{end:function(){R.removeClass("loading")},success:function(X,V){C();var U=G.node.one(".currency-section");if(U){var W=A.Node.create(A.decodeHtmlEntities(V.partials[S]));U.replace(W);var T=G.node.one("#select-currency").get("value");G.fireEvent("change_currency",{data:T});G.fireEvent("update-data",{data:{currency:T}})}}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setDefaultCurrency"})}}});YUI.add("wl-ibedata",function(A){A.components.Ibedata=function(C){var D=this;var B=C.initData;D.onRenderState={initialized:function(){WhiteLabel.setIbeData(B)}};D.incomingEvents={"update-data":function(E){if(E.data){B=A.merge(B,E.data);WhiteLabel.setIbeData(B)}}}}});(function(){var D=YAHOO.util;var C=function(G,H,B,A){if(!G){}this.init(G,H,B,A)};C.NAME="Anim";C.prototype={toString:function(){var B=this.getEl()||{};var A=B.id||B.tagName;return(this.constructor.NAME+": "+A)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(F,A,B){return this.method(this.currentFrame,A,B-A,this.totalFrames)},setAttribute:function(H,A,B){var G=this.getEl();if(this.patterns.noNegatives.test(H)){A=(A>0)?A:0}if(H in G&&!("style" in G&&H in G.style)){G[H]=A}else{D.Dom.setStyle(G,H,A+B)}},getAttribute:function(L){var J=this.getEl();var B=D.Dom.getStyle(J,L);if(B!=="auto"&&!this.patterns.offsetUnit.test(B)){return parseFloat(B)}var K=this.patterns.offsetAttribute.exec(L)||[];var A=!!(K[3]);var I=!!(K[2]);if("style" in J){if(I||(D.Dom.getStyle(J,"position")=="absolute"&&A)){B=J["offset"+K[0].charAt(0).toUpperCase()+K[0].substr(1)]}else{B=0}}else{if(L in J){B=J[L]}}return B},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px"}return""},setRuntimeAttribute:function(M){var A;var L;var K=this.attributes;this.runtimeAttributes[M]={};var B=function(E){return(typeof E!=="undefined")};if(!B(K[M]["to"])&&!B(K[M]["by"])){return false}A=(B(K[M]["from"]))?K[M]["from"]:this.getAttribute(M);if(B(K[M]["to"])){L=K[M]["to"]}else{if(B(K[M]["by"])){if(A.constructor==Array){L=[];for(var J=0,N=A.length;J<N;++J){L[J]=A[J]+K[M]["by"][J]*1}}else{L=A+K[M]["by"]*1}}}this.runtimeAttributes[M].start=A;this.runtimeAttributes[M].end=L;this.runtimeAttributes[M].unit=(B(K[M].unit))?K[M]["unit"]:this.getDefaultUnit(M);return true},init:function(T,O,P,B){var A=false;var S=null;var Q=0;T=D.Dom.get(T);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(P)?P:1;this.method=B||D.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=D.AnimMgr.fps;this.setEl=function(E){T=D.Dom.get(E)};this.getEl=function(){return T};this.isAnimated=function(){return A};this.getStartTime=function(){return S};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(D.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}D.AnimMgr.registerElement(this);return true};this.stop=function(E){if(!this.isAnimated()){return false}if(E){this.currentFrame=this.totalFrames;this._onTween.fire()}D.AnimMgr.stop(this)};var M=function(){this.onStart.fire();this.runtimeAttributes={};for(var E in this.attributes){this.setRuntimeAttribute(E)}A=true;Q=0;S=new Date()};var N=function(){var E={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};E.toString=function(){return("duration: "+E.duration+", currentFrame: "+E.currentFrame)};this.onTween.fire(E);var F=this.runtimeAttributes;for(var G in F){this.setAttribute(G,this.doMethod(G,F[G].start,F[G].end),F[G].unit)}Q+=1};var R=function(){var F=(new Date()-S)/1000;var E={duration:F,frames:Q,fps:Q/F};E.toString=function(){return("duration: "+E.duration+", frames: "+E.frames+", fps: "+E.fps)};A=false;Q=0;this.onComplete.fire(E)};this._onStart=new D.CustomEvent("_start",this,true);this.onStart=new D.CustomEvent("start",this);this.onTween=new D.CustomEvent("tween",this);this._onTween=new D.CustomEvent("_tween",this,true);this.onComplete=new D.CustomEvent("complete",this);this._onComplete=new D.CustomEvent("_complete",this,true);this._onStart.subscribe(M);this._onTween.subscribe(N);this._onComplete.subscribe(R)}};D.Anim=C})();YAHOO.util.AnimMgr=new function(){var I=null;var J=[];var F=0;this.fps=1000;this.delay=1;this.registerElement=function(A){J[J.length]=A;F+=1;A._onStart.fire();this.start()};this.unRegister=function(A,B){B=B||G(A);if(!A.isAnimated()||B===-1){return false}A._onComplete.fire();J.splice(B,1);F-=1;if(F<=0){this.stop()}return true};this.start=function(){if(I===null){I=setInterval(this.run,this.delay)}};this.stop=function(A){if(!A){clearInterval(I);for(var B=0,C=J.length;B<C;++B){this.unRegister(J[0],0)}J=[];I=null;F=0}else{this.unRegister(A)}};this.run=function(){for(var A=0,C=J.length;A<C;++A){var B=J[A];if(!B||!B.isAnimated()){continue}if(B.currentFrame<B.totalFrames||B.totalFrames===null){B.currentFrame+=1;if(B.useSeconds){H(B)}B._onTween.fire()}else{YAHOO.util.AnimMgr.stop(B,A)}}};var G=function(A){for(var B=0,C=J.length;B<C;++B){if(J[B]===A){return B}}return -1};var H=function(E){var B=E.totalFrames;var C=E.currentFrame;var D=(E.currentFrame*E.duration*1000/E.totalFrames);var L=(new Date()-E.getStartTime());var A=0;if(L<E.duration*1000){A=Math.round((L/D-1)*E.currentFrame)}else{A=B-(C+1)}if(A>0&&isFinite(A)){if(E.currentFrame+A>=B){A=B-(C+1)}E.currentFrame+=A}};this._queue=J;this._getIndex=G};YAHOO.util.Bezier=new function(){this.getPosition=function(I,J){var H=I.length;var K=[];for(var L=0;L<H;++L){K[L]=[I[L][0],I[L][1]]}for(var G=1;G<H;++G){for(L=0;L<H-G;++L){K[L][0]=(1-J)*K[L][0]+J*K[parseInt(L+1,10)][0];K[L][1]=(1-J)*K[L][1]+J*K[parseInt(L+1,10)][1]}}return[K[0][0],K[0][1]]}};(function(){var E=function(C,D,B,A){E.superclass.constructor.call(this,C,D,B,A)};E.NAME="ColorAnim";E.DEFAULT_BGCOLOR="#fff";var G=YAHOO.util;YAHOO.extend(E,G.Anim);var F=E.superclass;var H=E.prototype;H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(B){if(B.length==3){return B}var A=this.patterns.hex.exec(B);if(A&&A.length==4){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}A=this.patterns.rgb.exec(B);if(A&&A.length==4){return[parseInt(A[1],10),parseInt(A[2],10),parseInt(A[3],10)]}A=this.patterns.hex3.exec(B);if(A&&A.length==4){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}return null};H.getAttribute=function(J){var C=this.getEl();if(this.patterns.color.test(J)){var A=YAHOO.util.Dom.getStyle(C,J);var B=this;if(this.patterns.transparent.test(A)){var D=YAHOO.util.Dom.getAncestorBy(C,function(I){return !B.patterns.transparent.test(A)});if(D){A=G.Dom.getStyle(D,J)}else{A=E.DEFAULT_BGCOLOR}}}else{A=F.getAttribute.call(this,J)}return A};H.doMethod=function(K,A,D){var B;if(this.patterns.color.test(K)){B=[];for(var C=0,L=A.length;C<L;++C){B[C]=F.doMethod.call(this,K,A[C],D[C])}B="rgb("+Math.floor(B[0])+","+Math.floor(B[1])+","+Math.floor(B[2])+")"}else{B=F.doMethod.call(this,K,A,D)}return B};H.setRuntimeAttribute=function(K){F.setRuntimeAttribute.call(this,K);if(this.patterns.color.test(K)){var C=this.attributes;var A=this.parseColor(this.runtimeAttributes[K].start);var D=this.parseColor(this.runtimeAttributes[K].end);if(typeof C[K]["to"]==="undefined"&&typeof C[K]["by"]!=="undefined"){D=this.parseColor(C[K].by);for(var B=0,L=A.length;B<L;++B){D[B]=A[B]+D[B]}}this.runtimeAttributes[K].start=A;this.runtimeAttributes[K].end=D}};G.ColorAnim=E})();YAHOO.util.Easing={easeNone:function(H,E,F,G){return F*H/G+E},easeIn:function(H,E,F,G){return F*(H/=G)*H+E},easeOut:function(H,E,F,G){return -F*(H/=G)*(H-2)+E},easeBoth:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H+E}return -F/2*((--H)*(H-2)-1)+E},easeInStrong:function(H,E,F,G){return F*(H/=G)*H*H*H+E},easeOutStrong:function(H,E,F,G){return -F*((H=H/G-1)*H*H*H-1)+E},easeBothStrong:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+E}return -F/2*((H-=2)*H*H*H-2)+E},elasticIn:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return -(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H},elasticOut:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return N*Math.pow(2,-10*M)*Math.sin((M*J-L)*(2*Math.PI)/K)+I+H},elasticBoth:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J/2)==2){return H+I}if(!K){K=J*(0.3*1.5)}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}if(M<1){return -0.5*(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H}return N*Math.pow(2,-10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K)*0.5+I+H},backIn:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*(J/=H)*J*((I+1)*J-I)+F},backOut:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*((J=J/H-1)*J*((I+1)*J+I)+1)+F},backBoth:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}if((J/=H/2)<1){return G/2*(J*J*(((I*=(1.525))+1)*J-I))+F}return G/2*((J-=2)*J*(((I*=(1.525))+1)*J+I)+2)+F},bounceIn:function(H,E,F,G){return F-YAHOO.util.Easing.bounceOut(G-H,0,F,G)+E},bounceOut:function(H,E,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+E}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+E}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+E}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+E},bounceBoth:function(H,E,F,G){if(H<G/2){return YAHOO.util.Easing.bounceIn(H*2,0,F,G)*0.5+E}return YAHOO.util.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+E}};(function(){var G=function(C,D,B,A){if(C){G.superclass.constructor.call(this,C,D,B,A)}};G.NAME="Motion";var I=YAHOO.util;YAHOO.extend(G,I.ColorAnim);var H=G.superclass;var K=G.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(C,A,B){if(this.patterns.points.test(C)){B=B||"px";H.setAttribute.call(this,"left",A[0],B);H.setAttribute.call(this,"top",A[1],B)}else{H.setAttribute.call(this,C,A,B)}};K.getAttribute=function(B){if(this.patterns.points.test(B)){var A=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")]}else{A=H.getAttribute.call(this,B)}return A};K.doMethod=function(E,A,D){var B=null;if(this.patterns.points.test(E)){var C=this.method(this.currentFrame,0,100,this.totalFrames)/100;B=I.Bezier.getPosition(this.runtimeAttributes[E],C)}else{B=H.doMethod.call(this,E,A,D)}return B};K.setRuntimeAttribute=function(A){if(this.patterns.points.test(A)){var S=this.getEl();var Q=this.attributes;var T;var E=Q.points["control"]||[];var R;var D,B;if(E.length>0&&!(E[0] instanceof Array)){E=[E]}else{var F=[];for(D=0,B=E.length;D<B;++D){F[D]=E[D]}E=F}if(I.Dom.getStyle(S,"position")=="static"){I.Dom.setStyle(S,"position","relative")}if(J(Q.points["from"])){I.Dom.setXY(S,Q.points["from"])}else{I.Dom.setXY(S,I.Dom.getXY(S))}T=this.getAttribute("points");if(J(Q.points["to"])){R=L.call(this,Q.points["to"],T);var C=I.Dom.getXY(this.getEl());for(D=0,B=E.length;D<B;++D){E[D]=L.call(this,E[D],T)}}else{if(J(Q.points["by"])){R=[T[0]+Q.points["by"][0],T[1]+Q.points["by"][1]];for(D=0,B=E.length;D<B;++D){E[D]=[T[0]+E[D][0],T[1]+E[D][1]]}}}this.runtimeAttributes[A]=[T];if(E.length>0){this.runtimeAttributes[A]=this.runtimeAttributes[A].concat(E)}this.runtimeAttributes[A][this.runtimeAttributes[A].length]=R}else{H.setRuntimeAttribute.call(this,A)}};var L=function(C,A){var B=I.Dom.getXY(this.getEl());C=[C[0]-B[0]+A[0],C[1]-B[1]+A[1]];return C};var J=function(A){return(typeof A!=="undefined")};I.Motion=G})();(function(){var F=function(C,D,B,A){if(C){F.superclass.constructor.call(this,C,D,B,A)}};F.NAME="Scroll";var H=YAHOO.util;YAHOO.extend(F,H.ColorAnim);var G=F.superclass;var E=F.prototype;E.doMethod=function(D,A,C){var B=null;if(D=="scroll"){B=[this.method(this.currentFrame,A[0],C[0]-A[0],this.totalFrames),this.method(this.currentFrame,A[1],C[1]-A[1],this.totalFrames)]}else{B=G.doMethod.call(this,D,A,C)}return B};E.getAttribute=function(C){var A=null;var B=this.getEl();if(C=="scroll"){A=[B.scrollLeft,B.scrollTop]}else{A=G.getAttribute.call(this,C)}return A};E.setAttribute=function(D,A,B){var C=this.getEl();if(D=="scroll"){C.scrollLeft=A[0];C.scrollTop=A[1]}else{G.setAttribute.call(this,D,A,B)}};H.Scroll=F})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});YUI.add("wl-cart-stick-to-screen",function(B){var L=function(N){var M=N;while(true){var O=M.ancestor(".lay > .lay");if(O!==null){M=O}else{return M}}};var D=function(M){return M.all("> .lay")};var F=function(O,N){for(var M=0;M<O.size();M++){if(O.item(M).contains(N)){return O.item(M)}}return null};var I=function(M){return M.getY()};var K=function(M){return M.get("offsetHeight")};var A=function(M){return I(M)+K(M)};var H=function(M){window.setTimeout(M,1)};var G=function(M){M()};var E=(function(g){var Z=g.ancestor(".lay").ancestor(".lay");var a=g.getY();var b="initial";var U=L(g);var c=D(U);var e=F(c,g);var T=function(){return K(g)};var j=function(){return A(Z)};var Y=function(){return B.DOM.docScrollY()};var S=function(){return B.DOM.winHeight()};var k=function(){return Y()+S()};var P=function(){return T()>S()};var X=function(m,n){g.setStyle("position",m);g.setStyle("top",(n!=null)?n+"px":null)};var M=function(m,n){if(b!==m){n();b=m}};var l=function(){M("bottomOfContainer",function(){B.log("Fixing cart position at the bottom of the container","debug");var m=function(){X("relative",(j()-a-T()))};if(B.UA.ie>0&&B.UA.ie<8){X(null,null);H(m)}else{G(m)}})};var Q=function(){M("initial",function(){B.log("Fixing cart position at the original position","debug");X(null,null)})};var O=function(){M("topOfViewport",function(){B.log("Sticking cart to the top of the viewport","debug");X("fixed",0)})};var h=function(){M("bottomOfViewport",function(){B.log("Sticking cart to the bottom of the viewport","debug");X("fixed",S()-T())})};var i=function(){if(Y()<a){Q()}else{if(Y()+T()>=j()){l()}else{O()}}};var V=function(){if(k()>=j()){l()}else{if(a+T()<k()){h()}else{Q()}}};var R=function(){var n=0;var m=null;c.each(function(p){var o=K(p);if(o>=n){m=p;n=o}});return m};var d=function(){return e.compareTo(R())};var N=function(){if(P()){V()}else{i()}};var W=function(m){if(d()){return }else{N()}};var f=function(m){b="unknown";N()};return{onScroll:W,onSizeChanged:f}});var C=function(){var M=B.Node.create("<div></div>");M.setStyle("position","fixed");return(M.getStyle("position")==="fixed")};var J=function(N){B.log("Attaching scroll handler for shopping cart movement","debug");var M=E(N);B.on("scroll",M.onScroll);B.on("resize",M.onSizeChanged);B.on("cart:sizeChanged",M.onSizeChanged)};B.on("cart:stickToScreen",function(M){if(C()){J(M.container.ancestor(".lay"))}else{B.log("Running on browser that doesn't support position: fixed. Skipping scroll handler for shopping cart movement attachment","warn")}})});YUI.add("wl-cart",function(A){A.components.Cart=function(AJ){var k=this;var Aj=AJ.compInstConfig;var W=AJ.initData;var Ai=AJ.state;var AX=Aj.insuranceEnabled;var L=AX&&Aj.insuranceAPartOfFareBreakdown;var Ae=!!W.retainedDirection;var a={};var V="bookingFee";var g=[];var I=W.itineraryParts;var AR=W.itineraryParts.length;var AC=[];var AA="";var d,n;var f="initialized";k.incomingEvents={show_rules:l,modify_search_rendered:function(){Ad(false)},change_state_unbundled:Aa,change_state:o,clear_invalid_selected_flights:U,update_for_lazy_flc:m,"update-with-insurance":AH,"update-with-ancillary":Q,"update-with-hotel":AQ,"update-with-seat-selected":t,"update-with-fop-surcharge":AF,"update-with-slider":AP,"before-completedCarSelectAjax":AO,"update-with-bnpl":AV,clear_cart:K,refresh:b,change_lang:function(){var Am=k.node.all(".fare-family-name");Am.each(function(Aq){var Ap=Aq.getAttribute("wl:translate"),Ao,Ar;if(Ap){Ao=Ap.split("|");Ar=Aq.getAttribute("wl:ff");Ao[1]=AT(Ar);Ap=Ao.join("|");Aq.setAttribute("wl:translate",Ap);Aq.setContent(A.translateParametrized(Ap))}});var An=k.node.all(".fare-summary");An.each(function(Ap){var Aq=Ap.getAttribute("wl:ff");var Ao=AN(Aq);Ao=A.decodeHtmlEntities(Ao);Ap.setContent(Ao)})}};function w(){k.node.removeClass("ftl-created");k.getDomEvents()}function J(){return(Aj.stickToScreen===true)}function AU(){A.fire("cart:stickToScreen",{container:k.node})}k.onCreate=function(Am,An){AZ();w();if(J()){AU()}};k.onRenderState={initialized:function(Am){AE(Am);s(Am);AK(Am);A.fire("cart:sizeChanged");k.fireEvent("cart-updated-with-seats-price",{});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"completedCarSelect"});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"reload"});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"removeCar"})},flightChanged:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchangeReview:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchange:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchangeFlightSelect:function(Am){f="exchangeFlightSelect";AE(Am);s(Am);A.fire("cart:sizeChanged")}};function AK(Aq){var Am=W.retainedPart;var Ap=W.retainedDirection;var Ao=W.retainedPart;if(Am&&Am.length&&Ap&&Ao&&Ao.length){var An=Aq.one("#cart_itinerariesDetails").one("."+Ap.toLowerCase());if(An){A.Event.purgeElement(An,true);An.setContent(X(Am));Aq.translate()}}}function AE(An){z(An);var Ao=A.all("#fare-rules-anchor");Ao.each(function(Ap){Ap.on("click",Ac)});var Am=A.one("#modify-search-trigger");if(Am){Am.on("click",AS)}A.delegate("click",y,"#cart-component","em.crossToggler");A.delegate("click",e,"#cart-component","em.toggler");A.delegate("click",Af,"#cart-component",".fare-family-toggler");A.delegate("click",P,"#cart-component","em.paxToggler")}function z(Am){if(a.flightFare){var An=Am.one(".price-details");if(An){An.removeClass("hidden")}}}function s(Am){if(Am){Am.delegate("mouseover",C,".fare-indicator-icon");Am.delegate("mouseout",T,".fare-indicator-icon")}}function C(Aq){Aq.preventDefault();if(d==null){var As=Aq.currentTarget;var Ao={header:"",context:[Aq.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[Aj.fareIndicatorOverlayHorizontalPosition,Aj.fareIndicatorOverlayVerticalPosition]],underlay:"none",modal:false,fixedcenter:false,constraintoviewport:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}};var Ap=As.ancestor();var Ar=Ap.one(".fiTranslation");if(Ar){var Am=Ar.get("innerHTML");var Au=Ap.ancestor();var An=new A.Node.create('<div class="fare-indicator-overlay hidden"></div>');n=new A.Node.create('<div id="fare-indicator-overlay-container"></div>');Au.appendChild(An);Au.appendChild(n);var At='<div class="fare-indicator-overlay-content">'+Am+"</div>";Ao.width=An.getStyle("width");Ao.height=An.getStyle("height");d=new A.widgets.PopupWidget(n,At,Ao);d.show()}}}function T(Ap){Ap.preventDefault();var Aq=Ap.currentTarget;if(d){d.hide();d=null;var Am=Aq.ancestor();var An=Am.ancestor();var Ao=An.one(".fare-indicator-overlay");An.removeChild(Ao);An.removeChild(n)}}function S(){if(W.itineraryParts.length===2){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||W.itineraryParts[1].shoppingBasketHash}else{if(W.itineraryParts.length===1){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash}else{if(W.itineraryParts.length===0){g[0]=g[0]||W.outboundsSelectedBasketHash;g[1]=g[1]||W.inboundsSelectedBasketHash}}}}function AZ(){if(W.itineraryParts.length===2){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||W.itineraryParts[1].shoppingBasketHash}else{if(W.itineraryParts.length===1){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash}}}function m(Ap){var Ao=Ap.data.step;g[Ao]=Ap.data.selectedHashRef||Ap.data.offerHashCode;g=g.slice(0,Ao+1);if(AR===g.length){W.itinerarySelected=true;var Am=g[g.length-1];var An={selectedBasketRefs:[Am]};F(An,"lazy",Am)}else{W.itinerarySelected=false;A.Array.each(I,function(Ar,Aq){if(Aq===Ao){I[Aq]=Ap.data.itinerary}else{if(Aq>Ao){I[Aq].segments=null}}});W.itineraryParts=I;M(W.itineraryParts);AG();j(Ap.data.index);AB([W.itineraryParts])}c()}function Aa(Ao){S();var Am=Ao.data.direction==="inbounds"?1:0;g[Am]=Ao.data.selectedBasketRefs;AC[Am]=Ao.data.itinerary.price;if(g[0]&&g[1]){var An={selectedBasketRefs:g};F(An,Ao.data.direction,Ao.data.selectedBasketRefs,true)}else{D(Ao.data.itinerary,Am);var Ap=[null,null];Ap[Am]=Ao.data.itinerary;AB(Ap,true);AI(Ao.data.direction,Ao.data.selectedBasketRefs)}c();A.fire("cart:sizeChanged")}function o(An){g=[An.data.selectedBasketRefs];AC[0]=An.data.itinerary.price;var Am={selectedBasketRefs:g};F(Am,An.data.direction,An.data.selectedBasketRefs);c();A.fire("cart:sizeChanged")}function U(Ap){var Ao=Ap.data.revisedSelectedHashRefs||[];var Aq=false;var An;for(An=0;An<W.itineraryParts.length;An++){W.itineraryParts[An]={departureDate:W.itineraryParts[An].departureDate};Aq=true}if(Aq){W.itinerarySelected=false;M(W.itineraryParts);AG()}else{var Am;if(data.context.state=="lazy"){Am={selectedBasketRefs:[Ao[Ao.length-1]]};F(Am,"checkPrice",[Ao[Ao.length-1]])}else{Am={selectedBasketRefs:Ao};F(Am,"checkPrice",Ao)}}}function M(An){var Am=k.node.one("#cart_itinerariesDetails");if(!Am){return }A.Array.each(An,function(Ao,Ap){D(Ao,Ap)})}function D(Ao,Am){Am=Am||0;var Ap=k.node.one("#cart_itinerariesDetails");if(!Ap){return }var Aq=Ap.all(".cart_itinerariesDetails_itinerary");var An=Aq.item(Am);var Ar=A.Node.create(X(Ao));An.replace(Ar);Ar.translate();An.destroy()}function AH(Am){AA=Am.data.offerCode;q()}function AP(Am){q()}function t(Am){G(Am)}function AO(Am){h(Am)}function Q(Am){Y(Am)}function AQ(Am){N(Am)}function AV(Am){p(Am)}function AF(Am){R(Am.data)}function l(){S();x()}function Ac(Am){Am.preventDefault();l()}function x(){Ad(true);k.fireEvent("showFareRules",{forceInitialize:true,data:{allFlightsSelected:Al(),callback:function(){Ad(false)}}})}function Ad(An){var Am=A.one("#cart-component");if(Am){var Ao=Am.one("#cart-loading");if(An){if(!Ao){html='<div id="cart-loading" class="cart-loading loading"></div>';Am.prepend(html)}Am.addClass("loading")}else{if(Ao){Ao.remove()}Am.removeClass("loading")}}}function Al(){return W.itinerarySelected}function AS(Am){Am.preventDefault();Ad(true);k.fireEvent("modify_search",{forceInitialize:true})}function i(Am){k.node.set("innerHTML",A.decodeHtmlEntities(Am));w()}function r(Ao,An){Ad(true);var Am={data:{requestPartials:[Ai]},on:{end:function(){Ad(false)},success:function(Aq,Ap){if(Ap){W=Ap.model;i(Ap.partials[Ai])}if(Ao.cfg&&"function"==typeof Ao.cfg.callback){Ao.cfg.callback()}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:An})}function Y(Am){r(Am,"updatePriceWithAncillary")}function N(Am){r(Am,"updatePriceWithHotel")}function p(Am){r(Am,"updatePriceWithBNPL")}function v(An){var Am=[];A.Object.each(An,function(Aq,Ap){var Ao=new Number(Ap);if(isFinite(Ao)){Am.push(Aq)}});return Am}function G(Ao){Ad(true);Ao=v(Ao);var An={selectedSeats:Ao,requestPartials:[Ai]};var Am={data:An,on:{end:function(){Ad(false);k.fireEvent("cart-updated-with-seats-price",{})},success:function(Aq,Ap){if(Ap){W=Ap.model;i(Ap.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithSeatSelected"})}function h(Ao){var An={requestPartials:[Ai]};var Am={data:An,on:{success:function(Aq,Ap){if(Ap){W=Ap.model;i(Ap.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithCarSelected"})}function q(){Ad(true);var Am={data:{selectedInsuranceCode:AA,requestPartials:["initialized"]},on:{end:function(){Ad(false)},success:function(Ap,An){if(An){W=An.model;var Ao=An.partials.initialized;i(Ao)}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithInsuranceOrSlider"})}function R(An){Ad(true);var Am={data:{selectedInsuranceCode:AA,requestPartials:[Ai]},on:{end:function(){Ad(false)},success:function(Ap,Ao){if(Ao){W=Ao.model;i(Ao.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithFopSurcharge"})}function F(Ap,Ar,Am,Aq){Ad(true);var An={data:A.merge({requestPartials:[f]},Ap),on:{end:function(){Ad(false)},success:function(Au,As){if(As){W=As.model;var At=As.partials[f];i(At);if(As.model.itinerarySelected){AI(Ar,Am);if(!As.model.redemptionUserCannotAffordItinerary){Ak()}}else{Z()}if(A.Lang.isArray(As.messages)&&As.messages.length>0){k.fireEvent("add-messages",{data:{messages:As.messages}})}AB(W.itineraryParts,Aq);Ab(W.total)}}}};var Ao=Ar?"checkPrice":"clearSelection";k.fireEvent("remove-all-component-messages");k.fireEvent("to-ajax",{cfg:An,actionCode:Ao})}function K(){g=[];Ad(true);var Am={data:{requestPartials:[f]},on:{end:function(){Ad(false)},success:function(Ap,An){if(An){W=An.model;var Ao=An.partials[f];i(Ao);Ab(W.total);k.fireEvent("cleared")}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"clearSelection"})}function b(){Ad(true);var Am={data:{requestPartials:[Ai]},on:{end:function(){Ad(false)},success:function(Ao,An){if(An){W=An.model;i(An.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"refresh"})}function B(Am){if(Am&&Am.priceAlternatives){return Am.priceAlternatives}return{}}function O(An){if(!An||!An.segments){return null}var Ao=[];for(var Ap=0;Ap<An.segments.length;Ap++){var Aq=An.segments[Ap];var Am={departure:Aq.departureDate,arrival:Aq.arrivalDate,departureAirport:Aq.departureCode,arrivalAirport:Aq.arrivalCode,flightNumber:Aq.flightNumber[0],airlineCode:Aq.airlineCodes[0],operatingAirlineCode:Aq.operatingCarrier[0],brandId:An.fareFamily,bookingClass:Aq.bookingClass,fareBasis:Aq.fareBasis,cabinClass:Aq.classOfService[0],nextDayIndicator:Aq.nextDayIndicator};Ao.push(Am)}return{segments:Ao}}function AB(As,Ap){var Aq=[];var Ao,Ar;for(Ao=0;Ao<As.length;Ao++){var Am=O(As[Ao]);Aq.push(Am)}var An=[];if(Ap&&Aq.length===2){for(Ao=0;Ao<2;Ao++){Ar=B(AC[Ao]);An[Ao]={parts:Aq[Ao]?[Aq[Ao]]:null,fareAmount:Ar}}}else{Ar=B(AC[0]);An[0]={parts:Aq,fareAmount:Ar}}k.fireEvent("update-data",{data:{selectedOffers:An}})}function Ab(Am){k.fireEvent("update-data",{data:{total:B(Am)}})}function P(Aq){var Ap=Aq.currentTarget;var Ao=Ap.one("a");var An=Ap.ancestor("div.cart-pax");if(An){var Am=An.one("ol");if(Am){isOpen=Ao.hasClass("open");if(isOpen){Ao.removeClass("open");Ao.addClass("translate");Ao.setAttribute("wl:translate","label.cart.priceSummary.view");Am.setStyle("display","none")}else{Ao.addClass("open");Ao.addClass("translate");Ao.setAttribute("wl:translate","label.cart.priceSummary.hide");Am.setStyle("display","block")}}}k.translateTemplate(AJ,Ap);A.fire("cart:sizeChanged");Aq.preventDefault()}function y(Am){e(Am,true)}function e(At,Ap){var As=At.currentTarget;var Ar=As.ancestor("li");var An=Ar.one("ol");var Ao=As.one("a").hasClass("open");var Aq=As.one("a");if(Ao){Aq.removeClass("open");if(!Ap){Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.view")}if(An){An.setStyle("display","none")}}else{Aq.addClass("open");if(!Ap){Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.hide")}if(An){An.setStyle("display","block");An.setAttribute("style","display: block;")}}var Am=A.all(".cartPrices");Am.each(function(Au){k.translateTemplate(AJ,Au)});A.fire("cart:sizeChanged");At.preventDefault()}function Af(Ap){var Aq=Ap.currentTarget;var Ao=Aq.one("a");var An=Ao.hasClass("open");var Am=Aq.one("div.fare-summary");if(An){Ao.removeClass("open");Ao.setAttribute("wl:translate","label.cart.fareSummary.viewDetails");Ao.addClass("translate");if(Am){Am.setStyle("display","none")}}else{Ao.addClass("open");Ao.setAttribute("wl:translate","label.cart.fareSummary.hideDetails");Ao.addClass("translate");if(Am){Am.setStyle("display","block");Am.setAttribute("style","display: block;")}}A.translateNode(Aq);A.fire("cart:sizeChanged");Ap.preventDefault()}function H(An){var Ao="initialized";var Am;for(Am in An){Ao=(!An||!A.Lang.isArray(An.segments)||An.segments[0].blank)?"initialized":"flightSelected"}return Ao}function E(An,Am,Ap){var Ao=A.all(Am);Ao.each(function(Ar){var As=k.getPartial(Ap,An);var Aq=A.Node.create(As);Ar.set("innerHTML",Aq.get("innerHTML"));A.translateNode(Ar);Aq=null})}function AG(){var Am=AD();if(A.one("#cart-total-price")){A.one("#cart-total-price").remove(true)}E(Am,".cart-price-details-container","_priceInfo");E(Am,"#price-summary","_flightChanged_PriceInfo");E(Am,"#price-info-exchange","_priceInfoExchangeReview")}function AD(){var Am={};Am.farePrice=AY("fare");Am.taxesPrice=AY("taxes");Am.discountPrice="";Am.feesPrice=AY("fees");Am.insurancePrice="";if(AJ.state==="exchangeReview"){Am.newTripTotalPrice=AY("newTrip")}else{Am.newTripTotalPrice=AY("newPrice")}Am.originalTripPrice=AY("originalPrice");Am.changeFeePrice=AY("changeFee");Am.ancillariesPrice=AY("ancillaries");Am.seatsPrice=AY("seats");Am.uniqueFareIndicators="";return Am}function AY(Am){return k.getPartial("_priceInfoItem",{pricePartType:Am,pricePartLink:"",pricePartValue:""})}function AW(An,Am){if(!W.showClassOfServicePerSegment){return k.getPartial("_chosenClass_cabinClass",{classOfService:A.translateParametrized("Cabin."+An),index:Am})}return""}function X(Am){var A3="";var A7,A5;var At=[];var Ax=H(Am);var A4=[];var Au=[];var A9=(A7==0)?"outbound":"inbound";var Aq;var Ay=Am.fareFamily;if(Ay&&Am.basketsRef){Aq=Am.basketsRef[Ay]}if(Am.segments&&Am.segments.length>0){var A2=Am.segments[0].arrivalDate;for(A5=0;A5<Am.segments.length;A5++){var Az;var Ao=Am.segments[A5];var A1=Ao.departureCode;var Av=Ao.departureDate;var A8=Ao.arrivalCode;var As=Aq?Aq.classOfService:Ao.classOfService;var An=Aq?Aq.fareBasis:Ao.fareBasis;if(A.Lang.isArray(As)&&As.length>0){Az=As[0];A3=Az}An=An.replace(/\/.*/g,"");var Ap=(A5==0)?"depart":"connection";A4.push(u(A1,A2,Av,An,Ap,A7,A5,Az));A4.push(Ag(A7,A5,Az));var A6=AL(Ao.flightNumber[0],Ao.airlineCodes[0],Ao.operatingCarrier[0]);Au.push(A6);A2=Ao.arrivalDate}A4.push(u(A8,A2,Av,An,"arrive",A7,A5))}if(A.Lang.isArray(Am.overrideClassOfService)&&Am.overrideClassOfService.length>0){A3=Am.overrideClassOfService[0]}var BA={direction:A9,itineraryPrice:(Am&&Am.price&&Am.price.amount!=0&&!Ae)?AM(Am.price):"",partSegments:A4.join(""),flightNumbers:Au.join(" | "),fareFamily:"",cabinClass:AW(A3,A7)};if(Ay){var Aw=A.decodeHtmlEntities(AN(Ay));var Ar=W.fareFamilyGroupDataMap[Ay];var A0=Ar?Ar.familyGroupId:"undefinedGroup";BA.fareFamily=k.getPartial("_chosenClass_fareFamily",{fareFamily:AT(Ay),fareFamilyKey:Ay,fareFamilyGroupKey:A0,fareSummary:Aw,index:A7})}return k.getPartials("_flightDetails_"+Ax,BA)}function Ag(Ao,An,Am){if(W.showClassOfServicePerSegment){var Ap={part_index:Ao,segment_index:An+1,classOfService:A.translateParametrized("Cabin."+Am)};return k.getPartial("_segmentClassOfService",Ap)}return""}function Ah(An,Aq){var Am=W.fareFamilyDataMap[An];if(Am){var Ao=A.getCurrentLanguage();var Ap=Am.localizedData[Ao];if(Ap&&Ap[Aq]){return Ap[Aq]}}return"&nbsp;"}function AT(Am){return Ah(Am,"label")}function AN(Am){return Ah(Am,"marketingText")}function AL(Ap,Ao,Am){var An=Aj.flightNumberFormat;var Aq=A.getFullAirlineName(Am);return k.getPartial("_flightNumber_"+An.toLowerCase(),{flightNumber:Ap,airlineCode:Ao,operatingCarrier:Aq})}function u(An,As,At,Au,Ao,Ar,Ap){var Am=A.airports[An];var Aq={flightCode:An,cityCode:Am&&Am.city||An,stateCode:Am&&Am.stateProvince||An,countryCode:Am&&Am.country||An,arrivalFlightDate:As,departureFlightDate:At,fareBasis:Au,flightType:Ao,partIndex:Ar,segmentIndex:Ap+1};if(Ao=="depart"){return k.getPartial("_segmentDetailsForDeparture",Aq)}else{if(Ao=="arrive"){return k.getPartial("_segmentDetailsForArrival",Aq)}}return k.getPartial("_segmentDetailsForConnection",Aq)}function AM(Am){return A.formatPrice(Am,{currencyCodeSeparator:"&nbsp;"})}function Ak(){k.fireEvent("unblock_submit")}function c(){k.fireEvent("block_submit")}function AI(An,Am){setTimeout(function(){k.fireEvent("refresh_flc",{data:{direction:An,brandedBasketHashRef:Am}})},100)}function j(Am){k.fireEvent("refresh_lazy_flc",{data:{index:Am,selectedHashRefs:g}})}function Z(){g=[];k.fireEvent("reset_selection")}}});YUI.add("wl-farerules",function(A){A.components.Farerules=function(C){var K=this;var L;var M={};var P=false;var D=C.compInstConfig;K.incomingEvents={showFareRules:B};K.onRenderState={initialized:function(Q){H(Q);if(D.tabHash){A.on("pageHtmlLoaded",function(){K.fireEvent("add_tabs_callback",{data:{tabHash:D.tabHash,additionalCallback:function(R){if(R.newValue){Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})})}},ajax:function(R){if(D.enabled){function Q(){R.removeClass("loading")}R.addClass("loading");O(I,Q,true)}},overlay:function(Q){N()}};function B(R){if(C.state!="overlay"){return }var S=R.data||{};var Q=A.Lang.isFunction(S.callback)&&S.callback;O(G,Q,S.allFlightsSelected)}function O(U,R,T){var S=T?"__fareRulesContent":"__unavailableFareRules";var Q={data:{requestPartials:[S],flightsSelected:T},on:{end:R||function(){},success:function(X,W){if(W){var V=W.partials[S];U(V);H(K.node)}},failure:U}};K.fireEvent("to-ajax",{context:C,type:"farerules",cfg:Q,actionCode:"getFareRules"})}function E(Q){M[C.state]=Q.one(".fare-rules-container")}function H(R){var Q=R.one("ul");if(Q){Q.delegate("click",J,"li")}E(R);F()}function J(S){S.preventDefault();var T=S.currentTarget;if(T.hasClass("selected")){return }T.addClass("selected");T.siblings().removeClass("selected");var Q=T.get("parentNode").get("children").indexOf(T);var R=K.node.one(".yui-content").get("children");R.addClass("yui-hidden");R.item(Q).removeClass("yui-hidden")}function N(){L=new YAHOO.widget.Dialog("fare-rules-overlay",{visible:false,draggable:false,fixedcenter:"contained",zIndex:520,width:"700px",close:true});L.hideEvent.subscribe(function(){P=false;if(!M[C.state]){E(currentNode)}if(!M[C.state]){return }M[C.state].purge(true);M[C.state].set("innerHTML","")})}function I(Q){K.node.one(".fare-rules-list").set("innerHTML",A.decodeHtmlEntities(Q))}function G(Q){if(C.state=="overlay"){if(P){return }P=true;A.one("#fare-rules-overlay").removeClass("hidden");L.render(document.body);L.show();var R=A.one(L.element);if(R){K.node=R;I(Q)}L.center()}}function F(){var Q=C.compInstConfig;K.fireEvent("cssFareRules",{forceInitialize:true,data:{status:Q.status}})}}});YUI.add("event-simulate",function(A){(function(){var K=A.Lang,J=A.Array,F=K.isFunction,D=K.isString,G=K.isBoolean,P=K.isObject,O=K.isNumber,N=A.config.doc,Q={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1},M={keydown:1,keyup:1,keypress:1},C={blur:1,change:1,focus:1,resize:1,scroll:1,select:1},E={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};A.mix(E,Q);A.mix(E,M);function I(V,Z,U,S,b,R,L,a,X,d,c){if(!V){A.error("simulateKeyEvent(): Invalid target.")}if(D(Z)){Z=Z.toLowerCase();switch(Z){case"textevent":Z="keypress";break;case"keyup":case"keydown":case"keypress":break;default:A.error("simulateKeyEvent(): Event type '"+Z+"' not supported.")}}else{A.error("simulateKeyEvent(): Event type must be a string.")}if(!G(U)){U=true}if(!G(S)){S=true}if(!P(b)){b=window}if(!G(R)){R=false}if(!G(L)){L=false}if(!G(a)){a=false}if(!G(X)){X=false}if(!O(d)){d=0}if(!O(c)){c=0}var Y=null;if(F(N.createEvent)){try{Y=N.createEvent("KeyEvents");Y.initKeyEvent(Z,U,S,b,R,L,a,X,d,c)}catch(W){try{Y=N.createEvent("Events")}catch(T){Y=N.createEvent("UIEvents")}finally{Y.initEvent(Z,U,S);Y.view=b;Y.altKey=L;Y.ctrlKey=R;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=d;Y.charCode=c}}V.dispatchEvent(Y)}else{if(P(N.createEventObject)){Y=N.createEventObject();Y.bubbles=U;Y.cancelable=S;Y.view=b;Y.ctrlKey=R;Y.altKey=L;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=(c>0)?c:d;V.fireEvent("on"+Z,Y)}else{A.error("simulateKeyEvent(): No event simulation framework present.")}}}function B(a,f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b){if(!a){A.error("simulateMouseEvent(): Invalid target.")}if(D(f)){f=f.toLowerCase();if(!Q[f]){A.error("simulateMouseEvent(): Event type '"+f+"' not supported.")}}else{A.error("simulateMouseEvent(): Event type must be a string.")}if(!G(X)){X=true}if(!G(U)){U=(f!="mousemove")}if(!P(g)){g=window}if(!O(Z)){Z=1}if(!O(W)){W=0}if(!O(V)){V=0}if(!O(T)){T=0}if(!O(R)){R=0}if(!G(S)){S=false}if(!G(L)){L=false}if(!G(e)){e=false}if(!G(c)){c=false}if(!O(Y)){Y=0}var d=null;if(F(N.createEvent)){d=N.createEvent("MouseEvents");if(d.initMouseEvent){d.initMouseEvent(f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b)}else{d=N.createEvent("UIEvents");d.initEvent(f,X,U);d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;d.button=Y;d.relatedTarget=b}if(b&&!d.relatedTarget){if(f=="mouseout"){d.toElement=b}else{if(f=="mouseover"){d.fromElement=b}}}a.dispatchEvent(d)}else{if(P(N.createEventObject)){d=N.createEventObject();d.bubbles=X;d.cancelable=U;d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;switch(Y){case 0:d.button=1;break;case 1:d.button=4;break;case 2:break;default:d.button=0}d.relatedTarget=b;a.fireEvent("on"+f,d)}else{A.error("simulateMouseEvent(): No event simulation framework present.")}}}function H(W,V,S,R,L,U){if(!W){A.error("simulateUIEvent(): Invalid target.")}if(D(V)){V=V.toLowerCase();if(!C[V]){A.error("simulateUIEvent(): Event type '"+V+"' not supported.")}}else{A.error("simulateUIEvent(): Event type must be a string.")}var T=null;if(!G(S)){S=(V in E)}if(!G(R)){R=(V=="submit")}if(!P(L)){L=window}if(!O(U)){U=1}if(F(N.createEvent)){T=N.createEvent("UIEvents");T.initUIEvent(V,S,R,L,U);W.dispatchEvent(T)}else{if(P(N.createEventObject)){T=N.createEventObject();T.bubbles=S;T.cancelable=R;T.view=L;T.detail=U;W.fireEvent("on"+V,T)}else{A.error("simulateUIEvent(): No event simulation framework present.")}}}A.Event.simulate=function(S,R,L){L=L||{};if(Q[R]){B(S,R,L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,L.clientX,L.clientY,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}else{if(M[R]){I(S,R,L.bubbles,L.cancelable,L.view,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.keyCode,L.charCode)}else{if(C[R]){H(S,R,L.bubbles,L.cancelable,L.view,L.detail)}else{A.error("simulate(): Event '"+R+"' can't be simulated.")}}}}})()},"3.1.2",{requires:["event-base"]});YUI.add("node-event-simulate",function(A){A.Node.prototype.simulate=function(C,B){A.Event.simulate(A.Node.getDOMNode(this),C,B)}},"3.1.2",{requires:["node-base","event-simulate"]});YUI.add("wl-yui2-log-control",function(A){if(YAHOO&&YAHOO.widget){YAHOO.widget.Logger=function(){};YAHOO.widget.LogWriter=function(){return{log:function(){}}}}},"1.0.0");(function(){YAHOO.util.Config=function(D){if(D){this.init(D)}if(!D){YAHOO.log("No owner specified for Config object","error","Config")}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE)},checkNumber:function(D){return(!isNaN(D))},fireEvent:function(D,F){YAHOO.log("Firing Config event: "+D+"="+F,"info","Config");var E=this.config[D];if(E&&E.event){E.event.fire(F)}},addProperty:function(E,D){E=E.toLowerCase();YAHOO.log("Added property: "+E,"info","Config");this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner)}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value)}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value}}}return D},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value}else{return undefined}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true}}else{return false}},setProperty:function(E,G,D){var F;E=E.toLowerCase();YAHOO.log("setProperty: "+E+"="+G,"info","Config");if(this.queueInProgress&&!D){this.queueProperty(E,G);return true}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G])}return true}}else{return false}}},queueProperty:function(S,P){S=S.toLowerCase();YAHOO.log("queueProperty: "+S+"="+P,"info","Config");var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false}else{if(!B.isUndefined(P)){R.value=P}else{P=R.value}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P])}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break}}}}}YAHOO.log("Config event queue: "+this.outputEventQueue(),"info","Config");return true}else{return false}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D)}else{this.fireEvent(D,E.value)}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F]}}this.initialConfig=E}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F])}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D)}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H)}return true}else{return false}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G)}else{return false}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]"}return D},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", "}}return D},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true}}while(G--)}return false};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider)}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1}}else{if(E>11){while(E>11){E-=12;B+=1}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break}return F},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B)}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A)}}}D.setDate(D.getDate()+C)},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return this.getDate(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(D,B,G){B=B||0;G=G||this.WEEK_ONE_JAN_DATE;var H=this.clearTime(D),L,M;if(H.getDay()===B){L=H}else{L=this.getFirstDayOfWeek(H,B)}var I=L.getFullYear();M=new Date(L.getTime()+6*this.ONE_DAY_MS);var F;if(I!==M.getFullYear()&&M.getDate()>=G){F=1}else{var E=this.clearTime(this.getDate(I,0,G)),A=this.getFirstDayOfWeek(E,B);var J=Math.round((H.getTime()-A.getTime())/this.ONE_DAY_MS);var K=J%7;var C=(J-K)/7;F=C+1}return F},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C)},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(12,0,0,0);return A},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1}if(D>=100){B=new Date(D,A,C)}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0)}return B}};(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,E=YAHOO.lang,D=YAHOO.widget.DateMath;function F(I,G,H){this.init.apply(this,arguments)}F.IMG_ROOT=null;F.DATE="D";F.MONTH_DAY="MD";F.WEEKDAY="WD";F.RANGE="R";F.MONTH="M";F.DISPLAY_DAYS=42;F.STOP_RENDER="S";F.SHORT="short";F.LONG="long";F.MEDIUM="medium";F.ONE_CHAR="1char";F.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date(),supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};F._DEFAULT_CONFIG=F.DEFAULT_CONFIG;var B=F.DEFAULT_CONFIG;F._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};F.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};F._STYLES=F.STYLES;F.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(H){var G={id:null,container:null,config:null};if(H&&H.length&&H.length>0){switch(H.length){case 1:G.id=null;G.container=H[0];G.config=null;break;case 2:if(E.isObject(H[1])&&!H[1].tagName&&!(H[1] instanceof String)){G.id=null;G.container=H[0];G.config=H[1]}else{G.id=H[0];G.container=H[1];G.config=null}break;default:G.id=H[0];G.container=H[1];G.config=H[2];break}}else{this.logger.log("Invalid constructor/init arguments","error")}return G},init:function(J,H,I){var G=this._parseArgs(arguments);J=G.id;H=G.container;I=G.config;this.oDomContainer=C.get(H);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=C.generateId()}if(!J){J=this.oDomContainer.id+"_t"}this.id=J;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("Calendar "+this.id);this.initEvents();this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();C.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);C.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(I){this.cfg.applyConfig(I,true)}this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(I,H,J){var G=H[0];if(!this.parent){if(C.inDocument(this.oDomContainer)){if(G){var K=C.getStyle(this.oDomContainer,"position");if(K=="absolute"||K=="relative"){if(!C.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";C.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){C.addClass(this.iframe,this.Style.CSS_FIXED_SIZE)}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null}}}}},configTitle:function(H,G,I){var K=G[0];if(K){this.createTitleBar(K)}else{var J=this.cfg.getProperty(B.CLOSE.key);if(!J){this.removeTitleBar()}else{this.createTitleBar("&#160;")}}},configClose:function(H,G,I){var K=G[0],J=this.cfg.getProperty(B.TITLE.key);if(K){if(!J){this.createTitleBar("&#160;")}this.createCloseButton()}else{this.removeCloseButton();if(!J){this.removeTitleBar()}}},initEvents:function(){var G=F._EVENT_TYPES,I=YAHOO.util.CustomEvent,H=this;H.beforeSelectEvent=new I(G.BEFORE_SELECT);H.selectEvent=new I(G.SELECT);H.beforeDeselectEvent=new I(G.BEFORE_DESELECT);H.deselectEvent=new I(G.DESELECT);H.changePageEvent=new I(G.CHANGE_PAGE);H.beforeRenderEvent=new I(G.BEFORE_RENDER);H.renderEvent=new I(G.RENDER);H.beforeDestroyEvent=new I(G.BEFORE_DESTROY);H.destroyEvent=new I(G.DESTROY);H.resetEvent=new I(G.RESET);H.clearEvent=new I(G.CLEAR);H.beforeShowEvent=new I(G.BEFORE_SHOW);H.showEvent=new I(G.SHOW);H.beforeHideEvent=new I(G.BEFORE_HIDE);H.hideEvent=new I(G.HIDE);H.beforeShowNavEvent=new I(G.BEFORE_SHOW_NAV);H.showNavEvent=new I(G.SHOW_NAV);H.beforeHideNavEvent=new I(G.BEFORE_HIDE_NAV);H.hideNavEvent=new I(G.HIDE_NAV);H.beforeRenderNavEvent=new I(G.BEFORE_RENDER_NAV);H.renderNavEvent=new I(G.RENDER_NAV);H.beforeSelectEvent.subscribe(H.onBeforeSelect,this,true);H.selectEvent.subscribe(H.onSelect,this,true);H.beforeDeselectEvent.subscribe(H.onBeforeDeselect,this,true);H.deselectEvent.subscribe(H.onDeselect,this,true);H.changePageEvent.subscribe(H.onChangePage,this,true);H.renderEvent.subscribe(H.onRender,this,true);H.resetEvent.subscribe(H.onReset,this,true);H.clearEvent.subscribe(H.onClear,this,true)},doPreviousMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.previousMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_LEFT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doNextMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.nextMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_RIGHT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doSelectCell:function(M,G){var R,O,I,L;var N=A.getTarget(M),H=N.tagName.toLowerCase(),K=false;while(H!="td"&&!C.hasClass(N,G.Style.CSS_CELL_SELECTABLE)){if(!K&&H=="a"&&C.hasClass(N,G.Style.CSS_CELL_SELECTOR)){K=true}N=N.parentNode;H=N.tagName.toLowerCase();if(N==this.oDomContainer||H=="html"){return }}if(K){A.preventDefault(M)}R=N;if(C.hasClass(R,G.Style.CSS_CELL_SELECTABLE)){L=G.getIndexFromId(R.id);if(L>-1){O=G.cellDates[L];if(O){I=D.getDate(O[0],O[1]-1,O[2]);var Q;G.logger.log("Selecting cell "+L+" via click","info");if(G.Options.MULTI_SELECT){Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}var J=G.cellDates[L];var P=G._indexOfSelectedFieldArray(J);if(P>-1){G.deselectCell(L)}else{G.selectCell(L)}}else{Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}G.selectCell(L)}}}}},doCellMouseOver:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.addClass(G,H.Style.CSS_CELL_HOVER)}},doCellMouseOut:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.removeClass(G,H.Style.CSS_CELL_HOVER)}},setupConfig:function(){var G=this.cfg;G.addProperty(B.TODAY.key,{value:new Date(B.TODAY.value.getTime()),supercedes:B.TODAY.supercedes,handler:this.configToday,suppressEvent:true});G.addProperty(B.PAGEDATE.key,{value:B.PAGEDATE.value||new Date(B.TODAY.value.getTime()),handler:this.configPageDate});G.addProperty(B.SELECTED.key,{value:B.SELECTED.value.concat(),handler:this.configSelected});G.addProperty(B.TITLE.key,{value:B.TITLE.value,handler:this.configTitle});G.addProperty(B.CLOSE.key,{value:B.CLOSE.value,handler:this.configClose});G.addProperty(B.IFRAME.key,{value:B.IFRAME.value,handler:this.configIframe,validator:G.checkBoolean});G.addProperty(B.MINDATE.key,{value:B.MINDATE.value,handler:this.configMinDate});G.addProperty(B.MAXDATE.key,{value:B.MAXDATE.value,handler:this.configMaxDate});G.addProperty(B.MULTI_SELECT.key,{value:B.MULTI_SELECT.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.START_WEEKDAY.key,{value:B.START_WEEKDAY.value,handler:this.configOptions,validator:G.checkNumber});G.addProperty(B.SHOW_WEEKDAYS.key,{value:B.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_HEADER.key,{value:B.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_FOOTER.key,{value:B.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.HIDE_BLANK_WEEKS.key,{value:B.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.NAV_ARROW_LEFT.key,{value:B.NAV_ARROW_LEFT.value,handler:this.configOptions});G.addProperty(B.NAV_ARROW_RIGHT.key,{value:B.NAV_ARROW_RIGHT.value,handler:this.configOptions});G.addProperty(B.MONTHS_SHORT.key,{value:B.MONTHS_SHORT.value,handler:this.configLocale});G.addProperty(B.MONTHS_LONG.key,{value:B.MONTHS_LONG.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_1CHAR.key,{value:B.WEEKDAYS_1CHAR.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_SHORT.key,{value:B.WEEKDAYS_SHORT.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_MEDIUM.key,{value:B.WEEKDAYS_MEDIUM.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_LONG.key,{value:B.WEEKDAYS_LONG.value,handler:this.configLocale});var H=function(){G.refireEvent(B.LOCALE_MONTHS.key);G.refireEvent(B.LOCALE_WEEKDAYS.key)};G.subscribeToConfigEvent(B.START_WEEKDAY.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_LONG.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_1CHAR.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_MEDIUM.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_LONG.key,H,this,true);G.addProperty(B.LOCALE_MONTHS.key,{value:B.LOCALE_MONTHS.value,handler:this.configLocaleValues});G.addProperty(B.LOCALE_WEEKDAYS.key,{value:B.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});G.addProperty(B.YEAR_OFFSET.key,{value:B.YEAR_OFFSET.value,supercedes:B.YEAR_OFFSET.supercedes,handler:this.configLocale});G.addProperty(B.DATE_DELIMITER.key,{value:B.DATE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_FIELD_DELIMITER.key,{value:B.DATE_FIELD_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_RANGE_DELIMITER.key,{value:B.DATE_RANGE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.MY_MONTH_POSITION.key,{value:B.MY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_YEAR_POSITION.key,{value:B.MY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_MONTH_POSITION.key,{value:B.MD_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_DAY_POSITION.key,{value:B.MD_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_MONTH_POSITION.key,{value:B.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_DAY_POSITION.key,{value:B.MDY_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_YEAR_POSITION.key,{value:B.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_POSITION.key,{value:B.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_YEAR_POSITION.key,{value:B.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_SUFFIX.key,{value:B.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});G.addProperty(B.MY_LABEL_YEAR_SUFFIX.key,{value:B.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});G.addProperty(B.NAV.key,{value:B.NAV.value,handler:this.configNavigator});G.addProperty(B.STRINGS.key,{value:B.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:B.STRINGS.supercedes})},configStrings:function(H,G,I){var J=E.merge(B.STRINGS.value,G[0]);this.cfg.setProperty(B.STRINGS.key,J,true)},configPageDate:function(H,G,I){this.cfg.setProperty(B.PAGEDATE.key,this._parsePageDate(G[0]),true)},configMinDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MINDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configMaxDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MAXDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configToday:function(I,H,J){var K=H[0];if(E.isString(K)){K=this._parseDate(K)}var G=D.clearTime(K);if(!this.cfg.initialConfig[B.PAGEDATE.key]){this.cfg.setProperty(B.PAGEDATE.key,G)}this.today=G;this.cfg.setProperty(B.TODAY.key,G,true)},configSelected:function(I,G,K){var H=G[0],J=B.SELECTED.key;if(H){if(E.isString(H)){this.cfg.setProperty(J,this._parseDates(H),true)}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(J)}},configOptions:function(H,G,I){this.Options[H.toUpperCase()]=G[0]},configLocale:function(H,G,I){this.Locale[H.toUpperCase()]=G[0];this.cfg.refireEvent(B.LOCALE_MONTHS.key);this.cfg.refireEvent(B.LOCALE_WEEKDAYS.key)},configLocaleValues:function(J,I,K){J=J.toLowerCase();var M=I[0],H=this.cfg,N=this.Locale;switch(J){case B.LOCALE_MONTHS.key:switch(M){case F.SHORT:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_SHORT.key).concat();break;case F.LONG:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_LONG.key).concat();break}break;case B.LOCALE_WEEKDAYS.key:switch(M){case F.ONE_CHAR:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case F.SHORT:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case F.MEDIUM:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case F.LONG:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_LONG.key).concat();break}var L=H.getProperty(B.START_WEEKDAY.key);if(L>0){for(var G=0;G<L;++G){N.LOCALE_WEEKDAYS.push(N.LOCALE_WEEKDAYS.shift())}}break}},configNavigator:function(H,G,I){var J=G[0];if(YAHOO.widget.CalendarNavigator&&(J===true||E.isObject(J))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages){this.oNavigator.erase()}},this,true)}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}}},initStyles:function(){var G=F.STYLES;this.Style={CSS_ROW_HEADER:G.CSS_ROW_HEADER,CSS_ROW_FOOTER:G.CSS_ROW_FOOTER,CSS_CELL:G.CSS_CELL,CSS_CELL_SELECTOR:G.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:G.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:G.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:G.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:G.CSS_CELL_TODAY,CSS_CELL_OOM:G.CSS_CELL_OOM,CSS_CELL_OOB:G.CSS_CELL_OOB,CSS_HEADER:G.CSS_HEADER,CSS_HEADER_TEXT:G.CSS_HEADER_TEXT,CSS_BODY:G.CSS_BODY,CSS_WEEKDAY_CELL:G.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:G.CSS_WEEKDAY_ROW,CSS_FOOTER:G.CSS_FOOTER,CSS_CALENDAR:G.CSS_CALENDAR,CSS_SINGLE:G.CSS_SINGLE,CSS_CONTAINER:G.CSS_CONTAINER,CSS_NAV_LEFT:G.CSS_NAV_LEFT,CSS_NAV_RIGHT:G.CSS_NAV_RIGHT,CSS_NAV:G.CSS_NAV,CSS_CLOSE:G.CSS_CLOSE,CSS_CELL_TOP:G.CSS_CELL_TOP,CSS_CELL_LEFT:G.CSS_CELL_LEFT,CSS_CELL_RIGHT:G.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:G.CSS_CELL_BOTTOM,CSS_CELL_HOVER:G.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:G.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:G.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:G.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:G.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:G.CSS_WITH_TITLE,CSS_FIXED_SIZE:G.CSS_FIXED_SIZE,CSS_LINK_CLOSE:G.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(B.PAGEDATE.key))},_buildMonthLabel:function(G){var I=this.Locale.LOCALE_MONTHS[G.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,H=(G.getFullYear()+this.Locale.YEAR_OFFSET)+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return H+I}else{return I+H}},buildDayLabel:function(G){return G.getDate()},createTitleBar:function(G){var H=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");H.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;H.innerHTML=G;this.oDomContainer.insertBefore(H,this.oDomContainer.firstChild);C.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return H},removeTitleBar:function(){var G=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}C.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var K=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,J=this.Style.CSS_LINK_CLOSE,M="us/my/bn/x_d.gif",L=C.getElementsByClassName(J,"a",this.oDomContainer)[0],G=this.cfg.getProperty(B.STRINGS.key),H=(G&&G.close)?G.close:"";if(!L){L=document.createElement("a");A.addListener(L,"click",function(O,N){N.hide();A.preventDefault(O)},this)}L.href="#";L.className=J;if(F.IMG_ROOT!==null){var I=C.getElementsByClassName(K,"img",L)[0]||document.createElement("img");I.src=F.IMG_ROOT+M;I.className=K;L.appendChild(I)}else{L.innerHTML='<span class="'+K+" "+this.Style.CSS_CLOSE+'">'+H+"</span>"}this.oDomContainer.appendChild(L);return L},removeCloseButton:function(){var G=C.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}},renderHeader:function(Q){this.logger.log("Rendering header","render");var P=7,O="us/tr/callt.gif",G="us/tr/calrt.gif",N=this.cfg,K=N.getProperty(B.PAGEDATE.key),L=N.getProperty(B.STRINGS.key),V=(L&&L.previousMonth)?L.previousMonth:"",H=(L&&L.nextMonth)?L.nextMonth:"",M;if(N.getProperty(B.SHOW_WEEK_HEADER.key)){P+=1}if(N.getProperty(B.SHOW_WEEK_FOOTER.key)){P+=1}Q[Q.length]="<thead>";Q[Q.length]="<tr>";Q[Q.length]='<th colspan="'+P+'" class="'+this.Style.CSS_HEADER_TEXT+'">';Q[Q.length]='<div class="'+this.Style.CSS_HEADER+'">';var X,U=false;if(this.parent){if(this.index===0){X=true}if(this.index==(this.parent.cfg.getProperty("pages")-1)){U=true}}else{X=true;U=true}if(X){M=this._buildMonthLabel(D.subtract(K,D.MONTH,1));var R=N.getProperty(B.NAV_ARROW_LEFT.key);if(R===null&&F.IMG_ROOT!==null){R=F.IMG_ROOT+O}var I=(R===null)?"":' style="background-image:url('+R+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+I+' href="#">'+V+" ("+M+")</a>"}var W=this.buildMonthLabel();var S=this.parent||this;if(S.cfg.getProperty("navigator")){W='<a class="'+this.Style.CSS_NAV+'" href="#">'+W+"</a>"}Q[Q.length]=W;if(U){M=this._buildMonthLabel(D.add(K,D.MONTH,1));var T=N.getProperty(B.NAV_ARROW_RIGHT.key);if(T===null&&F.IMG_ROOT!==null){T=F.IMG_ROOT+G}var J=(T===null)?"":' style="background-image:url('+T+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+J+' href="#">'+H+" ("+M+")</a>"}Q[Q.length]="</div>\n</th>\n</tr>";if(N.getProperty(B.SHOW_WEEKDAYS.key)){Q=this.buildWeekdays(Q)}Q[Q.length]="</thead>";return Q},buildWeekdays:function(H){H[H.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(B.SHOW_WEEK_HEADER.key)){H[H.length]="<th>&#160;</th>"}for(var G=0;G<this.Locale.LOCALE_WEEKDAYS.length;++G){H[H.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[G]+"</th>"}if(this.cfg.getProperty(B.SHOW_WEEK_FOOTER.key)){H[H.length]="<th>&#160;</th>"}H[H.length]="</tr>";return H},renderBody:function(m,k){this.logger.log("Rendering body","render");var AK=this.cfg.getProperty(B.START_WEEKDAY.key);this.preMonthDays=m.getDay();if(AK>0){this.preMonthDays-=AK}if(this.preMonthDays<0){this.preMonthDays+=7}this.monthDays=D.findMonthEnd(m).getDate();this.postMonthDays=F.DISPLAY_DAYS-this.preMonthDays-this.monthDays;this.logger.log(this.preMonthDays+" preciding out-of-month days","render");this.logger.log(this.monthDays+" month days","render");this.logger.log(this.postMonthDays+" post-month days","render");m=D.subtract(m,D.DAY,this.preMonthDays);this.logger.log("Calendar page starts on "+m,"render");var Y,N,M="w",f="_cell",c="wd",w="d",P,u,AC=this.today,O=this.cfg,W=AC.getFullYear(),v=AC.getMonth(),J=AC.getDate(),AB=O.getProperty(B.PAGEDATE.key),I=O.getProperty(B.HIDE_BLANK_WEEKS.key),j=O.getProperty(B.SHOW_WEEK_FOOTER.key),b=O.getProperty(B.SHOW_WEEK_HEADER.key),U=O.getProperty(B.MINDATE.key),a=O.getProperty(B.MAXDATE.key),T=this.Locale.YEAR_OFFSET;if(U){U=D.clearTime(U)}if(a){a=D.clearTime(a)}k[k.length]='<tbody class="m'+(AB.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AI=0,Q=document.createElement("div"),l=document.createElement("td");Q.appendChild(l);var AA=this.parent||this;for(var AE=0;AE<6;AE++){Y=D.getWeekNumber(m,AK);N=M+Y;if(AE!==0&&I===true&&m.getMonth()!=AB.getMonth()){break}else{k[k.length]='<tr class="'+N+'">';if(b){k=this.renderRowHeader(Y,k)}for(var AJ=0;AJ<7;AJ++){P=[];this.clearElement(l);l.className=this.Style.CSS_CELL;l.id=this.id+f+AI;this.logger.log("Rendering cell "+l.id+" ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(m.getDate()==J&&m.getMonth()==v&&m.getFullYear()==W){P[P.length]=AA.renderCellStyleToday}var Z=[m.getFullYear(),m.getMonth()+1,m.getDate()];this.cellDates[this.cellDates.length]=Z;if(m.getMonth()!=AB.getMonth()){P[P.length]=AA.renderCellNotThisMonth}else{C.addClass(l,c+m.getDay());C.addClass(l,w+m.getDate());for(var AD=0;AD<this.renderStack.length;++AD){u=null;var y=this.renderStack[AD],AL=y[0],H,e,L;switch(AL){case F.DATE:H=y[1][1];e=y[1][2];L=y[1][0];if(m.getMonth()+1==H&&m.getDate()==e&&m.getFullYear()==L){u=y[2];this.renderStack.splice(AD,1)}break;case F.MONTH_DAY:H=y[1][0];e=y[1][1];if(m.getMonth()+1==H&&m.getDate()==e){u=y[2];this.renderStack.splice(AD,1)}break;case F.RANGE:var h=y[1][0],g=y[1][1],n=h[1],S=h[2],X=h[0],AH=D.getDate(X,n-1,S),K=g[1],q=g[2],G=g[0],AG=D.getDate(G,K-1,q);if(m.getTime()>=AH.getTime()&&m.getTime()<=AG.getTime()){u=y[2];if(m.getTime()==AG.getTime()){this.renderStack.splice(AD,1)}}break;case F.WEEKDAY:var R=y[1][0];if(m.getDay()+1==R){u=y[2]}break;case F.MONTH:H=y[1][0];if(m.getMonth()+1==H){u=y[2]}break}if(u){P[P.length]=u}}}if(this._indexOfSelectedFieldArray(Z)>-1){P[P.length]=AA.renderCellStyleSelected}if((U&&(m.getTime()<U.getTime()))||(a&&(m.getTime()>a.getTime()))){P[P.length]=AA.renderOutOfBoundsDate}else{P[P.length]=AA.styleCellDefault;P[P.length]=AA.renderCellDefault}for(var z=0;z<P.length;++z){this.logger.log("renderer["+z+"] for ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(P[z].call(AA,m,l)==F.STOP_RENDER){break}}m.setTime(m.getTime()+D.ONE_DAY_MS);m=D.clearTime(m);if(AI>=0&&AI<=6){C.addClass(l,this.Style.CSS_CELL_TOP)}if((AI%7)===0){C.addClass(l,this.Style.CSS_CELL_LEFT)}if(((AI+1)%7)===0){C.addClass(l,this.Style.CSS_CELL_RIGHT)}var o=this.postMonthDays;if(I&&o>=7){var V=Math.floor(o/7);for(var AF=0;AF<V;++AF){o-=7}}if(AI>=((this.preMonthDays+o+this.monthDays)-7)){C.addClass(l,this.Style.CSS_CELL_BOTTOM)}k[k.length]=Q.innerHTML;AI++}if(j){k=this.renderRowFooter(Y,k)}k[k.length]="</tr>"}}k[k.length]="</tbody>";return k},renderFooter:function(G){return G},render:function(){this.beforeRenderEvent.fire();var H=D.findMonthStart(this.cfg.getProperty(B.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;A.purgeElement(this.oDomContainer,true);var G=[];G[G.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(H.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';G=this.renderHeader(G);G=this.renderBody(H,G);G=this.renderFooter(G);G[G.length]="</table>";this.oDomContainer.innerHTML=G.join("\n");this.applyListeners();this.cells=C.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(B.TITLE.key);this.cfg.refireEvent(B.CLOSE.key);this.cfg.refireEvent(B.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var P=this.oDomContainer,H=this.parent||this,L="a",S="click";var M=C.getElementsByClassName(this.Style.CSS_NAV_LEFT,L,P),I=C.getElementsByClassName(this.Style.CSS_NAV_RIGHT,L,P);if(M&&M.length>0){this.linkLeft=M[0];A.addListener(this.linkLeft,S,this.doPreviousMonthNav,H,true)}if(I&&I.length>0){this.linkRight=I[0];A.addListener(this.linkRight,S,this.doNextMonthNav,H,true)}if(H.cfg.getProperty("navigator")!==null){this.applyNavListeners()}if(this.domEventMap){var J,G;for(var R in this.domEventMap){if(E.hasOwnProperty(this.domEventMap,R)){var N=this.domEventMap[R];if(!(N instanceof Array)){N=[N]}for(var K=0;K<N.length;K++){var Q=N[K];G=C.getElementsByClassName(R,Q.tag,this.oDomContainer);for(var O=0;O<G.length;O++){J=G[O];A.addListener(J,Q.event,Q.handler,Q.scope,Q.correct)}}}}}A.addListener(this.oDomContainer,"click",this.doSelectCell,this);A.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);A.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var H=this.parent||this,I=this,G=C.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(G.length>0){A.addListener(G,"click",function(N,M){var L=A.getTarget(N);if(this===L||C.isAncestor(this,L)){A.preventDefault(N)}var J=H.oNavigator;if(J){var K=I.cfg.getProperty("pagedate");J.setYear(K.getFullYear()+I.Locale.YEAR_OFFSET);J.setMonth(K.getMonth());J.show()}})}},getDateByCellId:function(H){var G=this.getDateFieldsByCellId(H);return(G)?D.getDate(G[0],G[1]-1,G[2]):null},getDateFieldsByCellId:function(G){G=this.getIndexFromId(G);return(G>-1)?this.cellDates[G]:null},getCellIndex:function(I){var H=-1;if(I){var G=I.getMonth(),N=I.getFullYear(),M=I.getDate(),K=this.cellDates;for(var J=0;J<K.length;++J){var L=K[J];if(L[0]===N&&L[1]===G+1&&L[2]===M){H=J;break}}}return H},getIndexFromId:function(I){var H=-1,G=I.lastIndexOf("_cell");if(G>-1){H=parseInt(I.substring(G+5),10)}return H},renderOutOfBoundsDate:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOB);G.innerHTML=H.getDate();return F.STOP_RENDER},renderRowHeader:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+H+"</th>";return G},renderRowFooter:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+H+"</th>";return G},renderCellDefault:function(H,G){G.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(H)+"</a>"},styleCellDefault:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(H,G){C.addClass(G,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOM);G.innerHTML=H.getDate();return F.STOP_RENDER},renderBodyCellRestricted:function(H,G){C.addClass(G,this.Style.CSS_CELL);C.addClass(G,this.Style.CSS_CELL_RESTRICTED);G.innerHTML=H.getDate();return F.STOP_RENDER},addMonths:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.MONTH,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractMonths:function(G){this.addMonths(-1*G)},addYears:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.YEAR,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractYears:function(G){this.addYears(-1*G)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(B.SELECTED.key);this.cfg.resetProperty(B.PAGEDATE.key);this.resetEvent.fire()},clear:function(){this.cfg.setProperty(B.SELECTED.key,[]);this.cfg.setProperty(B.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(I){this.logger.log("Select: "+I,"info");var L=this._toFieldArray(I),H=[],K=[],M=B.SELECTED.key;this.logger.log("Selection field array: "+L,"info");for(var G=0;G<L.length;++G){var J=L[G];if(!this.isDateOOB(this._toDate(J))){if(H.length===0){this.beforeSelectEvent.fire();K=this.cfg.getProperty(M)}H.push(J);if(this._indexOfSelectedFieldArray(J)==-1){K[K.length]=J}}}if(H.length===0){this.logger.log("All provided dates were OOB. beforeSelect and select events not fired","info")}if(H.length>0){if(this.parent){this.parent.cfg.setProperty(M,K)}else{this.cfg.setProperty(M,K)}this.selectEvent.fire(H)}return this.getSelectedDates()},selectCell:function(J){var H=this.cells[J],N=this.cellDates[J],M=this._toDate(N),I=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);this.logger.log("Select: "+M,"info");if(!I){this.logger.log("The cell at cellIndex:"+J+" is not a selectable cell. beforeSelect, select events not fired","info")}if(I){this.beforeSelectEvent.fire();var L=B.SELECTED.key;var K=this.cfg.getProperty(L);var G=N.concat();if(this._indexOfSelectedFieldArray(G)==-1){K[K.length]=G}if(this.parent){this.parent.cfg.setProperty(L,K)}else{this.cfg.setProperty(L,K)}this.renderCellStyleSelected(M,H);this.selectEvent.fire([G]);this.doCellMouseOut.call(H,null,this)}return this.getSelectedDates()},deselect:function(K){this.logger.log("Deselect: "+K,"info");var G=this._toFieldArray(K),J=[],M=[],N=B.SELECTED.key;this.logger.log("Deselection field array: "+G,"info");for(var H=0;H<G.length;++H){var L=G[H];if(!this.isDateOOB(this._toDate(L))){if(J.length===0){this.beforeDeselectEvent.fire();M=this.cfg.getProperty(N)}J.push(L);var I=this._indexOfSelectedFieldArray(L);if(I!=-1){M.splice(I,1)}}}if(J.length===0){this.logger.log("All provided dates were OOB. beforeDeselect and deselect events not fired")}if(J.length>0){if(this.parent){this.parent.cfg.setProperty(N,M)}else{this.cfg.setProperty(N,M)}this.deselectEvent.fire(J)}return this.getSelectedDates()},deselectCell:function(K){var H=this.cells[K],N=this.cellDates[K],I=this._indexOfSelectedFieldArray(N);var J=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(!J){this.logger.log("The cell at cellIndex:"+K+" is not a selectable/deselectable cell","info")}if(J){this.beforeDeselectEvent.fire();var L=this.cfg.getProperty(B.SELECTED.key),M=this._toDate(N),G=N.concat();if(I>-1){if(this.cfg.getProperty(B.PAGEDATE.key).getMonth()==M.getMonth()&&this.cfg.getProperty(B.PAGEDATE.key).getFullYear()==M.getFullYear()){C.removeClass(H,this.Style.CSS_CELL_SELECTED)}L.splice(I,1)}if(this.parent){this.parent.cfg.setProperty(B.SELECTED.key,L)}else{this.cfg.setProperty(B.SELECTED.key,L)}this.deselectEvent.fire([G])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var J=B.SELECTED.key,G=this.cfg.getProperty(J),H=G.length,I=G.concat();if(this.parent){this.parent.cfg.setProperty(J,[])}else{this.cfg.setProperty(J,[])}if(H>0){this.deselectEvent.fire(I)}return this.getSelectedDates()},_toFieldArray:function(H){var G=[];if(H instanceof Date){G=[[H.getFullYear(),H.getMonth()+1,H.getDate()]]}else{if(E.isString(H)){G=this._parseDates(H)}else{if(E.isArray(H)){for(var I=0;I<H.length;++I){var J=H[I];G[G.length]=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}}}return G},toDate:function(G){return this._toDate(G)},_toDate:function(G){if(G instanceof Date){return G}else{return D.getDate(G[0],G[1]-1,G[2])}},_fieldArraysAreEqual:function(I,H){var G=false;if(I[0]==H[0]&&I[1]==H[1]&&I[2]==H[2]){G=true}return G},_indexOfSelectedFieldArray:function(K){var J=-1,G=this.cfg.getProperty(B.SELECTED.key);for(var I=0;I<G.length;++I){var H=G[I];if(K[0]==H[0]&&K[1]==H[1]&&K[2]==H[2]){J=I;break}}return J},isDateOOM:function(G){return(G.getMonth()!=this.cfg.getProperty(B.PAGEDATE.key).getMonth())},isDateOOB:function(I){var J=this.cfg.getProperty(B.MINDATE.key),K=this.cfg.getProperty(B.MAXDATE.key),H=D;if(J){J=H.clearTime(J)}if(K){K=H.clearTime(K)}var G=new Date(I.getTime());G=H.clearTime(G);return((J&&G.getTime()<J.getTime())||(K&&G.getTime()>K.getTime()))},_parsePageDate:function(G){var J;if(G){if(G instanceof Date){J=D.findMonthStart(G)}else{var K,I,H;H=G.split(this.cfg.getProperty(B.DATE_FIELD_DELIMITER.key));K=parseInt(H[this.cfg.getProperty(B.MY_MONTH_POSITION.key)-1],10)-1;I=parseInt(H[this.cfg.getProperty(B.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;J=D.getDate(I,K,1)}}else{J=D.getDate(this.today.getFullYear(),this.today.getMonth(),1)}return J},onBeforeSelect:function(){if(this.cfg.getProperty(B.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}}},onSelect:function(G){},onBeforeDeselect:function(){},onDeselect:function(G){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(I){var J=I.split(this.Locale.DATE_FIELD_DELIMITER),G;if(J.length==2){G=[J[this.Locale.MD_MONTH_POSITION-1],J[this.Locale.MD_DAY_POSITION-1]];G.type=F.MONTH_DAY}else{G=[J[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,J[this.Locale.MDY_MONTH_POSITION-1],J[this.Locale.MDY_DAY_POSITION-1]];G.type=F.DATE}for(var H=0;H<G.length;H++){G[H]=parseInt(G[H],10)}return G},_parseDates:function(H){var O=[],N=H.split(this.Locale.DATE_DELIMITER);for(var M=0;M<N.length;++M){var L=N[M];if(L.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var G=L.split(this.Locale.DATE_RANGE_DELIMITER),K=this._parseDate(G[0]),P=this._parseDate(G[1]),J=this._parseRange(K,P);O=O.concat(J)}else{var I=this._parseDate(L);O.push(I)}}return O},_parseRange:function(G,K){var H=D.add(D.getDate(G[0],G[1]-1,G[2]),D.DAY,1),J=D.getDate(K[0],K[1]-1,K[2]),I=[];I.push(G);while(H.getTime()<=J.getTime()){I.push([H.getFullYear(),H.getMonth()+1,H.getDate()]);H=D.add(H,D.DAY,1)}return I},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(G){G.innerHTML="&#160;";G.className=""},addRenderer:function(G,H){var J=this._parseDates(G);for(var I=0;I<J.length;++I){var K=J[I];if(K.length==2){if(K[0] instanceof Array){this._addRenderer(F.RANGE,K,H)}else{this._addRenderer(F.MONTH_DAY,K,H)}}else{if(K.length==3){this._addRenderer(F.DATE,K,H)}}}},_addRenderer:function(H,I,G){var J=[H,I,G];this.renderStack.unshift(J);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(H,G){this._addRenderer(F.MONTH,[H],G)},addWeekdayRenderer:function(H,G){this._addRenderer(F.WEEKDAY,[H],G)},clearAllBodyCellStyles:function(G){for(var H=0;H<this.cells.length;++H){C.removeClass(this.cells[H],G)}},setMonth:function(I){var G=B.PAGEDATE.key,H=this.cfg.getProperty(G);H.setMonth(parseInt(I,10));this.cfg.setProperty(G,H)},setYear:function(H){var G=B.PAGEDATE.key,I=this.cfg.getProperty(G);I.setFullYear(parseInt(H,10)-this.Locale.YEAR_OFFSET);this.cfg.setProperty(G,I)},getSelectedDates:function(){var I=[],H=this.cfg.getProperty(B.SELECTED.key);for(var K=0;K<H.length;++K){var J=H[K];var G=D.getDate(J[0],J[1]-1,J[2]);I.push(G)}I.sort(function(M,L){return M-L});return I},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire()}},browser:(function(){var G=navigator.userAgent.toLowerCase();if(G.indexOf("opera")!=-1){return"opera"}else{if(G.indexOf("msie 7")!=-1){return"ie7"}else{if(G.indexOf("msie")!=-1){return"ie"}else{if(G.indexOf("safari")!=-1){return"safari"}else{if(G.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}})(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var G=this;if(G.navigator){G.navigator.destroy()}if(G.cfg){G.cfg.destroy()}A.purgeElement(G.oDomContainer,true);C.removeClass(G.oDomContainer,G.Style.CSS_WITH_TITLE);C.removeClass(G.oDomContainer,G.Style.CSS_CONTAINER);C.removeClass(G.oDomContainer,G.Style.CSS_SINGLE);G.oDomContainer.innerHTML="";G.oDomContainer=null;G.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=F;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();(function(){var D=YAHOO.util.Dom,F=YAHOO.widget.DateMath,A=YAHOO.util.Event,E=YAHOO.lang,G=YAHOO.widget.Calendar;function B(J,H,I){if(arguments.length>0){this.init.apply(this,arguments)}}B.DEFAULT_CONFIG=B._DEFAULT_CONFIG=G.DEFAULT_CONFIG;B.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var C=B.DEFAULT_CONFIG;B.prototype={init:function(K,I,J){var H=this._parseArgs(arguments);K=H.id;I=H.container;J=H.config;this.oDomContainer=D.get(I);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=D.generateId()}if(!K){K=this.oDomContainer.id+"_t"}this.id=K;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("CalendarGroup "+this.id);this.initEvents();this.initStyles();this.pages=[];D.addClass(this.oDomContainer,B.CSS_CONTAINER);D.addClass(this.oDomContainer,B.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(J){this.cfg.applyConfig(J,true)}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}this.logger.log("Initialized "+this.pages.length+"-page CalendarGroup","info")},setupConfig:function(){var H=this.cfg;H.addProperty(C.PAGES.key,{value:C.PAGES.value,validator:H.checkNumber,handler:this.configPages});H.addProperty(C.YEAR_OFFSET.key,{value:C.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:C.YEAR_OFFSET.supercedes,suppressEvent:true});H.addProperty(C.TODAY.key,{value:new Date(C.TODAY.value.getTime()),supercedes:C.TODAY.supercedes,handler:this.configToday,suppressEvent:false});H.addProperty(C.PAGEDATE.key,{value:C.PAGEDATE.value||new Date(C.TODAY.value.getTime()),handler:this.configPageDate});H.addProperty(C.SELECTED.key,{value:[],handler:this.configSelected});H.addProperty(C.TITLE.key,{value:C.TITLE.value,handler:this.configTitle});H.addProperty(C.CLOSE.key,{value:C.CLOSE.value,handler:this.configClose});H.addProperty(C.IFRAME.key,{value:C.IFRAME.value,handler:this.configIframe,validator:H.checkBoolean});H.addProperty(C.MINDATE.key,{value:C.MINDATE.value,handler:this.delegateConfig});H.addProperty(C.MAXDATE.key,{value:C.MAXDATE.value,handler:this.delegateConfig});H.addProperty(C.MULTI_SELECT.key,{value:C.MULTI_SELECT.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.START_WEEKDAY.key,{value:C.START_WEEKDAY.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.SHOW_WEEKDAYS.key,{value:C.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_HEADER.key,{value:C.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_FOOTER.key,{value:C.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.HIDE_BLANK_WEEKS.key,{value:C.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.NAV_ARROW_LEFT.key,{value:C.NAV_ARROW_LEFT.value,handler:this.delegateConfig});H.addProperty(C.NAV_ARROW_RIGHT.key,{value:C.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_SHORT.key,{value:C.MONTHS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_LONG.key,{value:C.MONTHS_LONG.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_1CHAR.key,{value:C.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_SHORT.key,{value:C.WEEKDAYS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_MEDIUM.key,{value:C.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_LONG.key,{value:C.WEEKDAYS_LONG.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_MONTHS.key,{value:C.LOCALE_MONTHS.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_WEEKDAYS.key,{value:C.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});H.addProperty(C.DATE_DELIMITER.key,{value:C.DATE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_FIELD_DELIMITER.key,{value:C.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_RANGE_DELIMITER.key,{value:C.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.MY_MONTH_POSITION.key,{value:C.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_YEAR_POSITION.key,{value:C.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_MONTH_POSITION.key,{value:C.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_DAY_POSITION.key,{value:C.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_MONTH_POSITION.key,{value:C.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_DAY_POSITION.key,{value:C.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_YEAR_POSITION.key,{value:C.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_POSITION.key,{value:C.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_YEAR_POSITION.key,{value:C.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_SUFFIX.key,{value:C.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.MY_LABEL_YEAR_SUFFIX.key,{value:C.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.NAV.key,{value:C.NAV.value,handler:this.configNavigator});H.addProperty(C.STRINGS.key,{value:C.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:C.STRINGS.supercedes})},initEvents:function(){var J=this,L="Event",M=YAHOO.util.CustomEvent;var I=function(O,R,N){for(var Q=0;Q<J.pages.length;++Q){var P=J.pages[Q];P[this.type+L].subscribe(O,R,N)}};var H=function(N,Q){for(var P=0;P<J.pages.length;++P){var O=J.pages[P];O[this.type+L].unsubscribe(N,Q)}};var K=G._EVENT_TYPES;J.beforeSelectEvent=new M(K.BEFORE_SELECT);J.beforeSelectEvent.subscribe=I;J.beforeSelectEvent.unsubscribe=H;J.selectEvent=new M(K.SELECT);J.selectEvent.subscribe=I;J.selectEvent.unsubscribe=H;J.beforeDeselectEvent=new M(K.BEFORE_DESELECT);J.beforeDeselectEvent.subscribe=I;J.beforeDeselectEvent.unsubscribe=H;J.deselectEvent=new M(K.DESELECT);J.deselectEvent.subscribe=I;J.deselectEvent.unsubscribe=H;J.changePageEvent=new M(K.CHANGE_PAGE);J.changePageEvent.subscribe=I;J.changePageEvent.unsubscribe=H;J.beforeRenderEvent=new M(K.BEFORE_RENDER);J.beforeRenderEvent.subscribe=I;J.beforeRenderEvent.unsubscribe=H;J.renderEvent=new M(K.RENDER);J.renderEvent.subscribe=I;J.renderEvent.unsubscribe=H;J.resetEvent=new M(K.RESET);J.resetEvent.subscribe=I;J.resetEvent.unsubscribe=H;J.clearEvent=new M(K.CLEAR);J.clearEvent.subscribe=I;J.clearEvent.unsubscribe=H;J.beforeShowEvent=new M(K.BEFORE_SHOW);J.showEvent=new M(K.SHOW);J.beforeHideEvent=new M(K.BEFORE_HIDE);J.hideEvent=new M(K.HIDE);J.beforeShowNavEvent=new M(K.BEFORE_SHOW_NAV);J.showNavEvent=new M(K.SHOW_NAV);J.beforeHideNavEvent=new M(K.BEFORE_HIDE_NAV);J.hideNavEvent=new M(K.HIDE_NAV);J.beforeRenderNavEvent=new M(K.BEFORE_RENDER_NAV);J.renderNavEvent=new M(K.RENDER_NAV);J.beforeDestroyEvent=new M(K.BEFORE_DESTROY);J.destroyEvent=new M(K.DESTROY)},configPages:function(T,R,N){var L=R[0],J=C.PAGEDATE.key,W="_",M,O=null,S="groupcal",V="first-of-type",K="last-of-type";for(var I=0;I<L;++I){var U=this.id+W+I,Q=this.containerId+W+I,P=this.cfg.getConfig();P.close=false;P.title=false;P.navigator=null;if(I>0){M=new Date(O);this._setMonthOnDate(M,M.getMonth()+I);P.pageDate=M}var H=this.constructChild(U,Q,P);D.removeClass(H.oDomContainer,this.Style.CSS_SINGLE);D.addClass(H.oDomContainer,S);if(I===0){O=H.cfg.getProperty(J);D.addClass(H.oDomContainer,V)}if(I==(L-1)){D.addClass(H.oDomContainer,K)}H.parent=this;H.index=I;this.pages[this.pages.length]=H}},configPageDate:function(O,N,L){var J=N[0],M;var K=C.PAGEDATE.key;for(var I=0;I<this.pages.length;++I){var H=this.pages[I];if(I===0){M=H._parsePageDate(J);H.cfg.setProperty(K,M)}else{var P=new Date(M);this._setMonthOnDate(P,P.getMonth()+I);H.cfg.setProperty(K,P)}}},configSelected:function(J,H,L){var K=C.SELECTED.key;this.delegateConfig(J,H,L);var I=(this.pages.length>0)?this.pages[0].cfg.getProperty(K):[];this.cfg.setProperty(K,I,true)},delegateConfig:function(I,H,L){var M=H[0];var K;for(var J=0;J<this.pages.length;J++){K=this.pages[J];K.cfg.setProperty(I,M)}},setChildFunction:function(K,I){var H=this.cfg.getProperty(C.PAGES.key);for(var J=0;J<H;++J){this.pages[J][K]=I}},callChildFunction:function(M,I){var H=this.cfg.getProperty(C.PAGES.key);for(var L=0;L<H;++L){var K=this.pages[L];if(K[M]){var J=K[M];J.call(K,I)}}},constructChild:function(K,I,J){var H=document.getElementById(I);if(!H){H=document.createElement("div");H.id=I;this.oDomContainer.appendChild(H)}return new G(K,I,J)},setMonth:function(L){L=parseInt(L,10);var M;var I=C.PAGEDATE.key;for(var K=0;K<this.pages.length;++K){var J=this.pages[K];var H=J.cfg.getProperty(I);if(K===0){M=H.getFullYear()}else{H.setFullYear(M)}this._setMonthOnDate(H,L+K);J.cfg.setProperty(I,H)}},setYear:function(J){var I=C.PAGEDATE.key;J=parseInt(J,10);for(var L=0;L<this.pages.length;++L){var K=this.pages[L];var H=K.cfg.getProperty(I);if((H.getMonth()+1)==1&&L>0){J+=1}K.setYear(J)}},render:function(){this.renderHeader();for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.render()}this.renderFooter()},select:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.select(H)}return this.getSelectedDates()},selectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.selectCell(H)}return this.getSelectedDates()},deselect:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselect(H)}return this.getSelectedDates()},deselectAll:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.deselectAll()}return this.getSelectedDates()},deselectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselectCell(H)}return this.getSelectedDates()},reset:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.reset()}},clear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.clear()}this.cfg.setProperty(C.SELECTED.key,[]);this.cfg.setProperty(C.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextMonth()}},previousMonth:function(){for(var I=this.pages.length-1;I>=0;--I){var H=this.pages[I];H.previousMonth()}},nextYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextYear()}},previousYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.previousYear()}},getSelectedDates:function(){var J=[];var I=this.cfg.getProperty(C.SELECTED.key);for(var L=0;L<I.length;++L){var K=I[L];var H=F.getDate(K[0],K[1]-1,K[2]);J.push(H)}J.sort(function(N,M){return N-M});return J},addRenderer:function(H,I){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addRenderer(H,I)}},addMonthRenderer:function(K,H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.addMonthRenderer(K,H)}},addWeekdayRenderer:function(I,H){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addWeekdayRenderer(I,H)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(H){this.callChildFunction("addMonths",H)},subtractMonths:function(H){this.callChildFunction("subtractMonths",H)},addYears:function(H){this.callChildFunction("addYears",H)},subtractYears:function(H){this.callChildFunction("subtractYears",H)},getCalendarPage:function(K){var M=null;if(K){var N=K.getFullYear(),J=K.getMonth();var I=this.pages;for(var L=0;L<I.length;++L){var H=I[L].cfg.getProperty("pagedate");if(H.getFullYear()===N&&H.getMonth()===J){M=I[L];break}}}return M},_setMonthOnDate:function(I,J){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(J<0||J>11)){var H=F.add(I,F.MONTH,J-I.getMonth());I.setTime(H.getTime())}else{I.setMonth(J)}},_fixWidth:function(){var H=0;for(var J=0;J<this.pages.length;++J){var I=this.pages[J];H+=I.oDomContainer.offsetWidth}if(H>0){this.oDomContainer.style.width=H+"px"}},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var J=this;if(J.navigator){J.navigator.destroy()}if(J.cfg){J.cfg.destroy()}A.purgeElement(J.oDomContainer,true);D.removeClass(J.oDomContainer,B.CSS_CONTAINER);D.removeClass(J.oDomContainer,B.CSS_MULTI_UP);for(var I=0,H=J.pages.length;I<H;I++){J.pages[I].destroy();J.pages[I]=null}J.oDomContainer.innerHTML="";J.oDomContainer=null;this.destroyEvent.fire()}}};B.CSS_CONTAINER="yui-calcontainer";B.CSS_MULTI_UP="multi";B.CSS_2UPTITLE="title";B.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(B,G,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=B;YAHOO.widget.CalendarGroup=B;YAHOO.widget.Calendar2up=function(J,H,I){this.init(J,H,I)};YAHOO.extend(YAHOO.widget.Calendar2up,B);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(A){this.init(A)};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A._DEFAULT_CFG=A.DEFAULT_CONFIG;A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(this._doc.compatMode=="BackCompat")))},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render()}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask()}},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(A){if(A>=0&&A<12){this._month=A}this._updateMonthUI()},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B}this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off")}this._setFirstLastElements()},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px")}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>"}E[E.length]="</select>"}return E},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+'_submit">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+'_cancel">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI())}}function C(){this.setMonth(this._getMonthFromUI())}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true)}this.applyKeyListeners()},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask)}this.purgeKeyListeners()},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){var C=this;window.setTimeout(function(){C._update(B)},A)}else{this._update(B)}}},_update:function(B){var A=YAHOO.widget.DateMath.getDate(this.getYear()-B.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);B.cfg.setProperty("pagedate",A);B.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select()}catch(B){}}else{if(C=="month"){A=this.monthEl}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus()}catch(D){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML=""}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl)}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl)}this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none")}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex}else{return 0}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10)}}return A},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit()}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break}if(B){G.preventDefault(H);try{this.yearEl.select()}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus()}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus()}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D]}else{return(A!==true&&A[D])?A[D]:C[D]}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});YUI.add("wl-calendar",function(C){var D={};var O=[];var H=[];var K={};var E=sabre.config.global.currentTimeInMillis;C.wlCalendar={reset:function(){O=[]},setFlightDates:function(R,S){O=[];var T=R.previous();var Q=T?C.DataType.Date.parse(T.get("value")):new Date(E);if(!Q){Q=new Date()}H[S]=H[S]||{};H[S].date=Q;H[S].textInput=R;H[S].hiddenInput=R.previous();H[S].calendar=null},loadCalendar:function(R,T,S){K.dateFormat=S.dateFormat;K.showCalendar=S.show;K.onSelectCallback=S.onSelectCallback||function(){};var Q=R.get("id");R=C.one("#"+Q);var U=F(Q);if(!D[Q]){D[Q]=L(Q);T.registerContainer(D[Q]);D[Q].hideEvent.subscribe(function(){C.wlValidation.validate(null,R.previous());var W=C.one(O[U].oDomContainer);W.removeClass("calendar-container");W.addClass("hidden")})}I(Q);var V=C.one(D[Q].body);V.addClass("loadingContainer");D[Q].show();C.later(5,C,function(){C.use("yui2-calendar",function(Z){if(!Z.Lang.isValue(O[U])){O[U]=new YAHOO.widget.CalendarGroup("calendar-"+Q,{iframe:false});O[U].selectEvent.subscribe(function(i,Y,j){B(j,D[Q],Q,K.dateFormat,T);K.onSelectCallback()},O[U],true);O[U].renderEvent.subscribe(function(){Z.one(O[U].oDomContainer).removeClass("hidden");D[Q].fireEvent("changeContent")});H[U].calendar=O[U]}var f=new Date(E);var e=O[U]&&O[U].getSelectedDates()[0];var d=YAHOO.widget.DateMath;if(document.getElementById("formattedOutboundDepartureDate")&&document.getElementById("formattedOutboundDepartureDate").value){var W=Z.DataType.Date.parse(document.getElementById("formattedOutboundDepartureDate").value)}else{var a=H[U-1];var W=a?Z.DataType.Date.parse(a.hiddenInput.get("value"))||f:f}var g=d.add(f,d.DAY,365);var c=Z.one("#date"+(U+1));if(c&&c.get("disabled")){var h=Z.one("#date_hidden"+(U+1));if(h){g=Z.DataType.Date.parse(h.get("value"))}}var X=e||W;var b=O[U].cfg;b.setProperty("locale_weekdays","medium");b.setProperty("mindate",W);b.setProperty("maxdate",g);b.setProperty("pagedate",X);b.setProperty("start_weekday",sabre.config.satConfiguration.calendarStartDay);if(T.getTripType()==="oneway"){O[U].removeRenderers()}else{G(O,U)}J(O[U]);O[U].render();Z.on("keyup",function(Y){if(Y.charCode===27){D[Q].hide()}});V.addClass("calendar-container");V.removeClass("loadingContainer");I(Q)})})}};function L(R){var Q=new YAHOO.widget.Panel("container-"+R,{visible:false,draggable:false,zIndex:520,close:true});Q.showEvent.subscribe(function(){Q.fireEvent("changeContent")});Q.setBody('<div class="calendar-container" id="calendar-'+R+'"></div>');Q.render(document.body);return Q}function B(a,b,Q,d,c){var S=C.one("#"+Q);var j=S.previous();var V;var W;if(a.getSelectedDates().length>0){var R=a.getSelectedDates()[0];var f=R.getDate();var l=R.getMonth();var Y=R.getFullYear();V=C.DataType.Date.format(R,{format:d});W=M(Y,l,f);var k=(l+1)+"/"+f+"/"+Y;var g,X,Z,e;var U=F(Q);for(g=U+1;g<H.length;g++){e=H[g];var T=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R>T){e.calendar&&e.calendar.select(k);e.date=R;X=H[g].textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}for(g=U-1;g>-1;g--){e=H[g];var h=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R<h){e.calendar&&e.calendar.select(k);e.date=R;X=e.textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}}else{V="";W=0}S.set("value",V);j.set("value",W);b.hide();if(c.persistInputState){c.persistInputState(Q,W);c.persistInputState("textForField"+Q,V)}}function M(R,S,Q){return C.DataType.Date.format(new Date(R,S,Q),{format:sabre.config.dateInputFormat})}function F(R){var S=new RegExp("^[a-z_\\-]+(\\d+)$","i");var Q=R.match(S);return Q?C.DataType.Number.parse(Q[1]):null}function G(T,U){var W=T[U];var V;var Q;for(var R=0;R<T.length;R++){var S=T[R]&&T[R].getSelectedDates()[0]||H[R].date;if(S){if(!V&&!Q){V=S;Q=S}if(S<V){V=S}if(S>Q){Q=S}}}V=V||new Date(E);Q=Q||new Date(E);W.removeRenderers();W.addRenderer(A(W,V,Q),W.renderCellStyleHighlight1)}function A(T,Q,R){var S=T.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.DATE_RANGE_DELIMITER.key);return(N(T,Q)+S+N(T,R))}function N(U,T){var R=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;var Q=[];Q[U.cfg.getProperty(R.MDY_MONTH_POSITION.key)-1]=(T.getMonth()+1);Q[U.cfg.getProperty(R.MDY_DAY_POSITION.key)-1]=T.getDate();Q[U.cfg.getProperty(R.MDY_YEAR_POSITION.key)-1]=T.getFullYear();var S=U.cfg.getProperty(R.DATE_FIELD_DELIMITER.key);return Q.join(S)}function J(S){var T=C.config.locale;if(C.DataType.Date.Locale){var R=C.DataType.Date.Locale[T];P(R,S)}else{var Q=T.replace("_","-");C.use("lang/datatype-date-format_"+Q,function(V){V.Intl.setLang("datatype-date-format",Q);var U=V.Intl.get("datatype-date-format");P(U,S)})}}function P(Q,T){if(Q){var R={b:"MONTHS_SHORT",B:"MONTHS_LONG",a:"WEEKDAYS_MEDIUM",A:"WEEKDAYS_LONG"};for(var S in R){if(R.hasOwnProperty(S)){T.cfg.setProperty(R[S],Q[S])}}T.render()}}function I(R){var S=C.isCurrentLanguageRtl();var T=S?"br":"bl";var Q=S?"tr":"tl";D[R].cfg.setProperty("context",[R,Q,T,["beforeShow","windowResize"]])}},"1.0.0",{requires:[]});YUI.add("wl-airport-finder",function(A){A.wlAirportFinder=function(j,V,W){var h;var E;var G={};var I="";var g="";var S=[];var K=[];var i={};W=W||{};var n=W.cityListFormat||"%airport (%code)";var m=W.defaultOriginLabel||"";var H=W.defaultDestinationLabel||"";var a=W.maxRowCount||16;var Z='<div class="table-container"><table><tbody><tr class="ondhead"><td id="originInfoErrorMessage" class="translate" wl:translate="label.fsc.noOriginMatch"></td></tr><tr class="foot"><td colspan="5"></td></tr></tbody></table></div>';var O=false;return{showAirportList:N,createAirportList:B,updateAirportInputTranslation:Y,formatCityList:P,setRbeBooking:L};function L(o){O=o}function N(r,q,p,o){A.use("wl-routes",function(s){b(r,q,p,o)})}function M(p,r){var q=A.isCurrentLanguageRtl();var s=q?"br":"bl";var o=q?"tr":"tl";p.cfg.setProperty("context",[r.get("id"),o,s,["beforeShow","windowResize"]])}function b(x,z,o,AD){var AE;var AA;var AB;var y;var u;B(z);var t=z.hasClass("origin_airport");var s=z.get("id");var v=z.previous();if(!v){A.log("Cannot show airport finder - unable to find connected input control","warn");return }if(t){AA=v.get("id");y=s;AB=AA.replace("origin","destination");u=y.replace("origin","destination");h=AE=G[y];E=G[u]}else{AB=v.get("id");u=s;AA=AB.replace("destination","origin");y=u.replace("destination","origin");E=AE=G[u];h=G[y]}var AC=x&&x.type==="keyup"?x.charCode:null;var r=AE.cfg.getProperty("visible");if(AC===27||AC===13){AE.hide();if(t){K=R(null,A.one(E.body),AB,AA,o);if(!e(AB)){A.one("#"+AB).next().fire("originChosen")}var w=AB[AB.length-1];d(w)}}else{if(!r||AC!==null){var q=[9,13];AC=!AC||A.Array.indexOf(q,AC)!==-1?null:AC;var p=A.one(AE.body);p.addClass("loadingContainer");AE.cfg.setProperty("visible",true);M(AE,z);i=A.routes||[];p.removeClass("loadingContainer");if(t){S=l(AC,p,AA,AD)}else{K=R(AC,p,AB,AA,o)}AE.fireEvent("changeContent");if(AC===null){J(s);z.set("value","");z.focus()}if(t){A.on("click",function(){K=R(null,A.one(E.body),AB,AA,o);if(!e(AB)){U(AB)}},A.one(h.element).one("a.container-close"))}}}M(AE,z)}function J(o){U(o,F(o))}function P(u){var p=A.airports[u]||{};var q=p.code||u;var t=p.city||q;var s=A.translateParametrized("Airport."+q);var w=A.translateParametrized("AirportShort."+q);var v=A.translateParametrized("City."+t);var o=A.translateParametrized("StateProvince."+p.stateProvince);var r=A.translateParametrized("Country."+p.country);return A.formatText(n,{code:q,airport:s||"",airportShort:w||"",cityCode:t||"",city:v||"",stateProvince:o||"",country:r||""})}function e(o){return !!F(o).length}function F(v){var s=A.one("#"+v);var r=A.Lang.trim(s.get("value"));if(r.length>0){var q=s.hasClass("origin_airport")?S:K;for(var p=0;p<q.length;p++){var u=q[p][0];var t=P(u);if(t===r){return[t,u]}var o=new RegExp(r,"i");if(t.search(o)>-1){return[t,u]}}}return[]}function X(o,p,q){p=p||"";q=q||"";o.previous().set("value",q);o.previous().set("wl:value",q);o.set("wl:value","");o.set("value",p)}function U(t,p){var o=A.one("#"+t);if(p&&p.length===2){X(o,p[0],p[1])}else{var s=o.hasClass("origin_airport");var r=A.getCurrentTranslations();var q=s?r[m]:r[H];X(o,q)}}function T(r,u,s,w,v){var p=null;var q=u.get("id");var t={visible:false,draggable:false,zIndex:520,close:true};var o=new YAHOO.widget.Panel(r,t);var x;o.setBody("");o.renderEvent.subscribe(function(){x=A.one("#"+r);x.setStyles({display:"none"});A.delegate("click",function(AB){var AA=AB.target;u=A.one("#"+q);u.set("value",AA.get("innerHTML"));var y=u.previous();y.set("value",AA.get("rel"));if(s){K=R(null,A.one(E.body),w,v,p);if(!e(w)){A.one("#"+w).next().fire("originChosen")}var z=q.charAt(q.length-1);d(z)}o.hide();AB.preventDefault()},o.element,"span")});o.render(document.body);o.cfg.setProperty("context",[q,"tl","bl",["beforeShow","windowResize"]]);o.hideEvent.subscribe(function(){u=A.one("#"+q);J(q);if(V.persistInputState){V.persistInputState(q,u.previous().get("value"))}if(V.getTripType()==="roundtrip"){C(W.airportInputsIds,q,u.previous().get("value"))}A.fire("fsc:inputChanged");A.wlValidation.validate(null,u.previous());x.setStyles({display:"none"});if(o.handle){o.handle.detach();o.handle=null}});o.showEvent.subscribe(function(){x.setStyles({display:"block"});o.focus();A.Lang.later(10,null,function(){if(!o.handle){o.handle=A.on("click",function(z){var y=z.target;if(!y.inRegion(o.element,true)){o.hide()}},document)}})});V.registerContainer(o);return o}function d(p){var o=A.one("#destination_airport"+p);o.changeTarget({currentTarget:o})}function B(q){var o=q.get("id");var s;var r;var t=q.hasClass("origin_airport");if(t){s=q.previous().get("id");r=s.replace("origin","destination")}else{r=q.previous().get("id");s=r.replace("destination","origin")}if(!G[o]){var p=o+"-cont";G[o]=T(p,q,t,r,s)}}function C(o,p,t){var s=new RegExp("^([a-z_]+)(\\d+)$","i");var r=p.match(s);if(r){var q=r[1];if(q===o.departure){q=o.arrival}else{if(q===o.arrival){q=o.departure}}if(V.setStoredInputValue){V.setStoredInputValue(q,1,t)}}}function D(p){p=p||[];for(var o in p){if(f(p[o])){return true}}return false}function f(o){return o===1||(A.Lang.isObject(o)&&((!O&&o.b2c!==0)||(O&&o.rbe!==0)))}function l(y,q,t,z){var v=[];var AA=A.one("#"+t);var r=A.Lang.trim(AA.next().get("value"));var w=r||"";w=c(w);var p=new RegExp("^"+w,"i");var o=new RegExp(",\\s"+w,"i");var u=t.split("origin_airport_hidden")[1];for(var x in i){if(!D(i[x])){continue}if(A.airports[x]){if(!z||z.length===0||z.length===1&&u>1||u>=z.length||z[u]===null||A.airports[x].country===z[u]){var s=P(x);if(y!=null&&(A.Lang.trim(w)!=""&&A.Lang.trim(w)!=g)){if(x.match(p)||s.match(p)||s.match(o)){v.push(new Array(x,s))}}else{v.push(new Array(x,s))}}}else{A.log("origin airport not found:"+x,"warn")}}k(v,q,"origins");return v}function R(AI,v,r,u,o){var AE=[];var AH=A.one("#"+r);var AG=A.one("#"+u);var y=A.Lang.trim(AH.next().get("value"));var AF=y||"";AF=c(AF);var AC=new RegExp("^"+AF,"i");var AB=new RegExp(",\\s"+AF,"i");var AD=[];var x=i[AG.get("value")];if(A.Lang.isValue(x)){AD=x}else{var AA=[];for(var q in i){AA.push(q)}for(var t=0;t<AA.length;t++){for(var s in i[AA[t]]){AD[s]=i[AA[t]][s]}}}var w=r.split("destination_airport_hidden")[1];for(var z in AD){if(!f(AD[z])){continue}if(A.airports[z]){if(!o||o.length===0||w>=o.length||o[w]===null||A.airports[z].country===o[w]){var p=P(z)||"";if(AI!=null&&(A.Lang.trim(AF)!=""&&A.Lang.trim(AF)!=I)){if(z.match(AC)||p.match(AC)||p.match(AB)){AE.push([z,p])}}else{AE.push([z,p])}}}else{A.log("destination airport not found: "+z,"warn")}}k(AE,v,"destinations");return AE}function Y(){A.all(".airport-picker").each(function(q){var p=q.previous();o(q,p)});function o(q,p){if(!q||!p){return }var r=p.get("value");if(!r){return }var s=P(r);q.set("value",s);q.setAttribute("wl:value",s)}}function k(v,q,x){v.sort(Q);q.addClass("airportsList");if(v.length==0){q.set("innerHTML",Z);q.translate();return }if(!q.one("table")){var y=A.Node.create('<div class="table-container"><table><tbody><tr></tr></tbody></table></div>');q.set("innerHTML","");q.append(y)}var w=q.one("table").one("tr");w.all("td").remove();var o;var r;for(var s=0;s<v.length;s++){var p=v[s][0];var AA=P(p);var z=A.Node.create("<li></li>");var u=A.Node.create('<span class="airport-name" id="'+x+"-"+p+'" rel="'+p+'">'+AA+"</span>");z.append(u);if(s===0||(s%a)===0){r=A.Node.create("<ul></ul>");r.append(z);var t=document.createElement("td");o=A.one(t);o.append(r);w.append(o)}else{if((s%a)!==0){r.append(z)}}}}function c(p){var o=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return p.replace(o,"\\$&")}function Q(p,o){if(p[0]===""){return -1}if(o[0]===""){return 1}if(p[1]<o[1]){return -1}if(o[1]<p[1]){return 1}return 0}}});YUI.add("wl-fsc-multicity",function(E){var D;var C={init:function(F){D=F}};C.commonMulticityDomEvents=function(G){var F=G.one("#addMoreFlights");if(F){F.on("click",B)}E.on("click",A,".multiFlight-delete-leg")};function B(F){F.preventDefault();D.addFlight()}function A(G){G.preventDefault();var F=E.DataType.Number.parse(this.get("id"));D.removeFlight(F)}E.widgets=E.widgets||{};E.widgets.multicity=C});YUI.add("wl-fsc-modifySearch",function(D){var B;var I;var C,J;var F;var G=false;var E=document.getElementById("promo_box_per_pax");var H={init:function(N,Q,O,M){I=M.errorMsg||"";promoCodesMessage=M.promoCodesMessage||"";J=N;C=Q;var P=D.one("#"+O);F=P?P.get("innerHTML"):""},create:function(P,M,N){var O={visible:true,draggable:false,fixedcenter:false,modal:true,close:true,postmethod:"form",hideaftersubmit:false,monitorresize:true};var R=D.merge(O,N);if(B){if(E==null){B.destroy()}}var Q=D.one("#"+P);if(!Q){Q=D.Node.create('<div id="'+P+'"></div>');Q.set("innerHTML",F);if(G){D.translateNode(Q)}D.one("body").appendChild(Q)}B=new YAHOO.widget.Dialog(P,R);B.renderEvent.subscribe(function(){this.cfg.setProperty("zIndex",100);this.sizeMask();var S=D.one("#modify-search");S.removeClass("hidden");B.center();D.on("modifySearchOverlay|click",A,"#btn-modify-search");D.on("modifySearchOverlay|click",function(){B.hide()},"#btn-cancel");if(I){L(I)}if(promoCodesMessage===true){K()}if(D.Lang.isFunction(M.render)){M.render.call(this,this)}J.fireEvent("modify_search_rendered")});B.hideEvent.subscribe(function(){D.detach("modifySearchOverlay|*");D.wlValidation.errorRendering.hideAllOverlays();if(D.Lang.isFunction(M.hide)){M.hide.call(this,this)}});B.render(document.body)},updateErrorMessages:function(M){I=M;L(M)},getErrorMessages:function(){return I},setTranslationRequired:function(){G=true}};D.widgets=D.widgets||{};D.widgets.modifySearch=H;function A(){var M=D.one("#requestFromModifySearch");if(M){M.set("value",true)}D.one(B.element).addClass("loading");B.submit()}function L(N){var M=D.one("#errors");var O={message:N};J.renderPartialInNode("_flowMessage",O,M,true);M.removeClass("hidden")}function K(N){var M=D.one("#promo-code-error");M.removeClass("hidden")}});YUI.add("wl-fsc",function(B){var A={ONE_WAY:"oneway",ROUND_TRIP:"roundtrip",MULTI_CITY:"multicity"};B.components.Fsc=function(AO){var u=this;var b=AO.initData||{};var Aq=AO.compInstConfig||{};var C=new YAHOO.widget.OverlayManager();var v=Aq.dateFormat;var Aj=Aq.promoCodePerPaxExcludingInfantsEnabled;var q=Aq.onePromoCodeforAllPaxEnabled;var x=Aq.originCityDefaultValueKey||"";var AE=Aq.destinationCityDefaultValueKey||"";var AB=b.destinationAirportCountriesFilter;var D=b.originAirportCountriesFilter;var J=b.restrictOriginAndDestination&&b.nonRefundableAncillariesIncluded;var U=b.mybWasAwardBooking;var K=b.frequentFlyerUserLoggedIn||false;var Ae=sabre.config.satConfiguration.frequentFlyer.requireLogin;var O=sabre.config.satConfiguration.frequentFlyer.allowedJourneyTypes;var AR=sabre.config.techSwitchesConfiguration.profileSystemAvailable;var Ac=sabre.config.techSwitchesConfiguration.loyaltyProgramAvailable;var h=b.awardBooking||false;var M=(!h&&b.redeemMiles)||false;var Am=Aq.rbeTabEnabled||false;var s=Aq.awardBookingEnabled&&Ac;var Ak=b.partialExchange;var G=!AR&&Ae;var Ab=U||!s||G||(q==false);var AU=b.journey||Aq.journey.defaultValue;var AG=A[AU];var n={};var t="INF_id";var AZ="redeem_miles";var F;var T=[];var Ap=b.promoCodes;var AN=b.supportedPassengers;var k=[];var Y=[];var Af=B.one("#promo_box_per_pax");var l;var r="";B.widgets.multicity.init(n);var Ag=B.wlAirportFinder(u,n,{cityListFormat:Aq.cityListFormat,maxRowCount:Aq.maxRowCount,defaultOriginLabel:x,defaultDestinationLabel:AE,airportInputsIds:{departure:"origin_airport",arrival:"destination_airport"}});var AH;u.incomingEvents={load_overlay:function(Av){n.setTripType(b.journey);P(Av.errorMessage)},change_lang:function(){e();if(AO.state==="modifySearch"){B.widgets.modifySearch.setTranslationRequired()}},"ff-logged-in":function(){K=true;AL();L();R()},"logged-in":function(){AL();L()},"logged-out":function(){K=false;AL();L();R()}};u.onRenderState={exchange:function(Av){Ar(Av)},modifySearch:function(Ay){var Ax=B.Lang.isObject(AO.validationMessages)&&B.Object.size(AO.validationMessages)?"validationError":null;var Av=false;for(var Aw in AO.validationMessages){if(/^promoCodes/.test(Aw)&&AO.validationMessages[Aw]["0"]["code"]==="validation.field.required"){Av=true;break}}B.widgets.modifySearch.init(u,n,"modify-search",{errorMsg:Ax,promoCodesMessage:Av});if(Ax||b.alwaysShowModifySearch){P()}},searchPage:function(Av){B.wlProfiler.add("fsc rendered");Ar(Av);H(Av)}};n.getTripType=function(){return AG};n.setTripType=function(Av){AU=A[Av]?Av:"ROUND_TRIP";AG=A[Av];return AG};n.getTripTypeKey=function(Av){return A[Av]};n.registerContainer=function(Av){C.register(Av)};n.toggleRedemptionSearchAllowed=function(){var Ay=false;if(!V(AU)){Ay=true}else{var Ax=u.node.one("#"+t);if(Ax){var Aw=Ax.get("value");if(Aw>0){Ay=true}}}var Av=u.node.one("#"+AZ);Ad(Av,Ay);AL()};n.addFlight=function(){Al()};n.removeFlight=function(Av){y(Av)};function P(Av){if(Av){B.widgets.modifySearch.updateErrorMessages(Av)}B.widgets.modifySearch.create("modify-search",{render:function(Aw){u.node=B.one(Aw.element);if(q==false){Af.set("innerHTML","")}Ar(u.node)},hide:function(Aw){AS(b.journey);C.hideAll()}})}function Ar(Ay){Ay.delegate("click",d,".trip-type-input");Ay.delegate("click",X,".fsc-tab");Ay.delegate("click",A1,".promo_code_button");if(!J){Ay.delegate("click",Au,".airport-trigger")}if(J){AV()}var A0=Ay.one(".componentContentHolder")||Ay;A0.addClass(AG);AM(Ay);var Av=document.getElementById("promo_box_per_pax");var Ax=Ay.one("#ADT_id");if(Ax){m.apply(Ax);if(q==false&&(Av!=null)){AK()}if(B.UA.ie){Ax.on("change",m)}else{Ay.delegate("change",m,"#ADT_id")}}if(k){for(var Az=0;Az<Y.length;Az++){if(B.UA.ie){B.one("#"+Y[Az]+"_id").on("change",Aw)}else{Ay.delegate("change",Aw,"#"+Y[Az]+"_id")}}}function Aw(){var A4=B.one("#promo_box_per_pax");A2();if(q==false){z(A4);AK()}A3()}function A3(){var A6;var A5=(T.length>F)?F:T.length;for(var A4=0;A4<A5;A4++){A6=document.getElementById("promo_per_pax"+A4);A6.value=T[A4]}}function A1(){var A6=document.getElementById("promo_per_pax"+0).value;var A5;for(var A4=1;A4<F;A4++){A5=document.getElementById("promo_per_pax"+A4);A5.value=A6}}function A2(){T.length=F;for(var A4=0;A4<T.length;A4++){T[A4]=document.getElementById("promo_per_pax"+A4).value}}if(q==false&&(Ap!=null)){j()}AL();AP(Ab);if(s&&!Am){Z();n.toggleRedemptionSearchAllowed();Ay.delegate("click",o,"#"+AZ);R();N(Ay)}L()}function z(Av){Av.set("innerHTML","")}function j(){var Ax;var Aw=(Ap.length>F)?F:Ap.length;for(var Av=0;Av<Aw;Av++){Ax=document.getElementById("promo_per_pax"+Av);Ax.value=Ap[Av]}}function AK(){var Av=i();var Ay=B.translateParametrized("label.fsc.promoCode.passengers");var Aw="";for(var Ax=0;Ax<Av;Ax++){Aw+='<div class="promo_cont">';Aw+='<label for="promo_per_pax'+Ax+'" class="promo_label"><span class="translate" wl:translate="label.fsc.promoCode.passengers">'+Ay+"</span><span> "+(Ax+1)+"</span></label>";Aw+='<input type="text" class="promo_code_textfield" maxlength="'+Aq.promoCodeMaxlength+'" id="promo_per_pax'+Ax+'" name="promoCodes['+Ax+']"/>';Aw+="</div>"}if(Az==null){var Az=B.one("#promo_box_per_pax")}Az.append(B.Node.create(Aw))}function i(){var Av=0;Y=Aa();for(var Aw=0;Aw<Y.length;Aw++){if(Aj==true&&(Y[Aw]=="INF"||Y[Aw]=="INS")){continue}var Ax=u.node.one("#"+Y[Aw]+"_id");Av=Av+parseInt(Ax.get("value"))}F=Av;return Av}function Aa(){for(var Av=0;Av<AN.length;Av++){Y[Av]=AN[Av].passengerType.code;k[Av]=u.node.one("#"+Y[Av]+"_id")}return Y}function H(Av){Av.delegate("change",p,"#fsc-pointOfSale")}function AV(){for(var Av in A){var Aw=u.node.one("#journey_"+Av+"_el");if(Aw&&!Aw.get("checked")){Ad(Aw,true)}}}function AM(Av){At(Av);Av.all(".airport-picker").each(function(Aw){if(!Aw.get("disabled")){Aw.changeTarget=Ao;Aw.on("click",Ao);Aw.on("keyup",AW);Aw.on("key",AX,"down:13");AF(Aw)}});e();Av.all(".date_departure_inp, .date_return_inp").each(function(Ax,Aw){Ai(Ax,Aw);if(!Ax.get("disabled")){Ax.on("focus",W)}});Av.all("input, select").each(function(Aw){Aw.on("blur",AY)});if(AG==="multicity"){B.widgets.multicity.commonMulticityDomEvents(Av)}}function At(Av){B.wlValidation.initializeForPartial(AO.getType(),B.wlValidation.validationEngineRules,B.wlValidation.validationConfiguration,Av)}function e(){Ag.updateAirportInputTranslation();C.hideAll()}function AP(Av){var Aw=u.node.one("#redeemMiles");if(Aw&&Av){Aw.addClass("hidden")}}function R(){if(K){return }var Av=u.node.one(".redeem-miles-label");if(Av){if(!M){Av.removeClass("warning")}else{if(s&&!K&&Ae){Av.addClass("warning")}}}}function N(Aw){var Ax;if(s){for(Ax in A){var Av=Aw.one("#journey_"+Ax+"_el");var Ay=!V(Ax)&&M;Ad(Av,Ay)}var A1=Aw.one("#cabin_class");var Az=Aw.one("#fare_type");var A4=Aw.one("#travelOptionsHotelReservation");var A0=Aw.one("#travelOptionsCarRental");Ad(A1,M);Ad(Az,M);Ad(A4,M);Ad(A0,M);var A2=Aw.one("#travelOptionsNumberOfRooms");if(M&&A2){A2.set("value",1)}Ad(A2,M);var A3=Aw.one("#"+t);if(M&&A3){A3.set("value",0)}Ad(A3,M)}}function o(Av){M=Av.currentTarget.get("checked");N(u.node);L();AL();R();S(M);AQ(M)}function Z(){M=b.redeemMiles||false;var Av=u.node.one("#"+AZ);if(Av){Av.set("checked",M)}S(M)}function S(Av){var Ax=u.node.one("#"+AZ+"_val_holder");if(Ax){Ax.set("value",Av?"true":"false")}var Aw=u.node.one("#award_booking_val_holder");if(Aw){Aw.set("value",Av?"true":"false")}}function AQ(Aw){var Av=u.node.one("#promo_code");if(Av){var Ax=Aw?Aq.awardBookingMode.promoCodeMaxlength:Aq.promoCodeMaxlength;Av.setAttribute("maxlength",Ax);Av.set("value",Av.get("value").substring(0,Ax))}}function V(Av){return(B.Array.indexOf(O,Av)>-1)}function W(Av){C.hideAll();B.wlCalendar.loadCalendar(Av.target,n,{dateFormat:v,show:true})}function Ai(Aw,Av){B.wlCalendar.setFlightDates(Aw,Av)}function AF(Av){if(AO.state!=="modifySearch"){B.use("wl-routes",function(Aw){u.node.all(".origin_airport").removeClass("disabled");u.node.all(".destination_airport").removeClass("disabled")})}Ag.createAirportList(Av)}function Ao(Av){C.hideAll();Ag.showAirportList(Av,Av.currentTarget,AB,D)}function Au(Aw){Aw.preventDefault();var Av=this.previous();C.hideAll();Ag.showAirportList(null,Av,AB,D)}function AW(Av){if(Av.charCode===9){C.hideAll()}Ag.showAirportList(Av,Av.currentTarget,AB,D)}function AX(Av){Av.halt()}function L(){if(K||!(M||h)){AD()}else{if(Ae&&(M||h)){AD();AT()}}}function AD(){var Av=u.node.one(".redeem-miles-label");if(Av){Av.removeClass("warning")}AC("#flow-message-ffNotLoggedIn");AC("#flow-message-ffLoginNeeded");AC("#flow-message-ffInvalidProfileType")}function AC(Av){var Aw=B.one(Av);if(Aw){Aw.addClass("hidden")}}function AT(){var Aw=u.node.one(".redeem-miles-label");var Av=B.one("#flow-message-ffNotLoggedIn");var Az=B.one("#flow-message-ffLoginNeeded");var Ay=B.one("#flow-message-ffInvalidProfileType");var Ax=(Av!=null||Az!=null||Ay!=null);if(Ay){Ay.removeClass("hidden")}else{if(Az){Az.removeClass("hidden")}else{if(Av){Av.removeClass("hidden")}}}if(Aw&&Ax){Aw.addClass("warning")}}function AL(){if(!K&&Ae&&(M||h)){B.on("pageHtmlLoaded",g);g()}else{B.on("pageHtmlLoaded",As);As()}}function g(){if(AO.state!=="modifySearch"){u.fireEvent("block_submit")}else{var Av=u.node.one("#btn-modify-search");if(Av){Av.set("disabled","disabled");Av.addClass("disabled")}}}function As(){if(AO.state!=="modifySearch"){u.fireEvent("unblock_submit");u.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}else{var Av=u.node.one("#btn-modify-search");if(Av){Av.removeAttribute("disabled");Av.removeClass("disabled")}}}function Ad(Aw,Av){if(Aw){if(Av){Aw.set("disabled",true);Aw.addClass("disabled");Aw.set("checked",false)}else{Aw.removeAttribute("disabled");Aw.removeClass("disabled")}}}function AA(Av){return parseInt(Av.get("value"))}function AI(Ax,Av){var Aw="";AH=AH||Av.all("option");AH.each(function(Ay){var Az=parseInt(Ay.get("value"));if(Az<=Ax){Aw+='<option value="'+Az+'">'+Az+"</option>"}});Av.setContent(Aw)}function I(Av,Ay,Aw){var Az=parseInt(Av,10);var Ax=Az>Ay?Ay:Az;Aw.set("selectedIndex",Ax)}function m(){var Ax=AA(this);var Av=u.node.one("#"+t);if(Av){var Aw=Av.get("value");AI(Ax,Av);I(Aw,Ax,Av);An()}}function AY(Av){if(!this.hasClass("airport-picker")&&!this.hasClass("date-picker")){B.wlValidation.validate(Av)}}function An(){B.on("change",n.toggleRedemptionSearchAllowed,"#"+t)}function Ah(Aw,Av){Aw.purge(true);Aw.set("innerHTML",B.decodeHtmlEntities(Av));AM(Aw)}function AJ(Ax,Av){var Aw=u.node.one("#"+Ax+Av);return Aw?Aw.get("value"):null}function f(Aw){if(!Aw){return null}var Av=B.DataType.Date.parse(Aw,sabre.config.dateInputFormat);return B.DataType.Date.format(Av,{format:sabre.config.dateTimeJSONFormat})}function X(Av){h=this.hasClass("fsc-tab-rbe");l=this.hasClass("fsc-tab-regular");L();AL();w({isRbe:h});Av.preventDefault()}function d(Aw){var Av=Aw.target;var Ax=Av.get("value");AS(Ax)}function AS(Av){u.node.removeClass(AG);var Aw=a();n.setTripType(Av);u.node.addClass(AG);c({actionCode:"changeTripType",itineraryParts:Aw})}function E(Av){return{origin:AJ("origin_airport_hidden",Av),destination:AJ("destination_airport_hidden",Av),date:f(AJ("date_hidden",Av)),timeRange:AJ("time_range",Av)}}function Q(Av){return Av.origin||Av.destination||Av.date||Av.timeRange}function a(){var Ax=[];for(var Aw=0;;Aw++){var Av=E(Aw);if(Q(Av)){Ax.push(Av)}else{break}}if("roundtrip"==AG&&Ax.length>1){Ax[1].origin=Ax[0].destination;Ax[1].destination=Ax[0].origin}return Ax}function y(Av){c({actionCode:"deleteFlight",deletedFlightIndex:Av})}function Al(){c({actionCode:"addFlight"})}function w(Ax){var Aw=u.node;if(!Aw){return }u.addLoadingOverlay();var Av={data:{rbeTabSelected:Ax.isRbe,journey:AU,requestPartials:[AO.state]},on:{success:function(Az,Ay){if(Ay){Aw.purge(true);Aw.set("innerHTML",B.decodeHtmlEntities(Ay.partials[AO.state]));AM(Aw);L();Ag.setRbeBooking(Ax.isRbe);if(AO.state==="modifySearch"){u.onRenderState.modifySearch(Aw);P()}if(q==false&&l){u.onRenderState.searchPage(Aw)}}},complete:function(){u.removeLoadingOverlay()}}};u.fireEvent("to-ajax",{cfg:Av,actionCode:"loadFscPartial"})}function c(A0){var Az=A0.itineraryParts||a();var Aw="__"+(AO.state==="modifySearch"?"modifySearch":"searchPage")+"_"+AU.toLowerCase();var Ay=u.node.one("#airports-dates-container");if(!Ay){return }var Ax=u.node.all(".trip-type-input");Ay.addClass("loading");Ax.each(function(A1){A1.set("disabled","disabled")});var Av={data:{actionCode:A0.actionCode,deletedFlightIndex:A0.deletedFlightIndex,requestPartials:[Aw],journey:AU,fscItineraryParts:Az},on:{success:function(A2,A1){if(A1){Ah(Ay,A1.partials[Aw]);n.toggleRedemptionSearchAllowed()}},complete:function(){Ay.removeClass("loading");Ax.each(function(A1){if(!A1.hasClass("disabled")){A1.removeAttribute("disabled")}})}}};u.fireEvent("to-ajax",{cfg:Av,actionCode:"loadFscPartial"})}function p(Aw){var Ay=u.node.one("#fsc-pointOfSale");var Az=Ay.ancestor(".component-section");if(Az){Az.addClass("loading")}var Ax=Ay.get("value");var Av={data:{pointOfSale:Ax},on:{end:function(){if(Az){Az.removeClass("loading")}},success:function(A1,A0){u.fireEvent("update-data",{data:{pointOfSale:Ax}})}}};u.fireEvent("to-ajax",{cfg:Av,actionCode:"changePointOfSale"})}}});YUI.add("wl-googleanalytics",function(A){A.components.Googleanalytics=function(B){this.create=false;this.render=false}});