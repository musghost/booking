YUI.add("yui2-animation",function(A){},"0.1");YUI.add("yui2-calendar",function(A){},"0.1");YUI.add("wl-scc",function(A){A.components.Scc=function(C){var E=this;var H=C.compInstConfig;E.incomingEvents={hide:function(J){var I=A.Lang.isArray(J.componentsToHide)?J.componentsToHide:[];if(A.Array.indexOf(E.getId(),I)){C.state="empty";E.renderHtml(C,E.node)}},show:function(){}};E.onCreate=function(I,J){if(I.state==="text"){var K=H.textKey;if(K){E.renderHtml({textKey:K})}}};E.onRenderState={script:function(J){var L=H.functionName;var I=window[L];A.log("Executing "+L+" function from file "+H.scriptPath);if(typeof I==="function"){try{I(A.Node.getDOMNode(J))}catch(K){A.log("Error executing script: "+L+" "+K.message,"error")}}else{A.log("Cannot find function named: "+L,"error")}E.translateTemplate(C,J)},text:function(){var I=E.node.one(".scc-text");if(I){I.removeClass("hidden")}}};var D=function(I){if(typeof Array.prototype.indexOf==="function"){D=Array.prototype.indexOf}else{D=function(K){for(var J=0;J<this.length;J++){if(this[J]===K){return J}}return -1}}return D.call(this,I)};var G=function(I){return D.call(H.scriptsForcedToStayInHead,I)===-1};if(C.state==="header"||C.state==="footer"){E.create=false;E.node=A.one("#"+C.getId());E.node.set("innerHTML",A.replaceTemplateData(null,E.node.get("innerHTML")));E.node.translate()}else{if(C.state==="script"){E.render=false;var B="wl-custom_script-"+C.getId();var F=sabre.config.global.commonResourcesPath+"js/"+H.scriptPath;sabre.config.groups["wl-noncombine"].modules[B]={fullpath:F};if(G(H.scriptPath)){E.node=A.one("#"+B);if(E.node){E.onRenderState.script(E.node)}else{A.log("Cannot load custom script "+B+". There is no script node for "+F,"warn")}C.componentRendered()}else{A.use(B,function(J,I){if(I.success){E.onRenderState.script(E.node)}else{J.log("Cannot load custom script. "+I.msg,"warn")}C.componentRendered()})}}}}});YUI.add("wl-prbar",function(A){A.components.Prbar=function(B,H){var G=this;var C={REINITIALIZE:"reinitialize"};G.incomingEvents={flight_changed:F,ancillary_changed:F,state_changed:function(){I(J)}};G.onRenderState={initialized:function(K){A.delegate("click",function(L){L.preventDefault()},K,".stepFuture a, .lastStep a")}};function I(L){var M="_elements";var K={data:{requestPartials:[M]},on:{end:function(){},success:function(O,N){if(N){L(N,M)}}}};G.fireEvent("to-ajax",{cfg:K,actionCode:C.REINITIALIZE})}function J(L,M){var K=G.node.one("#booking-process");K.set("innerHTML",A.decodeHtmlEntities(L.partials[M]));F()}function E(K,L){K.setAttribute("class",L.join(" "))}function D(){var N=G.node.all("li");var M=G.node.one("li.stepCurrent");var L=N.indexOf(M);var K=N._nodes.slice(L+1);return A.all(K)}function F(){var K=D();var L=K.size()-1;K.each(function(N,M){var O=["stepFuture"];if(M===0){O.push("prevCurrent");O.push("stepFuture_prevCurrent")}else{O.push("prevFuture");O.push("stepFuture_prevFuture")}if(M===L){O.push("lastStep");O.push("stepFuture_lastStep")}E(N,O)})}}});YUI.add("wl-flomes",function(A){A.components.Flomes=function(D,B){var F=this;F.incomingEvents={"add-messages":function(L){var K=L.data.messages;var J=G(K);var O="flow-messages-component-"+L.type;var N=A.one("#"+O);var I=A.one("#flow-messages-component");if(!N){N=A.Node.create('<div id="'+O+'"></div>');I.append(N)}N.set("innerHTML",J);I.translate();N.removeClass("hidden");var M=I.getXY();window.scrollTo(M[0],M[1])},"show-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.removeClass("hidden")}}var P=A.one("#flow-messages-component");var O=P.getXY();window.scrollTo(O[0],O[1])},"remove-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.addClass("hidden")}}},"remove-all-messages":function(){A.all(".flow-message-error").each(function(I){I.remove()})},"remove-all-component-messages":function(I){var K="flow-messages-component-"+I.type;var J=A.one("#"+K);if(J){J.set("innerHTML","")}},"block-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.set("disabled","disabled").addClass("disabled")}},"unblock-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.removeAttribute("disabled");I.removeClass("disabled")}}};F.onRenderState={initialized:function(K){var J=D.initData.messages;for(var I in J){if(E[J[I].id]){E[J[I].id]()}}}};function G(K){var M="";for(var I in K){var J=K[I];var L=J.id;var N=F.getHtml("_flowMessage_"+L);if(!N){N=F.getHtml("_flowMessage")}M+=F.replaceData({level:J.level,id:J.id,code:J.code,originalMessage:J.originalMessage},N);if(null!==A.one("#flow-message-"+L)){A.one("#flow-message-"+L).remove(true)}}return M}var E={priceDiscrepancyError:function(){A.on("click",H,"#select-flights-link");A.on("click",C,"#accept-new-price-btn")},ssrInsufficientInfantProvision:function(){F.fireEvent("block_submit",{forceInitialize:true})}};function H(I){location.href=A.utilsUrl.buildExecutionUrl("_eventId=goto&gotoPageCode=AIR_SELECT_PAGE")}function C(I){F.fireEvent("sbmt-after-price-discrepancy")}}});YUI.add("popupWidget",function(B){var A=function(E,H,D){var G=this;var K=false;var C;var J;var I;if(D!=null&&D.header!=null){I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">'+D.header+'</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}else{I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">&nbsp;</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}if(YAHOO.lang.isString(H)){C="popup"+YAHOO.util.Dom.generateId();J=I(C,H);E.append(J)}else{C=H.getAttribute("id");J=H}var F={width:"400px",height:"150px",fixedcenter:true,constraintoviewport:true,close:true,visible:false,draggable:false,modal:true,zIndex:10,buttons:[],needTranslation:true};D=YAHOO.lang.merge(F,D||{});if(D.autofillheight!=null){D.height=null}G.dialog=new YAHOO.widget.Dialog(C,D);G.hide=function(){if(K){G.dialog.hide();if(J){J.addClass("hidden")}}};G.destroy=function(){if(K){G.dialog.destroy()}};G.dialog.hideEvent.subscribe(G.hide);if(D.closeHandler){G.dialog.hideEvent.subscribe(D.closeHandler)}G.addUniqueID=function(N){var M=G.dialog.getButtons();for(var L=0;L<M.length;L++){M[L].id=""+N+""+L}};G.render=function(){G.dialog.render();if(J&&D.needTranslation){J.translate()}K=true};G.center=function(){if(!K){G.render()}G.dialog.center()};G.show=function(){if(!K){G.render()}if(J){J.removeClass("hidden")}G.dialog.show()};G.node=function(){return J};G.update=function(L){G.dialog.setBody(L);K=false};G.id=function(){return C}};B.widgets=B.widgets||{};B.widgets.PopupWidget=A},"1.0.0",{requires:[]});YUI.add("array-extras",function(E){var C=E.Lang,D=Array.prototype,B=E.Array;B.lastIndexOf=(D.lastIndexOf)?function(A,F){return A.lastIndexOf(F)}:function(A,G){for(var F=A.length-1;F>=0;F=F-1){if(A[F]===G){break}}return F};B.unique=function(F,H){var A=F.slice(),G=0,J=-1,I=null;while(G<A.length){I=A[G];while((J=B.lastIndexOf(A,I))!==G){A.splice(J,1)}G+=1}if(H){if(C.isNumber(A[0])){A.sort(B.numericSort)}else{A.sort()}}return A};B.filter=(D.filter)?function(A,F,G){return D.filter.call(A,F,G)}:function(A,G,H){var F=[];B.each(A,function(K,J,I){if(G.call(H,K,J,I)){F.push(K)}});return F};B.reject=function(A,F,G){return B.filter(A,function(J,I,H){return !F.call(G,J,I,H)})};B.every=(D.every)?function(A,F,G){return D.every.call(A,F,G)}:function(F,H,I){for(var G=0,A=F.length;G<A;G=G+1){if(!H.call(I,F[G],G,F)){return false}}return true};B.map=(D.map)?function(A,F,G){return D.map.call(A,F,G)}:function(A,G,H){var F=[];B.each(A,function(K,J,I){F.push(G.call(H,K,J,I))});return F};B.reduce=(D.reduce)?function(A,H,F,G){return D.reduce.call(A,function(L,K,J,I){return F.call(G,L,K,J,I)},H)}:function(A,I,G,H){var F=I;B.each(A,function(L,K,J){F=G.call(H,F,L,K,J)});return F};B.find=function(F,H,I){for(var G=0,A=F.length;G<A;G++){if(H.call(I,F[G],G,F)){return F[G]}}return null};B.grep=function(A,F){return B.filter(A,function(H,G){return F.test(H)})};B.partition=function(A,G,H){var F={matches:[],rejects:[]};B.each(A,function(J,I){var K=G.call(H,J,I,A)?F.matches:F.rejects;K.push(J)});return F};B.zip=function(F,A){var G=[];B.each(F,function(I,H){G.push([I,A[H]])});return G};B.forEach=B.each},"3.1.2");YUI.add("linkedSelectWidget",function(F){var C=function(K,M,N,G){N=N||{};G=G||"NO_PREFIX";M=M||"";function J(P){if(K&&"SELECT"===K.get("tagName").toUpperCase()){P=P||"";var O=N[P]||[];var Q=[G,P].join(".");D(K);E(K,O,Q);B(K);A(K,M)}}function L(O){O.preventDefault();J(this.get("value"))}function H(O,P){if(O){O.on("change",L);if(true===P){J(O.get("value"))}}}function I(P,O){if(P){N=sabre.config.satConfiguration.statesByCountry;G="State";H(P,false);J(O)}}return{setListenerFor:H,setListenerForStatesAndCountries:I}};function D(G){G.all("option").each(function(H){H.remove()})}function E(H,I,G){F.Array.each(I,function(K){var J=F.Node.create("<option></option>");J.set("value",K);J.setAttribute("wl:translate",[G,K].join("."));J.addClass("translate");H.appendChild(J)})}function B(G){if(G.one("option")){G.set("disabled",false);G.translate()}else{G.set("disabled",true);G.appendChild(F.Node.create('<option value="">&nbsp;</option>'))}}function A(G,H){G.all("option").each(function(I){if(I.getAttribute("value")===H){I.set("selected",true)}else{I.set("selected",false)}})}F.widgets=F.widgets||{};F.widgets.LinkedSelectWidget=C},"1.0.0",{requires:[]});YUI.add("wl-phone-tooltip",function(B){var A=function(E,I,D,J){var H=this;var D=D;var G=["mobile","cellular"];E.each(function(K){K.on("change",C)});function C(L){var T=L.currentTarget;var Q=T.ancestor().siblings(".phone-tooltip-container").item(0);var O=Q.one(".phone-tooltip-type");var P=T.get("selectedIndex");var V=T.get("value");var S=T.get("options").item(P).get("text");var K=O.getAttribute("wl:translate");var N=K.lastIndexOf(".");var M=K.substring(0,N+1);var R=M+V;O.set("text",S);O.setAttribute("wl:translate",R);var U=Q.one(".phone-tooltip-area-code-container");if(U){if(G.indexOf(V)!==-1){U.addClass("hidden")}else{U.removeClass("hidden")}}}this.onLearnMoreClickHandler=function(K){K.preventDefault();F(K.currentTarget)};function F(N){var P="";var M=null;var O={width:"",height:""};if(N.hasClass("urlSource")){M=N.get("href");P='<iframe style="width:600px;height:800px" src="'+M+'"></iframe>'}else{if(N.hasClass("newTab")){M=N.get("href");window.open(M,"_newTab");return }else{P='<p><span class="translate" wl:translate="label.phone.tooltip.source"/></p>'}}var L=new B.widgets.PopupWidget(I,P,O);L.show();if(J){L.node().setStyle("border","1px grey solid")}if(D){var K="#"+L.id()+"_mask";B.one(K).remove()}}};B.widgets=B.widgets||{};B.widgets.PhoneTooltip=A},"1.0.0",{requires:["popupWidget"]});YUI.add("wl-phone-validation-preprocessor",function(D){var C={registerPhonesPreprocessing:function(F,E){F.all('div.phone-input input[type="text"][id$=-raw]').each(function(G){B(G,E)})}};function B(F,E){F.detach("blur",A);F.on("blur",A,E)}function A(E){var J={allowedDividingCharacters:this.allowedDividingCharacters,numberOfZerosToRemovePerCountry:this.numberOfZerosToRemovePerCountry};function I(N){if(N){var R=N.get("id");var P=4;var O=R.substr(0,R.length-P);var Q=N.siblings("#hidden_parsed_phones").item(0).all('input[type="text"][id^="'+O+'"]').item(0);return Q}return null}function L(N,O){var P=N.get("value");if(P){D.Array.each(J.allowedDividingCharacters,function(Q){P=P.split(Q).join("")})}O.set("value",P)}function G(O,Q){var P=Q.get("value");for(var N=1;N<=O;N++){if(P.substring(0,1)!=="0"){break}P=P.substring(1)}Q.set("value",P)}function H(){if(!J.currentCountryCodeNode){return }var P=J.currentCountryCodeNode.get("value");if(!P||!D.Lang.trim(P)){return }var O=J.currentCountryCodeNode.get("options");var Q=O.item(J.currentCountryCodeNode.get("selectedIndex"));var N=Q.getAttribute("wl:translate").substring(13,15);return J.numberOfZerosToRemovePerCountry[N]}function K(){var N=H();if(!N){return }if(J.areaCodeHiddenInput&&J.areaCodeHiddenInput.get("value")){G(N,J.areaCodeHiddenInput)}else{if(J.numberHiddenInput&&J.numberHiddenInput.get("value")){G(N,J.numberHiddenInput)}}}function M(N){D.Array.each([[J.areaCodeRawInput,J.areaCodeHiddenInput],[J.numberRawInput,J.numberHiddenInput],[J.extensionRawInput,J.extensionHiddenInput]],function(O){if(O[0]&&O[1]){N(O)}})}var F=E.currentTarget.ancestor();J.currentCountryCodeNode=F.one("select.phone-countryCode");J.areaCodeRawInput=F.one("input.phone-areaCode:not(.corresponding-hidden-input)");J.numberRawInput=F.one("input.phone-number:not(.corresponding-hidden-input)");J.extensionRawInput=F.one("input.phone-extension:not(.corresponding-hidden-input)");J.areaCodeHiddenInput=I(J.areaCodeRawInput);J.numberHiddenInput=I(J.numberRawInput);J.extensionHiddenInput=I(J.extensionRawInput);M(function(N){L(N[0],N[1])});K();M(function(N){D.wlValidation.validateAndAttachErrors(N[1],N[0])})}D.widgets=D.widgets||{};D.widgets.PhonePreprocessor=C},"1.0.0",{requires:[]});YUI.add("wl-psng",function(A){A.components.Psng=function(v){var AI="getFrequentFlyerAdviceOverlay";var AD="frequentFlyerAdviseOverlay";var d=this;var O=v.initData;var k=sabre.config.satConfiguration;var J=v.compInstConfig;var AC;var N=[];var h="select-initialized";var AT="passenger-item";var Ac;var l;var Ab;var H;var P=[];d.incomingEvents={"before-login":AE,"page-submitted":Q};d.onRenderState={initialized:function(Ad){AU();K(Ad);d.fireEvent("add-me-to-login",{trigger:"login",actionCode:"login"});AS(Ad)},exchangeInitialized:function(Ad){AU();K(Ad);AS(Ad)},changePaxDetails:function(Ad){AU();K(Ad);S();if(O.activePaxIndex){AR(O.activePaxIndex)}Ac=A.on("change",AZ,Ad.all("input, select"));AS(Ad)}};A.on("globalValidationInitialized",function(){var Ad=A.all(".passenger-section-details");Ad.each(function(Ag){var Af=Ag.one(".validation-error-icon");if(Af){var Ae=c(Ag);R(Ae,false)}});A.wlValidation.rerenderOverlaysEvent.fire();AJ()});function AJ(){if(!J.blockContinueOnFfNumberValidationEnabled){var Af=true;var Ad=false;var Ae=A.all(".passenger-section-details");Ae.each(function(Ah){var Ag=Ah.all(".error");if(Ag&&Ag.size()>0){Ad=true;Af=Af&&Ag&&1===Ag.size()&&M(Ah)}});if(Ad&&Af){AK()}}}function AK(){if(Ab){AV(true);var Ad={data:{requestPartials:[AD]},on:{end:function(){AV(false)},success:function(Af,Ae){if(Ae){x(A.decodeHtmlEntities(Ae.partials[AD]))}}}};d.fireEvent("to-ajax",{cfg:Ad,actionCode:AI})}}function x(Ad){if(l){l.update(Ad)}else{l=new A.widgets.PopupWidget(Ab,Ad,{header:"",width:"700px",height:"auto",fixedcenter:true,constraintoviewport:false,close:false});Y()}l.show()}function Y(){if(Ab){Ab.delegate("click",w,".re-enter-frequentFlyer");Ab.delegate("click",a,".continue-with-frequentFlyer")}}function w(Ad){Ad?Ad.preventDefault():false;l.hide()}function a(Ad){Ad.preventDefault();var Ae=A.one("#passenger-skipFrequentFlyerValidation");if(Ae){Ae.set("value","true");if("BNPL"===O.validationTrigger){w();d.fireEvent("bnpl-on-ff-check-failure")}else{d.fireEvent("sbmt-on-ff-check-failure")}}else{w()}}function M(Ae){var Ad=Ae.one('input[id^="ff_number-"]');return Ad&&Ad.hasClass("error")&&!Ad.hasClass("inline-error")}function AS(Af){var Ad=Af.all(".passenger-item");for(var Ae=0;Ae<Ad.size();Ae++){i(Af.one("#passenger_country-"+Ae),Af.one("#passenger_state-"+Ae));i(Af.one("#passenger_docinfo_country-"+Ae),Af.one("#passenger_docinfo_state-"+Ae))}}function i(Ae,Ad){if(Ae&&Ad){A.widgets.LinkedSelectWidget(Ad,Ad.getAttribute("wl:value")).setListenerForStatesAndCountries(Ae,Ae.getAttribute("wl:value"))}}function AU(){Ab=A.Node.create('<div class="passengers-overlays"></div>');A.one("body").append(Ab)}function K(Ad){W();AF();if(A.UA.ie){Ad.all("select").on("change",A.wlValidation.validate)}else{Ad.delegate("change",A.wlValidation.validate,"select")}Ad.delegate("click",A.wlValidation.validate,".radio-input");A.widgets.PhonePreprocessor.registerPhonesPreprocessing(Ad,J.phonesCommonConfiguration);Ad.delegate("blur",A.wlValidation.validate,"input, select");Ad.delegate("focus",G,".passenger-info .textfield, .passenger-info select");Ad.delegate("click",AY,".toggle-passenger");Ad.delegate("click",AW,".redressCheckbox");if(A.UA.ie){Ad.all('select[id^="freq_flier-"]').on("change",j)}else{Ad.delegate("change",j,'select[id^="freq_flier-"]')}H=new A.widgets.PhoneTooltip(Ad.all("div.phone select[name$=phoneType]"),Ad);Ad.delegate("click",H.onLearnMoreClickHandler,"a.phone-tooltip-learnmore-link");o(Ad);r()}function W(Ae){var Ad=F(Ae);Ad.each(function(Af){var Ag=Af.getAttribute("wl:value");if(Ag&&Ag!==" "){AX(Af)}})}function AF(){var Ae=A.all(".freq_flier")||false;if(Ae){var Ad=0;Ae.each(function(){var Ai=document.getElementById("freq_flier-"+Ad)||false;if(Ai){var Af=Ai.selectedIndex;var Ah=Ai.options[Af];if(Ah&&Ah.value==" "){var Ag=document.getElementById("ff_number-"+Ad);if(Ag){Ag.disabled=true}}}Ad++})}}function q(Ae){var Ad=F(Ae);Ad.each(function(Af){AX(Af)})}function F(Ad){var Af=Ad||d.node;var Ag=":not(."+h+")";var Ae="select.hasPartialNames"+Ag;return Af.all(Ae)}function AX(Ae){Ae.addClass(h);var Ah=Ae.getAttribute("wl:partialNameForOptions");var Aj=Ae.getAttribute("wl:widgetKey");var Ad=A.getDefaultSelectBoxValues();var Ag=false;if(Aj=="dob"&&Ah=="yearOptions"){var Af=y(Ae,Ah);Ad=A.merge(Ad,Af);Ag=true}var Ai={};Ai[Ah]=Ad[Ah];A.assignSelectBoxContent(Ae,Ai,Ag)}function y(Ae,Af){var Ad={};if(Af=="yearOptions"){Ad=b(Ae)}return Ad}function b(Ae){if(O.dobYearsRanges){var Af=u(Ae);if(Af&&Af!=""){var Ag=O.dobYearsRanges[Af][0];var Ad=O.dobYearsRanges[Af][1];return A.getCustomSelectBoxValues({yearFrom:Ag,yearTo:Ad})}}return{}}function u(Ad){var Ae=c(Ad);if(Ae){return Ae.getAttribute("wl:value")}return""}function o(Ad){n(Ad);z(O);e(Ad);I(Ad);A.wlValidation.initializeForPartial(v.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,Ad);V(Ad)}function c(Ad){if(!Ad){return d.node.one("."+AT+":first-child")}return Ad.ancestor("."+AT)}function R(Ae,Ad){if(Ae){Ae.addClass("current");if(!Ad){T(Ae)}q(Ae)}}function T(Ae){var Ad=false;Ae.all(".validation-error").each(function(Ag){if(!Ag.hasClass("yui-overlay-hidden")){Ad=true;Ag.removeClass("validation-error-small");var Ah=Ag.one(".validation-error-icon");if(Ah){Ah.addClass("open")}}});var Af=A.one(".flow-message-passenger-validation");if(!Ad&&Af&&Ae.hasClass("current")){AN(Ae)}}function AN(Ad){Ad.removeClass("current")}function G(Ae){var Ad=c(Ae.currentTarget);R(Ad,true)}function AY(Ae){Ae.preventDefault();var Ad=c(Ae.currentTarget);if(Ad){if(Ad.hasClass("current")){Ad.removeClass("current")}else{R(Ad,true)}}}function n(Af){var Ad="select.filterOptions";var Ae=Af.all(Ad);Ae.each(function(Ah){var Ag=Ah.get("children");if(Ag.size()<=1){Ah.ancestor(".field").remove()}})}function AW(Ae){var Ad=Ae.currentTarget;var Af=Ad.get("checked");if(Af){AG(Ad)}else{AH(Ad)}}function AG(Ad){var Ae=Ad.get("parentNode").one(".textfield");Ae.removeClass("hidden")}function AH(Ad){var Ae=Ad.get("parentNode").one(".textfield");Ae.addClass("hidden");Ae.set("value","")}function I(Ae){var Ad=Ae.all(".redress_number");Ad.each(function(Ah){var Af=Ah.one(".redressInfoAnchor");var Aj=Ah.one(".redressRules");if(Af&&Aj){var Ag={visible:false,draggable:false,width:"300px",maxwidth:"300px",paddingLeft:"10px",close:true,modal:false,fixedcenter:false};var Ai=new A.widgets.PopupWidget(Ae,Aj,Ag);Af.on("click",AO,Af,Ai);N.push(Ai)}})}function AO(Ad,Ae){A.Array.each(N,function(Af){Af.hide()});Ae.show()}function C(Af){var Ae=AC.length,Ad;for(Ad=0;Ad<Ae;Ad++){if(AC[Ad].airline===Af){return AC[Ad].number}}return""}function L(Af){var Ag=Af.currentTarget;if(Ag){var Ad=Ag.get("parentNode").one(".textfield");if(Ad){var Ae=C(Ag.get("value"));Ad.focus();Ad.set("value",Ae);Ad.select()}}}function e(Ae){if(AC&&AC.length>0){var Ad=Ae.one("#freq_flier-0");if(Ad){Ad.on("change",L)}}}function z(Ad){AC=Ad.primaryPassenger.preferences.savedFrequentFlyers}function AE(){if(O.loadFirstPaxData&&v.state!=="changePaxDetails"){E()}}function Q(){d.addLoadingOverlay(true)}function AV(Ad){var Ae=A.one(d.node);if(Ae){Ad?Ae.addClass("loading"):Ae.removeClass("loading")}}function AL(Ae,Ad){Ae.purge(true);Ae.set("innerHTML",A.decodeHtmlEntities(Ad));o(Ae);q(Ae);A.wlValidation.initializeForPartial(v.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,Ae)}function E(){var Ae="__reloadFirstPassengerDetails";var Ad={data:{requestPartials:[Ae]},on:{success:function(Ah,Af){if(Af&&Af.passengers&&Af.passengers[0]){O.primaryPassenger=Af.passengers[0];var Ag=c();if(Ag){AL(Ag,Af.partials[Ae])}}}}};d.fireEvent("to-ajax",{cfg:Ad,actionCode:"loadFirstPaxData"})}function AR(Af){var Ad=d.node.one("#passenger-section-details-"+Af);if(Ad){var Ae=c(Ad);R(Ae,true);window.location.hash="#passenger-item-"+Af}}function S(){d.fireEvent("block_submit",{forceInitialize:true})}function AZ(){if(Ac){Ac.detach()}d.fireEvent("unblock_submit")}function r(){A.all('input[id^="ff_number-"]').each(function(Ad){Aa(Ad,v);A.wlValidation.validate(null,Ad)})}function j(Ag){var Af=Ag.currentTarget;var Ae=A.Lang.trim(Af.get("value"));var Ad=Af.ancestor(".freq_flier").one(".textfield");if(Ad){Ad.setAttribute("data-airline",Ae);X(Ad,Ae);Aa(Ad,v);A.wlValidation.validate(null,Ad)}}function X(Ae,Ad){if(Ad){Ae.set("disabled",false);Ae.removeClass("disabled")}else{Ae.set("disabled",true);Ae.set("value","")}}function Aa(Ae,Ad){A.wlValidation.initializeForPartial(Ad.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,Ae)}var AA="#copyPhone";var U="#copyPhoneUndo";var p="#copyPhoneSuccessInfo";var t="#phone-0-countryCode";var AM="#phone-0-areaCode";var AP="#phone-0-number";var B="#phone-0-extension";var Z="#phone-1-number";var s="#phone-fields-0";var AQ=[];function V(Af){var Ai=Af.one(AP);var Ah=Af.one(Z);var Ae=Af.one(AA);var Ad=Af.one(U);var Ag=Af.one(s);if(Ag&&Ai&&Ah&&Ae&&Ad){Ae.on("click",m);Ad.on("click",AB);Ag.delegate("blur",g,"input, select");if(Af.one("#phone_confirm-0-number")){AQ=Ag.all("input[id^=phone_confirm-0], select[id^=phone_confirm-0]")}else{AQ=Ag.all("input[id^=phone-0], select[id^=phone-0]")}}}function g(Af){var Ae=d.node.one(AA);var Ad=d.node.one(U);if(f()&&Ad.hasClass("hidden")){Ae.removeClass("hidden")}else{if(!Ae.hasClass("hidden")){Ae.addClass("hidden")}}}function f(){if(!d.node.one(AP).get("value").trim()){return false}var Ad=true;AQ.each(function(Ae){if(!A.wlValidation.validate(null,Ae)){Ad=false}});return Ad}function m(Ad){D(t,"select.phone-countryCode");D(AM,"input.phone-areaCode");D(AP,"input.phone-number");D(B,"input.phone-extension");d.node.one(AA).addClass("hidden");d.node.one(U).removeClass("hidden");d.node.one(p).removeClass("hidden")}function D(Af,Ad){var Ag=d.node.one(Af);if(Ag){var Ae={value:Ag.get("value")};d.node.all(Ad).each(function(Ah){if(!Ah.get("value").trim()){Ah.set("value",this.value);P.push(Ah)}},Ae)}}function AB(Ad){if(f()){d.node.one(AA).removeClass("hidden")}d.node.one(U).addClass("hidden");d.node.one(p).addClass("hidden");A.Array.each(P,function(Ae){Ae.set("value","")});P.length=0}}});YUI.add("wl-cic",function(A){A.components.Cic=function(D){var I=this;var F=D.compInstConfig;var L;var J;I.incomingEvents={"before-login":B};I.onRenderState={initialized:function(O){K(O);I.fireEvent("add-me-to-login",{trigger:"login",actionCode:"login"});H(O);E(O)},exchangeInitialized:function(O){K(O);H(O);E(O)},changePaxDetails:function(O){M();K(O);L=A.on("change",C,O.all("input,select"));H(O);E(O)}};I.onCreate=function(O,P){if(I.rendered){I.getDomEvents()}else{A.error("Create contact info component can be rendered only on server side")}};function E(O){J=new A.widgets.PhoneTooltip(O.all("div.phone-fields select[name$=phoneType]"),O);O.delegate("click",J.onLearnMoreClickHandler,"a.phone-tooltip-learnmore-link")}function B(){if(F.prepopulateFieldsEnabled&&D.state!=="changePaxDetails"){N()}}function G(O){I.node.set("innerHTML",A.decodeHtmlEntities(O));I.onRenderState.initialized(I.node);A.wlValidation.initializeForPartial(D.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,I.node)}function N(){var P="initialized";var O={data:{requestPartials:[P]},on:{success:function(R,Q){if(Q){G(Q.partials[P])}}}};I.fireEvent("to-ajax",{cfg:O,actionCode:"loadContactInfo"})}function M(){I.fireEvent("block_submit",{type:"psng",forceInitialize:true})}function C(){if(L){L.detach()}I.fireEvent("unblock_submit",{type:"psng"})}function K(O){A.assignSelectBoxesContent(O,{countriesOptions:A.countries});A.on("blur",A.wlValidation.validate,O.all("input,select"));A.widgets.PhonePreprocessor.registerPhonesPreprocessing(O,F.phonesCommonConfiguration)}function H(Q){var P=Q.one("#country-1");var O=Q.one("#state-1");if(P&&O){A.widgets.LinkedSelectWidget(O,O.getAttribute("wl:value")).setListenerForStatesAndCountries(P,P.getAttribute("wl:value"))}}}});YUI.add("wl-cac",function(A){A.components.Cac=function(B){var H=this;var M;H.incomingEvents={"logged-in":C,"logged-out":L};H.onRenderState={initialized:function(P){O(P)},createAgent:function(P){D("#createAgent");O(P)}};function O(P){M=P.one("#create-account");N(P);A.assignSelectBoxesContent(M,{countriesOptions:A.countries});G(P)}function N(P){I(P);P.delegate("click",J,"#create_account");A.on("blur",A.wlValidation.validate,M.all("input,select"))}function I(P){A.wlValidation.initializeForPartial(B.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,P)}function J(P){F(P.currentTarget.get("checked"))}function F(R){var Q=H.node;var P=Q.one("#createAccountComponents");if(P){if(R===true){P.removeClass("hidden");I(M)}else{P.addClass("hidden")}A.one("#create_account_val_holder").set("value",R)}}function C(){if(M){M.addClass("hidden")}}function L(){if(M){M.removeClass("hidden")}}function G(Q){var P=Q.one("#cac-country");var R=Q.one("#cac-state");if(P&&R){A.widgets.LinkedSelectWidget(R,R.getAttribute("wl:value")).setListenerForStatesAndCountries(P,P.getAttribute("wl:value"))}}function D(P){H.fireEvent("add_tab",{data:{node:H.node,label:"label.tabs.createAgents",index:0,active:E(P),tabHash:P,beforeActiveChange:function(R){var Q=H.node;if(R.newValue){K("manageAgentProfileUpdatedSuccessfully");Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})}function K(Q){var P=A.one("#flow-message-"+Q);if(Q&&P){H.fireEvent("remove-messages",{data:{messages:[Q]}})}}function E(P){return location.hash==P||location.hash=="#"||!location.hash}}});YUI.add("wl-sbmt",function(A){A.components.Sbmt=function(E){var I=this;var X;I.incomingEvents={unblock:O,block:L,"show-in-seats":N,"remote-submit":H,"show-popup":Q,refresh:D,"update-on-hold-status":J,"validate-submit":C};E.initData=E.initData||{};E.initData.pageCode=sabre.config.pageCode;var V=E.initData.componentCodesUnblockDependency;var G=E.initData.disableSubmitPermanently;I.onRenderState={initialized:function(Z){R()},refund:function(Z){K(["label.sbmt.comfirmButton.yes","label.sbmt.comfirmButton.no"]);R()},exchange:function(Z){K(["label.sbmt.exchange.confirmButton.yes","label.sbmt.exchange.confirmButton.no"]);R()},changePaxDetails:function(Z){K(["label.sbmt.changePaxDetails.confirmButton.yes","label.sbmt.changePaxDetails.confirmButton.no"]);R()},upgrade:function(Z){K(["label.sbmt.upgrade.confirmButton.yes","label.sbmt.upgrade.confirmButton.no"]);R()}};function F(){return A.utilsUrl.buildExecutionUrl(E.initData.returnUrlSuffix)}function R(){T(I.node)}function T(a){var Z=a.ancestor("form");if(Z){Z.on("submit",function(b){Y(Z.get("id"),b);S()})}}function Y(a,Z){I.fireEvent("page-submitted",{cfg:{},actionCode:"ignoreTransaction",formId:a,event:Z})}function S(){A.all("a").each(function(a){a.set("href","#");a.set("onclick",function(){})});var Z=A.all('input[type="submit"]');Z.each(function(a){a.set("disabled","disabled");a.addClass("disabled")})}function H(Z){I.node.ancestor("form").submit()}function C(a){var Z=I.node.ancestor("form");Z.all("input[name=_eventId_next]").each(function(b){b.setAttribute("name","_eventId_runValidation")});Z.submit()}function N(b){var c=1;var a=A.all(b.selector);var Z=I.node.one(".sbmt-seats");a.each(function(e){e.set("innerHTML",Z.get("innerHTML"));var d=e.one("input.btn-next");d.setAttribute("id","btn-next-id"+c++);d.setAttribute("wl:translate",b.translationKey||E.initData.textKey);e.translate();T(e);I.fireEvent("seats-loaded",{node:e})})}function D(b){var a=I.node.one("input#btn-search");if(a){var Z=E.initData.textKey;if(X){Z+=".onHold"}if(b==="paypal"){Z="label.sbmt.submitPayment.paypal"}a.setAttribute("wl:translate",Z);a.set("value",A.translateParametrized(Z));A.translateNode(a)}}function J(Z){X=Z.isOnHoldEnabled;D("")}function P(a){var Z=A.Array.indexOf(V,a);if(Z!==-1){V.splice(Z,1)}}function W(a){var Z=A.Array.indexOf(V,a);if(Z===-1){V.push(a)}}function M(){return V.length==0&&!G}function O(a){if(a.data&&a.data.forceUnblock===true){G=false}if(a.type){P(a.type)}if(M()){var Z=I.node.one("input#btn-search");if(Z){Z.removeAttribute("disabled");Z.removeClass("disabled");I.fireEvent("unblocked")}}}function L(a){if(a.type){W(a.type)}var Z=I.node.one("input#btn-search");if(Z){Z.set("disabled","disabled").addClass("disabled");I.fireEvent("blocked")}}function K(b){var e;var a=A.Node.create('<div class="modalWrapper"></div>');var d=[];var c=A.getCurrentTranslations();var Z=I.node.one("#ignoreFlowPopup");d[0]={text:c[b[0]],handler:function(){if(E.compInstConfig.callIgnoreAction){B(a)}else{a.addClass("loading");location.href=F()}}};d[1]={text:c[b[1]],handler:function(){e.hide()}};e=new YAHOO.widget.Dialog("ignoreFlowPopup",{visible:false,draggable:false,zIndex:100,fixedcenter:true,modal:true,close:false,buttons:d,hideaftersubmit:false});U=function(f){f.preventDefault();btn_0=e.firstButton;btn_1=e.lastButton;btn_0.setAttribute("class","translate");btn_1.setAttribute("class","translate");btn_0.setAttribute("wl:translate",b[0]);btn_1.setAttribute("wl:translate",b[1]);Z.removeClass("hidden");a.removeClass("loading");e.center();e.show()};A.on("click",U,"#ignoreFlow");e.renderEvent.subscribe(function(){var f=Z.get("children");f.each(function(g){a.append(g)});Z.append(a)});e.render(document.body)}var U=function(){};function Q(Z){U(Z)}function B(a){var Z={on:{success:function(){location.href=A.utilsUrl.buildExecutionUrl("_eventId_redirectToCameFromURL")},failure:function(){a.removeClass("loading");A.log("Ajax call failed!","error")}}};a.addClass("loading");I.fireEvent("to-ajax",{cfg:Z,actionCode:"ignoreTransaction"})}}});YUI.add("wl-bnpl-dom",function(E){var R="holdOptionConfirmOverlay";var q="holdOptionOverlay";var J="purchaseNowOptionId";var f;var A;var x;var O;var k;var y;var V;var S;var g;var L;function t(AA,AB,Y){O=AA;k=AB;y=Y;V=AB.initData;x=AB.initData.holdOptionSelectedId||J;T();return{initInitializedState:r,initButtonState:w,restoreSelection:m,showOverlayOption:F}}function r(){O.node.delegate("click",u,".bpnl-radioButton-link")}function w(){O.node.delegate("click",j,".bpnl-holdYourTripButton-link");N()}function N(){if(V.runDependedValidation){y.removeDependedValidationIndicator();if(z()){F()}}}function z(){var Y=E.all("form .error");return Y==null||0==Y.size()}function m(AA){x=AA;var Y=E.one("#"+AA);var AB=Y.ancestor(".bnpl-parent");Y.set("checked",true);L=true;y.updateBasket(s,Q,AA,AB)}function u(AB){var AA=AB.target;var Y=AA.ancestor(".bnpl-content");x=AA.getAttribute("id");if(U(x)){y.retrieveOverlayContent(d,Q,R,Y)}else{K(false);Z(Y,x)}}function H(){var Y=this.ancestor(".bnpl-parent");x=this.getAttribute("id");Z(Y,x)}function e(){y.gotoPayment()}function j(){var Y=E.one(".bnpl input[name='runDependedValidation']")||false;if(Y){Y.set("value","true");W();O.fireEvent("run-validation")}}function W(){var Y=E.one("#passenger-validationTrigger")||false;if(Y){Y.set("value","BNPL")}}function F(){var Y=E.one(".bnpl-parent");y.retrieveOverlayContent(p,Q,q,Y)}function d(AB){var AC=AB.partials[P(R)];var AA=AB.showConfirmOverlay||false;if(AA){M(E.decodeHtmlEntities(AC),i);X()}else{K(true);var Y=E.one(".bnpl-parent");Z(Y,x)}}function X(){if(S){S.delegate("click",B,".bnpl-onHoldConfirmation-button");S.delegate("click",b,".bpnl-cancelButton-link")}}function i(){}function b(){c();D()}function T(){var AA=E.one("#ROOT");var Y=AA.one(".prbar");if(Y){Y.delegate("click",v,"#step-ANCILLARY_PAGE");Y.delegate("click",v,"#step-SEATS_PAGE")}}function v(AA){if(U(x)){var Y=O.getPartial("_holdOptionBookingOnHold");M(Y);C();AA.preventDefault()}}function C(){if(S){S.delegate("click",c,".bnpl-bookingOnHold-okButton")}}function B(AA){c();var Y=AA.target.ancestor(".bnpl-parent");K(true);Z(Y,x)}function K(Y){O.fireEvent("update-on-hold-status",{isOnHoldEnabled:Y})}function p(Y){var AA=Y.partials[P(q)];M(E.decodeHtmlEntities(AA));A=x;o();l()}function o(){if(S){S.delegate("click",H,".bpnl-radioButton-link");S.delegate("click",G,".bpnl-cancelButton-link");S.delegate("click",e,".bpnl-gotoPaymentButton-link")}}function l(){if(S){var Y=S.one(".bpnl-gotoPaymentButton-link");if(x==J){Y.set("disabled","disabled").addClass("disabled")}else{Y.removeAttribute("disabled");Y.removeClass("disabled")}}}function M(AB,Y){n();var AA={header:"",width:"450px",height:"auto",closeHandler:Y||a,fixedcenter:true,constraintoviewport:false,needTranslation:false};if(S){g=new E.widgets.PopupWidget(S,AB,AA);g.show()}}function G(){var Y=E.one(".bnpl-parent");y.updateBasket(I,Q,A,Y);x=A}function I(){c();s()}function c(){if(g){g.hide();g=null}if(S){S.remove();S=null}}function h(){var Y=k.initData.holdOptions[x];if(Y.type==="FREE"){return true}return false}function a(){var Y=E.one(".bnpl-parent");if(x!=A){y.updateBasket(I,Q,A,Y);x=A}}function s(Y){O.fireEvent("updated");if(!L){O.fireEvent("refresh-payc",{response:Y,hidePaymentComponent:h()})}O.fireEvent("refresh-amountdue");l()}function Q(Y,AA){if(AA==undefined){AA=E.one(O.node)}if(AA){Y?AA.addClass("loading"):AA.removeClass("loading")}}function n(){if(!S){S=E.Node.create('<div class="bnplOverlays"></div>');E.one("body").appendChild(S)}}function U(Y){return Y!==J}function Z(AA,Y){Q(true,AA);L=false;y.updateBasket(s,Q,Y,AA)}function P(Y){return"__"+Y}function D(){var Y=E.one("#"+J);Y.set("checked",true);x=J}E.widgets=E.widgets||{};E.widgets.Bnpl=E.widgets.Bnpl||{};E.widgets.Bnpl.Dom=t});YUI.add("wl-bnpl-viewModel",function(B){var A=function(G,F,D){var E=G.initData;return{bnplComponent:D,retrieveOverlayContent:J,updateBasket:H,gotoPayment:C,removeDependedValidationIndicator:I};function J(L,O,N,M){O(true,M);var K={data:{requestPartials:["__"+N]},on:{end:function(){O(false,M)},success:function(Q,P){if(P){L(P)}}}};F("to-ajax",{cfg:K,actionCode:N})}function H(N,O,L,M){O(true,M);var K={data:{holdOptionSelectionId:L,requestPartials:["initialized"]},on:{end:function(){O(false,M)},success:function(Q,P){if(P){N(P)}}}};F("to-ajax",{cfg:K,actionCode:"updateHoldOptionSelection"})}function C(){F("goto-payment")}function I(){F("to-ajax",{cfg:{},actionCode:"removeDependedValidationIndicator"})}};B.widgets=B.widgets||{};B.widgets.Bnpl=B.widgets.Bnpl||{};B.widgets.Bnpl.ViewModel=A});YUI.add("wl-bnpl-viewModelMock",function(B){var A=function(F,D){var E=F.initData;return{bnplComponent:D,retrieveOverlayContent:H,updateBasket:G,gotoPayment:C};function H(J,M,L,K){M(true,K);var I={};I.partials=new Array();I.partials["__"+L]=D.getPartial("_Sandbox_holdOptionOverlay");M(false,K);J(I)}function G(K,L,I,J){L(true,J);response={};L(false,J);K(response)}function C(){fireEvent("goto-payment")}};B.widgets=B.widgets||{};B.widgets.Bnpl=B.widgets.Bnpl||{};B.widgets.Bnpl.ViewModelMock=A});YUI.add("wl-bnpl",function(B){var A;var C;B.components.Bnpl=function(D){var E=this;if(D.initData.inSandbox){A=B.widgets.Bnpl.ViewModelMock(D,E)}else{A=B.widgets.Bnpl.ViewModel(D,function(F,G){return E.fireEvent.call(E,F,G)},E)}C=B.widgets.Bnpl.Dom(E,D,A);E.incomingEvents={"restore-selection":function(G){var F=G.data.response.previousOptionSelectionId;C.restoreSelection(F)},"block-list":function(){var F=B.one(".bnpl");if(F){F.addClass("loading")}},"remote-option-show":function(){C.showOverlayOption()}};E.onRenderState={initialized:function(F){C.initInitializedState()},button:function(F){C.initButtonState()}}}},"1.0.0",{requires:[]});YUI.add("forgotPassword",function(C){var R=function(T,S){T.preventDefault();L(S)};var G={NOT_AVAILABLE:"notAvailable"};var N;function L(T){var V=T.component.node;var S=V.one(".username");var X="send";var Z="label.login.forgotPasswordOverlayContinue";var U=null;var a="_forgotPasswordOverlayForm";var Y;if(S){var W=S.get("value");if(W==""){Y=T.getId()||T.initData.contextId;U={forgotPasswordError:"",contextId:Y};I(V,T,a,U,{buttonText:Z,mode:X,contextId:Y},P)}else{E(W,V,T)}}}function E(W,V,T){if(O(T.component.node)){return }I(V,T,"_loading");var U={overlayPartial:"_forgotPasswordOverlaySuccess",overlayData:null,buttonText:"label.login.close",buttonMode:"close"};var S={overlayPartial:"_forgotPasswordOverlayForm",overlayData:{forgotPasswordError:"label.login.usernameError",contextId:T.getId()},buttonText:"label.login.forgotPasswordOverlayContinue",buttonMode:"send"};M(V,T,W,U,S)}function O(S){return S.hasClass("loading")}function I(V,T,c,U,a,W){var Z=T.component;var e=A(T);var X=T.getId()||T.initData.contextId;var b="";if(c=="_forgotPasswordOverlaySuccess"){b=D()}else{if(c=="_forgotPasswordOverlayForm"){b=B(T,U.forgotPasswordError)}else{if(c=="_loading"){b=F()}}}var Y=a?K(X,a.mode,a.buttonText):"";var d=C.one(e.element);d.one(".overlay-content").set("innerHTML",b);d.one(".buttons").set("innerHTML",Y);if(C.Lang.isFunction(W)){W(V,T,d)}function S(){e.show()}Z.translateTemplate(T,C.one(e.element),S)}function M(X,V,Y,Z,U){var W=V.component;var T=function(c,b){Z=U;if(!c){Z.overlayData={forgotPasswordError:"label.login.ajaxError"}}else{if(G[b]){Z.overlayData={forgotPasswordError:"label.login."+G[b]}}}var a={buttonText:Z.buttonText,mode:Z.buttonMode};I(X,V,Z.overlayPartial,Z.overlayData,a,P)};var S={data:{username:escape((Y=="")?" ":Y)},on:{success:function(b,a){var c=a.verificationResult;if(c!=="OK"){T(true,c)}else{I(X,V,Z.overlayPartial,Z.overlayData,{buttonText:Z.buttonText,mode:Z.buttonMode},Q)}},failure:T}};W.fireEvent("to-ajax",{componentType:"login",cfg:S,actionCode:"resetPassword"})}function P(V,T,U){U.detach("forgetPassw|*");C.on("forgetPassw|click",function(W){J(W,U,V,T)},U.one(".btn-send-forgotten-password"));C.on("keypress",S,U.one(".ovUsername"));function S(W){if(W.charCode===13){J(W,U,V,T)}}}function J(V,T,U,S){V.halt();var W=T.one(".ovUsername").get("value");E(W,U,S)}function A(S){var U=S.component;if(!N){U.node.append(H());var V=U.node.one(".forgotPasswordOverlay");var T=C.Node.getDOMNode(V);U.translateTemplate(S,V);N=new YAHOO.widget.Dialog(T,{width:"320px",fixedcenter:true,draggable:false,close:true,visible:false,modal:false,zIndex:10});N.render(document.body)}return N}function Q(V,S,U){var T=A(S);U.on("forgetPassw|click",function(){T.hide()},".btn-send-forgotten-password")}function D(){return'<p class="translate" wl:translate="label.login.forgotPassword"></p>'}function B(V,U){var S=V.compInstConfig.maxLength;var T=V.getId()||V.initData.contextId;return'<p class="error translate" wl:translate="'+U+'"></p><p class="translate" wl:translate="label.login.forgotPasswordOverlayDescription"></p><p><label for="ovUsername-'+T+'" class="translate" wl:translate="label.login.forgotPasswordOverlayUsername"></label> <input id="ovUsername-'+T+'" class="textfield ovUsername" type="text" name="username" maxlength="'+S+'"/></p>'}function H(){return'<div class="forgotPasswordOverlay"><div class="forgot-password-form"><div class="hd">&nbsp;</div><div class="bd"><h3 class="translate" wl:translate="label.login.forgotPasswordOverlayHeader"></h3><div class="overlay-content"></div></div><div class="ft buttons"></div><div class="clear-both" /></div></div>'}function F(){return'<p class="loadingContainer"></p>'}function K(S,U,T){return'<div class="button button-smaller align-right"><input type="button" id="btn-send-forgotten-password-'+S+'" class="translate '+U+' btn-send-forgotten-password" wl:translate="'+T+'"/></div>'}C.widgets=C.widgets||{};C.widgets.ForgotPassword=R},"1.0.0",{requires:[]});YUI.add("wl-login",function(A){A.components.Login=function(t){var b=this;t.form=true;var h=false;var E;var k=false;b.incomingEvents={loginCheck:function(){if(k){b.fireEvent("logged-in");return true}return false},"block-submit":function(){h=true},travelBankViewBalance:function(){w()},"in-logged-out":function(y){if(x()){if(t.initData.redemptionSearch){b.node.one(".login-component").removeClass("hidden");e();k=false;t.initData.user=null}}else{u()}},"in-internal-logged-in":function(y){t.initData.user=y.user;k=true;if(x()){if(t.initData.redemptionSearch){b.node.one(".login-component").addClass("hidden");e()}}else{if(y.updateContent){b.node.addClass("loading");N(y.user)}}},"set-logout-confirm":function(y){H=y.callback}};b.onRenderState={initialized:function(y){i(y)},rbeSelectFlights:function(y){i(y);q()},mybLanding:function(z){z.removeClass("loading");z.purge(true,"submit");A.on("login|submit",g,z);A.on("blur",A.wlValidation.validate,z.all("input.textfield"));if(t.compInstConfig.forgotPasswordPopUpEnabled){A.on("click",a,z.all(".forgot-password"))}var y=t.initData.loginActionResult.authenticationResult;if(y&&y!="SUCCESSFUL"){O(y,z)}else{z.one("input.username").setAttribute("wl:value","")}}};function i(y){D(y);if(t.initData.loggedIn){S(y,t.initData.user)}}function e(){b.node.one("input.username").set("value","");b.node.one("input.password").set("value","");p(b.node.one(".component-section-error"),"")}function S(AA,z){k=true;if(z.travelBankCredentials){V(z)}if(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled&&z.travelBankCredentials){var y=AA.one("#loginComponentTraveBankViewDetailsLink");if(y){A.on("click",v,y)}}else{F()}J(z);AA.removeClass("loading");if(B()){A.on("login|click",P,AA.all(".logout"))}else{if(t.compInstConfig.agentUserConfiguration.logoutRedirectToAgentHome){A.on("login|click",Y,AA.all(".logout"))}}}function B(){return t.compInstConfig.byAjaxLogout}var H=function(){return false};function V(y){var AA=A.one("#ExternalForms");if(AA){var z=AA.one("#TravelBankViewDetailsForm");if(z){G(AA,y)}else{s(AA,y)}}else{A.log("Cannot find #ExternalForms node.","warn")}}function G(z,y){var AB=z.one("#loginComponentTraveBankViewDetailsUsername");if(AB){AB.set("value",y.travelBankCredentials.username)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsUsername node.","warn")}var AA=z.one("#loginComponentTraveBankViewDetailsPassword");if(AA){AA.set("value",y.travelBankCredentials.password)}else{A.log("Cannot find #loginComponentTraveBankViewDetailsPassword node.","warn")}}function F(){var y=A.one("#TravelBankViewDetailsForm");if(y){y.remove()}}function s(z,y){var AA={username:y.travelBankCredentials.username,password:y.travelBankCredentials.password};b.renderPartialInNode("_travelBankViewDetailsForm",AA,z,false)}function v(y){y.preventDefault();w();return false}function w(){document.TBDetails.action=sabre.config.satConfiguration.travelBankConfiguration.balanceUrlKey;document.TBDetails.method="POST";document.TBDetails.submit()}function J(AD){if(!AD){return }if(AD.frequentFlyerProfile){A.one("#loginComponentLoyaltyDiv").removeClass("hidden")}else{A.one("#loginComponentLoyaltyDiv").addClass("hidden")}if(AD.travelBankCredentials&&(sabre.config.satConfiguration.travelBankConfiguration.balanceUrlEnabled||R(AD))){A.one("#loginComponentTraveBankDiv").removeClass("hidden")}else{A.one("#loginComponentTraveBankDiv").addClass("hidden")}var AF=AD.loyaltyTier;if(AF){var z=A.translateParametrized("TierLevel."+AF);var AK="label.login.member|"+z;var AI=A.translateParametrized(AK);var AG=A.one("#loyaltyTier");AG.setAttribute("wl:translate",AK);AG.setContent(AI)}if(AD.loyaltyBalanceRetrievalError){A.one("#balanceNotAvailable").removeClass("hidden");return }if(AD.agentProfile){var AH=false;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");var AA=AD.agentInfoTO.superUser;T(AA,AH,"agentName","agentNameEnabled",AD.firstName+" "+AD.lastName);T(AA,AH,"agencyName","agencyNameEnabled",AD.agencyInfoTO.travelAgencyName);T(AA,AH,"agencyIdentifier","agencyIATAEnabled",AD.agencyInfoTO.travelAgencyIdentifier);if(AD.creditLimitRetrievalError){A.one("#loginComponentAgencyBalanceDiv").addClass("hidden");return }T(AA,AH,"agencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AA,AH,"agencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd");if(AD.creditLimitInformationTO.differentBalanceAndBookingCurrency&&sabre.config.satConfiguration.travelBankConfiguration.convertAgentCreditLimit){T(AA,AH,"creditLimitInBookingCurrency","creditLimitEnabled");T(AA,AH,"convertedAgencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.accountCreditLimit),"convertedCreditLimitDd");T(AA,AH,"convertedAgencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.accountBalance),"convertedBalanceDd")}}else{if(AD.agencyProfile){var AH=true;A.one("#loginComponentAgencyBalanceDiv").removeClass("hidden");T(AA,AH,"agencyContactName","agencyContactNameEnabled",AD.firstName+" "+AD.lastName);T(AA,AH,"agencyName","agencyNameEnabled",AD.agencyInfoTO.travelAgencyName);T(AA,AH,"agencyCreditLimit","creditLimitEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountCreditLimit),"creditLimitDd");T(AA,AH,"agencyBalance","balanceEnabled",X(AD.creditLimitInformationTO.nonConvertedAccountBalance),"balanceDd")}else{A.one("#loginComponentAgencyBalanceDiv").addClass("hidden")}}if(AD.loyaltyBalance==""){return }A.one("#balanceAmount").removeClass("hidden");A.one("#balanceAvailable").removeClass("hidden");var AL={thousandsSeparator:","};var AE=A.DataType.Number.format(parseInt(AD.loyaltyBalance,10),AL);K(AE);var AC=AD.balanceDate;if(AC!=0){var y=sabre.config.satConfiguration.dateFormat;var AB=A.DataType.Date.format(new Date(AC),{format:y});var AN="label.login.balanceDate|"+AB;var AJ=A.translateParametrized(AN);var AM=A.one("#balanceDate");if(AM){AM.setContent(AJ);AM.setAttribute("wl:translate",AN);AM.removeClass("hidden")}}}function T(AC,AF,AA,AE,AB,y){var AD=A.one("#"+AA);var z=t.compInstConfig.agentUserConfiguration;if(AC){z=t.compInstConfig.agentSuperUserConfiguration}else{if(AF){z=t.compInstConfig.agencyUserConfiguration}}if(z[AE]){if(y!=undefined){A.one("#"+y).setContent(AB)}else{if(AB!=undefined){AD.setContent(AB)}}AD.removeClass("hidden")}else{AD.addClass("hidden")}}function R(y){if(y.agentProfile){var z=t.compInstConfig.agentUserConfiguration;if(y.agentInfoTO.superUser){z=t.compInstConfig.agentSuperUserConfiguration}return z.viewBalanceEnabled}else{if(y.agencyProfile){return t.compInstConfig.agencyUserConfiguration.viewBalanceEnabled}}return false}function X(y){if(!y){return""}var AA={decimalPlaces:A.getDecimals(y.currency.code)};var z=A.DataType.Number.format(parseFloat(y.amount),AA);return A.formatPrice({value:z,currencyCode:y.currency.code},{currencyCodeSeparator:" "})}function K(z){var y=A.one("#amount");y.setContent(z);var AB=sabre.config.satConfiguration.frequentFlyer.denomination||"";var AA=A.one("#denomination");AA.setContent("&nbsp;"+A.translateParametrized(AB));AA.setAttribute("wl:translate",AB)}function D(y){y.removeClass("loading");y.purge(true,"submit");A.on("login|submit",Z,y);if(t.compInstConfig.forgotPasswordPopUpEnabled){y.delegate("click",a,".forgot-password")}y.delegate("click",W,".toggler");y.delegate("blur",A.wlValidation.validate,"input.textfield")}function O(z,AB){var y;switch(z){case"FAILED":y="_loginFailedAuthentication";break;case"SYSTEM_ERROR":y="_loginFailedSystemError";break;case"NOT_ALLOWED":y="_loginFailedStatusIsNotAllowed";break;default:var AA="No such result implemented "+z;A.log(AA,"error");throw AA}AB.one(".login-mybooking .field").prepend(b.getHtml(y));b.translateTemplate(t,AB.one(".login-mybooking .field"))}function Q(){var z=b.node;var y={togglee:z.one(".togglee"),toggler:z.one(".toggler a")};return y.togglee&&y.toggler?y:null}function W(){var y=Q();if(y){y.togglee.toggleClass("hidden");y.toggler.toggleClass("open")}}function I(){var y=Q();if(y){y.togglee.removeClass("hidden");y.toggler.addClass("open")}}function r(){return h||b.node.hasClass("loading")}function Z(y){y.preventDefault();if(r()){return }if(!o()){return }b.node.addClass("loading");n();var z=b.node.ancestor("form");if(x()){f(z)}else{U(z)}}function x(){return t.state==="rbeSelectFlights"}function g(y){y.preventDefault();if(!o()){return }var z=b.node.ancestor("form");z.submit()}function o(){A.wlValidation.validate(null,b.node.one(".username"));A.wlValidation.validate(null,b.node.one(".password"));return !b.node.one(".username").hasClass("error")&&!b.node.one(".password").hasClass("error")}function Y(AA){var AC=[{text:'<span class="translate" wl:translate="label.login.logoutPopup.cancel"></span>',handler:function(){this.hide()}},{text:"<span class='translate' wl:translate='label.login.logoutPopup.continue'></span>",handler:function(){window.location.href=t.initData.logoutUrl;this.hide()}}];var z={buttons:AC,close:true,needTranslation:true};var AB='<h3><span class="translate" wl:translate="label.login.logoutPopup.title"></span></h3><p><span class="translate" wl:translate="label.login.logoutPopup.message"></span></p>';var y=new A.widgets.PopupWidget(A.one(document.body),AB,z);y.show();AA.preventDefault()}function P(y){y.preventDefault();if(r()||H(M)){return }M()}function M(){b.node.addClass("loading");j()}function q(){var y=A.one("#login_2");if(y&&!k&&t.initData.redemptionSearch){var z=A.one("#flow-message-ffNotLoggedIn");if(z&&z.hasClass("hidden")){z.removeClass("hidden")}I()}}function c(){A.wlValidation.initializeForPartial(t.getType(),A.wlValidation.validationEngineRules,A.wlValidation.validationConfiguration,b.node)}function a(y){new A.widgets.ForgotPassword(y,t)}function n(){if(E){E.destroy();E=null}}function u(){k=false;t.initData.user=null;W();c();D(b.node)}function j(){var y={data:{requestPartials:["initialized"]},on:{success:function(AD,AC){var AA=AC.partials.initialized;L(AA);b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AC.flowMessagesToEnable}});b.fireEvent("logged-out");var AB=null;C(AB);if(!t.compInstConfig.folded){I()}}}};var z={cfg:y,actionCode:"logout"};if(!B()){z.url=t.initData.logoutUrl}b.fireEvent("to-ajax",z)}function C(y){b.fireEvent("update-data",{data:{loggedUser:y}})}function N(z){var y={data:{requestPartials:["initialized"]},on:{end:function(){b.node.removeClass("loading")},success:function(AC,AB){var AA=AB.partials.initialized;L(AA);S(b.node,z)}}};b.fireEvent("to-ajax",{cfg:y,actionCode:"getLoginContent"})}function d(y){return{username:escape(y.one(".username").get("value")),password:escape(y.one(".password").get("value"))}}function f(z){var y={data:d(z),on:{end:function(){b.node.removeClass("loading")},success:function(AB,AA){switch(AA.authenticationResult){case"SUCCESSFUL":k=true;m(AA,true);break;case"TRAVEL_BANK_UNAVAILABLE":k=true;m(AA,true);break;case"FAILED":t.initData.username=AA.username;l("_loginFailedAuthentication");break;case"SYSTEM_ERROR":I();l("_loginFailedSystemError");break;case"NOT_ALLOWED":I();l("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("to-ajax",{cfg:y,actionCode:"login"})}function U(z){var AA=d(z);AA.requestPartials=["initialized"];var y={data:AA,on:{end:function(){b.node.removeClass("loading")},success:function(AD,AC){var AB=AC.partials.initialized;L(AB);switch(AC.authenticationResult){case"SUCCESSFUL":S(b.node,AC.user);m(AC,false);break;case"TRAVEL_BANK_UNAVAILABLE":S(b.node,AC.user);m(AC,false);break;case"FAILED":t.initData.username=AC.username;l("_loginFailedAuthentication");break;case"SYSTEM_ERROR":l("_loginFailedSystemError");break;case"NOT_ALLOWED":l("_loginFailedStatusIsNotAllowed");break;default:break}}}};b.fireEvent("to-ajax",{cfg:y,actionCode:"login"})}function l(z){I();var y=b.node.one(".component-section-error");p(y,b.getHtml(z));b.translateTemplate(t,y);c()}function L(y){p(b.node,A.decodeHtmlEntities(y));b.translateTemplate(t,b.node)}function p(z,y){z.set("innerHTML",y)}function m(AA,y){b.fireEvent("remove-all-messages");b.fireEvent("add-messages",{data:{messages:AA.flowMessagesToEnable}});b.fireEvent("out-internal-logged-in",{user:AA.user,updateContent:y});if(AA.user.frequentFlyerProfile){b.fireEvent("ff-logged-in",{data:{forceRedemptionFaresReload:false}})}b.fireEvent("logged-in",AA);var z={prefix:AA.user.prefix,firstName:AA.user.firstName,lastName:AA.user.lastName,tierLevel:AA.user.loyaltyTier,ffNumber:AA.user.ffNumber,emails:AA.user.emails};C(z);if(!t.compInstConfig.byAjaxLogin){window.location.reload()}}}});YUI.add("wl-customhtml",function(A){A.components.Customhtml=function(B){}});YUI.add("wl-lang",function(A){A.components.Lang=function(E){var G=this;G.onRenderState={initialized:function(){L();if(sabre.config.satConfiguration.globalCurrencyConfiguration.currencySelectionEnabled){G.fireEvent("add-me-to-pos-change",{trigger:"fsc",actionCode:"changePointOfSale"})}},hidden:function(){L()}};G.incomingEvents={changeLanguage:D,change_lang:function(){O()},"before-changePointOfSale":F};function L(){A.on("change",K,"#select-language");if(A.one("#select-currency")){G.node.delegate("change",P,"#select-currency")}H();I(E.initData.currency)}function O(){var R=A.config.locale;var Q="pageTitle."+sabre.config.pageCode;if(A.translations[R]&&A.translations[R][Q]){document.title=A.translations[R][Q]}}function P(R){var Q=R.currentTarget.get("value");N(Q)}function I(R){var Q=G.node.one("#select-currency");if(Q){Q.setStyle("visibility","visible");if(R){A.config.currency=R;Q.set("value",R)}}return R}function D(R){var Q=R.currentTarget.get("id");B(Q)}function K(R){var Q=R.currentTarget.get("value");B(Q)}function H(S){S=S||sabre.config.global.language||sabre.config.defaultLang;var Q=A.one("body");if(A.config.locale&&A.config.locale!==S){Q.removeClass("LANGUAGE_"+A.config.locale)}Q.addClass("LANGUAGE_"+S);Q.setAttribute("lang",S.replace("_","-"));A.config.locale=S;sabre.config.global.language=S;var R=G.node.one("#select-language");if(R){R.set("value",S);if(E.state!="hidden"){R.setStyle("visibility","visible")}}return S}function B(S){var R="wl-lang-"+S;var Q=sabre.config.global.storefrontResourcesPath;if(sabre.config.global.configurationVersion){Q+=sabre.config.global.configurationVersion+"/"}Q+=sabre.config.templateFolder+sabre.config.translationDir+"/";sabre.config.groups["wl-noncombine"].modules[R]={fullpath:Q+S+".js"+sabre.config.global.versionNumber};A.use(R,function(U,T){U.translations[S]=T.success?U.translations[S]:"Translations not found";J(S)})}function J(S){var Q=sabre.config.global.language;H(S);var R={data:{selectedLang:S},on:{success:function(){G.fireEvent("change_lang",{data:S});A.wlValidation.refreshOverlaysAlignment(Q);G.fireEvent("update-data",{data:{language:S}})},complete:function(){var T=A.one("#progressContainer");if(T){T.remove()}}}};G.fireEvent("to-ajax",{cfg:R,actionCode:"setSelectedLang"})}function N(S){var R=G.node.one("#language-content");R.addClass("loading");M();var Q={data:{selectedCurrency:S},on:{complete:function(){R.removeClass("loading")},success:function(){C();G.fireEvent("change_currency",{data:S});G.fireEvent("update-data",{data:{currency:S}})}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setSelectedCurrency"})}function M(){G.fireEvent("block_submit")}function C(){G.fireEvent("unblock_submit",{data:{}})}function F(){var R=G.node.one("#language-content");R.addClass("loading");M();var S="__currency";var Q={data:{requestPartials:[S]},on:{end:function(){R.removeClass("loading")},success:function(X,V){C();var U=G.node.one(".currency-section");if(U){var W=A.Node.create(A.decodeHtmlEntities(V.partials[S]));U.replace(W);var T=G.node.one("#select-currency").get("value");G.fireEvent("change_currency",{data:T});G.fireEvent("update-data",{data:{currency:T}})}}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setDefaultCurrency"})}}});YUI.add("wl-ibedata",function(A){A.components.Ibedata=function(C){var D=this;var B=C.initData;D.onRenderState={initialized:function(){WhiteLabel.setIbeData(B)}};D.incomingEvents={"update-data":function(E){if(E.data){B=A.merge(B,E.data);WhiteLabel.setIbeData(B)}}}}});(function(){var D=YAHOO.util;var C=function(G,H,B,A){if(!G){}this.init(G,H,B,A)};C.NAME="Anim";C.prototype={toString:function(){var B=this.getEl()||{};var A=B.id||B.tagName;return(this.constructor.NAME+": "+A)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(F,A,B){return this.method(this.currentFrame,A,B-A,this.totalFrames)},setAttribute:function(H,A,B){var G=this.getEl();if(this.patterns.noNegatives.test(H)){A=(A>0)?A:0}if(H in G&&!("style" in G&&H in G.style)){G[H]=A}else{D.Dom.setStyle(G,H,A+B)}},getAttribute:function(L){var J=this.getEl();var B=D.Dom.getStyle(J,L);if(B!=="auto"&&!this.patterns.offsetUnit.test(B)){return parseFloat(B)}var K=this.patterns.offsetAttribute.exec(L)||[];var A=!!(K[3]);var I=!!(K[2]);if("style" in J){if(I||(D.Dom.getStyle(J,"position")=="absolute"&&A)){B=J["offset"+K[0].charAt(0).toUpperCase()+K[0].substr(1)]}else{B=0}}else{if(L in J){B=J[L]}}return B},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px"}return""},setRuntimeAttribute:function(M){var A;var L;var K=this.attributes;this.runtimeAttributes[M]={};var B=function(E){return(typeof E!=="undefined")};if(!B(K[M]["to"])&&!B(K[M]["by"])){return false}A=(B(K[M]["from"]))?K[M]["from"]:this.getAttribute(M);if(B(K[M]["to"])){L=K[M]["to"]}else{if(B(K[M]["by"])){if(A.constructor==Array){L=[];for(var J=0,N=A.length;J<N;++J){L[J]=A[J]+K[M]["by"][J]*1}}else{L=A+K[M]["by"]*1}}}this.runtimeAttributes[M].start=A;this.runtimeAttributes[M].end=L;this.runtimeAttributes[M].unit=(B(K[M].unit))?K[M]["unit"]:this.getDefaultUnit(M);return true},init:function(T,O,P,B){var A=false;var S=null;var Q=0;T=D.Dom.get(T);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(P)?P:1;this.method=B||D.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=D.AnimMgr.fps;this.setEl=function(E){T=D.Dom.get(E)};this.getEl=function(){return T};this.isAnimated=function(){return A};this.getStartTime=function(){return S};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(D.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}D.AnimMgr.registerElement(this);return true};this.stop=function(E){if(!this.isAnimated()){return false}if(E){this.currentFrame=this.totalFrames;this._onTween.fire()}D.AnimMgr.stop(this)};var M=function(){this.onStart.fire();this.runtimeAttributes={};for(var E in this.attributes){this.setRuntimeAttribute(E)}A=true;Q=0;S=new Date()};var N=function(){var E={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};E.toString=function(){return("duration: "+E.duration+", currentFrame: "+E.currentFrame)};this.onTween.fire(E);var F=this.runtimeAttributes;for(var G in F){this.setAttribute(G,this.doMethod(G,F[G].start,F[G].end),F[G].unit)}Q+=1};var R=function(){var F=(new Date()-S)/1000;var E={duration:F,frames:Q,fps:Q/F};E.toString=function(){return("duration: "+E.duration+", frames: "+E.frames+", fps: "+E.fps)};A=false;Q=0;this.onComplete.fire(E)};this._onStart=new D.CustomEvent("_start",this,true);this.onStart=new D.CustomEvent("start",this);this.onTween=new D.CustomEvent("tween",this);this._onTween=new D.CustomEvent("_tween",this,true);this.onComplete=new D.CustomEvent("complete",this);this._onComplete=new D.CustomEvent("_complete",this,true);this._onStart.subscribe(M);this._onTween.subscribe(N);this._onComplete.subscribe(R)}};D.Anim=C})();YAHOO.util.AnimMgr=new function(){var I=null;var J=[];var F=0;this.fps=1000;this.delay=1;this.registerElement=function(A){J[J.length]=A;F+=1;A._onStart.fire();this.start()};this.unRegister=function(A,B){B=B||G(A);if(!A.isAnimated()||B===-1){return false}A._onComplete.fire();J.splice(B,1);F-=1;if(F<=0){this.stop()}return true};this.start=function(){if(I===null){I=setInterval(this.run,this.delay)}};this.stop=function(A){if(!A){clearInterval(I);for(var B=0,C=J.length;B<C;++B){this.unRegister(J[0],0)}J=[];I=null;F=0}else{this.unRegister(A)}};this.run=function(){for(var A=0,C=J.length;A<C;++A){var B=J[A];if(!B||!B.isAnimated()){continue}if(B.currentFrame<B.totalFrames||B.totalFrames===null){B.currentFrame+=1;if(B.useSeconds){H(B)}B._onTween.fire()}else{YAHOO.util.AnimMgr.stop(B,A)}}};var G=function(A){for(var B=0,C=J.length;B<C;++B){if(J[B]===A){return B}}return -1};var H=function(E){var B=E.totalFrames;var C=E.currentFrame;var D=(E.currentFrame*E.duration*1000/E.totalFrames);var L=(new Date()-E.getStartTime());var A=0;if(L<E.duration*1000){A=Math.round((L/D-1)*E.currentFrame)}else{A=B-(C+1)}if(A>0&&isFinite(A)){if(E.currentFrame+A>=B){A=B-(C+1)}E.currentFrame+=A}};this._queue=J;this._getIndex=G};YAHOO.util.Bezier=new function(){this.getPosition=function(I,J){var H=I.length;var K=[];for(var L=0;L<H;++L){K[L]=[I[L][0],I[L][1]]}for(var G=1;G<H;++G){for(L=0;L<H-G;++L){K[L][0]=(1-J)*K[L][0]+J*K[parseInt(L+1,10)][0];K[L][1]=(1-J)*K[L][1]+J*K[parseInt(L+1,10)][1]}}return[K[0][0],K[0][1]]}};(function(){var E=function(C,D,B,A){E.superclass.constructor.call(this,C,D,B,A)};E.NAME="ColorAnim";E.DEFAULT_BGCOLOR="#fff";var G=YAHOO.util;YAHOO.extend(E,G.Anim);var F=E.superclass;var H=E.prototype;H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(B){if(B.length==3){return B}var A=this.patterns.hex.exec(B);if(A&&A.length==4){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}A=this.patterns.rgb.exec(B);if(A&&A.length==4){return[parseInt(A[1],10),parseInt(A[2],10),parseInt(A[3],10)]}A=this.patterns.hex3.exec(B);if(A&&A.length==4){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}return null};H.getAttribute=function(J){var C=this.getEl();if(this.patterns.color.test(J)){var A=YAHOO.util.Dom.getStyle(C,J);var B=this;if(this.patterns.transparent.test(A)){var D=YAHOO.util.Dom.getAncestorBy(C,function(I){return !B.patterns.transparent.test(A)});if(D){A=G.Dom.getStyle(D,J)}else{A=E.DEFAULT_BGCOLOR}}}else{A=F.getAttribute.call(this,J)}return A};H.doMethod=function(K,A,D){var B;if(this.patterns.color.test(K)){B=[];for(var C=0,L=A.length;C<L;++C){B[C]=F.doMethod.call(this,K,A[C],D[C])}B="rgb("+Math.floor(B[0])+","+Math.floor(B[1])+","+Math.floor(B[2])+")"}else{B=F.doMethod.call(this,K,A,D)}return B};H.setRuntimeAttribute=function(K){F.setRuntimeAttribute.call(this,K);if(this.patterns.color.test(K)){var C=this.attributes;var A=this.parseColor(this.runtimeAttributes[K].start);var D=this.parseColor(this.runtimeAttributes[K].end);if(typeof C[K]["to"]==="undefined"&&typeof C[K]["by"]!=="undefined"){D=this.parseColor(C[K].by);for(var B=0,L=A.length;B<L;++B){D[B]=A[B]+D[B]}}this.runtimeAttributes[K].start=A;this.runtimeAttributes[K].end=D}};G.ColorAnim=E})();YAHOO.util.Easing={easeNone:function(H,E,F,G){return F*H/G+E},easeIn:function(H,E,F,G){return F*(H/=G)*H+E},easeOut:function(H,E,F,G){return -F*(H/=G)*(H-2)+E},easeBoth:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H+E}return -F/2*((--H)*(H-2)-1)+E},easeInStrong:function(H,E,F,G){return F*(H/=G)*H*H*H+E},easeOutStrong:function(H,E,F,G){return -F*((H=H/G-1)*H*H*H-1)+E},easeBothStrong:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+E}return -F/2*((H-=2)*H*H*H-2)+E},elasticIn:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return -(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H},elasticOut:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return N*Math.pow(2,-10*M)*Math.sin((M*J-L)*(2*Math.PI)/K)+I+H},elasticBoth:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J/2)==2){return H+I}if(!K){K=J*(0.3*1.5)}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}if(M<1){return -0.5*(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H}return N*Math.pow(2,-10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K)*0.5+I+H},backIn:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*(J/=H)*J*((I+1)*J-I)+F},backOut:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*((J=J/H-1)*J*((I+1)*J+I)+1)+F},backBoth:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}if((J/=H/2)<1){return G/2*(J*J*(((I*=(1.525))+1)*J-I))+F}return G/2*((J-=2)*J*(((I*=(1.525))+1)*J+I)+2)+F},bounceIn:function(H,E,F,G){return F-YAHOO.util.Easing.bounceOut(G-H,0,F,G)+E},bounceOut:function(H,E,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+E}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+E}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+E}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+E},bounceBoth:function(H,E,F,G){if(H<G/2){return YAHOO.util.Easing.bounceIn(H*2,0,F,G)*0.5+E}return YAHOO.util.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+E}};(function(){var G=function(C,D,B,A){if(C){G.superclass.constructor.call(this,C,D,B,A)}};G.NAME="Motion";var I=YAHOO.util;YAHOO.extend(G,I.ColorAnim);var H=G.superclass;var K=G.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(C,A,B){if(this.patterns.points.test(C)){B=B||"px";H.setAttribute.call(this,"left",A[0],B);H.setAttribute.call(this,"top",A[1],B)}else{H.setAttribute.call(this,C,A,B)}};K.getAttribute=function(B){if(this.patterns.points.test(B)){var A=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")]}else{A=H.getAttribute.call(this,B)}return A};K.doMethod=function(E,A,D){var B=null;if(this.patterns.points.test(E)){var C=this.method(this.currentFrame,0,100,this.totalFrames)/100;B=I.Bezier.getPosition(this.runtimeAttributes[E],C)}else{B=H.doMethod.call(this,E,A,D)}return B};K.setRuntimeAttribute=function(A){if(this.patterns.points.test(A)){var S=this.getEl();var Q=this.attributes;var T;var E=Q.points["control"]||[];var R;var D,B;if(E.length>0&&!(E[0] instanceof Array)){E=[E]}else{var F=[];for(D=0,B=E.length;D<B;++D){F[D]=E[D]}E=F}if(I.Dom.getStyle(S,"position")=="static"){I.Dom.setStyle(S,"position","relative")}if(J(Q.points["from"])){I.Dom.setXY(S,Q.points["from"])}else{I.Dom.setXY(S,I.Dom.getXY(S))}T=this.getAttribute("points");if(J(Q.points["to"])){R=L.call(this,Q.points["to"],T);var C=I.Dom.getXY(this.getEl());for(D=0,B=E.length;D<B;++D){E[D]=L.call(this,E[D],T)}}else{if(J(Q.points["by"])){R=[T[0]+Q.points["by"][0],T[1]+Q.points["by"][1]];for(D=0,B=E.length;D<B;++D){E[D]=[T[0]+E[D][0],T[1]+E[D][1]]}}}this.runtimeAttributes[A]=[T];if(E.length>0){this.runtimeAttributes[A]=this.runtimeAttributes[A].concat(E)}this.runtimeAttributes[A][this.runtimeAttributes[A].length]=R}else{H.setRuntimeAttribute.call(this,A)}};var L=function(C,A){var B=I.Dom.getXY(this.getEl());C=[C[0]-B[0]+A[0],C[1]-B[1]+A[1]];return C};var J=function(A){return(typeof A!=="undefined")};I.Motion=G})();(function(){var F=function(C,D,B,A){if(C){F.superclass.constructor.call(this,C,D,B,A)}};F.NAME="Scroll";var H=YAHOO.util;YAHOO.extend(F,H.ColorAnim);var G=F.superclass;var E=F.prototype;E.doMethod=function(D,A,C){var B=null;if(D=="scroll"){B=[this.method(this.currentFrame,A[0],C[0]-A[0],this.totalFrames),this.method(this.currentFrame,A[1],C[1]-A[1],this.totalFrames)]}else{B=G.doMethod.call(this,D,A,C)}return B};E.getAttribute=function(C){var A=null;var B=this.getEl();if(C=="scroll"){A=[B.scrollLeft,B.scrollTop]}else{A=G.getAttribute.call(this,C)}return A};E.setAttribute=function(D,A,B){var C=this.getEl();if(D=="scroll"){C.scrollLeft=A[0];C.scrollTop=A[1]}else{G.setAttribute.call(this,D,A,B)}};H.Scroll=F})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});YUI.add("wl-cart-stick-to-screen",function(B){var L=function(N){var M=N;while(true){var O=M.ancestor(".lay > .lay");if(O!==null){M=O}else{return M}}};var D=function(M){return M.all("> .lay")};var F=function(O,N){for(var M=0;M<O.size();M++){if(O.item(M).contains(N)){return O.item(M)}}return null};var I=function(M){return M.getY()};var K=function(M){return M.get("offsetHeight")};var A=function(M){return I(M)+K(M)};var H=function(M){window.setTimeout(M,1)};var G=function(M){M()};var E=(function(g){var Z=g.ancestor(".lay").ancestor(".lay");var a=g.getY();var b="initial";var U=L(g);var c=D(U);var e=F(c,g);var T=function(){return K(g)};var j=function(){return A(Z)};var Y=function(){return B.DOM.docScrollY()};var S=function(){return B.DOM.winHeight()};var k=function(){return Y()+S()};var P=function(){return T()>S()};var X=function(m,n){g.setStyle("position",m);g.setStyle("top",(n!=null)?n+"px":null)};var M=function(m,n){if(b!==m){n();b=m}};var l=function(){M("bottomOfContainer",function(){B.log("Fixing cart position at the bottom of the container","debug");var m=function(){X("relative",(j()-a-T()))};if(B.UA.ie>0&&B.UA.ie<8){X(null,null);H(m)}else{G(m)}})};var Q=function(){M("initial",function(){B.log("Fixing cart position at the original position","debug");X(null,null)})};var O=function(){M("topOfViewport",function(){B.log("Sticking cart to the top of the viewport","debug");X("fixed",0)})};var h=function(){M("bottomOfViewport",function(){B.log("Sticking cart to the bottom of the viewport","debug");X("fixed",S()-T())})};var i=function(){if(Y()<a){Q()}else{if(Y()+T()>=j()){l()}else{O()}}};var V=function(){if(k()>=j()){l()}else{if(a+T()<k()){h()}else{Q()}}};var R=function(){var n=0;var m=null;c.each(function(p){var o=K(p);if(o>=n){m=p;n=o}});return m};var d=function(){return e.compareTo(R())};var N=function(){if(P()){V()}else{i()}};var W=function(m){if(d()){return }else{N()}};var f=function(m){b="unknown";N()};return{onScroll:W,onSizeChanged:f}});var C=function(){var M=B.Node.create("<div></div>");M.setStyle("position","fixed");return(M.getStyle("position")==="fixed")};var J=function(N){B.log("Attaching scroll handler for shopping cart movement","debug");var M=E(N);B.on("scroll",M.onScroll);B.on("resize",M.onSizeChanged);B.on("cart:sizeChanged",M.onSizeChanged)};B.on("cart:stickToScreen",function(M){if(C()){J(M.container.ancestor(".lay"))}else{B.log("Running on browser that doesn't support position: fixed. Skipping scroll handler for shopping cart movement attachment","warn")}})});YUI.add("wl-cart",function(A){A.components.Cart=function(AJ){var k=this;var Aj=AJ.compInstConfig;var X=AJ.initData;var Ai=AJ.state;var AX=Aj.insuranceEnabled;var M=AX&&Aj.insuranceAPartOfFareBreakdown;var Ae=!!X.retainedDirection;var b={};var W="bookingFee";var g=[];var J=X.itineraryParts;var AR=X.itineraryParts.length;var AC=[];var AA="";var d,n;var f="initialized";k.incomingEvents={show_rules:l,modify_search_rendered:function(){Ad(false)},change_state_unbundled:Aa,change_state:o,clear_invalid_selected_flights:V,update_for_lazy_flc:m,"update-with-insurance":AH,"update-with-ancillary":R,"update-with-hotel":AQ,"update-with-seat-selected":t,"update-with-fop-surcharge":AF,"update-with-slider":AP,"before-completedCarSelectAjax":AO,"update-with-bnpl":AV,clear_cart:L,change_lang:function(){var Am=k.node.all(".fare-family-name");Am.each(function(Aq){var Ap=Aq.getAttribute("wl:translate"),Ao,Ar;if(Ap){Ao=Ap.split("|");Ar=Aq.getAttribute("wl:ff");Ao[1]=AT(Ar);Ap=Ao.join("|");Aq.setAttribute("wl:translate",Ap);Aq.setContent(A.translateParametrized(Ap))}});var An=k.node.all(".fare-summary");An.each(function(Ap){var Aq=Ap.getAttribute("wl:ff");var Ao=AN(Aq);Ao=A.decodeHtmlEntities(Ao);Ap.setContent(Ao)})}};function w(){k.node.removeClass("ftl-created");k.getDomEvents()}function K(){return(Aj.stickToScreen===true)}function AU(){A.fire("cart:stickToScreen",{container:k.node})}k.onCreate=function(Am,An){AZ();w();if(K()){AU()}};k.onRenderState={initialized:function(Am){AE(Am);s(Am);AK(Am);A.fire("cart:sizeChanged");k.fireEvent("cart-updated-with-seats-price",{});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"completedCarSelect"});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"reload"});k.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"removeCar"})},flightChanged:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchangeReview:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchange:function(Am){AE(Am);s(Am);A.fire("cart:sizeChanged")},exchangeFlightSelect:function(Am){f="exchangeFlightSelect";AE(Am);s(Am);A.fire("cart:sizeChanged")}};function AK(Aq){var Am=X.retainedPart;var Ap=X.retainedDirection;var Ao=X.retainedPart;if(Am&&Am.length&&Ap&&Ao&&Ao.length){var An=Aq.one("#cart_itinerariesDetails").one("."+Ap.toLowerCase());if(An){A.Event.purgeElement(An,true);An.setContent(Y(Am));Aq.translate()}}}function AE(An){z(An);var Ao=A.all("#fare-rules-anchor");Ao.each(function(Ap){Ap.on("click",Ac)});var Am=A.one("#modify-search-trigger");if(Am){Am.on("click",AS)}A.delegate("click",y,"#cart-component","em.crossToggler");A.delegate("click",e,"#cart-component","em.toggler");A.delegate("click",Af,"#cart-component",".fare-family-toggler");A.delegate("click",Q,"#cart-component","em.paxToggler")}function z(Am){if(b.flightFare){var An=Am.one(".price-details");if(An){An.removeClass("hidden")}}}function s(Am){if(Am){Am.delegate("mouseover",C,".fare-indicator-icon");Am.delegate("mouseout",U,".fare-indicator-icon")}}function C(Aq){Aq.preventDefault();if(d==null){var At=Aq.currentTarget;var Ao={header:"",context:[Aq.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[Aj.fareIndicatorOverlayHorizontalPosition,Aj.fareIndicatorOverlayVerticalPosition]],underlay:"none",modal:false,fixedcenter:false,constraintoviewport:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}};var Am=At.ancestor();var As=Am.one(".fiTranslation").get("innerHTML");var An=Am.ancestor();var Ap=new A.Node.create('<div class="fare-indicator-overlay hidden"></div>');n=new A.Node.create('<div id="fare-indicator-overlay-container"></div>');An.appendChild(Ap);An.appendChild(n);var Ar='<div class="fare-indicator-overlay-content">'+As+"</div>";Ao.width=Ap.getStyle("width");Ao.height=Ap.getStyle("height");d=new A.widgets.PopupWidget(n,Ar,Ao);d.show()}}function U(Ap){Ap.preventDefault();var Aq=Ap.currentTarget;if(d){d.hide();d=null;var Am=Aq.ancestor();var An=Am.ancestor();var Ao=An.one(".fare-indicator-overlay");An.removeChild(Ao);An.removeChild(n)}}function T(){if(X.itineraryParts.length===2){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||X.itineraryParts[1].shoppingBasketHash}else{if(X.itineraryParts.length===1){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash}else{if(X.itineraryParts.length===0){g[0]=g[0]||X.outboundsSelectedBasketHash;g[1]=g[1]||X.inboundsSelectedBasketHash}}}}function AZ(){if(X.itineraryParts.length===2){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||X.itineraryParts[1].shoppingBasketHash}else{if(X.itineraryParts.length===1){g[0]=g[0]||X.itineraryParts[0].shoppingBasketHash}}}function m(Ap){var Ao=Ap.data.step;g[Ao]=Ap.data.selectedHashRef||Ap.data.offerHashCode;g=g.slice(0,Ao+1);if(AR===g.length){X.itinerarySelected=true;var Am=g[g.length-1];var An={selectedBasketRefs:[Am]};G(An,"lazy",Am)}else{X.itinerarySelected=false;A.Array.each(J,function(Ar,Aq){if(Aq===Ao){J[Aq]=Ap.data.itinerary}else{if(Aq>Ao){J[Aq].segments=null}}});X.itineraryParts=J;N(X.itineraryParts);AG();j(Ap.data.index);AB([X.itineraryParts])}c()}function Aa(Ao){T();var Am=Ao.data.direction==="inbounds"?1:0;g[Am]=Ao.data.selectedBasketRefs;AC[Am]=Ao.data.itinerary.price;if(g[0]&&g[1]){var An={selectedBasketRefs:g};G(An,Ao.data.direction,Ao.data.selectedBasketRefs,true)}else{E(Ao.data.itinerary,Am);var Ap=[null,null];Ap[Am]=Ao.data.itinerary;AB(Ap,true);AI(Ao.data.direction,Ao.data.selectedBasketRefs)}c();A.fire("cart:sizeChanged")}function o(An){g=[An.data.selectedBasketRefs];AC[0]=An.data.itinerary.price;var Am={selectedBasketRefs:g};G(Am,An.data.direction,An.data.selectedBasketRefs);c();A.fire("cart:sizeChanged")}function V(Ap){var Ao=Ap.data.revisedSelectedHashRefs||[];var Aq=false;var An;for(An=0;An<X.itineraryParts.length;An++){X.itineraryParts[An]={departureDate:X.itineraryParts[An].departureDate};Aq=true}if(Aq){X.itinerarySelected=false;N(X.itineraryParts);AG()}else{var Am;if(data.context.state=="lazy"){Am={selectedBasketRefs:[Ao[Ao.length-1]]};G(Am,"checkPrice",[Ao[Ao.length-1]])}else{Am={selectedBasketRefs:Ao};G(Am,"checkPrice",Ao)}}}function N(An){var Am=k.node.one("#cart_itinerariesDetails");if(!Am){return }A.Array.each(An,function(Ao,Ap){E(Ao,Ap)})}function E(Ao,Am){Am=Am||0;var Ap=k.node.one("#cart_itinerariesDetails");if(!Ap){return }var Aq=Ap.all(".cart_itinerariesDetails_itinerary");var An=Aq.item(Am);var Ar=A.Node.create(Y(Ao));An.replace(Ar);Ar.translate();An.destroy()}function AH(Am){AA=Am.data.offerCode;q()}function AP(Am){q()}function t(Am){H(Am)}function AO(Am){h(Am)}function R(Am){Z(Am)}function AQ(Am){O(Am)}function AV(Am){p(Am)}function AF(Am){S(Am.data)}function l(){T();x()}function Ac(Am){Am.preventDefault();l()}function x(){Ad(true);k.fireEvent("showFareRules",{forceInitialize:true,data:{allFlightsSelected:Al(),callback:function(){Ad(false)}}})}function Ad(An){var Am=A.one("#cart-component");if(Am){An?Am.addClass("loading"):Am.removeClass("loading")}}function Al(){return X.itinerarySelected}function AS(Am){Am.preventDefault();Ad(true);k.fireEvent("modify_search",{forceInitialize:true})}function i(Am){k.node.set("innerHTML",A.decodeHtmlEntities(Am));w()}function r(Ao,An){Ad(true);var Am={data:{requestPartials:[Ai]},on:{end:function(){Ad(false)},success:function(Aq,Ap){if(Ap){X=Ap.model;i(Ap.partials[Ai])}if(Ao.cfg&&"function"==typeof Ao.cfg.callback){Ao.cfg.callback()}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:An})}function Z(Am){r(Am,"updatePriceWithAncillary")}function O(Am){r(Am,"updatePriceWithHotel")}function p(Am){r(Am,"updatePriceWithBNPL")}function v(An){var Am=[];A.Object.each(An,function(Aq,Ap){var Ao=new Number(Ap);if(isFinite(Ao)){Am.push(Aq)}});return Am}function H(Ao){Ad(true);Ao=v(Ao);var An={selectedSeats:Ao,requestPartials:[Ai]};var Am={data:An,on:{end:function(){Ad(false);k.fireEvent("cart-updated-with-seats-price",{})},success:function(Aq,Ap){if(Ap){X=Ap.model;i(Ap.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithSeatSelected"})}function h(Ao){var An={requestPartials:[Ai]};var Am={data:An,on:{success:function(Aq,Ap){if(Ap){X=Ap.model;i(Ap.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithCarSelected"})}function q(){Ad(true);var Am={data:{selectedInsuranceCode:AA,requestPartials:["initialized"]},on:{end:function(){Ad(false)},success:function(Ap,An){if(An){X=An.model;var Ao=An.partials.initialized;i(Ao)}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithInsuranceOrSlider"})}function S(An){Ad(true);var Am={data:{selectedInsuranceCode:AA,requestPartials:[Ai]},on:{end:function(){Ad(false)},success:function(Ap,Ao){if(Ao){X=Ao.model;i(Ao.partials[Ai])}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"updatePriceWithFopSurcharge"})}function G(Ap,Ar,Am,Aq){Ad(true);var An={data:A.merge({requestPartials:[f]},Ap),on:{end:function(){Ad(false)},success:function(Au,As){if(As){X=As.model;var At=As.partials[f];i(At);if(As.model.itinerarySelected){AI(Ar,Am);if(!As.model.redemptionUserCannotAffordItinerary){Ak()}}else{a()}if(A.Lang.isArray(As.messages)&&As.messages.length>0){k.fireEvent("add-messages",{data:{messages:As.messages}})}AB(X.itineraryParts,Aq);Ab(X.total)}}}};var Ao=Ar?"checkPrice":"clearSelection";k.fireEvent("remove-all-component-messages");k.fireEvent("to-ajax",{cfg:An,actionCode:Ao})}function L(){g=[];Ad(true);var Am={data:{requestPartials:[f]},on:{end:function(){Ad(false)},success:function(Ap,An){if(An){X=An.model;var Ao=An.partials[f];i(Ao);Ab(X.total);k.fireEvent("cleared")}}}};k.fireEvent("to-ajax",{cfg:Am,actionCode:"clearSelection"})}function B(Am){if(Am&&Am.priceAlternatives){return Am.priceAlternatives}return{}}function P(An){if(!An||!An.segments){return null}var Ao=[];for(var Ap=0;Ap<An.segments.length;Ap++){var Aq=An.segments[Ap];var Am={departure:Aq.departureDate,arrival:Aq.arrivalDate,departureAirport:Aq.departureCode,arrivalAirport:Aq.arrivalCode,flightNumber:Aq.flightNumber[0],airlineCode:Aq.airlineCodes[0],operatingAirlineCode:Aq.operatingCarrier[0],brandId:An.fareFamily,bookingClass:Aq.bookingClass,fareBasis:Aq.fareBasis,cabinClass:Aq.classOfService[0],nextDayIndicator:Aq.nextDayIndicator};Ao.push(Am)}return{segments:Ao}}function AB(As,Ap){var Aq=[];var Ao,Ar;for(Ao=0;Ao<As.length;Ao++){var Am=P(As[Ao]);Aq.push(Am)}var An=[];if(Ap&&Aq.length===2){for(Ao=0;Ao<2;Ao++){Ar=B(AC[Ao]);An[Ao]={parts:Aq[Ao]?[Aq[Ao]]:null,fareAmount:Ar}}}else{Ar=B(AC[0]);An[0]={parts:Aq,fareAmount:Ar}}k.fireEvent("update-data",{data:{selectedOffers:An}})}function Ab(Am){k.fireEvent("update-data",{data:{total:B(Am)}})}function Q(Aq){var Ap=Aq.currentTarget;var Ao=Ap.one("a");var An=Ap.ancestor("div.cart-pax");if(An){var Am=An.one("ol");if(Am){isOpen=Ao.hasClass("open");if(isOpen){Ao.removeClass("open");Ao.addClass("translate");Ao.setAttribute("wl:translate","label.cart.priceSummary.view");Am.setStyle("display","none")}else{Ao.addClass("open");Ao.addClass("translate");Ao.setAttribute("wl:translate","label.cart.priceSummary.hide");Am.setStyle("display","block")}}}k.translateTemplate(AJ,Ap);A.fire("cart:sizeChanged");Aq.preventDefault()}function y(Am){e(Am,true)}function e(At,Ap){var As=At.currentTarget;var Ar=As.ancestor("li");var An=Ar.one("ol");var Ao=As.one("a").hasClass("open");var Aq=As.one("a");if(Ao){Aq.removeClass("open");if(!Ap){Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.view")}if(An){An.setStyle("display","none")}}else{Aq.addClass("open");if(!Ap){Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.hide")}if(An){An.setStyle("display","block");An.setAttribute("style","display: block;")}}var Am=A.all(".cartPrices");Am.each(function(Au){k.translateTemplate(AJ,Au)});A.fire("cart:sizeChanged");At.preventDefault()}function Af(Ap){var Aq=Ap.currentTarget;var Ao=Aq.one("a");var An=Ao.hasClass("open");var Am=Aq.one("div.fare-summary");if(An){Ao.removeClass("open");Ao.setAttribute("wl:translate","label.cart.fareSummary.viewDetails");Ao.addClass("translate");if(Am){Am.setStyle("display","none")}}else{Ao.addClass("open");Ao.setAttribute("wl:translate","label.cart.fareSummary.hideDetails");Ao.addClass("translate");if(Am){Am.setStyle("display","block");Am.setAttribute("style","display: block;")}}A.translateNode(Aq);A.fire("cart:sizeChanged");Ap.preventDefault()}function I(An){var Ao="initialized";var Am;for(Am in An){Ao=(!An||!A.Lang.isArray(An.segments)||An.segments[0].blank)?"initialized":"flightSelected"}return Ao}function F(An,Am,Ap){var Ao=A.all(Am);Ao.each(function(Ar){var As=k.getPartial(Ap,An);var Aq=A.Node.create(As);Ar.set("innerHTML",Aq.get("innerHTML"));A.translateNode(Ar);Aq=null})}function AG(){var Am=AD();if(A.one("#cart-total-price")){A.one("#cart-total-price").remove(true)}F(Am,".cart-price-details-container","_priceInfo");F(Am,"#price-summary","_flightChanged_PriceInfo");F(Am,"#price-info-exchange","_priceInfoExchangeReview")}function AD(){var Am={};Am.farePrice=AY("fare");Am.taxesPrice=AY("taxes");Am.discountPrice="";Am.feesPrice=AY("fees");Am.insurancePrice="";if(AJ.state==="exchangeReview"){Am.newTripTotalPrice=AY("newTrip")}else{Am.newTripTotalPrice=AY("newPrice")}Am.originalTripPrice=AY("originalPrice");Am.changeFeePrice=AY("changeFee");Am.ancillariesPrice=AY("ancillaries");Am.seatsPrice=AY("seats");Am.uniqueFareIndicators="";return Am}function AY(Am){return k.getPartial("_priceInfoItem",{pricePartType:Am,pricePartLink:"",pricePartValue:""})}function AW(An,Am){if(!X.showClassOfServicePerSegment){return k.getPartial("_chosenClass_cabinClass",{classOfService:A.translateParametrized("Cabin."+An),index:Am})}return""}function Y(Am){var A4="";var A8,A6;var Au=[];var Ay=I(Am);var A5=[];var Av=[];var BA=(A8==0)?"outbound":"inbound";var At=Am.fareIndicators;var Aq;var Az=Am.fareFamily;if(Az&&Am.basketsRef){Aq=Am.basketsRef[Az];At=Aq.fareIndicators}if(Am.segments&&Am.segments.length>0){var A3=Am.segments[0].arrivalDate;for(A6=0;A6<Am.segments.length;A6++){var A0;var Ao=Am.segments[A6];var A2=Ao.departureCode;var Aw=Ao.departureDate;var A9=Ao.arrivalCode;var As=Aq?Aq.classOfService:Ao.classOfService;var An=Aq?Aq.fareBasis:Ao.fareBasis;if(A.Lang.isArray(As)&&As.length>0){A0=As[0];A4=A0}An=An.replace(/\/.*/g,"");var Ap=(A6==0)?"depart":"connection";A5.push(u(A2,A3,Aw,An,Ap,A8,A6,A0));A5.push(Ag(A8,A6,A0));var A7=AL(Ao.flightNumber[0],Ao.airlineCodes[0],Ao.operatingCarrier[0]);Av.push(A7);A3=Ao.arrivalDate}A5.push(u(A9,A3,Aw,An,"arrive",A8,A6))}if(A.Lang.isArray(Am.overrideClassOfService)&&Am.overrideClassOfService.length>0){A4=Am.overrideClassOfService[0]}var BB={direction:BA,itineraryPrice:(Am&&Am.price&&Am.price.amount!=0&&!Ae)?AM(Am.price):"",partSegments:A5.join(""),flightNumbers:Av.join(" | "),fareFamily:"",cabinClass:AW(A4,A8),fareIndicators:D(At)};if(Az){var Ax=A.decodeHtmlEntities(AN(Az));var Ar=X.fareFamilyGroupDataMap[Az];var A1=Ar?Ar.familyGroupId:"undefinedGroup";BB.fareFamily=k.getPartial("_chosenClass_fareFamily",{fareFamily:AT(Az),fareFamilyKey:Az,fareFamilyGroupKey:A1,fareSummary:Ax,index:A8})}return k.getPartials("_flightDetails_"+Ay,BB)}function D(Am){if(Am){var An="";A.Array.each(Am,function(Ao){An+=k.getPartial("_fareIndicator",{name:Ao.name,iconUrl:Ao.iconUrl,translationKey:Ao.translationKey})});return k.getPartial("_fareIndicators",{fareIndicators:An})}return""}function Ag(Ao,An,Am){if(X.showClassOfServicePerSegment){var Ap={part_index:Ao,segment_index:An+1,classOfService:A.translateParametrized("Cabin."+Am)};return k.getPartial("_segmentClassOfService",Ap)}return""}function Ah(An,Aq){var Am=X.fareFamilyDataMap[An];if(Am){var Ao=A.getCurrentLanguage();var Ap=Am.localizedData[Ao];if(Ap&&Ap[Aq]){return Ap[Aq]}}return"&nbsp;"}function AT(Am){return Ah(Am,"label")}function AN(Am){return Ah(Am,"marketingText")}function AL(Ap,Ao,Am){var An=Aj.flightNumberFormat;var Aq=A.getFullAirlineName(Am);return k.getPartial("_flightNumber_"+An.toLowerCase(),{flightNumber:Ap,airlineCode:Ao,operatingCarrier:Aq})}function u(An,As,At,Au,Ao,Ar,Ap){var Am=A.airports[An];var Aq={flightCode:An,cityCode:Am&&Am.city||An,stateCode:Am&&Am.stateProvince||An,countryCode:Am&&Am.country||An,arrivalFlightDate:As,departureFlightDate:At,fareBasis:Au,flightType:Ao,partIndex:Ar,segmentIndex:Ap+1};if(Ao=="depart"){return k.getPartial("_segmentDetailsForDeparture",Aq)}else{if(Ao=="arrive"){return k.getPartial("_segmentDetailsForArrival",Aq)}}return k.getPartial("_segmentDetailsForConnection",Aq)}function AM(Am){return A.formatPrice(Am,{currencyCodeSeparator:"&nbsp;"})}function Ak(){k.fireEvent("unblock_submit")}function c(){k.fireEvent("block_submit")}function AI(An,Am){setTimeout(function(){k.fireEvent("refresh_flc",{data:{direction:An,brandedBasketHashRef:Am}})},100)}function j(Am){k.fireEvent("refresh_lazy_flc",{data:{index:Am,selectedHashRefs:g}})}function a(){g=[];k.fireEvent("reset_selection")}}});YUI.add("wl-yui2-log-control",function(A){if(YAHOO&&YAHOO.widget){YAHOO.widget.Logger=function(){};YAHOO.widget.LogWriter=function(){return{log:function(){}}}}},"1.0.0");(function(){YAHOO.util.Config=function(D){if(D){this.init(D)}if(!D){YAHOO.log("No owner specified for Config object","error","Config")}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE)},checkNumber:function(D){return(!isNaN(D))},fireEvent:function(D,F){YAHOO.log("Firing Config event: "+D+"="+F,"info","Config");var E=this.config[D];if(E&&E.event){E.event.fire(F)}},addProperty:function(E,D){E=E.toLowerCase();YAHOO.log("Added property: "+E,"info","Config");this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner)}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value)}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value}}}return D},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value}else{return undefined}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true}}else{return false}},setProperty:function(E,G,D){var F;E=E.toLowerCase();YAHOO.log("setProperty: "+E+"="+G,"info","Config");if(this.queueInProgress&&!D){this.queueProperty(E,G);return true}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G])}return true}}else{return false}}},queueProperty:function(S,P){S=S.toLowerCase();YAHOO.log("queueProperty: "+S+"="+P,"info","Config");var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false}else{if(!B.isUndefined(P)){R.value=P}else{P=R.value}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P])}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break}}}}}YAHOO.log("Config event queue: "+this.outputEventQueue(),"info","Config");return true}else{return false}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D)}else{this.fireEvent(D,E.value)}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F]}}this.initialConfig=E}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F])}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D)}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H)}return true}else{return false}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G)}else{return false}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]"}return D},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", "}}return D},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true}}while(G--)}return false};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider)}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1}}else{if(E>11){while(E>11){E-=12;B+=1}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break}return F},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B)}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A)}}}D.setDate(D.getDate()+C)},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return this.getDate(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(D,B,G){B=B||0;G=G||this.WEEK_ONE_JAN_DATE;var H=this.clearTime(D),L,M;if(H.getDay()===B){L=H}else{L=this.getFirstDayOfWeek(H,B)}var I=L.getFullYear();M=new Date(L.getTime()+6*this.ONE_DAY_MS);var F;if(I!==M.getFullYear()&&M.getDate()>=G){F=1}else{var E=this.clearTime(this.getDate(I,0,G)),A=this.getFirstDayOfWeek(E,B);var J=Math.round((H.getTime()-A.getTime())/this.ONE_DAY_MS);var K=J%7;var C=(J-K)/7;F=C+1}return F},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C)},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(12,0,0,0);return A},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1}if(D>=100){B=new Date(D,A,C)}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0)}return B}};(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,E=YAHOO.lang,D=YAHOO.widget.DateMath;function F(I,G,H){this.init.apply(this,arguments)}F.IMG_ROOT=null;F.DATE="D";F.MONTH_DAY="MD";F.WEEKDAY="WD";F.RANGE="R";F.MONTH="M";F.DISPLAY_DAYS=42;F.STOP_RENDER="S";F.SHORT="short";F.LONG="long";F.MEDIUM="medium";F.ONE_CHAR="1char";F.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date(),supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};F._DEFAULT_CONFIG=F.DEFAULT_CONFIG;var B=F.DEFAULT_CONFIG;F._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};F.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};F._STYLES=F.STYLES;F.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(H){var G={id:null,container:null,config:null};if(H&&H.length&&H.length>0){switch(H.length){case 1:G.id=null;G.container=H[0];G.config=null;break;case 2:if(E.isObject(H[1])&&!H[1].tagName&&!(H[1] instanceof String)){G.id=null;G.container=H[0];G.config=H[1]}else{G.id=H[0];G.container=H[1];G.config=null}break;default:G.id=H[0];G.container=H[1];G.config=H[2];break}}else{this.logger.log("Invalid constructor/init arguments","error")}return G},init:function(J,H,I){var G=this._parseArgs(arguments);J=G.id;H=G.container;I=G.config;this.oDomContainer=C.get(H);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=C.generateId()}if(!J){J=this.oDomContainer.id+"_t"}this.id=J;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("Calendar "+this.id);this.initEvents();this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();C.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);C.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(I){this.cfg.applyConfig(I,true)}this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(I,H,J){var G=H[0];if(!this.parent){if(C.inDocument(this.oDomContainer)){if(G){var K=C.getStyle(this.oDomContainer,"position");if(K=="absolute"||K=="relative"){if(!C.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";C.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){C.addClass(this.iframe,this.Style.CSS_FIXED_SIZE)}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null}}}}},configTitle:function(H,G,I){var K=G[0];if(K){this.createTitleBar(K)}else{var J=this.cfg.getProperty(B.CLOSE.key);if(!J){this.removeTitleBar()}else{this.createTitleBar("&#160;")}}},configClose:function(H,G,I){var K=G[0],J=this.cfg.getProperty(B.TITLE.key);if(K){if(!J){this.createTitleBar("&#160;")}this.createCloseButton()}else{this.removeCloseButton();if(!J){this.removeTitleBar()}}},initEvents:function(){var G=F._EVENT_TYPES,I=YAHOO.util.CustomEvent,H=this;H.beforeSelectEvent=new I(G.BEFORE_SELECT);H.selectEvent=new I(G.SELECT);H.beforeDeselectEvent=new I(G.BEFORE_DESELECT);H.deselectEvent=new I(G.DESELECT);H.changePageEvent=new I(G.CHANGE_PAGE);H.beforeRenderEvent=new I(G.BEFORE_RENDER);H.renderEvent=new I(G.RENDER);H.beforeDestroyEvent=new I(G.BEFORE_DESTROY);H.destroyEvent=new I(G.DESTROY);H.resetEvent=new I(G.RESET);H.clearEvent=new I(G.CLEAR);H.beforeShowEvent=new I(G.BEFORE_SHOW);H.showEvent=new I(G.SHOW);H.beforeHideEvent=new I(G.BEFORE_HIDE);H.hideEvent=new I(G.HIDE);H.beforeShowNavEvent=new I(G.BEFORE_SHOW_NAV);H.showNavEvent=new I(G.SHOW_NAV);H.beforeHideNavEvent=new I(G.BEFORE_HIDE_NAV);H.hideNavEvent=new I(G.HIDE_NAV);H.beforeRenderNavEvent=new I(G.BEFORE_RENDER_NAV);H.renderNavEvent=new I(G.RENDER_NAV);H.beforeSelectEvent.subscribe(H.onBeforeSelect,this,true);H.selectEvent.subscribe(H.onSelect,this,true);H.beforeDeselectEvent.subscribe(H.onBeforeDeselect,this,true);H.deselectEvent.subscribe(H.onDeselect,this,true);H.changePageEvent.subscribe(H.onChangePage,this,true);H.renderEvent.subscribe(H.onRender,this,true);H.resetEvent.subscribe(H.onReset,this,true);H.clearEvent.subscribe(H.onClear,this,true)},doPreviousMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.previousMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_LEFT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doNextMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.nextMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_RIGHT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doSelectCell:function(M,G){var R,O,I,L;var N=A.getTarget(M),H=N.tagName.toLowerCase(),K=false;while(H!="td"&&!C.hasClass(N,G.Style.CSS_CELL_SELECTABLE)){if(!K&&H=="a"&&C.hasClass(N,G.Style.CSS_CELL_SELECTOR)){K=true}N=N.parentNode;H=N.tagName.toLowerCase();if(N==this.oDomContainer||H=="html"){return }}if(K){A.preventDefault(M)}R=N;if(C.hasClass(R,G.Style.CSS_CELL_SELECTABLE)){L=G.getIndexFromId(R.id);if(L>-1){O=G.cellDates[L];if(O){I=D.getDate(O[0],O[1]-1,O[2]);var Q;G.logger.log("Selecting cell "+L+" via click","info");if(G.Options.MULTI_SELECT){Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}var J=G.cellDates[L];var P=G._indexOfSelectedFieldArray(J);if(P>-1){G.deselectCell(L)}else{G.selectCell(L)}}else{Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}G.selectCell(L)}}}}},doCellMouseOver:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.addClass(G,H.Style.CSS_CELL_HOVER)}},doCellMouseOut:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.removeClass(G,H.Style.CSS_CELL_HOVER)}},setupConfig:function(){var G=this.cfg;G.addProperty(B.TODAY.key,{value:new Date(B.TODAY.value.getTime()),supercedes:B.TODAY.supercedes,handler:this.configToday,suppressEvent:true});G.addProperty(B.PAGEDATE.key,{value:B.PAGEDATE.value||new Date(B.TODAY.value.getTime()),handler:this.configPageDate});G.addProperty(B.SELECTED.key,{value:B.SELECTED.value.concat(),handler:this.configSelected});G.addProperty(B.TITLE.key,{value:B.TITLE.value,handler:this.configTitle});G.addProperty(B.CLOSE.key,{value:B.CLOSE.value,handler:this.configClose});G.addProperty(B.IFRAME.key,{value:B.IFRAME.value,handler:this.configIframe,validator:G.checkBoolean});G.addProperty(B.MINDATE.key,{value:B.MINDATE.value,handler:this.configMinDate});G.addProperty(B.MAXDATE.key,{value:B.MAXDATE.value,handler:this.configMaxDate});G.addProperty(B.MULTI_SELECT.key,{value:B.MULTI_SELECT.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.START_WEEKDAY.key,{value:B.START_WEEKDAY.value,handler:this.configOptions,validator:G.checkNumber});G.addProperty(B.SHOW_WEEKDAYS.key,{value:B.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_HEADER.key,{value:B.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_FOOTER.key,{value:B.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.HIDE_BLANK_WEEKS.key,{value:B.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.NAV_ARROW_LEFT.key,{value:B.NAV_ARROW_LEFT.value,handler:this.configOptions});G.addProperty(B.NAV_ARROW_RIGHT.key,{value:B.NAV_ARROW_RIGHT.value,handler:this.configOptions});G.addProperty(B.MONTHS_SHORT.key,{value:B.MONTHS_SHORT.value,handler:this.configLocale});G.addProperty(B.MONTHS_LONG.key,{value:B.MONTHS_LONG.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_1CHAR.key,{value:B.WEEKDAYS_1CHAR.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_SHORT.key,{value:B.WEEKDAYS_SHORT.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_MEDIUM.key,{value:B.WEEKDAYS_MEDIUM.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_LONG.key,{value:B.WEEKDAYS_LONG.value,handler:this.configLocale});var H=function(){G.refireEvent(B.LOCALE_MONTHS.key);G.refireEvent(B.LOCALE_WEEKDAYS.key)};G.subscribeToConfigEvent(B.START_WEEKDAY.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_LONG.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_1CHAR.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_MEDIUM.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_LONG.key,H,this,true);G.addProperty(B.LOCALE_MONTHS.key,{value:B.LOCALE_MONTHS.value,handler:this.configLocaleValues});G.addProperty(B.LOCALE_WEEKDAYS.key,{value:B.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});G.addProperty(B.YEAR_OFFSET.key,{value:B.YEAR_OFFSET.value,supercedes:B.YEAR_OFFSET.supercedes,handler:this.configLocale});G.addProperty(B.DATE_DELIMITER.key,{value:B.DATE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_FIELD_DELIMITER.key,{value:B.DATE_FIELD_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_RANGE_DELIMITER.key,{value:B.DATE_RANGE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.MY_MONTH_POSITION.key,{value:B.MY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_YEAR_POSITION.key,{value:B.MY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_MONTH_POSITION.key,{value:B.MD_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_DAY_POSITION.key,{value:B.MD_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_MONTH_POSITION.key,{value:B.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_DAY_POSITION.key,{value:B.MDY_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_YEAR_POSITION.key,{value:B.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_POSITION.key,{value:B.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_YEAR_POSITION.key,{value:B.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_SUFFIX.key,{value:B.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});G.addProperty(B.MY_LABEL_YEAR_SUFFIX.key,{value:B.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});G.addProperty(B.NAV.key,{value:B.NAV.value,handler:this.configNavigator});G.addProperty(B.STRINGS.key,{value:B.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:B.STRINGS.supercedes})},configStrings:function(H,G,I){var J=E.merge(B.STRINGS.value,G[0]);this.cfg.setProperty(B.STRINGS.key,J,true)},configPageDate:function(H,G,I){this.cfg.setProperty(B.PAGEDATE.key,this._parsePageDate(G[0]),true)},configMinDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MINDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configMaxDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MAXDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configToday:function(I,H,J){var K=H[0];if(E.isString(K)){K=this._parseDate(K)}var G=D.clearTime(K);if(!this.cfg.initialConfig[B.PAGEDATE.key]){this.cfg.setProperty(B.PAGEDATE.key,G)}this.today=G;this.cfg.setProperty(B.TODAY.key,G,true)},configSelected:function(I,G,K){var H=G[0],J=B.SELECTED.key;if(H){if(E.isString(H)){this.cfg.setProperty(J,this._parseDates(H),true)}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(J)}},configOptions:function(H,G,I){this.Options[H.toUpperCase()]=G[0]},configLocale:function(H,G,I){this.Locale[H.toUpperCase()]=G[0];this.cfg.refireEvent(B.LOCALE_MONTHS.key);this.cfg.refireEvent(B.LOCALE_WEEKDAYS.key)},configLocaleValues:function(J,I,K){J=J.toLowerCase();var M=I[0],H=this.cfg,N=this.Locale;switch(J){case B.LOCALE_MONTHS.key:switch(M){case F.SHORT:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_SHORT.key).concat();break;case F.LONG:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_LONG.key).concat();break}break;case B.LOCALE_WEEKDAYS.key:switch(M){case F.ONE_CHAR:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case F.SHORT:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case F.MEDIUM:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case F.LONG:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_LONG.key).concat();break}var L=H.getProperty(B.START_WEEKDAY.key);if(L>0){for(var G=0;G<L;++G){N.LOCALE_WEEKDAYS.push(N.LOCALE_WEEKDAYS.shift())}}break}},configNavigator:function(H,G,I){var J=G[0];if(YAHOO.widget.CalendarNavigator&&(J===true||E.isObject(J))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages){this.oNavigator.erase()}},this,true)}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}}},initStyles:function(){var G=F.STYLES;this.Style={CSS_ROW_HEADER:G.CSS_ROW_HEADER,CSS_ROW_FOOTER:G.CSS_ROW_FOOTER,CSS_CELL:G.CSS_CELL,CSS_CELL_SELECTOR:G.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:G.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:G.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:G.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:G.CSS_CELL_TODAY,CSS_CELL_OOM:G.CSS_CELL_OOM,CSS_CELL_OOB:G.CSS_CELL_OOB,CSS_HEADER:G.CSS_HEADER,CSS_HEADER_TEXT:G.CSS_HEADER_TEXT,CSS_BODY:G.CSS_BODY,CSS_WEEKDAY_CELL:G.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:G.CSS_WEEKDAY_ROW,CSS_FOOTER:G.CSS_FOOTER,CSS_CALENDAR:G.CSS_CALENDAR,CSS_SINGLE:G.CSS_SINGLE,CSS_CONTAINER:G.CSS_CONTAINER,CSS_NAV_LEFT:G.CSS_NAV_LEFT,CSS_NAV_RIGHT:G.CSS_NAV_RIGHT,CSS_NAV:G.CSS_NAV,CSS_CLOSE:G.CSS_CLOSE,CSS_CELL_TOP:G.CSS_CELL_TOP,CSS_CELL_LEFT:G.CSS_CELL_LEFT,CSS_CELL_RIGHT:G.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:G.CSS_CELL_BOTTOM,CSS_CELL_HOVER:G.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:G.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:G.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:G.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:G.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:G.CSS_WITH_TITLE,CSS_FIXED_SIZE:G.CSS_FIXED_SIZE,CSS_LINK_CLOSE:G.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(B.PAGEDATE.key))},_buildMonthLabel:function(G){var I=this.Locale.LOCALE_MONTHS[G.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,H=(G.getFullYear()+this.Locale.YEAR_OFFSET)+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return H+I}else{return I+H}},buildDayLabel:function(G){return G.getDate()},createTitleBar:function(G){var H=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");H.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;H.innerHTML=G;this.oDomContainer.insertBefore(H,this.oDomContainer.firstChild);C.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return H},removeTitleBar:function(){var G=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}C.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var K=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,J=this.Style.CSS_LINK_CLOSE,M="us/my/bn/x_d.gif",L=C.getElementsByClassName(J,"a",this.oDomContainer)[0],G=this.cfg.getProperty(B.STRINGS.key),H=(G&&G.close)?G.close:"";if(!L){L=document.createElement("a");A.addListener(L,"click",function(O,N){N.hide();A.preventDefault(O)},this)}L.href="#";L.className=J;if(F.IMG_ROOT!==null){var I=C.getElementsByClassName(K,"img",L)[0]||document.createElement("img");I.src=F.IMG_ROOT+M;I.className=K;L.appendChild(I)}else{L.innerHTML='<span class="'+K+" "+this.Style.CSS_CLOSE+'">'+H+"</span>"}this.oDomContainer.appendChild(L);return L},removeCloseButton:function(){var G=C.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}},renderHeader:function(Q){this.logger.log("Rendering header","render");var P=7,O="us/tr/callt.gif",G="us/tr/calrt.gif",N=this.cfg,K=N.getProperty(B.PAGEDATE.key),L=N.getProperty(B.STRINGS.key),V=(L&&L.previousMonth)?L.previousMonth:"",H=(L&&L.nextMonth)?L.nextMonth:"",M;if(N.getProperty(B.SHOW_WEEK_HEADER.key)){P+=1}if(N.getProperty(B.SHOW_WEEK_FOOTER.key)){P+=1}Q[Q.length]="<thead>";Q[Q.length]="<tr>";Q[Q.length]='<th colspan="'+P+'" class="'+this.Style.CSS_HEADER_TEXT+'">';Q[Q.length]='<div class="'+this.Style.CSS_HEADER+'">';var X,U=false;if(this.parent){if(this.index===0){X=true}if(this.index==(this.parent.cfg.getProperty("pages")-1)){U=true}}else{X=true;U=true}if(X){M=this._buildMonthLabel(D.subtract(K,D.MONTH,1));var R=N.getProperty(B.NAV_ARROW_LEFT.key);if(R===null&&F.IMG_ROOT!==null){R=F.IMG_ROOT+O}var I=(R===null)?"":' style="background-image:url('+R+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+I+' href="#">'+V+" ("+M+")</a>"}var W=this.buildMonthLabel();var S=this.parent||this;if(S.cfg.getProperty("navigator")){W='<a class="'+this.Style.CSS_NAV+'" href="#">'+W+"</a>"}Q[Q.length]=W;if(U){M=this._buildMonthLabel(D.add(K,D.MONTH,1));var T=N.getProperty(B.NAV_ARROW_RIGHT.key);if(T===null&&F.IMG_ROOT!==null){T=F.IMG_ROOT+G}var J=(T===null)?"":' style="background-image:url('+T+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+J+' href="#">'+H+" ("+M+")</a>"}Q[Q.length]="</div>\n</th>\n</tr>";if(N.getProperty(B.SHOW_WEEKDAYS.key)){Q=this.buildWeekdays(Q)}Q[Q.length]="</thead>";return Q},buildWeekdays:function(H){H[H.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(B.SHOW_WEEK_HEADER.key)){H[H.length]="<th>&#160;</th>"}for(var G=0;G<this.Locale.LOCALE_WEEKDAYS.length;++G){H[H.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[G]+"</th>"}if(this.cfg.getProperty(B.SHOW_WEEK_FOOTER.key)){H[H.length]="<th>&#160;</th>"}H[H.length]="</tr>";return H},renderBody:function(m,k){this.logger.log("Rendering body","render");var AK=this.cfg.getProperty(B.START_WEEKDAY.key);this.preMonthDays=m.getDay();if(AK>0){this.preMonthDays-=AK}if(this.preMonthDays<0){this.preMonthDays+=7}this.monthDays=D.findMonthEnd(m).getDate();this.postMonthDays=F.DISPLAY_DAYS-this.preMonthDays-this.monthDays;this.logger.log(this.preMonthDays+" preciding out-of-month days","render");this.logger.log(this.monthDays+" month days","render");this.logger.log(this.postMonthDays+" post-month days","render");m=D.subtract(m,D.DAY,this.preMonthDays);this.logger.log("Calendar page starts on "+m,"render");var Y,N,M="w",f="_cell",c="wd",w="d",P,u,AC=this.today,O=this.cfg,W=AC.getFullYear(),v=AC.getMonth(),J=AC.getDate(),AB=O.getProperty(B.PAGEDATE.key),I=O.getProperty(B.HIDE_BLANK_WEEKS.key),j=O.getProperty(B.SHOW_WEEK_FOOTER.key),b=O.getProperty(B.SHOW_WEEK_HEADER.key),U=O.getProperty(B.MINDATE.key),a=O.getProperty(B.MAXDATE.key),T=this.Locale.YEAR_OFFSET;if(U){U=D.clearTime(U)}if(a){a=D.clearTime(a)}k[k.length]='<tbody class="m'+(AB.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AI=0,Q=document.createElement("div"),l=document.createElement("td");Q.appendChild(l);var AA=this.parent||this;for(var AE=0;AE<6;AE++){Y=D.getWeekNumber(m,AK);N=M+Y;if(AE!==0&&I===true&&m.getMonth()!=AB.getMonth()){break}else{k[k.length]='<tr class="'+N+'">';if(b){k=this.renderRowHeader(Y,k)}for(var AJ=0;AJ<7;AJ++){P=[];this.clearElement(l);l.className=this.Style.CSS_CELL;l.id=this.id+f+AI;this.logger.log("Rendering cell "+l.id+" ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(m.getDate()==J&&m.getMonth()==v&&m.getFullYear()==W){P[P.length]=AA.renderCellStyleToday}var Z=[m.getFullYear(),m.getMonth()+1,m.getDate()];this.cellDates[this.cellDates.length]=Z;if(m.getMonth()!=AB.getMonth()){P[P.length]=AA.renderCellNotThisMonth}else{C.addClass(l,c+m.getDay());C.addClass(l,w+m.getDate());for(var AD=0;AD<this.renderStack.length;++AD){u=null;var y=this.renderStack[AD],AL=y[0],H,e,L;switch(AL){case F.DATE:H=y[1][1];e=y[1][2];L=y[1][0];if(m.getMonth()+1==H&&m.getDate()==e&&m.getFullYear()==L){u=y[2];this.renderStack.splice(AD,1)}break;case F.MONTH_DAY:H=y[1][0];e=y[1][1];if(m.getMonth()+1==H&&m.getDate()==e){u=y[2];this.renderStack.splice(AD,1)}break;case F.RANGE:var h=y[1][0],g=y[1][1],n=h[1],S=h[2],X=h[0],AH=D.getDate(X,n-1,S),K=g[1],q=g[2],G=g[0],AG=D.getDate(G,K-1,q);if(m.getTime()>=AH.getTime()&&m.getTime()<=AG.getTime()){u=y[2];if(m.getTime()==AG.getTime()){this.renderStack.splice(AD,1)}}break;case F.WEEKDAY:var R=y[1][0];if(m.getDay()+1==R){u=y[2]}break;case F.MONTH:H=y[1][0];if(m.getMonth()+1==H){u=y[2]}break}if(u){P[P.length]=u}}}if(this._indexOfSelectedFieldArray(Z)>-1){P[P.length]=AA.renderCellStyleSelected}if((U&&(m.getTime()<U.getTime()))||(a&&(m.getTime()>a.getTime()))){P[P.length]=AA.renderOutOfBoundsDate}else{P[P.length]=AA.styleCellDefault;P[P.length]=AA.renderCellDefault}for(var z=0;z<P.length;++z){this.logger.log("renderer["+z+"] for ("+m.getFullYear()+T+"-"+(m.getMonth()+1)+"-"+m.getDate()+")","cellrender");if(P[z].call(AA,m,l)==F.STOP_RENDER){break}}m.setTime(m.getTime()+D.ONE_DAY_MS);m=D.clearTime(m);if(AI>=0&&AI<=6){C.addClass(l,this.Style.CSS_CELL_TOP)}if((AI%7)===0){C.addClass(l,this.Style.CSS_CELL_LEFT)}if(((AI+1)%7)===0){C.addClass(l,this.Style.CSS_CELL_RIGHT)}var o=this.postMonthDays;if(I&&o>=7){var V=Math.floor(o/7);for(var AF=0;AF<V;++AF){o-=7}}if(AI>=((this.preMonthDays+o+this.monthDays)-7)){C.addClass(l,this.Style.CSS_CELL_BOTTOM)}k[k.length]=Q.innerHTML;AI++}if(j){k=this.renderRowFooter(Y,k)}k[k.length]="</tr>"}}k[k.length]="</tbody>";return k},renderFooter:function(G){return G},render:function(){this.beforeRenderEvent.fire();var H=D.findMonthStart(this.cfg.getProperty(B.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;A.purgeElement(this.oDomContainer,true);var G=[];G[G.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(H.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';G=this.renderHeader(G);G=this.renderBody(H,G);G=this.renderFooter(G);G[G.length]="</table>";this.oDomContainer.innerHTML=G.join("\n");this.applyListeners();this.cells=C.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(B.TITLE.key);this.cfg.refireEvent(B.CLOSE.key);this.cfg.refireEvent(B.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var P=this.oDomContainer,H=this.parent||this,L="a",S="click";var M=C.getElementsByClassName(this.Style.CSS_NAV_LEFT,L,P),I=C.getElementsByClassName(this.Style.CSS_NAV_RIGHT,L,P);if(M&&M.length>0){this.linkLeft=M[0];A.addListener(this.linkLeft,S,this.doPreviousMonthNav,H,true)}if(I&&I.length>0){this.linkRight=I[0];A.addListener(this.linkRight,S,this.doNextMonthNav,H,true)}if(H.cfg.getProperty("navigator")!==null){this.applyNavListeners()}if(this.domEventMap){var J,G;for(var R in this.domEventMap){if(E.hasOwnProperty(this.domEventMap,R)){var N=this.domEventMap[R];if(!(N instanceof Array)){N=[N]}for(var K=0;K<N.length;K++){var Q=N[K];G=C.getElementsByClassName(R,Q.tag,this.oDomContainer);for(var O=0;O<G.length;O++){J=G[O];A.addListener(J,Q.event,Q.handler,Q.scope,Q.correct)}}}}}A.addListener(this.oDomContainer,"click",this.doSelectCell,this);A.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);A.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var H=this.parent||this,I=this,G=C.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(G.length>0){A.addListener(G,"click",function(N,M){var L=A.getTarget(N);if(this===L||C.isAncestor(this,L)){A.preventDefault(N)}var J=H.oNavigator;if(J){var K=I.cfg.getProperty("pagedate");J.setYear(K.getFullYear()+I.Locale.YEAR_OFFSET);J.setMonth(K.getMonth());J.show()}})}},getDateByCellId:function(H){var G=this.getDateFieldsByCellId(H);return(G)?D.getDate(G[0],G[1]-1,G[2]):null},getDateFieldsByCellId:function(G){G=this.getIndexFromId(G);return(G>-1)?this.cellDates[G]:null},getCellIndex:function(I){var H=-1;if(I){var G=I.getMonth(),N=I.getFullYear(),M=I.getDate(),K=this.cellDates;for(var J=0;J<K.length;++J){var L=K[J];if(L[0]===N&&L[1]===G+1&&L[2]===M){H=J;break}}}return H},getIndexFromId:function(I){var H=-1,G=I.lastIndexOf("_cell");if(G>-1){H=parseInt(I.substring(G+5),10)}return H},renderOutOfBoundsDate:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOB);G.innerHTML=H.getDate();return F.STOP_RENDER},renderRowHeader:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+H+"</th>";return G},renderRowFooter:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+H+"</th>";return G},renderCellDefault:function(H,G){G.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(H)+"</a>"},styleCellDefault:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(H,G){C.addClass(G,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOM);G.innerHTML=H.getDate();return F.STOP_RENDER},renderBodyCellRestricted:function(H,G){C.addClass(G,this.Style.CSS_CELL);C.addClass(G,this.Style.CSS_CELL_RESTRICTED);G.innerHTML=H.getDate();return F.STOP_RENDER},addMonths:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.MONTH,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractMonths:function(G){this.addMonths(-1*G)},addYears:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.YEAR,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractYears:function(G){this.addYears(-1*G)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(B.SELECTED.key);this.cfg.resetProperty(B.PAGEDATE.key);this.resetEvent.fire()},clear:function(){this.cfg.setProperty(B.SELECTED.key,[]);this.cfg.setProperty(B.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(I){this.logger.log("Select: "+I,"info");var L=this._toFieldArray(I),H=[],K=[],M=B.SELECTED.key;this.logger.log("Selection field array: "+L,"info");for(var G=0;G<L.length;++G){var J=L[G];if(!this.isDateOOB(this._toDate(J))){if(H.length===0){this.beforeSelectEvent.fire();K=this.cfg.getProperty(M)}H.push(J);if(this._indexOfSelectedFieldArray(J)==-1){K[K.length]=J}}}if(H.length===0){this.logger.log("All provided dates were OOB. beforeSelect and select events not fired","info")}if(H.length>0){if(this.parent){this.parent.cfg.setProperty(M,K)}else{this.cfg.setProperty(M,K)}this.selectEvent.fire(H)}return this.getSelectedDates()},selectCell:function(J){var H=this.cells[J],N=this.cellDates[J],M=this._toDate(N),I=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);this.logger.log("Select: "+M,"info");if(!I){this.logger.log("The cell at cellIndex:"+J+" is not a selectable cell. beforeSelect, select events not fired","info")}if(I){this.beforeSelectEvent.fire();var L=B.SELECTED.key;var K=this.cfg.getProperty(L);var G=N.concat();if(this._indexOfSelectedFieldArray(G)==-1){K[K.length]=G}if(this.parent){this.parent.cfg.setProperty(L,K)}else{this.cfg.setProperty(L,K)}this.renderCellStyleSelected(M,H);this.selectEvent.fire([G]);this.doCellMouseOut.call(H,null,this)}return this.getSelectedDates()},deselect:function(K){this.logger.log("Deselect: "+K,"info");var G=this._toFieldArray(K),J=[],M=[],N=B.SELECTED.key;this.logger.log("Deselection field array: "+G,"info");for(var H=0;H<G.length;++H){var L=G[H];if(!this.isDateOOB(this._toDate(L))){if(J.length===0){this.beforeDeselectEvent.fire();M=this.cfg.getProperty(N)}J.push(L);var I=this._indexOfSelectedFieldArray(L);if(I!=-1){M.splice(I,1)}}}if(J.length===0){this.logger.log("All provided dates were OOB. beforeDeselect and deselect events not fired")}if(J.length>0){if(this.parent){this.parent.cfg.setProperty(N,M)}else{this.cfg.setProperty(N,M)}this.deselectEvent.fire(J)}return this.getSelectedDates()},deselectCell:function(K){var H=this.cells[K],N=this.cellDates[K],I=this._indexOfSelectedFieldArray(N);var J=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(!J){this.logger.log("The cell at cellIndex:"+K+" is not a selectable/deselectable cell","info")}if(J){this.beforeDeselectEvent.fire();var L=this.cfg.getProperty(B.SELECTED.key),M=this._toDate(N),G=N.concat();if(I>-1){if(this.cfg.getProperty(B.PAGEDATE.key).getMonth()==M.getMonth()&&this.cfg.getProperty(B.PAGEDATE.key).getFullYear()==M.getFullYear()){C.removeClass(H,this.Style.CSS_CELL_SELECTED)}L.splice(I,1)}if(this.parent){this.parent.cfg.setProperty(B.SELECTED.key,L)}else{this.cfg.setProperty(B.SELECTED.key,L)}this.deselectEvent.fire([G])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var J=B.SELECTED.key,G=this.cfg.getProperty(J),H=G.length,I=G.concat();if(this.parent){this.parent.cfg.setProperty(J,[])}else{this.cfg.setProperty(J,[])}if(H>0){this.deselectEvent.fire(I)}return this.getSelectedDates()},_toFieldArray:function(H){var G=[];if(H instanceof Date){G=[[H.getFullYear(),H.getMonth()+1,H.getDate()]]}else{if(E.isString(H)){G=this._parseDates(H)}else{if(E.isArray(H)){for(var I=0;I<H.length;++I){var J=H[I];G[G.length]=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}}}return G},toDate:function(G){return this._toDate(G)},_toDate:function(G){if(G instanceof Date){return G}else{return D.getDate(G[0],G[1]-1,G[2])}},_fieldArraysAreEqual:function(I,H){var G=false;if(I[0]==H[0]&&I[1]==H[1]&&I[2]==H[2]){G=true}return G},_indexOfSelectedFieldArray:function(K){var J=-1,G=this.cfg.getProperty(B.SELECTED.key);for(var I=0;I<G.length;++I){var H=G[I];if(K[0]==H[0]&&K[1]==H[1]&&K[2]==H[2]){J=I;break}}return J},isDateOOM:function(G){return(G.getMonth()!=this.cfg.getProperty(B.PAGEDATE.key).getMonth())},isDateOOB:function(I){var J=this.cfg.getProperty(B.MINDATE.key),K=this.cfg.getProperty(B.MAXDATE.key),H=D;if(J){J=H.clearTime(J)}if(K){K=H.clearTime(K)}var G=new Date(I.getTime());G=H.clearTime(G);return((J&&G.getTime()<J.getTime())||(K&&G.getTime()>K.getTime()))},_parsePageDate:function(G){var J;if(G){if(G instanceof Date){J=D.findMonthStart(G)}else{var K,I,H;H=G.split(this.cfg.getProperty(B.DATE_FIELD_DELIMITER.key));K=parseInt(H[this.cfg.getProperty(B.MY_MONTH_POSITION.key)-1],10)-1;I=parseInt(H[this.cfg.getProperty(B.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;J=D.getDate(I,K,1)}}else{J=D.getDate(this.today.getFullYear(),this.today.getMonth(),1)}return J},onBeforeSelect:function(){if(this.cfg.getProperty(B.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}}},onSelect:function(G){},onBeforeDeselect:function(){},onDeselect:function(G){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(I){var J=I.split(this.Locale.DATE_FIELD_DELIMITER),G;if(J.length==2){G=[J[this.Locale.MD_MONTH_POSITION-1],J[this.Locale.MD_DAY_POSITION-1]];G.type=F.MONTH_DAY}else{G=[J[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,J[this.Locale.MDY_MONTH_POSITION-1],J[this.Locale.MDY_DAY_POSITION-1]];G.type=F.DATE}for(var H=0;H<G.length;H++){G[H]=parseInt(G[H],10)}return G},_parseDates:function(H){var O=[],N=H.split(this.Locale.DATE_DELIMITER);for(var M=0;M<N.length;++M){var L=N[M];if(L.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var G=L.split(this.Locale.DATE_RANGE_DELIMITER),K=this._parseDate(G[0]),P=this._parseDate(G[1]),J=this._parseRange(K,P);O=O.concat(J)}else{var I=this._parseDate(L);O.push(I)}}return O},_parseRange:function(G,K){var H=D.add(D.getDate(G[0],G[1]-1,G[2]),D.DAY,1),J=D.getDate(K[0],K[1]-1,K[2]),I=[];I.push(G);while(H.getTime()<=J.getTime()){I.push([H.getFullYear(),H.getMonth()+1,H.getDate()]);H=D.add(H,D.DAY,1)}return I},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(G){G.innerHTML="&#160;";G.className=""},addRenderer:function(G,H){var J=this._parseDates(G);for(var I=0;I<J.length;++I){var K=J[I];if(K.length==2){if(K[0] instanceof Array){this._addRenderer(F.RANGE,K,H)}else{this._addRenderer(F.MONTH_DAY,K,H)}}else{if(K.length==3){this._addRenderer(F.DATE,K,H)}}}},_addRenderer:function(H,I,G){var J=[H,I,G];this.renderStack.unshift(J);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(H,G){this._addRenderer(F.MONTH,[H],G)},addWeekdayRenderer:function(H,G){this._addRenderer(F.WEEKDAY,[H],G)},clearAllBodyCellStyles:function(G){for(var H=0;H<this.cells.length;++H){C.removeClass(this.cells[H],G)}},setMonth:function(I){var G=B.PAGEDATE.key,H=this.cfg.getProperty(G);H.setMonth(parseInt(I,10));this.cfg.setProperty(G,H)},setYear:function(H){var G=B.PAGEDATE.key,I=this.cfg.getProperty(G);I.setFullYear(parseInt(H,10)-this.Locale.YEAR_OFFSET);this.cfg.setProperty(G,I)},getSelectedDates:function(){var I=[],H=this.cfg.getProperty(B.SELECTED.key);for(var K=0;K<H.length;++K){var J=H[K];var G=D.getDate(J[0],J[1]-1,J[2]);I.push(G)}I.sort(function(M,L){return M-L});return I},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire()}},browser:(function(){var G=navigator.userAgent.toLowerCase();if(G.indexOf("opera")!=-1){return"opera"}else{if(G.indexOf("msie 7")!=-1){return"ie7"}else{if(G.indexOf("msie")!=-1){return"ie"}else{if(G.indexOf("safari")!=-1){return"safari"}else{if(G.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}})(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var G=this;if(G.navigator){G.navigator.destroy()}if(G.cfg){G.cfg.destroy()}A.purgeElement(G.oDomContainer,true);C.removeClass(G.oDomContainer,G.Style.CSS_WITH_TITLE);C.removeClass(G.oDomContainer,G.Style.CSS_CONTAINER);C.removeClass(G.oDomContainer,G.Style.CSS_SINGLE);G.oDomContainer.innerHTML="";G.oDomContainer=null;G.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=F;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();(function(){var D=YAHOO.util.Dom,F=YAHOO.widget.DateMath,A=YAHOO.util.Event,E=YAHOO.lang,G=YAHOO.widget.Calendar;function B(J,H,I){if(arguments.length>0){this.init.apply(this,arguments)}}B.DEFAULT_CONFIG=B._DEFAULT_CONFIG=G.DEFAULT_CONFIG;B.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var C=B.DEFAULT_CONFIG;B.prototype={init:function(K,I,J){var H=this._parseArgs(arguments);K=H.id;I=H.container;J=H.config;this.oDomContainer=D.get(I);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=D.generateId()}if(!K){K=this.oDomContainer.id+"_t"}this.id=K;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("CalendarGroup "+this.id);this.initEvents();this.initStyles();this.pages=[];D.addClass(this.oDomContainer,B.CSS_CONTAINER);D.addClass(this.oDomContainer,B.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(J){this.cfg.applyConfig(J,true)}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}this.logger.log("Initialized "+this.pages.length+"-page CalendarGroup","info")},setupConfig:function(){var H=this.cfg;H.addProperty(C.PAGES.key,{value:C.PAGES.value,validator:H.checkNumber,handler:this.configPages});H.addProperty(C.YEAR_OFFSET.key,{value:C.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:C.YEAR_OFFSET.supercedes,suppressEvent:true});H.addProperty(C.TODAY.key,{value:new Date(C.TODAY.value.getTime()),supercedes:C.TODAY.supercedes,handler:this.configToday,suppressEvent:false});H.addProperty(C.PAGEDATE.key,{value:C.PAGEDATE.value||new Date(C.TODAY.value.getTime()),handler:this.configPageDate});H.addProperty(C.SELECTED.key,{value:[],handler:this.configSelected});H.addProperty(C.TITLE.key,{value:C.TITLE.value,handler:this.configTitle});H.addProperty(C.CLOSE.key,{value:C.CLOSE.value,handler:this.configClose});H.addProperty(C.IFRAME.key,{value:C.IFRAME.value,handler:this.configIframe,validator:H.checkBoolean});H.addProperty(C.MINDATE.key,{value:C.MINDATE.value,handler:this.delegateConfig});H.addProperty(C.MAXDATE.key,{value:C.MAXDATE.value,handler:this.delegateConfig});H.addProperty(C.MULTI_SELECT.key,{value:C.MULTI_SELECT.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.START_WEEKDAY.key,{value:C.START_WEEKDAY.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.SHOW_WEEKDAYS.key,{value:C.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_HEADER.key,{value:C.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_FOOTER.key,{value:C.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.HIDE_BLANK_WEEKS.key,{value:C.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.NAV_ARROW_LEFT.key,{value:C.NAV_ARROW_LEFT.value,handler:this.delegateConfig});H.addProperty(C.NAV_ARROW_RIGHT.key,{value:C.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_SHORT.key,{value:C.MONTHS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_LONG.key,{value:C.MONTHS_LONG.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_1CHAR.key,{value:C.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_SHORT.key,{value:C.WEEKDAYS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_MEDIUM.key,{value:C.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_LONG.key,{value:C.WEEKDAYS_LONG.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_MONTHS.key,{value:C.LOCALE_MONTHS.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_WEEKDAYS.key,{value:C.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});H.addProperty(C.DATE_DELIMITER.key,{value:C.DATE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_FIELD_DELIMITER.key,{value:C.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_RANGE_DELIMITER.key,{value:C.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.MY_MONTH_POSITION.key,{value:C.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_YEAR_POSITION.key,{value:C.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_MONTH_POSITION.key,{value:C.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_DAY_POSITION.key,{value:C.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_MONTH_POSITION.key,{value:C.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_DAY_POSITION.key,{value:C.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_YEAR_POSITION.key,{value:C.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_POSITION.key,{value:C.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_YEAR_POSITION.key,{value:C.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_SUFFIX.key,{value:C.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.MY_LABEL_YEAR_SUFFIX.key,{value:C.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.NAV.key,{value:C.NAV.value,handler:this.configNavigator});H.addProperty(C.STRINGS.key,{value:C.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:C.STRINGS.supercedes})},initEvents:function(){var J=this,L="Event",M=YAHOO.util.CustomEvent;var I=function(O,R,N){for(var Q=0;Q<J.pages.length;++Q){var P=J.pages[Q];P[this.type+L].subscribe(O,R,N)}};var H=function(N,Q){for(var P=0;P<J.pages.length;++P){var O=J.pages[P];O[this.type+L].unsubscribe(N,Q)}};var K=G._EVENT_TYPES;J.beforeSelectEvent=new M(K.BEFORE_SELECT);J.beforeSelectEvent.subscribe=I;J.beforeSelectEvent.unsubscribe=H;J.selectEvent=new M(K.SELECT);J.selectEvent.subscribe=I;J.selectEvent.unsubscribe=H;J.beforeDeselectEvent=new M(K.BEFORE_DESELECT);J.beforeDeselectEvent.subscribe=I;J.beforeDeselectEvent.unsubscribe=H;J.deselectEvent=new M(K.DESELECT);J.deselectEvent.subscribe=I;J.deselectEvent.unsubscribe=H;J.changePageEvent=new M(K.CHANGE_PAGE);J.changePageEvent.subscribe=I;J.changePageEvent.unsubscribe=H;J.beforeRenderEvent=new M(K.BEFORE_RENDER);J.beforeRenderEvent.subscribe=I;J.beforeRenderEvent.unsubscribe=H;J.renderEvent=new M(K.RENDER);J.renderEvent.subscribe=I;J.renderEvent.unsubscribe=H;J.resetEvent=new M(K.RESET);J.resetEvent.subscribe=I;J.resetEvent.unsubscribe=H;J.clearEvent=new M(K.CLEAR);J.clearEvent.subscribe=I;J.clearEvent.unsubscribe=H;J.beforeShowEvent=new M(K.BEFORE_SHOW);J.showEvent=new M(K.SHOW);J.beforeHideEvent=new M(K.BEFORE_HIDE);J.hideEvent=new M(K.HIDE);J.beforeShowNavEvent=new M(K.BEFORE_SHOW_NAV);J.showNavEvent=new M(K.SHOW_NAV);J.beforeHideNavEvent=new M(K.BEFORE_HIDE_NAV);J.hideNavEvent=new M(K.HIDE_NAV);J.beforeRenderNavEvent=new M(K.BEFORE_RENDER_NAV);J.renderNavEvent=new M(K.RENDER_NAV);J.beforeDestroyEvent=new M(K.BEFORE_DESTROY);J.destroyEvent=new M(K.DESTROY)},configPages:function(T,R,N){var L=R[0],J=C.PAGEDATE.key,W="_",M,O=null,S="groupcal",V="first-of-type",K="last-of-type";for(var I=0;I<L;++I){var U=this.id+W+I,Q=this.containerId+W+I,P=this.cfg.getConfig();P.close=false;P.title=false;P.navigator=null;if(I>0){M=new Date(O);this._setMonthOnDate(M,M.getMonth()+I);P.pageDate=M}var H=this.constructChild(U,Q,P);D.removeClass(H.oDomContainer,this.Style.CSS_SINGLE);D.addClass(H.oDomContainer,S);if(I===0){O=H.cfg.getProperty(J);D.addClass(H.oDomContainer,V)}if(I==(L-1)){D.addClass(H.oDomContainer,K)}H.parent=this;H.index=I;this.pages[this.pages.length]=H}},configPageDate:function(O,N,L){var J=N[0],M;var K=C.PAGEDATE.key;for(var I=0;I<this.pages.length;++I){var H=this.pages[I];if(I===0){M=H._parsePageDate(J);H.cfg.setProperty(K,M)}else{var P=new Date(M);this._setMonthOnDate(P,P.getMonth()+I);H.cfg.setProperty(K,P)}}},configSelected:function(J,H,L){var K=C.SELECTED.key;this.delegateConfig(J,H,L);var I=(this.pages.length>0)?this.pages[0].cfg.getProperty(K):[];this.cfg.setProperty(K,I,true)},delegateConfig:function(I,H,L){var M=H[0];var K;for(var J=0;J<this.pages.length;J++){K=this.pages[J];K.cfg.setProperty(I,M)}},setChildFunction:function(K,I){var H=this.cfg.getProperty(C.PAGES.key);for(var J=0;J<H;++J){this.pages[J][K]=I}},callChildFunction:function(M,I){var H=this.cfg.getProperty(C.PAGES.key);for(var L=0;L<H;++L){var K=this.pages[L];if(K[M]){var J=K[M];J.call(K,I)}}},constructChild:function(K,I,J){var H=document.getElementById(I);if(!H){H=document.createElement("div");H.id=I;this.oDomContainer.appendChild(H)}return new G(K,I,J)},setMonth:function(L){L=parseInt(L,10);var M;var I=C.PAGEDATE.key;for(var K=0;K<this.pages.length;++K){var J=this.pages[K];var H=J.cfg.getProperty(I);if(K===0){M=H.getFullYear()}else{H.setFullYear(M)}this._setMonthOnDate(H,L+K);J.cfg.setProperty(I,H)}},setYear:function(J){var I=C.PAGEDATE.key;J=parseInt(J,10);for(var L=0;L<this.pages.length;++L){var K=this.pages[L];var H=K.cfg.getProperty(I);if((H.getMonth()+1)==1&&L>0){J+=1}K.setYear(J)}},render:function(){this.renderHeader();for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.render()}this.renderFooter()},select:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.select(H)}return this.getSelectedDates()},selectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.selectCell(H)}return this.getSelectedDates()},deselect:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselect(H)}return this.getSelectedDates()},deselectAll:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.deselectAll()}return this.getSelectedDates()},deselectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselectCell(H)}return this.getSelectedDates()},reset:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.reset()}},clear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.clear()}this.cfg.setProperty(C.SELECTED.key,[]);this.cfg.setProperty(C.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextMonth()}},previousMonth:function(){for(var I=this.pages.length-1;I>=0;--I){var H=this.pages[I];H.previousMonth()}},nextYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextYear()}},previousYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.previousYear()}},getSelectedDates:function(){var J=[];var I=this.cfg.getProperty(C.SELECTED.key);for(var L=0;L<I.length;++L){var K=I[L];var H=F.getDate(K[0],K[1]-1,K[2]);J.push(H)}J.sort(function(N,M){return N-M});return J},addRenderer:function(H,I){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addRenderer(H,I)}},addMonthRenderer:function(K,H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.addMonthRenderer(K,H)}},addWeekdayRenderer:function(I,H){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addWeekdayRenderer(I,H)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(H){this.callChildFunction("addMonths",H)},subtractMonths:function(H){this.callChildFunction("subtractMonths",H)},addYears:function(H){this.callChildFunction("addYears",H)},subtractYears:function(H){this.callChildFunction("subtractYears",H)},getCalendarPage:function(K){var M=null;if(K){var N=K.getFullYear(),J=K.getMonth();var I=this.pages;for(var L=0;L<I.length;++L){var H=I[L].cfg.getProperty("pagedate");if(H.getFullYear()===N&&H.getMonth()===J){M=I[L];break}}}return M},_setMonthOnDate:function(I,J){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(J<0||J>11)){var H=F.add(I,F.MONTH,J-I.getMonth());I.setTime(H.getTime())}else{I.setMonth(J)}},_fixWidth:function(){var H=0;for(var J=0;J<this.pages.length;++J){var I=this.pages[J];H+=I.oDomContainer.offsetWidth}if(H>0){this.oDomContainer.style.width=H+"px"}},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var J=this;if(J.navigator){J.navigator.destroy()}if(J.cfg){J.cfg.destroy()}A.purgeElement(J.oDomContainer,true);D.removeClass(J.oDomContainer,B.CSS_CONTAINER);D.removeClass(J.oDomContainer,B.CSS_MULTI_UP);for(var I=0,H=J.pages.length;I<H;I++){J.pages[I].destroy();J.pages[I]=null}J.oDomContainer.innerHTML="";J.oDomContainer=null;this.destroyEvent.fire()}}};B.CSS_CONTAINER="yui-calcontainer";B.CSS_MULTI_UP="multi";B.CSS_2UPTITLE="title";B.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(B,G,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=B;YAHOO.widget.CalendarGroup=B;YAHOO.widget.Calendar2up=function(J,H,I){this.init(J,H,I)};YAHOO.extend(YAHOO.widget.Calendar2up,B);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(A){this.init(A)};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A._DEFAULT_CFG=A.DEFAULT_CONFIG;A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(this._doc.compatMode=="BackCompat")))},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render()}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask()}},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(A){if(A>=0&&A<12){this._month=A}this._updateMonthUI()},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B}this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off")}this._setFirstLastElements()},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px")}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>"}E[E.length]="</select>"}return E},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+'_submit">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+'_cancel">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI())}}function C(){this.setMonth(this._getMonthFromUI())}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true)}this.applyKeyListeners()},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask)}this.purgeKeyListeners()},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){var C=this;window.setTimeout(function(){C._update(B)},A)}else{this._update(B)}}},_update:function(B){var A=YAHOO.widget.DateMath.getDate(this.getYear()-B.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);B.cfg.setProperty("pagedate",A);B.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select()}catch(B){}}else{if(C=="month"){A=this.monthEl}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus()}catch(D){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML=""}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl)}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl)}this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none")}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex}else{return 0}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10)}}return A},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit()}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break}if(B){G.preventDefault(H);try{this.yearEl.select()}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus()}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus()}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D]}else{return(A!==true&&A[D])?A[D]:C[D]}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});YUI.add("wl-calendar",function(C){var D={};var O=[];var H=[];var K={};var E=sabre.config.global.currentTimeInMillis;C.wlCalendar={reset:function(){O=[]},setFlightDates:function(R,S){O=[];var T=R.previous();var Q=T?C.DataType.Date.parse(T.get("value")):new Date(E);if(!Q){Q=new Date()}H[S]=H[S]||{};H[S].date=Q;H[S].textInput=R;H[S].hiddenInput=R.previous();H[S].calendar=null},loadCalendar:function(R,T,S){K.dateFormat=S.dateFormat;K.showCalendar=S.show;K.onSelectCallback=S.onSelectCallback||function(){};var Q=R.get("id");R=C.one("#"+Q);var U=F(Q);if(!D[Q]){D[Q]=L(Q);T.registerContainer(D[Q]);D[Q].hideEvent.subscribe(function(){C.wlValidation.validate(null,R.previous());var W=C.one(O[U].oDomContainer);W.removeClass("calendar-container");W.addClass("hidden")})}I(Q);var V=C.one(D[Q].body);V.addClass("loadingContainer");D[Q].show();C.later(5,C,function(){C.use("yui2-calendar",function(Z){if(!Z.Lang.isValue(O[U])){O[U]=new YAHOO.widget.CalendarGroup("calendar-"+Q,{iframe:false});O[U].selectEvent.subscribe(function(i,Y,j){B(j,D[Q],Q,K.dateFormat,T);K.onSelectCallback()},O[U],true);O[U].renderEvent.subscribe(function(){Z.one(O[U].oDomContainer).removeClass("hidden");D[Q].fireEvent("changeContent")});H[U].calendar=O[U]}var f=new Date(E);var e=O[U]&&O[U].getSelectedDates()[0];var d=YAHOO.widget.DateMath;if(document.getElementById("formattedOutboundDepartureDate")&&document.getElementById("formattedOutboundDepartureDate").value){var W=Z.DataType.Date.parse(document.getElementById("formattedOutboundDepartureDate").value)}else{var a=H[U-1];var W=a?Z.DataType.Date.parse(a.hiddenInput.get("value"))||f:f}var g=d.add(W,d.DAY,365);var c=Z.one("#date"+(U+1));if(c&&c.get("disabled")){var h=Z.one("#date_hidden"+(U+1));if(h){g=Z.DataType.Date.parse(h.get("value"))}}var X=e||W;var b=O[U].cfg;b.setProperty("locale_weekdays","medium");b.setProperty("mindate",W);b.setProperty("maxdate",g);b.setProperty("pagedate",X);b.setProperty("start_weekday",sabre.config.satConfiguration.calendarStartDay);if(T.getTripType()==="oneway"){O[U].removeRenderers()}else{G(O,U)}J(O[U]);O[U].render();Z.on("keyup",function(Y){if(Y.charCode===27){D[Q].hide()}});V.addClass("calendar-container");V.removeClass("loadingContainer");I(Q)})})}};function L(R){var Q=new YAHOO.widget.Panel("container-"+R,{visible:false,draggable:false,zIndex:520,close:true});Q.showEvent.subscribe(function(){Q.fireEvent("changeContent")});Q.setBody('<div class="calendar-container" id="calendar-'+R+'"></div>');Q.render(document.body);return Q}function B(a,b,Q,d,c){var S=C.one("#"+Q);var j=S.previous();var V;var W;if(a.getSelectedDates().length>0){var R=a.getSelectedDates()[0];var f=R.getDate();var l=R.getMonth();var Y=R.getFullYear();V=C.DataType.Date.format(R,{format:d});W=M(Y,l,f);var k=(l+1)+"/"+f+"/"+Y;var g,X,Z,e;var U=F(Q);for(g=U+1;g<H.length;g++){e=H[g];var T=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R>T){e.calendar&&e.calendar.select(k);e.date=R;X=H[g].textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}for(g=U-1;g>-1;g--){e=H[g];var h=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R<h){e.calendar&&e.calendar.select(k);e.date=R;X=e.textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}}else{V="";W=0}S.set("value",V);j.set("value",W);b.hide();if(c.persistInputState){c.persistInputState(Q,W);c.persistInputState("textForField"+Q,V)}}function M(R,S,Q){return C.DataType.Date.format(new Date(R,S,Q),{format:sabre.config.dateInputFormat})}function F(R){var S=new RegExp("^[a-z_\\-]+(\\d+)$","i");var Q=R.match(S);return Q?C.DataType.Number.parse(Q[1]):null}function G(T,U){var W=T[U];var V;var Q;for(var R=0;R<T.length;R++){var S=T[R]&&T[R].getSelectedDates()[0]||H[R].date;if(S){if(!V&&!Q){V=S;Q=S}if(S<V){V=S}if(S>Q){Q=S}}}V=V||new Date(E);Q=Q||new Date(E);W.removeRenderers();W.addRenderer(A(W,V,Q),W.renderCellStyleHighlight1)}function A(T,Q,R){var S=T.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.DATE_RANGE_DELIMITER.key);return(N(T,Q)+S+N(T,R))}function N(U,T){var R=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;var Q=[];Q[U.cfg.getProperty(R.MDY_MONTH_POSITION.key)-1]=(T.getMonth()+1);Q[U.cfg.getProperty(R.MDY_DAY_POSITION.key)-1]=T.getDate();Q[U.cfg.getProperty(R.MDY_YEAR_POSITION.key)-1]=T.getFullYear();var S=U.cfg.getProperty(R.DATE_FIELD_DELIMITER.key);return Q.join(S)}function J(S){var T=C.config.locale;if(C.DataType.Date.Locale){var R=C.DataType.Date.Locale[T];P(R,S)}else{var Q=T.replace("_","-");C.use("lang/datatype-date-format_"+Q,function(V){V.Intl.setLang("datatype-date-format",Q);var U=V.Intl.get("datatype-date-format");P(U,S)})}}function P(Q,T){if(Q){var R={b:"MONTHS_SHORT",B:"MONTHS_LONG",a:"WEEKDAYS_MEDIUM",A:"WEEKDAYS_LONG"};for(var S in R){if(R.hasOwnProperty(S)){T.cfg.setProperty(R[S],Q[S])}}T.render()}}function I(R){var S=C.isCurrentLanguageRtl();var T=S?"br":"bl";var Q=S?"tr":"tl";D[R].cfg.setProperty("context",[R,Q,T,["beforeShow","windowResize"]])}},"1.0.0",{requires:[]});YUI.add("wl-airport-finder",function(A){A.wlAirportFinder=function(i,V,W){var g;var E;var G={};var I="";var f="";var S=[];var K=[];var h={};W=W||{};var m=W.cityListFormat||"%airport (%code)";var l=W.defaultOriginLabel||"";var H=W.defaultDestinationLabel||"";var a=W.maxRowCount||16;var Z='<div class="table-container"><table><tbody><tr class="ondhead"><td id="originInfoErrorMessage" class="translate" wl:translate="label.fsc.noOriginMatch"></td></tr><tr class="foot"><td colspan="5"></td></tr></tbody></table></div>';var O=false;return{showAirportList:N,createAirportList:B,updateAirportInputTranslation:Y,formatCityList:P,setRbeBooking:L};function L(n){O=n}function N(q,p,o,n){A.use("wl-routes",function(r){b(q,p,o,n)})}function M(o,q){var p=A.isCurrentLanguageRtl();var r=p?"br":"bl";var n=p?"tr":"tl";o.cfg.setProperty("context",[q.get("id"),n,r,["beforeShow","windowResize"]])}function b(v,x,n,AB){var AC;var y;var z;var w;var t;B(x);var s=x.hasClass("origin_airport");var r=x.get("id");var u=x.previous();if(!u){A.log("Cannot show airport finder - unable to find connected input control","warn");return }if(s){y=u.get("id");w=r;z=y.replace("origin","destination");t=w.replace("origin","destination");g=AC=G[w];E=G[t]}else{z=u.get("id");t=r;y=z.replace("destination","origin");w=t.replace("destination","origin");E=AC=G[t];g=G[w]}var AA=v&&v.type==="keyup"?v.charCode:null;var q=AC.cfg.getProperty("visible");if(AA===27||AA===13){AC.hide();if(s){K=R(null,A.one(E.body),z,y,n);if(!d(z)){A.one("#"+z).next().fire("originChosen")}}}else{if(!q||AA!==null){var p=[9,13];AA=!AA||A.Array.indexOf(p,AA)!==-1?null:AA;var o=A.one(AC.body);o.addClass("loadingContainer");AC.cfg.setProperty("visible",true);M(AC,x);h=A.routes||[];o.removeClass("loadingContainer");if(s){S=k(AA,o,y,AB)}else{K=R(AA,o,z,y,n)}AC.fireEvent("changeContent");if(AA===null){J(r);x.select()}if(s){A.on("click",function(){K=R(null,A.one(E.body),z,y,n);if(!d(z)){U(z)}},A.one(g.element).one("a.container-close"))}}}M(AC,x)}function J(n){U(n,F(n))}function P(t){var o=A.airports[t]||{};var p=o.code||t;var s=o.city||p;var r=A.translateParametrized("Airport."+p);var v=A.translateParametrized("AirportShort."+p);var u=A.translateParametrized("City."+s);var n=A.translateParametrized("StateProvince."+o.stateProvince);var q=A.translateParametrized("Country."+o.country);return A.formatText(m,{code:p,airport:r||"",airportShort:v||"",cityCode:s||"",city:u||"",stateProvince:n||"",country:q||""})}function d(n){return !!F(n).length}function F(u){var r=A.one("#"+u);var q=A.Lang.trim(r.get("value"));if(q.length>0){var p=r.hasClass("origin_airport")?S:K;for(var o=0;o<p.length;o++){var t=p[o][0];var s=P(t);if(s===q){return[s,t]}var n=new RegExp(q,"i");if(s.search(n)>-1){return[s,t]}}}return[]}function X(n,o,p){o=o||"";p=p||"";n.previous().set("value",p);n.previous().set("wl:value",p);n.set("wl:value","");n.set("value",o)}function U(s,o){var n=A.one("#"+s);if(o&&o.length===2){X(n,o[0],o[1])}else{var r=n.hasClass("origin_airport");var q=A.getCurrentTranslations();var p=r?q[l]:q[H];X(n,p)}}function T(q,t,r,v,u){var o=null;var p=t.get("id");var s={visible:false,draggable:false,zIndex:520,close:true};var n=new YAHOO.widget.Panel(q,s);var w;n.setBody("");n.renderEvent.subscribe(function(){w=A.one("#"+q);w.setStyles({display:"none"});A.delegate("click",function(z){var y=z.target;t=A.one("#"+p);t.set("value",y.get("innerHTML"));var x=t.previous();x.set("value",y.get("rel"));if(r){K=R(null,A.one(E.body),v,u,o);if(!d(v)){A.one("#"+v).next().fire("originChosen")}}n.hide();z.preventDefault()},n.element,"span")});n.render(document.body);n.cfg.setProperty("context",[p,"tl","bl",["beforeShow","windowResize"]]);n.hideEvent.subscribe(function(){t=A.one("#"+p);J(p);if(V.persistInputState){V.persistInputState(p,t.previous().get("value"))}if(V.getTripType()==="roundtrip"){C(W.airportInputsIds,p,t.previous().get("value"))}A.fire("fsc:inputChanged");A.wlValidation.validate(null,t.previous());w.setStyles({display:"none"});if(n.handle){n.handle.detach();n.handle=null}});n.showEvent.subscribe(function(){w.setStyles({display:"block"});n.focus();A.Lang.later(10,null,function(){if(!n.handle){n.handle=A.on("click",function(y){var x=y.target;if(!x.inRegion(n.element,true)){n.hide()}},document)}})});V.registerContainer(n);return n}function B(p){var n=p.get("id");var r;var q;var s=p.hasClass("origin_airport");if(s){r=p.previous().get("id");q=r.replace("origin","destination")}else{q=p.previous().get("id");r=q.replace("destination","origin")}if(!G[n]){var o=n+"-cont";G[n]=T(o,p,s,q,r)}}function C(n,o,s){var r=new RegExp("^([a-z_]+)(\\d+)$","i");var q=o.match(r);if(q){var p=q[1];if(p===n.departure){p=n.arrival}else{if(p===n.arrival){p=n.departure}}if(V.setStoredInputValue){V.setStoredInputValue(p,1,s)}}}function D(o){o=o||[];for(var n in o){if(e(o[n])){return true}}return false}function e(n){return n===1||(A.Lang.isObject(n)&&((!O&&n.b2c!==0)||(O&&n.rbe!==0)))}function k(x,p,s,y){var u=[];var z=A.one("#"+s);var q=A.Lang.trim(z.next().get("value"));var v=q||"";v=c(v);var o=new RegExp("^"+v,"i");var n=new RegExp(",\\s"+v,"i");var t=s.split("origin_airport_hidden")[1];for(var w in h){if(!D(h[w])){continue}if(A.airports[w]){if(!y||y.length===0||y.length===1&&t>1||t>=y.length||y[t]===null||A.airports[w].country===y[t]){var r=P(w);if(x!=null&&(A.Lang.trim(v)!=""&&A.Lang.trim(v)!=f)){if(w.match(o)||r.match(o)||r.match(n)){u.push(new Array(w,r))}}else{u.push(new Array(w,r))}}}else{A.log("origin airport not found:"+w,"warn")}}j(u,p,"origins");return u}function R(AH,u,q,t,n){var AD=[];var AG=A.one("#"+q);var AF=A.one("#"+t);var x=A.Lang.trim(AG.next().get("value"));var AE=x||"";AE=c(AE);var AB=new RegExp("^"+AE,"i");var AA=new RegExp(",\\s"+AE,"i");var AC=[];var w=h[AF.get("value")];if(A.Lang.isValue(w)){AC=w}else{var z=[];for(var p in h){z.push(p)}for(var s=0;s<z.length;s++){for(var r in h[z[s]]){AC[r]=h[z[s]][r]}}}var v=q.split("destination_airport_hidden")[1];for(var y in AC){if(!e(AC[y])){continue}if(A.airports[y]){if(!n||n.length===0||v>=n.length||n[v]===null||A.airports[y].country===n[v]){var o=P(y)||"";if(AH!=null&&(A.Lang.trim(AE)!=""&&A.Lang.trim(AE)!=I)){if(y.match(AB)||o.match(AB)||o.match(AA)){AD.push([y,o])}}else{AD.push([y,o])}}}else{A.log("destination airport not found: "+y,"warn")}}j(AD,u,"destinations");return AD}function Y(){A.all(".airport-picker").each(function(p){var o=p.previous();n(p,o)});function n(p,o){if(!p||!o){return }var q=o.get("value");if(!q){return }var r=P(q);p.set("value",r);p.setAttribute("wl:value",r)}}function j(u,p,w){u.sort(Q);p.addClass("airportsList");if(u.length==0){p.set("innerHTML",Z);p.translate();return }if(!p.one("table")){var x=A.Node.create('<div class="table-container"><table><tbody><tr></tr></tbody></table></div>');p.set("innerHTML","");p.append(x)}var v=p.one("table").one("tr");v.all("td").remove();var n;var q;for(var r=0;r<u.length;r++){var o=u[r][0];var z=P(o);var y=A.Node.create("<li></li>");var t=A.Node.create('<span class="airport-name" id="'+w+"-"+o+'" rel="'+o+'">'+z+"</span>");y.append(t);if(r===0||(r%a)===0){q=A.Node.create("<ul></ul>");q.append(y);var s=document.createElement("td");n=A.one(s);n.append(q);v.append(n)}else{if((r%a)!==0){q.append(y)}}}}function c(o){var n=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return o.replace(n,"\\$&")}function Q(o,n){if(o[0]===""){return -1}if(n[0]===""){return 1}if(o[1]<n[1]){return -1}if(n[1]<o[1]){return 1}return 0}}});YUI.add("wl-fsc-multicity",function(E){var D;var C={init:function(F){D=F}};C.commonMulticityDomEvents=function(G){var F=G.one("#addMoreFlights");if(F){F.on("click",B)}E.on("click",A,".multiFlight-delete-leg")};function B(F){F.preventDefault();D.addFlight()}function A(G){G.preventDefault();var F=E.DataType.Number.parse(this.get("id"));D.removeFlight(F)}E.widgets=E.widgets||{};E.widgets.multicity=C});YUI.add("wl-fsc-modifySearch",function(D){var B;var G;var C,I;var E;var F=false;var H={init:function(L,O,M,K){G=K.errorMsg||"";I=L;C=O;var N=D.one("#"+M);E=N?N.get("innerHTML"):""},create:function(N,K,L){var M={visible:true,draggable:false,fixedcenter:"contained",modal:true,close:true,postmethod:"form",hideaftersubmit:false,monitorresize:true};var P=D.merge(M,L);if(B){B.destroy()}var O=D.one("#"+N);if(!O){O=D.Node.create('<div id="'+N+'"></div>');O.set("innerHTML",E);if(F){D.translateNode(O)}D.one("body").appendChild(O)}B=new YAHOO.widget.Dialog(N,P);B.renderEvent.subscribe(function(){this.cfg.setProperty("zIndex",100);this.sizeMask();var Q=D.one("#modify-search");Q.removeClass("hidden");B.center();D.on("modifySearchOverlay|click",A,"#btn-modify-search");D.on("modifySearchOverlay|click",function(){B.hide()},"#btn-cancel");if(G){J(G)}if(D.Lang.isFunction(K.render)){K.render.call(this,this)}I.fireEvent("modify_search_rendered")});B.hideEvent.subscribe(function(){D.detach("modifySearchOverlay|*");D.wlValidation.errorRendering.hideAllOverlays();if(D.Lang.isFunction(K.hide)){K.hide.call(this,this)}});B.render(document.body)},updateErrorMessages:function(K){G=K;J(K)},getErrorMessages:function(){return G},setTranslationRequired:function(){F=true}};D.widgets=D.widgets||{};D.widgets.modifySearch=H;function A(){D.one(B.element).addClass("loading");B.submit()}function J(L){var K=D.one("#errors");var M={message:L};I.renderPartialInNode("_flowMessage",M,K,true);K.removeClass("hidden")}});YUI.add("wl-fsc",function(B){var A={ONE_WAY:"oneway",ROUND_TRIP:"roundtrip",MULTI_CITY:"multicity"};B.components.Fsc=function(AC){var l=this;var Y=AC.initData||{};var AZ=AC.compInstConfig||{};var C=new YAHOO.widget.OverlayManager();var m=AZ.dateFormat;var o=AZ.originCityDefaultValueKey||"";var u=AZ.destinationCityDefaultValueKey||"";var r=Y.destinationAirportCountriesFilter;var D=Y.originAirportCountriesFilter;var H=Y.restrictOriginAndDestination&&Y.nonRefundableAncillariesIncluded;var S=Y.mybWasAwardBooking;var J=Y.frequentFlyerUserLoggedIn||false;var AQ=sabre.config.satConfiguration.frequentFlyer.requireLogin;var N=sabre.config.satConfiguration.frequentFlyer.allowedJourneyTypes;var AE=sabre.config.techSwitchesConfiguration.profileSystemAvailable;var AO=sabre.config.techSwitchesConfiguration.loyaltyProgramAvailable;var d=Y.awardBooking||false;var L=(!d&&Y.redeemMiles)||false;var AW=AZ.rbeTabEnabled||false;var j=AZ.awardBookingEnabled&&AO;var AU=Y.partialExchange;var F=!AE&&AQ;var AN=S||!j||F;var AH=Y.journey||AZ.journey.defaultValue;var w=A[AH];var g={};var k="INF_id";var AL="redeem_miles";B.widgets.multicity.init(g);var AR=B.wlAirportFinder(l,g,{cityListFormat:AZ.cityListFormat,maxRowCount:AZ.maxRowCount,defaultOriginLabel:o,defaultDestinationLabel:u,airportInputsIds:{departure:"origin_airport",arrival:"destination_airport"}});var x;l.incomingEvents={load_overlay:function(Ae){g.setTripType(Y.journey);O(Ae.errorMessage)},change_lang:function(){b();if(AC.state==="modifySearch"){B.widgets.modifySearch.setTranslationRequired()}},"ff-logged-in":function(){J=true;AA();K();Q()},"logged-in":function(){AA();K()},"logged-out":function(){J=false;AA();K();Q()}};l.onRenderState={exchange:function(Ae){Aa(Ae)},modifySearch:function(Af){var Ae=B.Lang.isObject(AC.validationMessages)&&B.Object.size(AC.validationMessages)?"validationError":null;B.widgets.modifySearch.init(l,g,"modify-search",{errorMsg:Ae});if(Ae||Y.alwaysShowModifySearch){O()}},searchPage:function(Ae){B.wlProfiler.add("fsc rendered");Aa(Ae);G(Ae)}};g.getTripType=function(){return w};g.setTripType=function(Ae){AH=A[Ae]?Ae:"ROUND_TRIP";w=A[Ae];return w};g.getTripTypeKey=function(Ae){return A[Ae]};g.registerContainer=function(Ae){C.register(Ae)};g.toggleRedemptionSearchAllowed=function(){var Ah=false;if(!T(AH)){Ah=true}else{var Ag=l.node.one("#"+k);if(Ag){var Af=Ag.get("value");if(Af>0){Ah=true}}}var Ae=l.node.one("#"+AL);AP(Ae,Ah);AA()};g.addFlight=function(){AV()};g.removeFlight=function(Ae){p(Ae)};function O(Ae){if(Ae){B.widgets.modifySearch.updateErrorMessages(Ae)}B.widgets.modifySearch.create("modify-search",{render:function(Af){l.node=B.one(Af.element);Aa(l.node)},hide:function(Af){AF(Y.journey);C.hideAll()}})}function Aa(Ag){Ag.delegate("click",a,".trip-type-input");Ag.delegate("click",V,".fsc-tab");if(!H){Ag.delegate("click",Ad,".airport-trigger")}if(H){AI()}var Ae=Ag.one(".componentContentHolder")||Ag;Ae.addClass(w);AB(Ag);var Af=Ag.one("#ADT_id");if(Af){f.apply(Af);if(B.UA.ie){Af.on("change",f)}else{Ag.delegate("change",f,"#ADT_id")}}AA();AD(AN);if(j&&!AW){W();g.toggleRedemptionSearchAllowed();Ag.delegate("click",h,"#"+AL);Q();M(Ag)}K()}function G(Ae){Ae.delegate("change",i,"#fsc-pointOfSale")}function AI(){for(var Ae in A){var Af=l.node.one("#journey_"+Ae+"_el");if(Af&&!Af.get("checked")){AP(Af,true)}}}function AB(Ae){Ac(Ae);Ae.all(".airport-picker").each(function(Af){if(!Af.get("disabled")){Af.on("click",AX);Af.on("keyup",AJ);Af.on("key",AK,"down:13");v(Af)}});b();Ae.all(".date_departure_inp, .date_return_inp").each(function(Ag,Af){AT(Ag,Af);if(!Ag.get("disabled")){Ag.on("focus",U)}});Ae.all("input, select").on("blur",AM);if(w==="multicity"){B.widgets.multicity.commonMulticityDomEvents(Ae)}}function Ac(Ae){B.wlValidation.initializeForPartial(AC.getType(),B.wlValidation.validationEngineRules,B.wlValidation.validationConfiguration,Ae)}function b(){AR.updateAirportInputTranslation();C.hideAll()}function AD(Ae){var Af=l.node.one("#redeemMiles");if(Af&&Ae){Af.addClass("hidden")}}function Q(){if(J){return }var Ae=l.node.one(".redeem-miles-label");if(Ae){if(!L){Ae.removeClass("warning")}else{if(j&&!J&&AQ){Ae.addClass("warning")}}}}function M(Af){var Ag;if(j){for(Ag in A){var Ae=Af.one("#journey_"+Ag+"_el");var Ah=!T(Ag)&&L;AP(Ae,Ah)}var Ak=Af.one("#cabin_class");var Ai=Af.one("#fare_type");var An=Af.one("#travelOptionsHotelReservation");var Aj=Af.one("#travelOptionsCarRental");AP(Ak,L);AP(Ai,L);AP(An,L);AP(Aj,L);var Al=Af.one("#travelOptionsNumberOfRooms");if(L&&Al){Al.set("value",1)}AP(Al,L);var Am=Af.one("#"+k);if(L&&Am){Am.set("value",0)}AP(Am,L)}}function h(Ae){L=Ae.currentTarget.get("checked");M(l.node);K();AA();Q();R(L)}function W(){L=Y.redeemMiles||false;var Ae=l.node.one("#"+AL);if(Ae){Ae.set("checked",L)}R(L)}function R(Ae){var Ag=l.node.one("#"+AL+"_val_holder");if(Ag){Ag.set("value",Ae?"true":"false")}var Af=l.node.one("#award_booking_val_holder");if(Af){Af.set("value",Ae?"true":"false")}}function T(Ae){return(B.Array.indexOf(N,Ae)>-1)}function U(Ae){C.hideAll();B.wlCalendar.loadCalendar(Ae.target,g,{dateFormat:m,show:true})}function AT(Af,Ae){B.wlCalendar.setFlightDates(Af,Ae)}function v(Ae){if(AC.state!=="modifySearch"){B.use("wl-routes",function(Af){l.node.all(".origin_airport").removeClass("disabled");l.node.all(".destination_airport").removeClass("disabled")})}AR.createAirportList(Ae)}function AX(Ae){C.hideAll();AR.showAirportList(Ae,Ae.currentTarget,r,D)}function Ad(Af){Af.preventDefault();var Ae=this.previous();C.hideAll();AR.showAirportList(null,Ae,r,D)}function AJ(Ae){if(Ae.charCode===9){C.hideAll()}AR.showAirportList(Ae,Ae.currentTarget,r,D)}function AK(Ae){Ae.halt()}function K(){if(J||!(L||d)){t()}else{if(AQ&&(L||d)){t();AG()}}}function t(){var Ae=l.node.one(".redeem-miles-label");if(Ae){Ae.removeClass("warning")}s("#flow-message-ffNotLoggedIn");s("#flow-message-ffLoginNeeded");s("#flow-message-ffInvalidProfileType")}function s(Ae){var Af=B.one(Ae);if(Af){Af.addClass("hidden")}}function AG(){var Af=l.node.one(".redeem-miles-label");var Ae=B.one("#flow-message-ffNotLoggedIn");var Ai=B.one("#flow-message-ffLoginNeeded");var Ah=B.one("#flow-message-ffInvalidProfileType");var Ag=(Ae!=null||Ai!=null||Ah!=null);if(Ah){Ah.removeClass("hidden")}else{if(Ai){Ai.removeClass("hidden")}else{if(Ae){Ae.removeClass("hidden")}}}if(Af&&Ag){Af.addClass("warning")}}function AA(){if(!J&&AQ&&(L||d)){B.on("pageHtmlLoaded",e);e()}else{B.on("pageHtmlLoaded",Ab);Ab()}}function e(){if(AC.state!=="modifySearch"){l.fireEvent("block_submit")}else{var Ae=l.node.one("#btn-modify-search");if(Ae){Ae.set("disabled","disabled");Ae.addClass("disabled")}}}function Ab(){if(AC.state!=="modifySearch"){l.fireEvent("unblock_submit");l.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}else{var Ae=l.node.one("#btn-modify-search");if(Ae){Ae.removeAttribute("disabled");Ae.removeClass("disabled")}}}function AP(Af,Ae){if(Af){if(Ae){Af.set("disabled",true);Af.addClass("disabled");Af.set("checked",false)}else{Af.removeAttribute("disabled");Af.removeClass("disabled")}}}function q(Ae){return parseInt(Ae.get("value"),10)}function y(Ag,Ae){var Af="";Ae.purge(true);x=x||Ae.all("option");x.each(function(Ah){var Ai=parseInt(Ah.get("value"),10);if(Ai<=Ag){Af+='<option value="'+Ai+'">'+Ai+"</option>"}});Ae.setContent(Af)}function I(Ae,Ah,Af){var Ai=parseInt(Ae,10);var Ag=Ai>Ah?Ah:Ai;Af.set("selectedIndex",Ag)}function f(){var Ag=q(this);var Ae=l.node.one("#"+k);if(Ae){var Af=Ae.get("value");y(Ag,Ae);I(Af,Ag,Ae);AY()}}function AM(Ae){if(!this.hasClass("airport-picker")&&!this.hasClass("date-picker")){B.wlValidation.validate(Ae)}}function AY(){B.on("change",g.toggleRedemptionSearchAllowed,"#"+k)}function AS(Af,Ae){Af.purge(true);Af.set("innerHTML",B.decodeHtmlEntities(Ae));AB(Af)}function z(Ag,Ae){var Af=l.node.one("#"+Ag+Ae);return Af?Af.get("value"):null}function c(Af){if(!Af){return null}var Ae=B.DataType.Date.parse(Af,sabre.config.dateInputFormat);return B.DataType.Date.format(Ae,{format:sabre.config.dateTimeJSONFormat})}function V(Ae){d=this.hasClass("fsc-tab-rbe");K();AA();n({isRbe:d});Ae.preventDefault()}function a(Af){var Ae=Af.target;var Ag=Ae.get("value");AF(Ag)}function AF(Ae){l.node.removeClass(w);var Af=X();g.setTripType(Ae);l.node.addClass(w);Z({actionCode:"changeTripType",itineraryParts:Af})}function E(Ae){return{origin:z("origin_airport_hidden",Ae),destination:z("destination_airport_hidden",Ae),date:c(z("date_hidden",Ae)),timeRange:z("time_range",Ae)}}function P(Ae){return Ae.origin||Ae.destination||Ae.date||Ae.timeRange}function X(){var Ag=[];for(var Af=0;;Af++){var Ae=E(Af);if(P(Ae)){Ag.push(Ae)}else{break}}if("roundtrip"==w&&Ag.length>1){Ag[1].origin=Ag[0].destination;Ag[1].destination=Ag[0].origin}return Ag}function p(Ae){Z({actionCode:"deleteFlight",deletedFlightIndex:Ae})}function AV(){Z({actionCode:"addFlight"})}function n(Ag){var Af=l.node;if(!Af){return }l.addLoadingOverlay();var Ae={data:{rbeTabSelected:Ag.isRbe,journey:AH,requestPartials:[AC.state]},on:{success:function(Ai,Ah){if(Ah){Af.purge(true);Af.set("innerHTML",B.decodeHtmlEntities(Ah.partials[AC.state]));AB(Af);K();AR.setRbeBooking(Ag.isRbe);if(AC.state==="modifySearch"){l.onRenderState.modifySearch(Af);O()}}},complete:function(){l.removeLoadingOverlay()}}};l.fireEvent("to-ajax",{cfg:Ae,actionCode:"loadFscPartial"})}function Z(Aj){var Ai=Aj.itineraryParts||X();var Af="__"+(AC.state==="modifySearch"?"modifySearch":"searchPage")+"_"+AH.toLowerCase();var Ah=l.node.one("#airports-dates-container");if(!Ah){return }var Ag=l.node.all(".trip-type-input");Ah.addClass("loading");Ag.each(function(Ak){Ak.set("disabled","disabled")});var Ae={data:{actionCode:Aj.actionCode,deletedFlightIndex:Aj.deletedFlightIndex,requestPartials:[Af],journey:AH,fscItineraryParts:Ai},on:{success:function(Al,Ak){if(Ak){AS(Ah,Ak.partials[Af]);g.toggleRedemptionSearchAllowed()}},complete:function(){Ah.removeClass("loading");Ag.each(function(Ak){if(!Ak.hasClass("disabled")){Ak.removeAttribute("disabled")}})}}};l.fireEvent("to-ajax",{cfg:Ae,actionCode:"loadFscPartial"})}function i(Af){var Ah=l.node.one("#fsc-pointOfSale");var Ai=Ah.ancestor(".component-section");if(Ai){Ai.addClass("loading")}var Ag=Ah.get("value");var Ae={data:{pointOfSale:Ag},on:{end:function(){if(Ai){Ai.removeClass("loading")}},success:function(Ak,Aj){l.fireEvent("update-data",{data:{pointOfSale:Ag}})}}};l.fireEvent("to-ajax",{cfg:Ae,actionCode:"changePointOfSale"})}}});YUI.add("wl-farerules",function(A){A.components.Farerules=function(C){var K=this;var L;var M={};var P=false;var D=C.compInstConfig;K.incomingEvents={showFareRules:B};K.onRenderState={initialized:function(Q){H(Q);if(D.tabHash){A.on("pageHtmlLoaded",function(){K.fireEvent("add_tabs_callback",{data:{tabHash:D.tabHash,additionalCallback:function(R){if(R.newValue){Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})})}},ajax:function(R){if(D.enabled){function Q(){R.removeClass("loading")}R.addClass("loading");O(I,Q,true)}},overlay:function(Q){N()}};function B(R){if(C.state!="overlay"){return }var S=R.data||{};var Q=A.Lang.isFunction(S.callback)&&S.callback;O(G,Q,S.allFlightsSelected)}function O(U,R,T){var S=T?"__fareRulesContent":"__unavailableFareRules";var Q={data:{requestPartials:[S],flightsSelected:T},on:{end:R||function(){},success:function(X,W){if(W){var V=W.partials[S];U(V);H(K.node)}},failure:U}};K.fireEvent("to-ajax",{context:C,type:"farerules",cfg:Q,actionCode:"getFareRules"})}function E(Q){M[C.state]=Q.one(".fare-rules-container")}function H(R){var Q=R.one("ul");if(Q){Q.delegate("click",J,"li")}E(R);F()}function J(S){S.preventDefault();var T=S.currentTarget;if(T.hasClass("selected")){return }T.addClass("selected");T.siblings().removeClass("selected");var Q=T.get("parentNode").get("children").indexOf(T);var R=K.node.one(".yui-content").get("children");R.addClass("yui-hidden");R.item(Q).removeClass("yui-hidden")}function N(){L=new YAHOO.widget.Dialog("fare-rules-overlay",{visible:false,draggable:false,fixedcenter:true,zIndex:520,width:"700px",close:true});L.hideEvent.subscribe(function(){P=false;if(!M[C.state]){E(currentNode)}if(!M[C.state]){return }M[C.state].purge(true);M[C.state].set("innerHTML","")})}function I(Q){K.node.one(".fare-rules-list").set("innerHTML",A.decodeHtmlEntities(Q))}function G(Q){if(C.state=="overlay"){if(P){return }P=true;A.one("#fare-rules-overlay").removeClass("hidden");L.render(document.body);L.show();var R=A.one(L.element);if(R){K.node=R;I(Q)}L.center()}}function F(){var Q=C.compInstConfig;K.fireEvent("cssFareRules",{forceInitialize:true,data:{status:Q.status}})}}});YUI.add("wl-googleanalytics",function(A){A.components.Googleanalytics=function(B){this.create=false;this.render=false}});