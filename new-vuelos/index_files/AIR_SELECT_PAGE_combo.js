YUI.add("yui2-animation",function(A){},"0.1");YUI.add("yui2-calendar",function(A){},"0.1");YUI.add("wl-scc",function(A){A.components.Scc=function(C){var D=this;var F=C.compInstConfig;D.incomingEvents={hide:function(H){var G=A.Lang.isArray(H.componentsToHide)?H.componentsToHide:[];if(A.Array.indexOf(D.getId(),G)){C.state="empty";D.renderHtml(C,D.node)}},show:function(){}};D.onCreate=function(G,H){if(G.state==="text"){var I=F.textKey;if(I){D.renderHtml({textKey:I})}}};D.onRenderState={script:function(H){var G=window[F.functionName];A.log("Function "+F.functionName+" from file "+F.scriptPath+" is about to be executed.");if(typeof G==="function"){try{G(A.Node.getDOMNode(H))}catch(I){A.log("Error executing function "+F.functionName+" from file "+F.scriptPath+" Stack trace: "+I.stack,"error")}}else{A.log("Cannot find function "+F.functionName+" which supposed to be defined in file "+F.scriptPath,"error")}D.translateTemplate(C,H)},text:function(){var G=D.node.one(".scc-text");if(G){G.removeClass("hidden")}}};D.scriptConfiguredToBeLinkedStatically=function(){return -1===A.Array.indexOf(F.scriptsForcedToStayInHead,F.scriptPath)};if(C.state==="header"||C.state==="footer"){D.create=false;D.node=A.one("#"+C.getId());D.node.set("innerHTML",A.replaceTemplateData(null,D.node.get("innerHTML")));D.node.translate()}else{if(C.state==="script"){D.render=false;var B="wl-custom_script-"+C.getId();var E=sabre.config.global.commonResourcesPath+"js/"+F.scriptPath;sabre.config.groups["wl-noncombine"].modules[B]={fullpath:E};if(D.scriptConfiguredToBeLinkedStatically()){D.node=A.one("#"+B);if(D.node){D.onRenderState.script(D.node)}else{A.log("Cannot load custom script "+B+". There is no script node for "+E,"warn")}C.componentRendered()}else{A.use(B,function(H,G){if(G.success){D.onRenderState.script(D.node)}else{H.log("Cannot load custom script. "+G.msg,"warn")}C.componentRendered()})}}}}});YUI.add("wl-prbar",function(A){A.components.Prbar=function(B,H){var G=this;var C={REINITIALIZE:"reinitialize"};G.incomingEvents={flight_changed:F,ancillary_changed:F,state_changed:function(){I(J)}};G.onRenderState={initialized:function(K){A.delegate("click",function(L){L.preventDefault()},K,".stepFuture a, .lastStep a")}};function I(L){var M="_elements";var K={data:{requestPartials:[M]},on:{end:function(){},success:function(O,N){if(N){L(N,M)}}}};G.fireEvent("to-ajax",{cfg:K,actionCode:C.REINITIALIZE})}function J(L,M){var K=G.node.one("#booking-process");K.set("innerHTML",A.decodeHtmlEntities(L.partials[M]));F()}function E(K,L){K.setAttribute("class",L.join(" "))}function D(){var N=G.node.all("li");var M=G.node.one("li.stepCurrent");var L=N.indexOf(M);var K=N._nodes.slice(L+1);return A.all(K)}function F(){var K=D();var L=K.size()-1;K.each(function(N,M){var O=["stepFuture"];if(M===0){O.push("prevCurrent");O.push("stepFuture_prevCurrent")}else{O.push("prevFuture");O.push("stepFuture_prevFuture")}if(M===L){O.push("lastStep");O.push("stepFuture_lastStep")}E(N,O)})}}});YUI.add("wl-flomes",function(A){A.components.Flomes=function(D,B){var F=this;F.incomingEvents={"add-messages":function(L){var K=L.data.messages;var J=G(K);var O="flow-messages-component-"+L.type;var N=A.one("#"+O);var I=A.one("#flow-messages-component");if(!N){N=A.Node.create('<div id="'+O+'"></div>');I.append(N)}N.set("innerHTML",J);I.translate();N.removeClass("hidden");var M=I.getXY();window.scrollTo(M[0],M[1])},"show-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.removeClass("hidden")}}var P=A.one("#flow-messages-component");var O=P.getXY();window.scrollTo(O[0],O[1])},"remove-messages":function(L){var K=L.data.messages||[];for(var J=0;J<K.length;J++){var N=K[J];var M=N.id||N;var I=A.one("#flow-message-"+M);if(I){I.addClass("hidden")}}},"remove-all-messages":function(){A.all(".flow-message-error").each(function(I){I.remove()})},"remove-all-component-messages":function(I){var K="flow-messages-component-"+I.type;var J=A.one("#"+K);if(J){J.set("innerHTML","")}},"block-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.set("disabled","disabled").addClass("disabled")}},"unblock-discrepancy-confirm":function(J){var I=A.one("#accept-new-price-btn");if(I){I.removeAttribute("disabled");I.removeClass("disabled")}}};F.onRenderState={initialized:function(K){var J=D.initData.messages;for(var I in J){if(E[J[I].id]){E[J[I].id]()}}}};function G(K){var M="";for(var I in K){var J=K[I];var L=J.id;var N=F.getHtml("_flowMessage_"+L);if(!N){N=F.getHtml("_flowMessage")}M+=F.replaceData({level:J.level,id:J.id,code:J.code,originalMessage:J.originalMessage},N);if(null!==A.one("#flow-message-"+L)){A.one("#flow-message-"+L).remove(true)}}return M}var E={priceDiscrepancyError:function(){A.on("click",H,"#select-flights-link");A.on("click",C,"#accept-new-price-btn")},ssrInsufficientInfantProvision:function(){F.fireEvent("block_submit",{forceInitialize:true})}};function H(I){location.href=A.utilsUrl.buildExecutionUrl("_eventId=goto&gotoPageCode=AIR_SELECT_PAGE")}function C(I){F.fireEvent("sbmt-after-price-discrepancy")}}});YUI.add("wl-seats-viewModel",function(B){var A=function(I,H,C){var E=I.initData;return{loadSeatMapAndLegend:D,loadFlightDetails:G,saveCurrentSelection:F,openFrequentFlyerAdviseOverlay:J};function G(M,L){var K={data:{requestPartials:["readOnly/__seatsOverlay"],readOnlySeatsInfo:M},on:{end:function(){},success:function(O,N){if(N){L(N)}}}};H("to-ajax",{cfg:K,actionCode:"loadFlightDetails"})}function D(L){var K={data:{requestPartials:["readOnly/__seatMapLegend","readOnly/__seatMapPreview"]},on:{end:function(){},success:function(N,M){if(M){L(M)}}}};H("to-ajax",{cfg:K,actionCode:"loadSeatMapAndLegend"})}function F(L,M){var K={data:{selectedSeats:L},on:{end:function(){},success:M}};H("to-ajax",{cfg:K,actionCode:"saveCurrentSelection"})}function J(M,L,O,N){if(M){var K={data:{requestPartials:[L]},on:{end:function(){},success:function(Q,P){if(P){N(B.decodeHtmlEntities(P.partials[L]))}}}};H("to-ajax",{cfg:K,actionCode:O})}}};B.widgets=B.widgets||{};B.widgets.Seats=B.widgets.Seats||{};B.widgets.Seats.ViewModel=A});YUI.add("wl-seats-viewModelMock",function(B){var A=function(H,G){var D=H.initData;return{loadSeatMapAndLegend:C,loadFlightDetails:F,saveCurrentSelection:E,openFrequentFlyerAdviseOverlay:I};function F(L,K){var J=new Array();J["readOnly/__seatsOverlay"]='<div id="seats-readonly-popup">    <div id="seats-readonly-popup-header">        <div class="header-cont">            <div wl:translate="label.seats.readonly.header.text" class="translate big wasTranslated">Seat Map Preview:</div>            <div wl:translate="label.seats.readonly.header.flight|VA|803|MEL|SYD" class="floatLeft normal translate wasTranslated">VA 803 - MEL to SYD</div>        </div>        <hr class="hrStyle">    </div>    <div>        <div id="seat-map-info">            <div class="brand-id-dropdown-inner seat-map-info-inner">                <h2 wl:translate="label.seats.readonly.service.header" class="translate wasTranslated">Choose Service Class</h2>                <select class="brand-id-select">                    <option selected="selected" value="SL" class="brand-id-select-option">Saver Lite - 115.00 AUD</option>                    <option value="SV" class="brand-id-select-option">Saver - 129.00 AUD</option>                    <option value="FL" class="brand-id-select-option">Flexi - 275.00 AUD</option>                    <option value="BS" class="brand-id-select-option">Business Saver - 529.00 AUD</option>                    <option value="BZ" class="brand-id-select-option">Business Class - 609.00 AUD</option>                    <option value="RE" class="brand-id-select-option">Economy Reward - sold out</option>                    <option value="RB" class="brand-id-select-option">Business Reward - sold out</option>                </select>            </div>            <div class="preview-inner seat-map-info-inner">                <h2 wl:translate="label.seats.readonly.preview.header" class="translate wasTranslated">Preview Only                    <div wl:translate="label.seats.readonly.preview.text" class="translate wasTranslated">This seat map is for informational purposes only and availability may change at any time. You can choose your                        assigned                        seats later in the booking process.                    </div>                </h2>            </div>            <div class="seat-map-legend-inner seat-map-info-inner" id="seat-map-legend">            </div>        </div>        <div class="" id="seat-map-preview">        </div>    </div></div>';K({partials:J})}function C(K){var J=new Array();J["readOnly/__seatMapLegend"]='<div class="seat-map-infobox seat-map-keys">    <h3><span wl:translate="label.seats.legend" class="translate wasTranslated">Seat Selection Key</span></h3>    <ul class="seatLegend">            <li>                <span class="seat-map-legend seat-map-seat">                    <strong></strong>                </span>                <span wl:translate="Seats.seat" class="seat-map-keys-desc translate wasTranslated">Available Seats</span>            </li>            <li>                <span class="seat-map-legend seat-map-seat_unavailable">                    <strong></strong>                </span>                <span wl:translate="Seats.seat_unavailable" class="seat-map-keys-desc translate wasTranslated">Unavailable</span>            </li>            <li>                <span class="seat-map-legend seat-map-pay">                    <strong></strong>                </span>                <span wl:translate="Seats.pay" class="seat-map-keys-desc translate">Seats.pay</span>            </li>    </ul></div>';J["readOnly/__seatMapPreview"]='<div class="seat-map-plane seat-map-plane-previewed">    <div id="seat-map-map-container">    <table class="seat-map-planemap seat-map-planemap-7 multiStep">        <thead><tr>	        <td class="seat-map-column seat-map-plane-left_side"><strong></strong></td>	        <td class="seat-map-column seat-map-legend "><strong>A</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>B</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>C</strong></td>	        <td class="seat-map-column seat-map-legend "><strong></strong></td>	        <td class="seat-map-column seat-map-legend "><strong>D</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>E</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>F</strong></td>	        <td class="seat-map-column seat-map-plane-right_side"><strong></strong></td></tr></thead>        <tbody>            <tr class="row-0">                        <td data-column_index="0" data-row_index="0" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3A"><strong></strong></td>                        <td data-column_index="2" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3B"><strong></strong></td>                        <td data-column_index="3" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3C"><strong></strong></td>                        <td data-column_index="4" data-row_index="0" class="seat-map-legend seat-map-aisle"><strong>3</strong></td>                        <td data-column_index="5" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3D"><strong></strong></td>                        <td data-column_index="6" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3E"><strong></strong></td>                        <td data-column_index="7" data-row_index="0" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-3F"><strong></strong></td>                        <td data-column_index="8" data-row_index="0" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-1">                        <td data-column_index="0" data-row_index="1" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4A"><strong></strong></td>                        <td data-column_index="2" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4B"><strong></strong></td>                        <td data-column_index="3" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4C"><strong></strong></td>                        <td data-column_index="4" data-row_index="1" class="seat-map-legend seat-map-aisle"><strong>4</strong></td>                        <td data-column_index="5" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4D"><strong></strong></td>                        <td data-column_index="6" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4E"><strong></strong></td>                        <td data-column_index="7" data-row_index="1" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-4F"><strong></strong></td>                        <td data-column_index="8" data-row_index="1" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-2">                        <td data-column_index="0" data-row_index="2" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5A"><strong></strong></td>                        <td data-column_index="2" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5B"><strong></strong></td>                        <td data-column_index="3" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5C"><strong></strong></td>                        <td data-column_index="4" data-row_index="2" class="seat-map-legend seat-map-aisle"><strong>5</strong></td>                        <td data-column_index="5" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5D"><strong></strong></td>                        <td data-column_index="6" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5E"><strong></strong></td>                        <td data-column_index="7" data-row_index="2" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-5F"><strong></strong></td>                        <td data-column_index="8" data-row_index="2" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-3">                        <td data-column_index="0" data-row_index="3" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6A"><strong></strong></td>                        <td data-column_index="2" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6B"><strong></strong></td>                        <td data-column_index="3" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6C"><strong></strong></td>                        <td data-column_index="4" data-row_index="3" class="seat-map-legend seat-map-aisle"><strong>6</strong></td>                        <td data-column_index="5" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6D"><strong></strong></td>                        <td data-column_index="6" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6E"><strong></strong></td>                        <td data-column_index="7" data-row_index="3" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-6F"><strong></strong></td>                        <td data-column_index="8" data-row_index="3" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-4">                        <td data-column_index="0" data-row_index="4" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7A"><strong></strong></td>                        <td data-column_index="2" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7B"><strong></strong></td>                        <td data-column_index="3" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7C"><strong></strong></td>                        <td data-column_index="4" data-row_index="4" class="seat-map-legend seat-map-aisle"><strong>7</strong></td>                        <td data-column_index="5" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7D"><strong></strong></td>                        <td data-column_index="6" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7E"><strong></strong></td>                        <td data-column_index="7" data-row_index="4" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-7F"><strong></strong></td>                        <td data-column_index="8" data-row_index="4" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-5">                        <td data-column_index="0" data-row_index="5" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8A"><strong></strong></td>                        <td data-column_index="2" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8B"><strong></strong></td>                        <td data-column_index="3" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8C"><strong></strong></td>                        <td data-column_index="4" data-row_index="5" class="seat-map-legend seat-map-aisle"><strong>8</strong></td>                        <td data-column_index="5" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8D"><strong></strong></td>                        <td data-column_index="6" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8E"><strong></strong></td>                        <td data-column_index="7" data-row_index="5" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-8F"><strong></strong></td>                        <td data-column_index="8" data-row_index="5" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-6">                        <td data-column_index="0" data-row_index="6" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9A"><strong></strong></td>                        <td data-column_index="2" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9B"><strong></strong></td>                        <td data-column_index="3" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9C"><strong></strong></td>                        <td data-column_index="4" data-row_index="6" class="seat-map-legend seat-map-aisle"><strong>9</strong></td>                        <td data-column_index="5" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9D"><strong></strong></td>                        <td data-column_index="6" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9E"><strong></strong></td>                        <td data-column_index="7" data-row_index="6" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-9F"><strong></strong></td>                        <td data-column_index="8" data-row_index="6" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-7">                        <td data-column_index="0" data-row_index="7" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10A"><strong></strong></td>                        <td data-column_index="2" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10B"><strong></strong></td>                        <td data-column_index="3" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10C"><strong></strong></td>                        <td data-column_index="4" data-row_index="7" class="seat-map-legend seat-map-aisle"><strong>10</strong></td>                        <td data-column_index="5" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10D"><strong></strong></td>                        <td data-column_index="6" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10E"><strong></strong></td>                        <td data-column_index="7" data-row_index="7" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-10F"><strong></strong></td>                        <td data-column_index="8" data-row_index="7" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-8">                        <td data-column_index="0" data-row_index="8" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11A"><strong></strong></td>                        <td data-column_index="2" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11B"><strong></strong></td>                        <td data-column_index="3" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11C"><strong></strong></td>                        <td data-column_index="4" data-row_index="8" class="seat-map-legend seat-map-aisle"><strong>11</strong></td>                        <td data-column_index="5" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11D"><strong></strong></td>                        <td data-column_index="6" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11E"><strong></strong></td>                        <td data-column_index="7" data-row_index="8" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-11F"><strong></strong></td>                        <td data-column_index="8" data-row_index="8" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-9">                        <td data-column_index="0" data-row_index="9" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12A"><strong></strong></td>                        <td data-column_index="2" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12B"><strong></strong></td>                        <td data-column_index="3" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12C"><strong></strong></td>                        <td data-column_index="4" data-row_index="9" class="seat-map-legend seat-map-aisle"><strong>12</strong></td>                        <td data-column_index="5" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12D"><strong></strong></td>                        <td data-column_index="6" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12E"><strong></strong></td>                        <td data-column_index="7" data-row_index="9" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-12F"><strong></strong></td>                        <td data-column_index="8" data-row_index="9" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-10">                        <td data-column_index="0" data-row_index="10" class="seat-map-plane-left_side"><strong><div wl:translate="label.seats.exit" class="translate seat-map-row_label wasTranslated">exit</div></strong></td>                        <td data-column_index="1" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13A"><strong></strong></td>                        <td data-column_index="2" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13B"><strong></strong></td>                        <td data-column_index="3" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13C"><strong></strong></td>                        <td data-column_index="4" data-row_index="10" class="seat-map-legend seat-map-aisle"><strong>13</strong></td>                        <td data-column_index="5" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13D"><strong></strong></td>                        <td data-column_index="6" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13E"><strong></strong></td>                        <td data-column_index="7" data-row_index="10" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-13F"><strong></strong></td>                        <td data-column_index="8" data-row_index="10" class="seat-map-plane-right_side"><strong><div wl:translate="label.seats.exit" class="translate seat-map-row_label wasTranslated">exit</div></strong></td>            </tr>            <tr class="row-11">                        <td data-column_index="0" data-row_index="11" class="seat-map-plane-left_side"><strong><div wl:translate="label.seats.exit" class="translate seat-map-row_label wasTranslated">exit</div></strong></td>                        <td data-column_index="1" data-row_index="11" data-seat="14A" class="seat-map-legend  seat-map-pay seat-map-seat-preview  seat-map-prepay" id="seat-0-14A"><strong></strong></td>                        <td data-column_index="2" data-row_index="11" data-seat="14B" class="seat-map-legend  seat-map-pay seat-map-seat-preview  seat-map-prepay" id="seat-0-14B"><strong></strong></td>                        <td data-column_index="3" data-row_index="11" data-seat="14C" class="seat-map-legend  seat-map-pay seat-map-seat-preview  seat-map-prepay" id="seat-0-14C"><strong></strong></td>                        <td data-column_index="4" data-row_index="11" class="seat-map-legend seat-map-aisle"><strong>14</strong></td>                        <td data-column_index="5" data-row_index="11" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-14D"><strong></strong></td>                        <td data-column_index="6" data-row_index="11" data-seat="14E" class="seat-map-legend  seat-map-pay seat-map-seat-preview  seat-map-prepay" id="seat-0-14E"><strong></strong></td>                        <td data-column_index="7" data-row_index="11" data-seat="14F" class="seat-map-legend  seat-map-pay seat-map-seat-preview  seat-map-prepay" id="seat-0-14F"><strong></strong></td>                        <td data-column_index="8" data-row_index="11" class="seat-map-plane-right_side"><strong><div wl:translate="label.seats.exit" class="translate seat-map-row_label wasTranslated">exit</div></strong></td>            </tr>            <tr class="row-12">                        <td data-column_index="0" data-row_index="12" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="12" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-15A"><strong></strong></td>                        <td data-column_index="2" data-row_index="12" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-15B"><strong></strong></td>                        <td data-column_index="3" data-row_index="12" data-seat="15C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-15C"><strong></strong></td>                        <td data-column_index="4" data-row_index="12" class="seat-map-legend seat-map-aisle"><strong>15</strong></td>                        <td data-column_index="5" data-row_index="12" data-seat="15D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-15D"><strong></strong></td>                        <td data-column_index="6" data-row_index="12" data-seat="15E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-15E"><strong></strong></td>                        <td data-column_index="7" data-row_index="12" data-seat="15F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-15F"><strong></strong></td>                        <td data-column_index="8" data-row_index="12" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-13">                        <td data-column_index="0" data-row_index="13" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="13" data-seat="16A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16A"><strong></strong></td>                        <td data-column_index="2" data-row_index="13" data-seat="16B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16B"><strong></strong></td>                        <td data-column_index="3" data-row_index="13" data-seat="16C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16C"><strong></strong></td>                        <td data-column_index="4" data-row_index="13" class="seat-map-legend seat-map-aisle"><strong>16</strong></td>                        <td data-column_index="5" data-row_index="13" data-seat="16D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16D"><strong></strong></td>                        <td data-column_index="6" data-row_index="13" data-seat="16E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16E"><strong></strong></td>                        <td data-column_index="7" data-row_index="13" data-seat="16F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-16F"><strong></strong></td>                        <td data-column_index="8" data-row_index="13" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-14">                        <td data-column_index="0" data-row_index="14" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="14" class="seat-map-legend  seat-map-seat unavailable" id="seat-0-17A"><strong></strong></td>                        <td data-column_index="2" data-row_index="14" data-seat="17B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-17B"><strong></strong></td>                        <td data-column_index="3" data-row_index="14" data-seat="17C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-17C"><strong></strong></td>                        <td data-column_index="4" data-row_index="14" class="seat-map-legend seat-map-aisle"><strong>17</strong></td>                        <td data-column_index="5" data-row_index="14" data-seat="17D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-17D"><strong></strong></td>                        <td data-column_index="6" data-row_index="14" data-seat="17E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-17E"><strong></strong></td>                        <td data-column_index="7" data-row_index="14" data-seat="17F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-17F"><strong></strong></td>                        <td data-column_index="8" data-row_index="14" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-15">                        <td data-column_index="0" data-row_index="15" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="15" data-seat="18A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18A"><strong></strong></td>                        <td data-column_index="2" data-row_index="15" data-seat="18B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18B"><strong></strong></td>                        <td data-column_index="3" data-row_index="15" data-seat="18C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18C"><strong></strong></td>                        <td data-column_index="4" data-row_index="15" class="seat-map-legend seat-map-aisle"><strong>18</strong></td>                        <td data-column_index="5" data-row_index="15" data-seat="18D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18D"><strong></strong></td>                        <td data-column_index="6" data-row_index="15" data-seat="18E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18E"><strong></strong></td>                        <td data-column_index="7" data-row_index="15" data-seat="18F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-18F"><strong></strong></td>                        <td data-column_index="8" data-row_index="15" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-16">                        <td data-column_index="0" data-row_index="16" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="16" data-seat="19A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19A"><strong></strong></td>                        <td data-column_index="2" data-row_index="16" data-seat="19B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19B"><strong></strong></td>                        <td data-column_index="3" data-row_index="16" data-seat="19C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19C"><strong></strong></td>                        <td data-column_index="4" data-row_index="16" class="seat-map-legend seat-map-aisle"><strong>19</strong></td>                        <td data-column_index="5" data-row_index="16" data-seat="19D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19D"><strong></strong></td>                        <td data-column_index="6" data-row_index="16" data-seat="19E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19E"><strong></strong></td>                        <td data-column_index="7" data-row_index="16" data-seat="19F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-19F"><strong></strong></td>                        <td data-column_index="8" data-row_index="16" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-17">                        <td data-column_index="0" data-row_index="17" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="17" data-seat="20A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20A"><strong></strong></td>                        <td data-column_index="2" data-row_index="17" data-seat="20B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20B"><strong></strong></td>                        <td data-column_index="3" data-row_index="17" data-seat="20C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20C"><strong></strong></td>                        <td data-column_index="4" data-row_index="17" class="seat-map-legend seat-map-aisle"><strong>20</strong></td>                        <td data-column_index="5" data-row_index="17" data-seat="20D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20D"><strong></strong></td>                        <td data-column_index="6" data-row_index="17" data-seat="20E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20E"><strong></strong></td>                        <td data-column_index="7" data-row_index="17" data-seat="20F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-20F"><strong></strong></td>                        <td data-column_index="8" data-row_index="17" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-18">                        <td data-column_index="0" data-row_index="18" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="18" data-seat="21A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21A"><strong></strong></td>                        <td data-column_index="2" data-row_index="18" data-seat="21B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21B"><strong></strong></td>                        <td data-column_index="3" data-row_index="18" data-seat="21C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21C"><strong></strong></td>                        <td data-column_index="4" data-row_index="18" class="seat-map-legend seat-map-aisle"><strong>21</strong></td>                        <td data-column_index="5" data-row_index="18" data-seat="21D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21D"><strong></strong></td>                        <td data-column_index="6" data-row_index="18" data-seat="21E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21E"><strong></strong></td>                        <td data-column_index="7" data-row_index="18" data-seat="21F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-21F"><strong></strong></td>                        <td data-column_index="8" data-row_index="18" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-19">                        <td data-column_index="0" data-row_index="19" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="19" data-seat="22A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22A"><strong></strong></td>                        <td data-column_index="2" data-row_index="19" data-seat="22B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22B"><strong></strong></td>                        <td data-column_index="3" data-row_index="19" data-seat="22C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22C"><strong></strong></td>                        <td data-column_index="4" data-row_index="19" class="seat-map-legend seat-map-aisle"><strong>22</strong></td>                        <td data-column_index="5" data-row_index="19" data-seat="22D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22D"><strong></strong></td>                        <td data-column_index="6" data-row_index="19" data-seat="22E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22E"><strong></strong></td>                        <td data-column_index="7" data-row_index="19" data-seat="22F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-22F"><strong></strong></td>                        <td data-column_index="8" data-row_index="19" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-20">                        <td data-column_index="0" data-row_index="20" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="20" data-seat="23A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23A"><strong></strong></td>                        <td data-column_index="2" data-row_index="20" data-seat="23B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23B"><strong></strong></td>                        <td data-column_index="3" data-row_index="20" data-seat="23C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23C"><strong></strong></td>                        <td data-column_index="4" data-row_index="20" class="seat-map-legend seat-map-aisle"><strong>23</strong></td>                        <td data-column_index="5" data-row_index="20" data-seat="23D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23D"><strong></strong></td>                        <td data-column_index="6" data-row_index="20" data-seat="23E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23E"><strong></strong></td>                        <td data-column_index="7" data-row_index="20" data-seat="23F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-23F"><strong></strong></td>                        <td data-column_index="8" data-row_index="20" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-21">                        <td data-column_index="0" data-row_index="21" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="21" data-seat="24A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24A"><strong></strong></td>                        <td data-column_index="2" data-row_index="21" data-seat="24B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24B"><strong></strong></td>                        <td data-column_index="3" data-row_index="21" data-seat="24C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24C"><strong></strong></td>                        <td data-column_index="4" data-row_index="21" class="seat-map-legend seat-map-aisle"><strong>24</strong></td>                        <td data-column_index="5" data-row_index="21" data-seat="24D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24D"><strong></strong></td>                        <td data-column_index="6" data-row_index="21" data-seat="24E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24E"><strong></strong></td>                        <td data-column_index="7" data-row_index="21" data-seat="24F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-24F"><strong></strong></td>                        <td data-column_index="8" data-row_index="21" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-22">                        <td data-column_index="0" data-row_index="22" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="22" data-seat="25A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25A"><strong></strong></td>                        <td data-column_index="2" data-row_index="22" data-seat="25B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25B"><strong></strong></td>                        <td data-column_index="3" data-row_index="22" data-seat="25C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25C"><strong></strong></td>                        <td data-column_index="4" data-row_index="22" class="seat-map-legend seat-map-aisle"><strong>25</strong></td>                        <td data-column_index="5" data-row_index="22" data-seat="25D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25D"><strong></strong></td>                        <td data-column_index="6" data-row_index="22" data-seat="25E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25E"><strong></strong></td>                        <td data-column_index="7" data-row_index="22" data-seat="25F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-25F"><strong></strong></td>                        <td data-column_index="8" data-row_index="22" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-23">                        <td data-column_index="0" data-row_index="23" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="23" data-seat="26A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26A"><strong></strong></td>                        <td data-column_index="2" data-row_index="23" data-seat="26B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26B"><strong></strong></td>                        <td data-column_index="3" data-row_index="23" data-seat="26C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26C"><strong></strong></td>                        <td data-column_index="4" data-row_index="23" class="seat-map-legend seat-map-aisle"><strong>26</strong></td>                        <td data-column_index="5" data-row_index="23" data-seat="26D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26D"><strong></strong></td>                        <td data-column_index="6" data-row_index="23" data-seat="26E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26E"><strong></strong></td>                        <td data-column_index="7" data-row_index="23" data-seat="26F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-26F"><strong></strong></td>                        <td data-column_index="8" data-row_index="23" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-24">                        <td data-column_index="0" data-row_index="24" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="24" data-seat="27A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27A"><strong></strong></td>                        <td data-column_index="2" data-row_index="24" data-seat="27B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27B"><strong></strong></td>                        <td data-column_index="3" data-row_index="24" data-seat="27C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27C"><strong></strong></td>                        <td data-column_index="4" data-row_index="24" class="seat-map-legend seat-map-aisle"><strong>27</strong></td>                        <td data-column_index="5" data-row_index="24" data-seat="27D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27D"><strong></strong></td>                        <td data-column_index="6" data-row_index="24" data-seat="27E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27E"><strong></strong></td>                        <td data-column_index="7" data-row_index="24" data-seat="27F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-27F"><strong></strong></td>                        <td data-column_index="8" data-row_index="24" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-25">                        <td data-column_index="0" data-row_index="25" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="25" data-seat="28A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28A"><strong></strong></td>                        <td data-column_index="2" data-row_index="25" data-seat="28B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28B"><strong></strong></td>                        <td data-column_index="3" data-row_index="25" data-seat="28C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28C"><strong></strong></td>                        <td data-column_index="4" data-row_index="25" class="seat-map-legend seat-map-aisle"><strong>28</strong></td>                        <td data-column_index="5" data-row_index="25" data-seat="28D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28D"><strong></strong></td>                        <td data-column_index="6" data-row_index="25" data-seat="28E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28E"><strong></strong></td>                        <td data-column_index="7" data-row_index="25" data-seat="28F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-28F"><strong></strong></td>                        <td data-column_index="8" data-row_index="25" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-26">                        <td data-column_index="0" data-row_index="26" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="26" data-seat="29A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29A"><strong></strong></td>                        <td data-column_index="2" data-row_index="26" data-seat="29B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29B"><strong></strong></td>                        <td data-column_index="3" data-row_index="26" data-seat="29C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29C"><strong></strong></td>                        <td data-column_index="4" data-row_index="26" class="seat-map-legend seat-map-aisle"><strong>29</strong></td>                        <td data-column_index="5" data-row_index="26" data-seat="29D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29D"><strong></strong></td>                        <td data-column_index="6" data-row_index="26" data-seat="29E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29E"><strong></strong></td>                        <td data-column_index="7" data-row_index="26" data-seat="29F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-29F"><strong></strong></td>                        <td data-column_index="8" data-row_index="26" class="seat-map-plane-right_side"><strong></strong></td>            </tr>            <tr class="row-27">                        <td data-column_index="0" data-row_index="27" class="seat-map-plane-left_side"><strong></strong></td>                        <td data-column_index="1" data-row_index="27" data-seat="30A" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30A"><strong></strong></td>                        <td data-column_index="2" data-row_index="27" data-seat="30B" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30B"><strong></strong></td>                        <td data-column_index="3" data-row_index="27" data-seat="30C" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30C"><strong></strong></td>                        <td data-column_index="4" data-row_index="27" class="seat-map-legend seat-map-aisle"><strong>30</strong></td>                        <td data-column_index="5" data-row_index="27" data-seat="30D" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30D"><strong></strong></td>                        <td data-column_index="6" data-row_index="27" data-seat="30E" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30E"><strong></strong></td>                        <td data-column_index="7" data-row_index="27" data-seat="30F" class="seat-map-legend  seat-map-seat seat-map-seat-preview  seat-map-prepay" id="seat-0-30F"><strong></strong></td>                        <td data-column_index="8" data-row_index="27" class="seat-map-plane-right_side"><strong></strong></td>            </tr>        </tbody>        <tfoot><tr>	        <td class="seat-map-column seat-map-plane-left_side"><strong></strong></td>	        <td class="seat-map-column seat-map-legend "><strong>A</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>B</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>C</strong></td>	        <td class="seat-map-column seat-map-legend "><strong></strong></td>	        <td class="seat-map-column seat-map-legend "><strong>D</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>E</strong></td>	        <td class="seat-map-column seat-map-legend "><strong>F</strong></td>	        <td class="seat-map-column seat-map-plane-right_side"><strong></strong></td></tr></tfoot>    </table>    </div></div>';K({partials:J})}function E(J,K){K}function I(K,J,M,L){if(K){L("openFrequentFlyerAdviseOverlay mock content")}}};B.widgets=B.widgets||{};B.widgets.Seats=B.widgets.Seats||{};B.widgets.Seats.ViewModelMock=A});YUI.add("attribute-base",function(C){C.State=function(){this.data={}};C.State.prototype={add:function(O,Y,f){var e=this.data;e[Y]=e[Y]||{};e[Y][O]=f},addAll:function(O,d){var Y;for(Y in d){if(d.hasOwnProperty(Y)){this.add(O,Y,d[Y])}}},remove:function(O,Y){var e=this.data;if(e[Y]&&(O in e[Y])){delete e[Y][O]}},removeAll:function(O,e){var Y=this.data;C.each(e||Y,function(f,d){if(C.Lang.isString(d)){this.remove(O,d)}else{this.remove(O,f)}},this)},get:function(O,Y){var e=this.data;return(e[Y]&&O in e[Y])?e[Y][O]:undefined},getAll:function(O){var e=this.data,Y;C.each(e,function(f,d){if(O in e[d]){Y=Y||{};Y[d]=f[O]}},this);return Y}};var K=C.Object,F=C.Lang,L=C.EventTarget,X=".",U="Change",N="getter",M="setter",P="readOnly",Z="writeOnce",V="initOnly",c="validator",H="value",Q="valueFn",E="broadcast",S="lazyAdd",J="_bypassProxy",b="added",B="initializing",I="initValue",W="published",T="defaultValue",A="lazy",R="isLazyAdd",G,a={};a[P]=1;a[Z]=1;a[N]=1;a[E]=1;function D(){var d=this,O=this.constructor.ATTRS,Y=C.Base;d._ATTR_E_FACADE={};L.call(d,{emitFacade:true});d._conf=d._state=new C.State();d._stateProxy=d._stateProxy||null;d._requireAddAttr=d._requireAddAttr||false;if(O&&!(Y&&d instanceof Y)){d.addAttrs(this._protectAttrs(O))}}D.INVALID_VALUE={};G=D.INVALID_VALUE;D._ATTR_CFG=[M,N,c,H,Q,Z,P,S,E,J];D.prototype={addAttr:function(Y,O,e){var f=this,h=f._state,g,d;e=(S in O)?O[S]:e;if(e&&!f.attrAdded(Y)){h.add(Y,A,O||{});h.add(Y,b,true)}else{if(!f.attrAdded(Y)||h.get(Y,R)){O=O||{};d=(H in O);if(d){g=O.value;delete O.value}O.added=true;O.initializing=true;h.addAll(Y,O);if(d){f.set(Y,g)}h.remove(Y,B)}}return f},attrAdded:function(O){return !!this._state.get(O,b)},modifyAttr:function(Y,O){var d=this,f,e;if(d.attrAdded(Y)){if(d._isLazyAttr(Y)){d._addLazyAttr(Y)}e=d._state;for(f in O){if(a[f]&&O.hasOwnProperty(f)){e.add(Y,f,O[f]);if(f===E){e.remove(Y,W)}}}}},removeAttr:function(O){this._state.removeAll(O)},get:function(O){return this._getAttr(O)},_isLazyAttr:function(O){return this._state.get(O,A)},_addLazyAttr:function(Y){var d=this._state,O=d.get(Y,A);d.add(Y,R,true);d.remove(Y,A);this.addAttr(Y,O)},set:function(O,d,Y){return this._setAttr(O,d,Y)},reset:function(O){var d=this,Y;if(O){if(d._isLazyAttr(O)){d._addLazyAttr(O)}d.set(O,d._state.get(O,I))}else{Y=d._state.data.added;C.each(Y,function(e,f){d.reset(f)},d)}return d},_set:function(O,d,Y){return this._setAttr(O,d,Y,true)},_getAttr:function(d){var e=this,k=d,f=e._state,g,O,h,Y;if(d.indexOf(X)!==-1){g=d.split(X);d=g.shift()}if(e._tCfgs&&e._tCfgs[d]){Y={};Y[d]=e._tCfgs[d];delete e._tCfgs[d];e._addAttrs(Y,e._tVals)}if(e._isLazyAttr(d)){e._addLazyAttr(d)}h=e._getStateVal(d);O=f.get(d,N);if(O&&!O.call){O=this[O]}h=(O)?O.call(e,h,k):h;h=(g)?K.getValue(h,g):h;return h},_setAttr:function(d,g,O,e){var m=true,Y=this._state,h=this._stateProxy,o=Y.data,l,p,q,f,k,n;if(d.indexOf(X)!==-1){p=d;q=d.split(X);d=q.shift()}if(this._isLazyAttr(d)){this._addLazyAttr(d)}l=(!o.value||!(d in o.value));if(h&&d in h&&!this._state.get(d,J)){l=false}if(this._requireAddAttr&&!this.attrAdded(d)){}else{k=Y.get(d,Z);n=Y.get(d,B);if(!l&&!e){if(k){m=false}if(Y.get(d,P)){m=false}}if(!n&&!e&&k===V){m=false}if(m){if(!l){f=this.get(d)}if(q){g=K.setValue(C.clone(f),q,g);if(g===undefined){m=false}}if(m){if(n){this._setAttrVal(d,p,f,g)}else{this._fireAttrChange(d,p,f,g,O)}}}}return this},_fireAttrChange:function(h,g,e,d,O){var l=this,f=h+U,Y=l._state,k;if(!Y.get(h,W)){l.publish(f,{queuable:false,defaultTargetOnly:true,defaultFn:l._defAttrChangeFn,silent:true,broadcast:Y.get(h,E)});Y.add(h,W,true)}k=(O)?C.merge(O):l._ATTR_E_FACADE;k.type=f;k.attrName=h;k.subAttrName=g;k.prevVal=e;k.newVal=d;l.fire(k)},_defAttrChangeFn:function(O){if(!this._setAttrVal(O.attrName,O.subAttrName,O.prevVal,O.newVal)){O.stopImmediatePropagation()}else{O.newVal=this.get(O.attrName)}},_getStateVal:function(O){var Y=this._stateProxy;return Y&&(O in Y)&&!this._state.get(O,J)?Y[O]:this._state.get(O,H)},_setStateVal:function(O,d){var Y=this._stateProxy;if(Y&&(O in Y)&&!this._state.get(O,J)){Y[O]=d}else{this._state.add(O,H,d)}},_setAttrVal:function(o,n,k,g){var q=this,l=true,d=q._state,e=d.get(o,c),h=d.get(o,M),m=d.get(o,B),p=this._getStateVal(o),Y=n||o,f,O;if(e){if(!e.call){e=this[e]}if(e){O=e.call(q,g,Y);if(!O&&m){g=d.get(o,T);O=true}}}if(!e||O){if(h){if(!h.call){h=this[h]}if(h){f=h.call(q,g,Y);if(f===G){l=false}else{if(f!==undefined){g=f}}}}if(l){if(!n&&(g===p)&&!F.isObject(g)){l=false}else{if(d.get(o,I)===undefined){d.add(o,I,g)}q._setStateVal(o,g)}}}else{l=false}return l},setAttrs:function(O,Y){return this._setAttrs(O,Y)},_setAttrs:function(Y,d){for(var O in Y){if(Y.hasOwnProperty(O)){this.set(O,Y[O])}}return this},getAttrs:function(O){return this._getAttrs(O)},_getAttrs:function(e){var g=this,k={},f,Y,O,h,d=(e===true);e=(e&&!d)?e:K.keys(g._state.data.added);for(f=0,Y=e.length;f<Y;f++){O=e[f];h=g.get(O);if(!d||g._getStateVal(O)!=g._state.get(O,I)){k[O]=g.get(O)}}return k},addAttrs:function(O,Y,d){var e=this;if(O){e._tCfgs=O;e._tVals=e._normAttrVals(Y);e._addAttrs(O,e._tVals,d);e._tCfgs=e._tVals=null}return e},_addAttrs:function(Y,d,e){var g=this,O,f,h;for(O in Y){if(Y.hasOwnProperty(O)){f=Y[O];f.defaultValue=f.value;h=g._getAttrInitVal(O,f,g._tVals);if(h!==undefined){f.value=h}if(g._tCfgs[O]){delete g._tCfgs[O]}g.addAttr(O,f,e)}}},_protectAttrs:function(Y){if(Y){Y=C.merge(Y);for(var O in Y){if(Y.hasOwnProperty(O)){Y[O]=C.merge(Y[O])}}}return Y},_normAttrVals:function(O){return(O)?C.merge(O):null},_getAttrInitVal:function(O,Y,e){var f,d;if(!Y[P]&&e&&e.hasOwnProperty(O)){f=e[O]}else{f=Y[H];d=Y[Q];if(d){if(!d.call){d=this[d]}if(d){f=d.call(this)}}}return f}};C.mix(D,L,false,null,1);C.Attribute=D},"3.1.2",{requires:["event-custom"]});YUI.add("anim-base",function(B){var C="running",N="startTime",L="elapsedTime",J="start",I="tween",M="end",D="node",K="paused",P="reverse",H="iterationCount",A=Number;var F={},O={},E;B.Anim=function(){B.Anim.superclass.constructor.apply(this,arguments);O[B.stamp(this)]=this};B.Anim.NAME="anim";B.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;B.Anim.DEFAULT_UNIT="px";B.Anim.DEFAULT_EASING=function(R,Q,T,S){return T*R/S+Q};B.Anim._intervalTime=20;B.Anim.behaviors={left:{get:function(R,Q){return R._getOffset(Q)}}};B.Anim.behaviors.top=B.Anim.behaviors.left;B.Anim.DEFAULT_SETTER=function(U,R,X,W,Q,V,S,T){T=T||"";U._node.setStyle(R,S(Q,A(X),A(W)-A(X),V)+T)};B.Anim.DEFAULT_GETTER=function(Q,R){return Q._node.getComputedStyle(R)};B.Anim.ATTRS={node:{setter:function(Q){Q=B.one(Q);this._node=Q;if(!Q){}return Q}},duration:{value:1},easing:{value:B.Anim.DEFAULT_EASING,setter:function(Q){if(typeof Q==="string"&&B.Easing){return B.Easing[Q]}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!F[B.stamp(this)]},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};B.Anim.run=function(){for(var Q in O){if(O[Q].run){O[Q].run()}}};B.Anim.pause=function(){for(var Q in F){if(F[Q].pause){F[Q].pause()}}B.Anim._stopTimer()};B.Anim.stop=function(){for(var Q in F){if(F[Q].stop){F[Q].stop()}}B.Anim._stopTimer()};B.Anim._startTimer=function(){if(!E){E=setInterval(B.Anim._runFrame,B.Anim._intervalTime)}};B.Anim._stopTimer=function(){clearInterval(E);E=0};B.Anim._runFrame=function(){var Q=true;for(var R in F){if(F[R]._runFrame){Q=false;F[R]._runFrame()}}if(Q){B.Anim._stopTimer()}};B.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var G={run:function(){if(this.get(K)){this._resume()}else{if(!this.get(C)){this._start()}}return this},pause:function(){if(this.get(C)){this._pause()}return this},stop:function(Q){if(this.get(C)||this.get(K)){this._end(Q)}return this},_added:false,_start:function(){this._set(N,new Date()-this.get(L));this._actualFrames=0;if(!this.get(K)){this._initAnimAttr()}F[B.stamp(this)]=this;B.Anim._startTimer();this.fire(J)},_pause:function(){this._set(N,null);this._set(K,true);delete F[B.stamp(this)];this.fire("pause")},_resume:function(){this._set(K,false);F[B.stamp(this)]=this;this.fire("resume")},_end:function(Q){var R=this.get("duration")*1000;if(Q){this._runAttrs(R,R,this.get(P))}this._set(N,null);this._set(L,0);this._set(K,false);delete F[B.stamp(this)];this.fire(M,{elapsed:this.get(L)})},_runFrame:function(){var U=this._runtimeAttr.duration,S=new Date()-this.get(N),R=this.get(P),Q=(S>=U),T,V;this._runAttrs(S,U,R);this._actualFrames+=1;this._set(L,S);this.fire(I);if(Q){this._lastFrame()}},_runAttrs:function(Z,Y,V){var W=this._runtimeAttr,S=B.Anim.behaviors,X=W.easing,Q=Y,R,T,U;if(V){Z=Y-Z;Q=0}for(U in W){if(W[U].to){R=W[U];T=(U in S&&"set" in S[U])?S[U].set:B.Anim.DEFAULT_SETTER;if(Z<Y){T(this,U,R.from,R.to,Z,Y,X,R.unit)}else{T(this,U,R.from,R.to,Q,Y,X,R.unit)}}}},_lastFrame:function(){var Q=this.get("iterations"),R=this.get(H);R+=1;if(Q==="infinite"||R<Q){if(this.get("direction")==="alternate"){this.set(P,!this.get(P))}this.fire("iteration")}else{R=0;this._end()}this._set(N,new Date());this._set(H,R)},_initAnimAttr:function(){var X=this.get("from")||{},W=this.get("to")||{},Q={duration:this.get("duration")*1000,easing:this.get("easing")},S=B.Anim.behaviors,V=this.get(D),U,T,R;B.each(W,function(b,Z){if(typeof b==="function"){b=b.call(this,V)}T=X[Z];if(T===undefined){T=(Z in S&&"get" in S[Z])?S[Z].get(this,Z):B.Anim.DEFAULT_GETTER(this,Z)}else{if(typeof T==="function"){T=T.call(this,V)}}var Y=B.Anim.RE_UNITS.exec(T);var a=B.Anim.RE_UNITS.exec(b);T=Y?Y[1]:T;R=a?a[1]:b;U=a?a[2]:Y?Y[2]:"";if(!U&&B.Anim.RE_DEFAULT_UNIT.test(Z)){U=B.Anim.DEFAULT_UNIT}if(!T||!R){B.error('invalid "from" or "to" for "'+Z+'"',"Anim");return }Q[Z]={from:T,to:R,unit:U}},this);this._runtimeAttr=Q},_getOffset:function(R){var T=this._node,U=T.getComputedStyle(R),S=(R==="left")?"getX":"getY",V=(R==="left")?"setX":"setY";if(U==="auto"){var Q=T.getStyle("position");if(Q==="absolute"||Q==="fixed"){U=T[S]();T[V](U)}else{U=0}}return U}};B.extend(B.Anim,B.Base,G)},"3.1.2",{requires:["base-base","node-style"]});YUI.add("anim-color",function(B){var A=Number;B.Anim.behaviors.color={set:function(F,D,I,H,C,G,E){I=B.Color.re_RGB.exec(B.Color.toRGB(I));H=B.Color.re_RGB.exec(B.Color.toRGB(H));if(!I||I.length<3||!H||H.length<3){B.error("invalid from or to passed to color behavior")}F._node.setStyle(D,"rgb("+[Math.floor(E(C,A(I[1]),A(H[1])-A(I[1]),G)),Math.floor(E(C,A(I[2]),A(H[2])-A(I[2]),G)),Math.floor(E(C,A(I[3]),A(H[3])-A(I[3]),G))].join(", ")+")")},get:function(D,C){var E=D._node.getComputedStyle(C);E=(E==="transparent")?"rgb(255, 255, 255)":E;return E}};B.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(C,D){B.Anim.behaviors[C]=B.Anim.behaviors.color})},"3.1.2",{requires:["anim-base"]});YUI.add("anim-curve",function(A){A.Anim.behaviors.curve={set:function(F,C,I,H,B,G,E){I=I.slice.call(I);H=H.slice.call(H);var D=E(B,0,100,G)/100;H.unshift(I);F._node.setXY(A.Anim.getBezier(H,D))},get:function(C,B){return C._node.getXY()}};A.Anim.getBezier=function(F,E){var G=F.length;var D=[];for(var C=0;C<G;++C){D[C]=[F[C][0],F[C][1]]}for(var B=1;B<G;++B){for(C=0;C<G-B;++C){D[C][0]=(1-E)*D[C][0]+E*D[parseInt(C+1,10)][0];D[C][1]=(1-E)*D[C][1]+E*D[parseInt(C+1,10)][1]}}return[D[0][0],D[0][1]]}},"3.1.2",{requires:["anim-xy"]});YUI.add("anim-easing",function(A){A.Easing={easeNone:function(C,B,E,D){return E*C/D+B},easeIn:function(C,B,E,D){return E*(C/=D)*C+B},easeOut:function(C,B,E,D){return -E*(C/=D)*(C-2)+B},easeBoth:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C+B}return -E/2*((--C)*(C-2)-1)+B},easeInStrong:function(C,B,E,D){return E*(C/=D)*C*C*C+B},easeOutStrong:function(C,B,E,D){return -E*((C=C/D-1)*C*C*C-1)+B},easeBothStrong:function(C,B,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+B}return -E/2*((C-=2)*C*C*C-2)+B},elasticIn:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B},elasticOut:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G)===1){return B+H}if(!F){F=G*0.3}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+B},elasticBoth:function(D,B,H,G,C,F){var E;if(D===0){return B}if((D/=G/2)===2){return B+H}if(!F){F=G*(0.3*1.5)}if(!C||C<Math.abs(H)){C=H;E=F/4}else{E=F/(2*Math.PI)*Math.asin(H/C)}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+B}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+B},backIn:function(C,B,F,E,D){if(D===undefined){D=1.70158}if(C===E){C-=0.001}return F*(C/=E)*C*((D+1)*C-D)+B},backOut:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+B},backBoth:function(C,B,F,E,D){if(typeof D==="undefined"){D=1.70158}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+B}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+B},bounceIn:function(C,B,E,D){return E-A.Easing.bounceOut(D-C,0,E,D)+B},bounceOut:function(C,B,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+B}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+B}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+B}}}return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+B},bounceBoth:function(C,B,E,D){if(C<D/2){return A.Easing.bounceIn(C*2,0,E,D)*0.5+B}return A.Easing.bounceOut(C*2-D,0,E,D)*0.5+E*0.5+B}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-node-plugin",function(B){var A=function(C){C=(C)?B.merge(C):{};C.node=C.host;A.superclass.constructor.apply(this,arguments)};A.NAME="nodefx";A.NS="fx";B.extend(A,B.Anim);B.namespace("Plugin");B.Plugin.NodeFX=A},"3.1.2",{requires:["node-pluginhost","anim-base"]});YUI.add("anim-scroll",function(B){var A=Number;B.Anim.behaviors.scroll={set:function(F,G,I,J,K,E,H){var D=F._node,C=([H(K,A(I[0]),A(J[0])-A(I[0]),E),H(K,A(I[1]),A(J[1])-A(I[1]),E)]);if(C[0]){D.set("scrollLeft",C[0])}if(C[1]){D.set("scrollTop",C[1])}},get:function(D){var C=D._node;return[C.get("scrollLeft"),C.get("scrollTop")]}}},"3.1.2",{requires:["anim-base"]});YUI.add("anim-xy",function(B){var A=Number;B.Anim.behaviors.xy={set:function(F,D,I,H,C,G,E){F._node.setXY([E(C,A(I[0]),A(H[0])-A(I[0]),G),E(C,A(I[1]),A(H[1])-A(I[1]),G)])},get:function(C){return C._node.getXY()}}},"3.1.2",{requires:["anim-base","node-screen"]});YUI.add("anim",function(A){},"3.1.2",{use:["anim-base","anim-color","anim-curve","anim-easing","anim-node-plugin","anim-scroll","anim-xy"],skinnable:false});YUI.add("popupWidget",function(B){var A=function(E,H,D){var G=this;var K=false;var C;var J;var I;if(D!=null&&D.header!=null){I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">'+D.header+'</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}else{I=function(M,L){return B.Node.create('<div id="'+M+'" class="messagePopup" ><div class="hd">&nbsp;</div><div class="bd">'+L+'</div><div class="ft">&nbsp;</div></div>')}}if(YAHOO.lang.isString(H)){C="popup"+YAHOO.util.Dom.generateId();J=I(C,H);E.append(J)}else{C=H.getAttribute("id");J=H}var F={width:"400px",height:"150px",fixedcenter:true,constraintoviewport:true,close:true,visible:false,draggable:false,modal:true,zIndex:10,buttons:[],needTranslation:true};D=YAHOO.lang.merge(F,D||{});if(D.autofillheight!=null){D.height=null}G.dialog=new YAHOO.widget.Dialog(C,D);G.hide=function(){if(K){G.dialog.hide();if(J){J.addClass("hidden")}}};G.destroy=function(){if(K){G.dialog.destroy()}};G.dialog.hideEvent.subscribe(G.hide);if(D.closeHandler){G.dialog.hideEvent.subscribe(D.closeHandler)}G.addUniqueID=function(N){var M=G.dialog.getButtons();for(var L=0;L<M.length;L++){M[L].id=""+N+""+L}};G.addStyleClassToButtons=function(L){var N=G.dialog.getButtons();for(var M=0;M<N.length;M++){if(N[M].className===""){N[M].className+=L}else{N[M].className+=" "+L}}};G.addStyleClassToPopup=function(L){if(J){J.addClass(L)}};G.render=function(){if(D&&D.renderInsideBody){G.dialog.render(document.body)}else{G.dialog.render()}if(J&&D.needTranslation){J.translate()}K=true};G.center=function(){if(!K){G.render()}G.dialog.center()};G.show=function(){if(!K){G.render()}if(J){J.removeClass("hidden")}G.dialog.show()};G.node=function(){return J};G.update=function(L){G.dialog.setBody(L);K=false};G.id=function(){return C}};B.widgets=B.widgets||{};B.widgets.PopupWidget=A},"1.0.0",{requires:[]});YUI.add("wl-seats",function(G){var F="false";var E=null;var H=[];var D;var C="seats-overlays";var B;G.components.Seats=function(AY){var AH=this;var AI=AY.compInstConfig;var I=AY.initData;var o=0;var J=0;var h=null;var AP;var AK;var n;var V=[];var AL=I.selectedSeats||[];var m;var w=null;var L=I.partialExchange;var AC=I.numberOfSegmentsChanged;var AX=false;var AS;var Z;var y="extraLegRoomOverlay";var AD="getFrequentFlyerAdviceOverlay";if(!D){D=G.Node.create('<div class="'+C+'"></div>');G.one("body").appendChild(D)}if(!AI.passengerSelectionEnabled){return false}AH.onRenderState={initialized:function(Ad){if(AY.initData.inSandbox){B=G.widgets.Seats.ViewModelMock(AY,AH)}else{B=G.widgets.Seats.ViewModel(AY,function(Ae,Af){return AH.fireEvent.call(AH,Ae,Af)},AH)}AH.fireEvent("show-submit",{forceInitialize:true,selector:".submit-placeholder",translationKey:"label.seats.continueToPayment"});d();n=G.components.Seats.SubmitHandler(AH.node.ancestor("form"),G.one("body"),AH.getHtml("_missingSeatsPopup"),AI.passengerSelectionRequired,AH.getHtml("_requiredSeatsPopup"));if(AY.initData.hasSelectableSeats){AP=G.components.Seats.FlightInfoBox(AH.node.one("#flight-list-infobox"),"flight-info-");AK=G.components.Seats.SeatMap(AH.node.one("#seat-map-map-container"),"seat-map-segment-");V=U(AY.initData.itineraryParts);if(!V[o].selectableSeat){o=a()}AK.loadSegment(o,o);G.on("seats:pax_selected",K);AP.collapseInactiveSegments(o);T(I.selectedSeats);var Ac=Ad.one("button.more-link");if(Ac){Ac.on("click",AQ)}G.on("click",O,"a.skipSeatsSelection");G.on("click",AR,"#flight-list-infobox .seat-map-segment");G.on("click",AT,".segment-pax .selectable");var Ab=G.all("a.nextFlight, a.prevFlight");if(Ab){G.on("click",AU,"a.prevFlight");G.on("click",S,"a.nextFlight")}G.delegate("click",p,Ad,".seat-map-unavailable-continue-button");G.delegate("click",f,Ad,".seat-map-seat-selectable");G.delegate("click",r,Ad,".seat-map-flights-chosen .seat-map-flights-action");G.delegate("mouseover",N,Ad,".seat-map-seat-selectable");G.delegate("mouseout",g,Ad,".seat-map-seat-selectable");G.delegate("click",v,Ad,".seat-map-seat-selectable-exit");G.delegate("mouseover",N,Ad,".seat-map-seat-selectable-exit");G.delegate("mouseout",g,Ad,".seat-map-seat-selectable-exit");G.delegate("click",x,D,"#btn-accept");G.delegate("click",Q,D,"#btn-no");R(o)}},readOnly:function(Ab){if(AY.initData.inSandbox){B=G.widgets.Seats.ViewModelMock(AY,AH);if(!G.one("#openOverlayLink")){var Ac=G.Node.create('<h1><a id="openOverlayLink" href="#">Click to open seats readOnly overlay</a></h1>');Ac.on("click",e);G.one("#componentTab").appendChild(Ac)}}else{B=G.widgets.Seats.ViewModel(AY,function(Ad,Ae){return AH.fireEvent.call(AH,Ad,Ae)},AH)}}};var W=null;AH.incomingEvents={submit_rendered:function(Ab){Ab.node.on("click",AJ)},"cart-updated-with-seats-price":s,"view-seats":function(Ab){e(Ab)},"itinerary-selected":function(Ab){m=Ab.basketHashRefs}};var k=function(Au){var Ar="seats-readonly-popup";var Am=Au.rbdsAndPrices;var Ak=Au.segmentList;var At=Au.selectedSegmentIndex;var Af=Au.selectedBasketHashRef;var Ac;var Ad;var Ag=false;var Aj=Ai(Au.basketsHashRef);function Al(Aw){var Av;Av={header:"",width:"750px",height:"600px",closeHandler:Ao,fixedcenter:true,constraintoviewport:false,needTranslation:false};if(!D){D=G.Node.create('<div class="'+C+'"></div>');G.one("body").appendChild(D)}if(D){Ad=new G.widgets.PopupWidget(D,Aw,Av);Ad.show()}}function Ai(Av){result=new Array();for(var Aw in Av){result.push(Av[Aw].brandedBasketHashRef)}return result}function Ao(){if(D){D.remove();D=null}}function An(Av){openOverlayWithFlightData(G.decodeHtmlEntities(Av.partials["readOnly/__seatsOverlay"]));Ae(Aq);As(Ap)}function Ap(Av){preview=G.one("#seat-map-preview");legend=G.one("#seat-map-legend");preview.setContent(G.decodeHtmlEntities(Av.partials["readOnly/__seatMapPreview"]));legend.setContent(G.decodeHtmlEntities(Av.partials["readOnly/__seatMapLegend"]));overlay=G.one("#seats-readonly");Ab(overlay);b(false,preview);b(false,legend)}function Aq(Av){overlay=G.one("#seats-readonly");overlay.setContent(G.decodeHtmlEntities(Av.partials["readOnly/__seatsOverlay"]));Ah(overlay);Ag=false;As(Ap)}function As(Av){B.loadSeatMapAndLegend(Av)}function Ae(Av){var Aw={selectedBrandIdsBasketHashRefs:m,basketHashRefs:Aj,selectedSegmentIndex:At,brandIdsAndPrices:Am,selectedBrandId:Ac,languageKey:G.translations.lang.toLowerCase(),segmentList:Ak,selectedBasketHashRef:Af};B.loadFlightDetails(Aw,Av)}function Ab(Av){Av.all(".next-clickable").on("click",function(Aw){Aw.preventDefault();if(!Ag){Ag=true;At=At+1;Ae(Aq)}});Av.all(".prev-clickable").on("click",function(Aw){Aw.preventDefault();if(!Ag){Ag=true;At=At-1;Ae(Aq)}});Av.all(".try-again-clickable").on("click",function(Aw){Aw.preventDefault();if(!Ag){Ag=true;Ae(Aq)}})}function Ah(Av){Av.all(".next-clickable").on("click",function(Aw){Aw.preventDefault()});Av.all(".prev-clickable").on("click",function(Aw){Aw.preventDefault()});Av.all("#brand-id-select").on("change",function(Ax){var Aw=G.one("#brand-id-select");Ac=Aw.get("options").item(Aw.get("selectedIndex")).getAttribute("value");Aw.addClass("disabled");Aw.set("disabled",true);Ae(Aq)})}return{initialize:function(){Al('<div id="seats-readonly"></div>');Ae(Aq)}}};function e(Ab){seatsReadOnlyOverlay=new k(Ab);seatsReadOnlyOverlay.initialize()}function b(Ab,Ac){if(Ac==undefined){Ac=G.one("."+seatsReadOnlyNodeClass)}if(Ac){Ab?Ac.addClass("loading"):Ac.removeClass("loading")}}function Aa(){G.one(".seats").addClass("loading")}function s(){G.one(".seats").removeClass("loading")}function p(Ab){if(!M(o)){AJ(Ab)}else{S(Ab)}}function T(Ac){var Af=0,Ae=0,Ad,Ab;if(Ac){for(Ad=Ac.length;Af<Ad;Af++){if(Ac[Af]){for(Ae=0,Ab=Ac[Af].length;Ae<Ab;Ae++){if(Ac[Af][Ae]){u({code:Ac[Af][Ae]},Af,Ae)}}}}}}function AQ(Ab){Ab.preventDefault();if(h){h.show()}else{G.use("popupWidget",function(Ac){h=new Ac.widgets.PopupWidget(AH.node,AH.getHtml("_marketingTextPopup"));h.show()})}}function N(Ab){AK.showPaxNo(this,J+1)}function g(Ab){AK.hidePaxNo(this)}function f(Ab){F="false";u({code:Ab.currentTarget.getAttribute("data-seat"),node:Ab.currentTarget},o,J)}function v(Ac){W=Ac;var Ab={width:"550px",autofillheight:"body",close:false,header:AH.getHtml("_exitRowTextPopupHeader")};if(!D){D=G.Node.create('<div class="'+C+'"></div>');G.one("body").appendChild(D)}if(D){G.use("popupWidget",function(Ad){E=new Ad.widgets.PopupWidget(D,AH.getHtml("_exitRowTextPopup"),Ab);E.show()})}}function x(Ab){F="true";Y(W.currentTarget.getAttribute("data-row_index"));u({code:W.currentTarget.getAttribute("data-seat"),node:W.currentTarget},o,J)}function Y(Ab){H.push(Ab)}function Q(){E.hide()}function X(Af,Ab){var Ae=V[Af].passengers[Ab+1];if(Ae&&Ae.passengerType!=="INF"){return Ab}else{var Ac=V[Af].passengers;for(var Ad=0;Ad<Ac.length;Ad++){pax=Ac[Ad];if(!pax.isSelected&&pax.seatSelectionEnabled){return Ad}}return -1}}function u(Ab,Af,Ac){var Ah=Ab.node||AK.getSeatNode(Af,Ab.code);if(Ah){var Ag={code:Ab.code,rowIndex:Ah.getAttribute("data-row_index"),columnIndex:Ah.getAttribute("data-column_index")};AL[Af]=AL[Af]||[];AL[Af][Ac]=Ag.code;AK.selectSeat(Ag,Af,Ac);AP.selectSeat(Ag,Af,Ac);if(AI.reassociationMessagesEnabled&&L){AW()}var Ad=X(Af,Ac);var Ae=function(){AH.fireEvent("notify-about-change",{forceInitialize:true,data:AL});if(Ad>=0){AP.selectPax(Af,AP.getNextUnselectedPax(Af,Ad))}else{if(!AI.multiStep){q(Af+1)}}};AG(AL,Ae)}}function AG(Ab,Ac){Aa();B.saveCurrentSelection(Ab,Ac)}function r(Ae){var Ac=Ae.currentTarget._node.parentNode;var Ab=parseInt(Ac.getAttribute("data-pax_index"));var Ad=AL[o];var Af=Ad&&Ad[Ab];AK.deselectSeat(o,J);AP.deselectSeat(o,J);if(Af){Ad[Ab]=null}AG(AL,function(){AH.fireEvent("notify-about-change",AL)});if(AI.reassociationMessagesEnabled&&L){AW()}}function a(){for(var Ac=0,Ab=V.length;Ac<Ab;Ac++){if(V[Ac].selectableSeat){return Ac}}return 0}function q(Ab){if(V[Ab].selectableSeat){if(w!=null){AV(w)}AP.deselectPax(o,J);AK.loadSegment(o,Ab);AP.showSegment(Ab);o=parseInt(Ab);J=AP.getNextUnselectedPax(o,-1);AP.selectPax(o,J);AP.collapseInactiveSegments(Ab)}R(Ab)}function AB(Ab,Ac){w=Ab;AH.fireEvent("add-messages",{data:{messages:[{id:Ab,code:"",level:"info",originalMessage:Ac}]}});AH.fireEvent("show-messages",{data:{messages:[{id:Ab,code:"",level:"info"}]}})}function AV(Ab){if(Ab){AH.fireEvent("remove-messages",{data:{messages:[Ab]}})}}function AU(Ab){Ab.preventDefault();q(o-1)}function S(Ab){Ab.preventDefault();q(o+1)}function R(Ab){var Ad=G.all("a.prevFlight");if(Ad){AN(Ab)?Ad.removeClass("disabled"):Ad.addClass("disabled")}var Ac=G.all("a.nextFlight");if(Ac){M(Ab)?Ac.removeClass("disabled"):Ac.addClass("disabled")}}function M(Ab){var Ac=V[Ab+1];return Ac&&Ac.selectableSeat}function AN(Ab){var Ac=V[Ab-1];return Ac&&Ac.selectableSeat}function AR(Ac){var Ab=parseInt(Ac.currentTarget.get("parentNode").getAttribute("data-segment_index"));if(o!=Ab){q(Ab)}}function O(Ac){var Ab=Ac.currentTarget.getAttribute("rel");if(Ab){window.location.href=Ab;t()}}function t(){AH.fireEvent("block-submit");G.all("a.skipSeatsSelection").removeAttribute("rel");G.all(".submit-placeholder input").setAttribute("disabled","disabled");G.all(".submit-placeholder input").addClass("disabled")}function AM(){AH.fireEvent("unblock_submit");G.all(".submit-placeholder input").removeAttribute("disabled");G.all(".submit-placeholder input").removeClass("disabled")}function AT(Ad){var Ac=Ad.currentTarget,Ae=parseInt(Ac.getAttribute("data-segment_index")),Ab=parseInt(Ac.getAttribute("data-pax_index"));if(o!=Ae){q(Ae)}AP.selectPax(Ae,Ab)}function K(Ab){J=parseInt(Ab&&Ab.paxIndex)||0;if(AI.reassociationMessagesEnabled){AO(J,Ab.segmentIndex)}}function z(Ac){var Ab=false;for(var Ad=0;Ad<V.length;Ad++){if(!V[Ad].selectableSeat){if(AZ(Ac,Ad)){Ab=true}}}return Ab}function AZ(Ac,Ad){var Ae=V[Ad].passengers[Ac];if(Ae.originalSeat){var Ab=V[Ad].segment.segmentStatus;if((Ae.originalSeat.paid==false)&&(!(Ab!=null&&Ab=="FLOWN"))){return false}}return true}function AW(){for(var Ae=0;Ae<V.length;Ae++){if(V[Ae].selectableSeat){for(var Ac=0;Ac<V[Ae].passengers.length;Ac++){var Ad=z(Ac);var Ab=V[Ae].passengers[Ac];if(Ad&&Ab.originalSeat&&((AZ(Ac,Ae)&&Ab.originalSeat.previousSeatCanBeReassociated&&!AE(Ae,Ac))||AC)){if(!AX){P()}t();AX=true;return }}}}AM()}function AO(Ab,Ac){if(!AX&&L){AW()}var Ad=V[Ac].passengers[Ab];if(Ad.originalSeat){if(L&&Ad.originalSeat.previousSeatCanBeReassociated&&l(Ac)){AB("seatPartiallyExchangeReassociation",null);return }if(Ad.originalSeat.previousSeatCanBeReassociated&&l(Ac)){if(!AX){AB("seatCanBeReassociated",null)}}else{AB("seatCannotBeReassociated",Ad.originalSeat)}}}function d(){Z=G.Node.create('<div class="seats-overlays"></div>');G.one("body").append(Z)}function P(){B.openFrequentFlyerAdviseOverlay(Z,y,AD,AA)}function AA(Ab){if(!AS){AS=new G.widgets.PopupWidget(Z,Ab,{header:"",width:"500px",height:"230px",fixedcenter:true,constraintoviewport:false,close:false});AF()}AS.show()}function c(Ab){Ab.preventDefault();AS.hide()}function AF(){if(Z){Z.delegate("click",c,".seats-extraLegRoomPopup-close")}}function AE(Ae,Af){if(typeof AL[Ae]=="undefined"){return false}if(typeof AL[Ae][Af]=="undefined"){return false}var Ac=AL[Ae][Af];var Ad=V[Ae].paidSeats;for(var Ab=0;Ab<Ad.length;Ab++){if(Ad[Ab]==Ac){return true}}return false}function l(Ad){var Ac=V[Ad].paidSeats;if(AL&&AL[Ad]){if(AL[Ad].length<Ac.length){return true}else{for(i=0;i<AL[Ad].length;i++){var Ab=Ac.indexOf(AL[Ad][i]);if(Ab>-1){Ac.splice(Ab,1)}}}}return Ac.length>0}function AJ(Ab){Ab.preventDefault();if(Ab.target.hasAttribute("disabled")){return }n.handleSubmit(AL)}function U(Aj){var Ag,Ae,Ac,Ab,Af=[],Ah,Ai,Ad=0;for(Ag=0,Ac=Aj.length;Ag<Ac;Ag++){Ah=Aj[Ag].segmentSeatMaps;for(Ae=0,Ab=Ah.length;Ae<Ab;Ae++){Ai=Ah[Ae];Af[Ad]={passengers:Ai.passengers,segment:Ai.segment,seatMap:Ai.seatMap,selectableSeat:Ai.selectableSeat,paidSeats:A(Ai.seatMap)};AK.addSegment(Ad);AP.addSegment(Ad,Ai);n.bindDataToSelectedSeatPattern(Ad,Ai);Ad++}}return Af}};function A(I){var K=[];if(I!=null){for(i=0;i<I.seatRows.length;i++){var J=I.seatRows[i].seatRow;for(j=0;j<J.length;j++){var L=J[j];if(L.availableSeat&&L.paid&&!L.freeOfCharge){K.push(L.code)}}}}return K}G.components.Seats.SeatMap=function(J,S){var M=[],P=[];function I(U,T,V){M[U]=M[U]||[];M[U][T]=V}function Q(U,T){I(U,T,null)}function L(U,T){return M[U]&&M[U][T]}function R(T,U){return J.one("#seat-"+T+"-"+U)}function N(W,V){for(var U=0,T=W.length;U<T;U++){if(W[U]==V){return true}}return false}function K(U,T){var V=L(U,T);V.removeClass("seat-map-pax");if(N(H,V.getAttribute("data-row_index"))){V.addClass("seat-map-seat-selectable-exit")}else{V.addClass("seat-map-seat-selectable")}V.one("strong").setContent("");Q(U,T);G.fire("seats:seatMap:seat_deselected",{paxIndex:T,segmentIndex:U})}function O(T){var U=new G.Anim({node:T,from:{opacity:1},to:{opacity:0.5},duration:0.5});U.on("start",function(){T.removeClass("hidden")});return U}return{showPaxNo:function(U,T){U.one("strong").setContent(T)},hidePaxNo:function(T){if(!T.hasClass("seat-map-pax")){T.one("strong").setContent("")}},getSeatNode:R,selectSeat:function(W,U,T){var V=W.node||R(U,W.code);if(M[U]&&M[U][T]){K(U,T)}I(U,T,V);V.addClass("seat-map-pax");if(N(H,V.getAttribute("data-row_index"))){V.removeClass("seat-map-seat-selectable-exit");if(E!=null){E.hide()}}else{V.removeClass("seat-map-seat-selectable")}V.one("strong").setContent(T+1);G.fire("seats:seatMap:seat_selected",{seatCode:W.code,paxIndex:T,segmentIndex:U})},deselectSeat:K,loadSegment:function(X,V){var W=P[X],U=P[V];W.anim.on("end",T);W.anim.run();function T(){W.anim.detach("end",T);W.addClass("hidden");W.removeAttribute("style");U.removeClass("hidden");G.fire("seats:segment_loaded",{segmentIndex:X})}},addSegment:function(T){P[T]=J.one("#"+S+T);P[T].anim=O(P[T])}}};G.components.Seats.FlightInfoBox=function(J,N){var P=[];function S(X,V){var W=P[X],Y=W&&W.passengers[V];if(!Y.node){Y.node=W.node.one("#seat-map-flights-pax-"+X+"-"+V)}return Y}function I(Z,a,Y){var W=Number(Z),V=Number(a),X=Number(Y);return P[W]&&P[W].seatMap&&P[W].seatMap.seatRows[V]&&P[W].seatMap.seatRows[V].seatRow[X]}function U(Z,Y){var W=P[Z].passengers,a;for(var X=Y+1,V=W.length;X<V;X++){a=W[X];if(!a.isSelected&&a.seatSelectionEnabled){return X}}return Y>0?Y:0}function K(X,V){var W=P[X],Y=S(X,V);W.node.all(".seat-map-flights-pax").removeClass("seat-map-flights-selected")}function T(X,V){var W=P[X],Y=S(X,V);W.node.all(".seat-map-flights-pax").removeClass("seat-map-flights-selected");if(Y.node){Y.node.addClass("seat-map-flights-selected")}G.fire("seats:pax_selected",{paxIndex:V,segmentIndex:X})}function M(Y){var Z,W=P[Y].passengers;for(var X=0,V=W.length;X<V;X++){Z=W[X];if(Z.seatSelectionEnabled){T(Y,X);return }}}function R(Y){var W=P[Y].passengers;for(var V in W){var X=W[V];if(!X.isSelected&&X.seatSelectionEnabled){T(Y,V);return }}}function Q(W,V){var Y=W.one("ul"),X;Y.set("id","togglee-"+V);X=new G.Anim({node:"#togglee-"+V,to:{height:Y.get("scrollHeight")},from:{height:1},duration:0.2});X.on("end",function(){if(X.get("reverse")){W.addClass("seat-map-flights-collapsed")}});X.on("start",function(){if(!X.get("reverse")){M(V)}W.removeClass("seat-map-flights-collapsed")});return X}function L(W){var V=P[W].node.anim;if(!V.get("reverse")){V.set("reverse",true);V.run()}}function O(W){var X=G.all("ul.seatLegend");X.setStyle("display","none");X.removeClass("visible-seat-legend");var V=X.item(W);if(V){V.setStyle("display","block");V.addClass("visible-seat-legend")}}return{collapseInactiveSegments:function(X){for(var W=0,V=P.length;W<V;W++){if(W===X){if(P[W].selectableSeat){M(W)}else{X++}}else{if(P[W].selectableSeat){L(W)}}}O(X)},getNextUnselectedPax:U,showSegment:function(W){var V=P[W].node.anim;if(V.get("reverse")){V.set("reverse",false);V.run();O(W)}},deselectPax:K,selectPax:T,selectSeat:function(X,b,f){var Z=X.code;var g=X.rowIndex;var d=X.columnIndex;var a=S(b,f);var e=I(b,g,d);var V,Y,c,W;a.node.removeClass("seat-map-flights-pending");a.node.addClass("seat-map-flights-chosen");V=a.node.one(".seat-map-flights-place-no");if(Z){V.setAttribute("wl:translate","label.seats.seatNumber.selected|"+Z)}V.removeClass("wasTranslated");Y=a.node.one(".seat-map-flights-price");c=G.one(".visible-seat-legend .seat-price-"+e.label);if(c!=null){W=c.cloneNode(true)}else{W="&nbsp;"}Y.setContent(W);a.node.translate();a.isSelected=true;G.fire("seats:infoBox:seat_selected",{seatCode:Z,paxIndex:f,segmentIndex:b})},deselectSeat:function(Y,V){var Z=S(Y,V),W,X;Z.node.addClass("seat-map-flights-pending");Z.node.removeClass("seat-map-flights-chosen");W=Z.node.one(".seat-map-flights-place-no");W.setAttribute("wl:translate","label.seats.seatNumber.unselected");Z.node.translate();X=Z.node.one(".seat-map-flights-price");X.setContent(G.translateParametrized("label.seats.seatPrice.unselected"));Z.isSelected=false;R(Y);G.fire("seats:infoBox:seat_deselected",{paxIndex:V,segmentIndex:Y})},addSegment:function(W,X){for(var V in X.passengers){X.passengers[V].isSelected=false}P[W]=G.merge(X,{node:J.one("#"+N+W)});P[W].node.anim=Q(P[W].node,W)}}};G.components.Seats.SubmitHandler=function(J,U,T,I,P){var S=[];function N(W){var Y,X,V,Z;for(Y=0,Z=S.length;Y<Z;Y++){if(S[Y]&&!W[Y]){return false}else{if(S[Y]){for(X=0,V=S[Y].length;X<V;X++){if(!!S[Y][X]!==!!W[Y][X]){return false}}}}}return true}function Q(V){G.use("popupWidget",function(X){var W=new X.widgets.PopupWidget(U,T,{buttons:[{text:X.translateParametrized("label.seats.missingSeatsOverlayCancel"),handler:K},{text:X.translateParametrized("label.seats.missingSeatsOverlayContinue"),handler:{fn:M,obj:V},isDefault:true}]});W.show();W.addUniqueID("missingSeatsPopupBtn_")})}function R(){G.use("popupWidget",function(W){var V=new W.widgets.PopupWidget(U,P,{buttons:[{text:W.translateParametrized("label.seats.missingSeatsOverlayContinue"),handler:K}]});V.show()})}function K(){this.hide()}function M(W,V){G.all(".submit-placeholder button").setAttribute("disabled");O(V)}function L(W){var V=G.one("#testInput"),X=G.JSON.stringify(W);V.set("value",X)}function O(V){L(V);J.all('input[type="submit"]').setAttribute("disabled","disabled");J.all('input[type="submit"]').addClass("disabled");J.submit()}return{handleSubmit:function(V){if(I&&V.length==0){R();return }if(N(V)){O(V)}else{Q(V)}},bindDataToSelectedSeatPattern:function(X,Y){var W,V;S[X]=Y.seatMap&&!Y.seatMap.allUnavailable&&!Y.seatMap.allBlocked&&Y.selectableSeat?[]:null;if(S[X]){for(W=0,V=Y.passengers.length;W<V;W++){S[X][W]=Y.passengers[W].seatSelectionEnabled?1:0}}}}};G.Anim.behaviors.height=G.Anim.behaviors.height||{};G.Anim.behaviors.height.set=function(J,K,O,P,R,I,L,Q){O=Number(O),P=Number(P);var M=O-P,N=L(R,O,P-O,I);N=M>0&&N>O?O:N;Q=Q||"";J._node.setStyle("height",N+Q)}});YUI.add("wl-bagfee",function(A){A.components.Bagfee=function(G){var H=this;var D;var F="bagFeePopupContent";var B="__content";H.onRenderState={overlay:function(K){var J=A.one("#bagfee-anchor");if(J){J.on("click",I)}},initialized:function(J){}};function I(L){L.preventDefault();var K="default";var J={data:{actionCode:K,requestPartials:[B]},on:{end:function(){D.node().one(".bd").removeClass("loading")},success:function(N,M){if(M){C(M);D.node().one(".bd").removeClass("loading")}else{A.log("No Data returned from server","error")}}}};if(!D){E()}D.show();D.node().one(".bd").addClass("loading");H.fireEvent("to-ajax",{cfg:J,actionCode:K})}function C(J){var K=J.partials[B];var L=A.one("#"+F);if(L){L.set("innerHTML",A.decodeHtmlEntities(K))}}function E(){var K='<h4 class="bagfee-overlay-title" >'+A.translateParametrized("label.bagfee.overlay.title")+"</h4>";var J={buttons:[],header:K,close:true,width:"600px",autofillheight:"body"};D=new A.widgets.PopupWidget(A.one(document.body),'<div id="'+F+'"></div>',J)}}},"1.0.0",{requires:[]});YUI.add("base-base",function(B){var I=B.Object,K=B.Lang,J=".",G="destroy",R="init",Q="initialized",H="destroyed",D="initializer",N="bubbleTargets",E="_bubbleTargets",C=Object.prototype.constructor,M="deep",S="shallow",P="destructor",A=B.Attribute;function F(){A.call(this);var L=B.Plugin&&B.Plugin.Host;if(this._initPlugins&&L){L.call(this)}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments)}F._ATTR_CFG=A._ATTR_CFG.concat("cloneDefaultValue");F.NAME="base";F.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};F.prototype={init:function(L){this._yuievt.config.prefix=this._eventPrefix;this.publish(R,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(L);this.fire(R,{cfg:L});return this},_preInitEventCfg:function(O){if(O){if(O.on){this.on(O.on)}if(O.after){this.after(O.after)}}var T,L,V,U=(O&&N in O);if(U||E in this){V=U?(O&&O.bubbleTargets):this._bubbleTargets;if(K.isArray(V)){for(T=0,L=V.length;T<L;T++){this.addTarget(V[T])}}else{if(V){this.addTarget(V)}}}},destroy:function(){this.publish(G,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(G);this.detachAll();return this},_defInitFn:function(L){this._initHierarchy(L.cfg);if(this._initPlugins){this._initPlugins(L.cfg)}this._set(Q,true)},_defDestroyFn:function(L){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins()}this._set(H,true)},_getClasses:function(){if(!this._classes){this._initHierarchyData()}return this._classes},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData()}return this._attrs},_filterAttrCfgs:function(V,O){var T=null,L,U=V.ATTRS;if(U){for(L in U){if(U.hasOwnProperty(L)&&O[L]){T=T||{};T[L]=O[L];delete O[L]}}}return T},_initHierarchyData:function(){var T=this.constructor,O=[],L=[];while(T){O[O.length]=T;if(T.ATTRS){L[L.length]=T.ATTRS}T=T.superclass?T.superclass.constructor:null}this._classes=O;this._attrs=this._aggregateAttrs(L)},_aggregateAttrs:function(Y){var V,Z,U,L,a,O,X,T=F._ATTR_CFG,W={};if(Y){for(O=Y.length-1;O>=0;--O){Z=Y[O];for(V in Z){if(Z.hasOwnProperty(V)){U=B.mix({},Z[V],true,T);L=U.value;X=U.cloneDefaultValue;if(L){if((X===undefined&&(C===L.constructor||K.isArray(L)))||X===M||X===true){U.value=B.clone(L)}else{if(X===S){U.value=B.merge(L)}}}a=null;if(V.indexOf(J)!==-1){a=V.split(J);V=a.shift()}if(a&&W[V]&&W[V].value){I.setValue(W[V].value,a,L)}else{if(!a){if(!W[V]){W[V]=U}else{B.mix(W[V],U,true,T)}}}}}}}return W},_initHierarchy:function(W){var T=this._lazyAddAttrs,X,Y,Z,U,O,V=this._getClasses(),L=this._getAttrCfgs();for(Z=V.length-1;Z>=0;Z--){X=V[Z];Y=X.prototype;if(X._yuibuild&&X._yuibuild.exts){for(U=0,O=X._yuibuild.exts.length;U<O;U++){X._yuibuild.exts[U].apply(this,arguments)}}this.addAttrs(this._filterAttrCfgs(X,L),W,T);if(Y.hasOwnProperty(D)){Y.initializer.apply(this,arguments)}}},_destroyHierarchy:function(){var V,O,U,L,T=this._getClasses();for(U=0,L=T.length;U<L;U++){V=T[U];O=V.prototype;if(O.hasOwnProperty(P)){O.destructor.apply(this,arguments)}}},toString:function(){return this.constructor.NAME+"["+B.stamp(this)+"]"}};B.mix(F,A,false,null,1);F.prototype.constructor=F;B.Base=F},"3.1.2",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(C){var A=C.Base,B=C.Plugin.Host;C.mix(A,B,false,null,1);A.plug=B.plug;A.unplug=B.unplug},"3.1.2",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(D){var B=D.Base,A=D.Lang,C;B._build=function(F,L,P,T,S,O){var U=B._build,G=U._ctor(L,O),J=U._cfg(L,O),R=U._mixCust,N=J.aggregates,E=J.custom,I=G._yuibuild.dynamic,M,K,H,Q;if(I&&N){for(M=0,K=N.length;M<K;++M){H=N[M];if(L.hasOwnProperty(H)){G[H]=A.isArray(L[H])?[]:{}}}}for(M=0,K=P.length;M<K;M++){Q=P[M];D.mix(G,Q,true,null,1);R(G,Q,N,E);G._yuibuild.exts.push(Q)}if(T){D.mix(G.prototype,T,true)}if(S){D.mix(G,U._clean(S,N,E),true);R(G,S,N,E)}G.prototype.hasImpl=U._impl;if(I){G.NAME=F;G.prototype.constructor=G}return G};C=B._build;D.mix(C,{_mixCust:function(G,F,I,H){if(I){D.aggregate(G,F,true,I)}if(H){for(var E in H){if(H.hasOwnProperty(E)){H[E](E,G,F)}}}},_tmpl:function(E){function F(){F.superclass.constructor.apply(this,arguments)}D.extend(F,E);return F},_impl:function(H){var K=this._getClasses(),J,F,E,I,L,G;for(J=0,F=K.length;J<F;J++){E=K[J];if(E._yuibuild){I=E._yuibuild.exts;L=I.length;for(G=0;G<L;G++){if(I[G]===H){return true}}}}return false},_ctor:function(E,F){var G=(F&&false===F.dynamic)?false:true,H=(G)?C._tmpl(E):E;H._yuibuild={id:null,exts:[],dynamic:G};return H},_cfg:function(E,F){var G=[],J={},I,H=(F&&F.aggregates),L=(F&&F.custom),K=E;while(K&&K.prototype){I=K._buildCfg;if(I){if(I.aggregates){G=G.concat(I.aggregates)}if(I.custom){D.mix(J,I.custom,true)}}K=K.superclass?K.superclass.constructor:null}if(H){G=G.concat(H)}if(L){D.mix(J,F.cfgBuild,true)}return{aggregates:G,custom:J}},_clean:function(K,J,G){var I,F,E,H=D.merge(K);for(I in G){if(H.hasOwnProperty(I)){delete H[I]}}for(F=0,E=J.length;F<E;F++){I=J[F];if(H.hasOwnProperty(I)){delete H[I]}}return H}});B.build=function(G,E,H,F){return C(G,E,H,null,null,F)};B.create=function(E,H,G,F,I){return C(E,H,G,F,I)};B.mix=function(E,F){return C(null,E,F,null,null,{dynamic:false})};B._buildCfg={custom:{ATTRS:function(G,F,E){F[G]=F[G]||{};if(E[G]){D.aggregate(F[G],E[G],true)}}},aggregates:["_PLUG","_UNPLUG"]}},"3.1.2",{requires:["base-base"]});YUI.add("base",function(A){},"3.1.2",{use:["base-base","base-pluginhost","base-build"]});YUI.add("wl-select-flights",function(A){A.WlSelectFlights=function(n,a,G,l,Q){var k={isFlightExchanged:Q.isFlightExchanged,lazyStep:Q.lazyStep,hashCodesPath:Q.hashCodesPath};var f=l.flightList;var S=a.one(".componentContentHolder")||a;if(!A.one("#"+G)){var J=A.Node.create('<div id="'+G+'" class="flight-list-container"></div>');S.appendChild(J);J=null}var W=A.one("#"+G);S=null;var b=this;b.direction=G;var D=7;var L=new Date(sabre.config.global.currentTimeInMillis);L=L.getTime()-(L.getTime()%(1000*60*60*24));L=A.DataType.Date.parse(L);var c;var Z;var B;var U;var O;var I=Math.floor(D/2);var Y=Math.floor(D/2);var E=365;var H=new Date(sabre.config.global.currentTimeInMillis);H=H.getTime()-(H.getTime()%(1000*60*60*24));H=A.DataType.Date.parse(H);H=H.setDate(H.getDate()+E);H=A.DataType.Date.parse(H);var K=H;var h=n.initData.discountApplied;var m=n.initData.negoFarePresent;function P(p){var q;if(G==="multicity"){q=p.outboundCalendarPrices}else{if(G==="inbounds"){q=p.inboundCalendarPrices}else{q=p.outboundCalendarPrices}}if(!q){A.log(q+" is undefined. Alternate tabs will not be displayed","warn","Flight List")}return q}b.showMarketingTextOverlay=function(p,r,q){c.showMarketingTextOverlay(p,r,q,G)};b.showMarketingTextOverlayWithDelay=function(p,r,q){c.showMarketingTextOverlayWithDelay(p,r,q,G)};b.showFareIndicatorTextOverlay=function(p){c.showFareIndicatorTextOverlay(p,"fareIndicator")};b.hideMarketingTextOverlay=function(p){c.hideMarketingTextOverlay(p)};b.hideFareIndicatorTextOverlay=function(p){c.hideFareIndicatorTextOverlay(p)};b.hideMarketingTextOverlayIfNotInOverlayRegion=function(p){c.hideMarketingTextOverlayIfNotInOverlayRegion(p)};b.getNode=function(){return W};b.getColumnKeyByHeader=function(p){return c.getColumnKeyByHeader(p)};b.getStoredColumnKey=function(p){return c.getStoredColumnKey(p)};var o={itineraryHeader:function(p){p.translate()},dateRange:function(x){var p=P(n.initData);p=p||[];D=p.length||D;var s=Math.floor(D/2);x.purge(true);var q=(p[s]&&p[s].date)||"";if(!Z){Z=A.DataType.Number.parse(new Date(q.replace(/-/g,"/")))}for(var t=0;t<p.length;t++){var y=A.DataType.Date.parse(p[t].date.replace(/-/g,"/"));p[t].timestamp=y.getTime()}var z=G+"-"+s+"-menu";var v=x.one("#"+z);var r=x.one("a.dates-prev"),u=x.one("a.dates-next");var w=r&&!r.hasClass("disabled");var AA=u&&!u.hasClass("disabled");if(v){e(v,p);X(x,p,s,{prev:w,next:AA})}x.translate()},dataTable:function(p,q){c.applyEvents(p,q)},classOfService:function(){},discountIndicator:function(){C()},negoFareIndicator:function(){T()},nextDayLegend:function(){},filterOptions:function(){}};b.renderHtml=function(p){n.htmlBody={unbundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableUnbundled"))},bundled:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableBundled"))},oneway:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},exchange:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableOneway"))},multicity:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableMulticity"))},lazy:{dataTable:A.JSON.parse(A.getHtml("flc","_dataTableLazy"))}};W.purge(true);W=A.one("#"+G);if(!W){W=A.one(".flight-list-container");if(W){W.addClass("loading");A.log("Different result type - reloading page","warn");window.location.reload()}else{A.log("Cannot render flight list","error")}return }c=f.selectFlightDataTable(G,k);var q=W.get("children");q.each(function(s){var r=s.getAttribute("wl:section");if(r){o[r](s,p)}})};b.getSelectedHashRef=function(){return c?c.getSelectedHashRef():null};b.getSelectedBasketPrice=function(){return c?c.getSelectedBasketPrice():null};b.resetSelection=function(){c.resetSelection()};b.translateBrands=function(){if(typeof c.translateBrands==="function"){c.translateBrands(W)}};b.getCurrentDate=function(){return A.DataType.Date.parse(Z)};b.getActiveDate=function(){return Z};b.getActiveClass=function(){return B};b.hideAlternateDates=function(){};b.showProgress=function(){var p=W.one(".loading-mask");if(p){p.removeClass("hidden")}else{p=A.Node.create('<div class="loading-mask"></div>');W.append(p)}if(A.UA.ie>0&&A.UA.ie<7){W.all("select").addClass("select-fix");p.setStyle("height",p.ancestor().getStyle("height"))}};b.hideProgress=function(){var p=W.one(".loading-mask");if(p){p.addClass("hidden")}if(A.UA.ie>0&&A.UA.ie<7){W.all("select").removeClass("select-fix")}};function C(){var p=".discount-indicator-container";if(h&&N(W,".cell-discount-indicator,.cell-discount-negofare-indicator")){M(p)}else{g(p)}}function T(){m=n.initData.negoFarePresent;var p=".negofare-indicator-container";if(m&&N(W,".cell-negofare-indicator,.cell-discount-negofare-indicator")){M(p)}else{g(p)}}function M(p){var q=b.getNode();if(q){q.all(p).removeClass("hidden")}}function g(p){var q=b.getNode();if(q){q.all(p).addClass("hidden")}}b.disablePrev7AndNext7Buttons=function(){var p=W.one("a.dates-next");if(p){p.addClass("disabled")}var q=W.one("a.dates-prev");if(q){q.addClass("disabled")}};function N(q,p){var r=q.all(p);return r&&!r.isEmpty()}b.setFirstActiveDate=function(p){U=p};b.setLastActiveDate=function(p){O=p};b.reselectFlights=function(p,q){if(c){c.reselectFlights(W,G,p,q)}};b.updateDataTableFromSelectedBasketHash=function(p){if(c){c.updateDataTableFromSelectedBasketHash(W,G,p)}};function X(q,u,s,t){var x=t.prev;var y=t.next;var z=[],v=q.one("a.dates-next"),r=q.one("a.dates-prev");var AA=u.length*(1000*60*60*24);var w=u[s].timestamp;if(x){z.push("#"+q.get("id")+" a.dates-prev")}else{q.one("a.dates-prev").addClass("disabled")}if(y){z.push("#"+q.get("id")+" a.dates-next")}else{q.one("a.dates-next").addClass("disabled")}if(z.length>0){var p=A.on("prevNextHandler|click",function(AF){AF.preventDefault();var AE;var AD={};if(AF.currentTarget.hasClass("dates-prev")){var AB=w-AA;if(U&&U.getTime()>AB){AB=U.getTime()}AE=-AA;AD.dateDirection=-1;AD.id=AB;AD.active=x}else{var AG=w+AA;if(O&&O.getTime()<AG){AG=O.getTime()}AE=AA;AD.dateDirection=1;AD.id=AG;AD.active=y}if(AD.active){var AC=(u[I]&&u[I].date)||"";AE=AE+A.DataType.Number.parse(new Date(AC.replace(/-/g,"/")));AE=V(AE,K);p.detach();R(AF,AD)}},z.join(","))}}function e(p,r){var q=p.all("li");q.each(function(t,s){var u={index:s,date:r[s].timestamp,menuItems:q};if(!t.hasClass("yuimenubaritem-disabled")){t.on("click",F,t,u)}else{t.on("click",d)}},b)}function d(p){p.preventDefault()}function V(s,p){var r=A.DataType.Date.parse(s);var q=1000*60*60*24;if(r.getTime()<L){Y=I;I=I+Math.floor((L.getTime()-r.getTime())/(q));r=L}if(r.getTime()>H){Y=I;I=I-Math.floor((r.getTime()-H.getTime())/(q));r=H}if(r.getTime()>p){Y=I;I=I-Math.floor((r.getTime()-p.getTime())/(q));r=p}return A.DataType.Number.parse(r)}function F(q,p){q.preventDefault();I=p.index;Z=p.date;p.menuItems.removeClass("active");this.addClass("active");l.handleDateChange(G)}function R(q,p){Z=p.id;l.handleDatesPeriodChange(G)}};A.WlSelectFlights.DataTable={}});YUI.add("wl-flight-list-abstract",function(C){var D=function(F,E){var G=this;G.renderItineraryHeader=function(P,I,N,H,J){var K,O;if(P==="inbounds"){K=J?"returning.new":"returning";O=I&&I[1]}else{K=J?"departing.new":"departing";O=I&&I[0]}var M=O?O.departureCode:"";var Q=O?O.arrivalCode:"";var L={direction:K,fromAirport:C.formatAirport(M,N),toAirport:C.formatAirport(Q,N)};return E.replaceData(L,H)};G.selectFlightDataTable=function(I,H){return new C.WlSelectFlights.DataTable.Regular(F,E,I)}};C.WlFlightList=D;var B=function(G,E,I){var H=this;B.superclass.constructor.call(H,G,E);var F={multicity:function(N,L,K,J){var O="";for(var M=0;M<L.length;M++){O+=E.replaceData({no:M+1,fromAirport:C.formatAirport(L[M].departureCode,K)},J)}O+=E.getHtml("_itineraryHeaderDisclaimer");return O}};if(C.Lang.isFunction(F[I])){H.renderItineraryHeader=F[I]}H.selectFlightDataTable=function(K,J){return new C.WlSelectFlights.DataTable.Multicity(G,E,K)}};C.extend(B,D);C.WlFlightList.Bundled=B;var A=function(F,E){var G=this;A.superclass.constructor.call(G,F,E);G.selectFlightDataTable=function(I,H){return new C.WlSelectFlights.DataTable.Lazy(F,E,I,H)};G.renderItineraryHeader=function(O,I,M,H){var J,N;if(O==="lazy1"){J="returning";N=I&&I[1]}else{J="departing";N=I&&I[0]}var L=N?N.departureCode:"";var P=N?N.arrivalCode:"";var K={direction:J,fromAirport:C.formatAirport(L,M),toAirport:C.formatAirport(P,M)};return E.replaceData(K,H)}};C.extend(A,D);C.WlFlightList.Lazy=A});YUI.add("wl-select-flights-datatable-formatters-common",function(A){A.WlSelectFlights.DataTable.CommonFormatters=function(F){var I=F.timeFormat;var K=F.departAirportFormat;var B=F.arriveAirportFormat;var D=F.destinationAirportFormat;var L=F.originAirportFormat;var N=F.stopsAirportFormat;YAHOO.widget.DataTable=YAHOO.widget.DataTable||{};YAHOO.widget.DataTable.Formatter=YAHOO.widget.DataTable.Formatter||{};YAHOO.widget.DataTable.Formatter.dateNumberFormatter=function(R,S,Q){return Q?'<em wl:date="'+Q+"+"+I+'">'+O(Q)+"</em>":""};YAHOO.widget.DataTable.Formatter.dateFormatter=function(T,U,S){var R=C(T,U);var Q=J(T,U);return R+Q};YAHOO.widget.DataTable.Formatter.departDateAndAirportCode=function(R,S,Q){return G(R,S,K)};YAHOO.widget.DataTable.Formatter.arriveDateAndAirportCode=function(R,S,Q){return G(R,S,B)};YAHOO.widget.DataTable.Formatter.flightDuration=function(S,T,Q){var R=S.flightDuration;return E(S,T,R)};YAHOO.widget.DataTable.Formatter.flightNumber=function(R,S,Q){return Q?P(Q,null):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCode=function(R,S,Q){return R?P(Q,R.airlineCodes):""};YAHOO.widget.DataTable.Formatter.flightNumberNoLink=function(R,S,Q){return Q?H(R.flightNumber,null,false):""};YAHOO.widget.DataTable.Formatter.flightNumberAndAirlineCodeNoLink=function(R,S,Q){return R?H(R.flightNumber,R.airlineCodes,false):""};YAHOO.widget.DataTable.Formatter.availableSeats=function(R,S,Q){if(R.seatsPreviewLinkEnabled){return'<p class="view-seats"><a href="#" class="translate" wl:translate="label.flc.viewSeats"></a></p>'}else{return'<p><span class="translate" wl:translate="label.flc.viewSeats.unavailable"></span></p>'}};YAHOO.widget.DataTable.Formatter.operatingCarrierFullName=function(U,W,T){if(!T){return""}var S="";var Q=U.wetLeaseCarrier;if(A.Lang.isArray(T)){for(var R=0;R<T.length;R++){var V=A.getFullAirlineName(T[R]);if(Q&&Q[R]!=null){V=Q[R]}S+="<p>"+A.getFullAirlineName(V)+"</p>"}}else{if(Q){S+=Q}else{S+=A.getFullAirlineName(T)}}return S};YAHOO.widget.DataTable.Formatter.operatingCarrierImage=function(T,U,S){if(!S){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+='<p class="operating-carrier-image carrier-'+S[Q]+'">'+S[Q]+"</p>"}}else{R+='<p class="operating-carrier-image carrier-'+S+'">'+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.arrayToString=function(T,U,S){if(S===null||typeof S==="undefined"){return""}var R="";if(A.Lang.isArray(S)){for(var Q=0;Q<S.length;Q++){R+="<p>"+S[Q]+"</p>"}}else{R+="<p>"+S+"</p>"}return R};YAHOO.widget.DataTable.Formatter.destinationFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],D)+"</p>"}else{Q+="<p>"+A.formatAirport(R,D)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.originFormatter=function(S,T,R){if(!R){return""}var Q="";if(A.Lang.isArray(R)){Q+="<p>"+A.formatAirport(R[0],L)+"</p>"}else{Q+="<p>"+A.formatAirport(R,L)+"</p>"}return Q};YAHOO.widget.DataTable.Formatter.classOfService=function(R,S,Q){return Q?'<p class="translate" wl:translate="label.flc.cabin.'+Q+'">'+Q+"</p>":""};YAHOO.widget.DataTable.Formatter.rowNumber=function(T,U,R){if(!R){return""}var Q=T.index;var S="";if(A.Lang.isArray(Q)&&Q.length>2){S=Q[2]}if(S==="bundled"){return'<em class="translate" wl:translate="label.flc.bundled.direction'+parseInt(R,10)+'">'+A.translateParametrized("label.flc.bundled.direction"+parseInt(R))+"</em>"}else{return"<em>"+(parseInt(R,10)+1)+"</em>"}};YAHOO.widget.DataTable.Formatter.flightStops=function(U,V,T){if(!T){return""}var S;if(A.Lang.isArray(T)){S=T.length}else{S=A.DataType.Number.parse(T)}if(S>0){var R=[];for(var Q in T){R[Q]=A.formatAirport(T[Q],N)}S+=" ("+R.join(", ")+")"}return S};YAHOO.widget.DataTable.Formatter.rowFormatter=function(Q,R){M.call(this,Q,R);return true};YAHOO.widget.DataTable.Formatter.mcRowFormatter=function(Q,T){var S=A.one(Q);var R=T.index;if(R==null){S.addClass("emptyTableRow")}else{if(A.Lang.isArray(R)){R=R[0]}if(R===0){S.addClass("first")}else{S.addClass("rest")}}M.call(this,Q,T);return true};var M=function(Q,V){var T=V.pricePerPerson;var S=V.index;var U=this.getContainerEl().id.split("-")[1];var R;if(T&&T.itineraryData){R={segments:T.itineraryData.segments}}A.WlSelectFlights.DataTable.EventHandlers.storeData(this.getContainerEl().id,V.getId(),{index:S,direction:U,data:R})};function C(T,Q){var S=T[Q];var R;if(A.Lang.isArray(S)){if(/departureDate/.test(Q)){R=S[0]}if(/arrivalDate/.test(Q)){R=S[S.length-1]}}else{R=S}return O(R)}function O(Q){return'<span class="translate" wl:date="'+Q+","+I+'">'+A.DataType.Date.format(new Date(Q),{format:I})+"</span>"}function G(W,X,R){var V=X.replace("DateAndCode","");var U=W[V+"Date"];var S=O(U);var T=W[V+"Code"];var Q=J(W,X);return'<span class="airport_code">'+A.formatAirport(T,R)+"</span>"+S+Q}function J(U,T){if(/arrival/.test(T)){var R=U.arrivalDate;var V=U.departureDate;var S=A.DataType.Date.parse(V);var Q=A.DataType.Date.parse(R);if(Q.getDate()!==S.getDate()){return A.getHtml("flc","_nextDayIndicator")}}return""}function H(W,X,R){var T="";var U=R?'<a href="#">':"";var Q=R?"</a>":"";if(A.Lang.isArray(W)){for(var S=0;S<W.length;S++){var V=X&&X[S]?X[S]:"";if(S===0){T+='<p class="flight-number">'+U+V+" "+W[S]+Q+"</p>"}else{T+='<p class="flight-number">'+U+V+" "+W[S]+' <img alt="Connecting Flight" src="'+sabre.config.global.commonResourcesPath+'images/logo-tiny.gif">'+Q+"</p>"}}}else{T+='<p class="flight-number">'+U+X+" "+W+Q+"</p>"}return T}function P(Q,R){return H(Q,R,true)}function E(S,T,R){var Q="label.flc.durationFormat|"+Math.floor(R/3600000)+"|"+Math.ceil((R%3600000)/60000);return R?'<p class="translate" wl:translate="'+Q+'">'+A.translateParametrized(Q)+"</p>":""}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-eventhandlers",function(A){A.WlSelectFlights.DataTable.EventHandlers=A.WlSelectFlights.DataTable.EventHandlers||(function(){var C={};function F(G,I,H){C[G]=C[G]||{};C[G][I]=H}function D(G,H){return C[G]&&C[G][H]}function E(H,I){var G=H.replace("#","");C[G]=C[G]||{};I(H,C[G])}function B(G){C[G]={}}return{storeData:F,clearStoredData:B,attachHandlers:E,getStoredData:D}}())},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-common",function(A){A.WlSelectFlights.DataTable.selectedBasketHashRef=A.WlSelectFlights.DataTable.selectedBasketHashRef||{};A.WlSelectFlights.DataTable.selectedBasketPrice=A.WlSelectFlights.DataTable.selectedBasketPrice||{};A.WlSelectFlights.DataTable.Common=function(s,r,I){var e=this;var p=s.compInstConfig;var O=p.flightListCurrencyOrder?p.flightListCurrencyOrder.toLowerCase():"before";var Y=p.flightListMilesPosition?p.flightListMilesPosition.toLowerCase():"before";var U=p.showFaresOnExchange;var F=s.initData.flightExchanged;var h="_flightDetailsOverlay";var C="_flightDetailsOverlayRow";var c="_marketingTextOverlay";var d="_fareIndicatorTextOverlay";var P="_compareBenefitsOverlay";var B=[];var N=s.htmlBody[s.state].dataTable.overlayColumnDefs;var Q={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","wetLeaseCarrier"]};var E={fields:["airlineCodes","departureDate","departureCode","arrivalDate","arrivalCode","index","wetLeaseCarrier"]};var T=s.state==="lazy"?"lazy":I==="multicity"?"bundled":I;var o=A.WlSelectFlights.DataTable.selectedBasketHashRef;var W=A.WlSelectFlights.DataTable.selectedBasketPrice;var G="flight-fare";e.itineraryPartsCount=s.initData.airSearchCriteria.itineraryAirportPairs.length;var a=s.compInstConfig.tableColumns.split(",");A.Array.each(a,function(u,t){a[t]=A.Lang.trim(a[t])});function R(u,v,t){if(!u.one("#dtcontainer-"+v)){u.append('<div id="dtcontainer-'+v+'"></div>')}A.Event.purgeElement("#dtcontainer-"+v,true);A.WlSelectFlights.DataTable.EventHandlers.attachHandlers("#dtcontainer-"+v,t);return"dtcontainer-"+v}function H(u,z,AC,t,y){var AA=z+t;var AB=A.one("#"+AA);if(!AB){if(!y){var v=r.getPartial(AC,{id:z});u.append(v)}}var x=new YAHOO.widget.Dialog(AA,{visible:false,draggable:false,zIndex:520,close:true});var w=true;x.showEvent.subscribe(function(AD){A.one(this.element).translate();A.on(AA+"|click",function(AF){if(w){w=false}else{var AE=AF.target;if(!AE.inRegion(x.element,true)){x.hide()}}},A.one("#ROOT"))});x.hideEvent.subscribe(function(){A.detach(AA+"|click");w=true});B[AC]=x;x.render(document.body);return A.one("#"+AA)}function l(u,AA,AC,t,z){var AB=AA+t;var x=A.one("#"+AB);if(!x){if(!z){var v=r.getPartial(AC,{id:AA});u.append(v)}}var y=new YAHOO.widget.Dialog(AB,{visible:false,draggable:false,zIndex:520,close:true});var w=true;y.showEvent.subscribe(function(AD){A.one(this.element).translate();A.on(AB+"|click",function(AF){if(w){w=false}else{var AE=AF.target;if(!AE.inRegion(y.element,true)){y.hide()}}},document)});y.hideEvent.subscribe(function(){A.detach(AB+"|click");w=true});B[AC]=y;y.render(document.body);return A.one("#"+AB)}function q(u,v){var t=H(u,v,h,"-flightDetails",true);t.addClass("modal flight-details")}function V(u,x,t){var w=u;var v=x;t.all(".view-seats").on("click",function(AD){AD.preventDefault();var AB=AD.currentTarget;if(v===null){var AF=w[AB.ancestor("tr").get("id")];var AA=J(AB.ancestor("tr").get("id"));var y=0}else{var AF=w[v];var AA=J(v);var y=D(AD)}var AC=AF.data;var AE=AC.segments;if(AF.direction=="multicity"||AF.direction=="bundled"){var z=b(w,v!=null?v:AB.ancestor("tr").get("id"));y=y+z.segmentIndexOffset;AE=z.segments}r.fireEvent("view-seats",{basketsHashRef:AC.basketsRef,rbdsAndPrices:AA,selectedSegmentIndex:y,segmentList:AE,selectedBasketHashRef:K(I,AC.basketsRef)})})}function b(x,v){var w=new Array();var u=0;var y=true;var t=v.substring(0,v.lastIndexOf("-"));for(var z in x){var AB=z.substring(0,z.lastIndexOf("-"));if(AB==t){if(z==v){y=false}for(var AA in x[z].data.segments){if(y){u++}w.push(x[z].data.segments[AA])}}}return{segments:w,segmentIndexOffset:u}}function J(v){var u=A.one("#"+v).all(".price");var x=new Array();var t=new Array();var w=new Array();x.push(w);x.push(t);u.each(function(y){if(!g(y)){w.push(y.getAttribute("fare-family-key"));if(y.one(".prices-all")==null){t.push("soldOut")}else{if(y.hasClass("insufficient-miles")){t.push("insufficientMiles")}else{if(y.hasClass("invalid-flight")){t.push("invalidFlight")}else{t.push(y.one(".prices-all")._node.outerHTML.replace("&nbsp;"," "))}}}}});return x}function g(t){return !t.hasAttribute("fare-family-key")||t.getAttribute("fare-family-key")==="default"}function D(t){allSeatsLinks=A.all(".view-seats")._nodes;index=0;for(seatsLink in allSeatsLinks){if(allSeatsLinks[seatsLink]===t.currentTarget._node){return index}index++}return 0}function k(AJ,AK,u,AE,AF,z){if(!B[h]){q(A.one("body"),AJ)}var AD=B[h];if(AD){X();var AL=A.templateHtml.flc[C];var AA=[];for(var AH=0;AH<AE.length;AH++){var x=AE[AH];var t={};for(var AG=0;AG<u.length;AG++){var v=u[AG];t[v.key+"_"+v.formatter]=YAHOO.widget.DataTable.Formatter[v.formatter](x,v.key,x[v.key])}AA.push(r.replaceData(t,AL))}var w=A.templateHtml.flc[h];var AI=r.replaceData({id:AJ,tableRows:AA.join("")},w);AD.setBody(AI);var AB=A.isCurrentLanguageRtl();var AC=AB?"tr":"tl";var y=AB?"br":"bl";AD.cfg.setProperty("context",[A.Node.getDOMNode(AK),y,AC,["beforeShow","windowResize"],[0,0]]);AD.show();V(AF,z,A.one(".flight-details"))}}function X(){B[h].hide()}function K(w,x){var v=A.WlSelectFlights.DataTable.selectedBasketHashRef[w];if(v!=null){for(var u in x){var t=x[u];if(t){if(t.brandedBasketHashRef&&t.brandedBasketHashRef==v){return v}}}}return null}function Z(u){e.createFareIndicatorTextOverlay(A.one("body"));var x=e.overlayContainers;if(x[d]){var v=u.currentTarget;var AA=v._node.getAttribute("data-translationkey");var w=x[d];var z=A.one(w.element);var AF=z.one(".marketingOverlayContent");var AG=A.Node.create("<span wl:translate="+AA+"></span>");AG.addClass("translate");AF.append(AG);AF.translate();var AE=r.node.get("id");var AC=v.get("id");var AD=YAHOO.util.Dom.getXY(AE)[0];var AI=YAHOO.util.Dom.getXY(AC)[0];var AH=r.node.get("offsetWidth");var y="tl";var t="br";var AB=3;if(AI>=AD+AH/2){y="tr";t="bl";AB=-AB}w.cfg.setProperty("context",[AC,y,t,["beforeShow","windowResize"],[AB,-23]]);f(z)}}function m(w){var v=A.getCurrentTranslations();var t=w.marketingText;var u=v[t];if(u===undefined){u=t}else{u='<span wl:translate="'+t+'" class="translate">'+u+"</span>"}return u.replace(/&apos;/g,"'")}function f(t){t.setStyle("opacity",0);t.setStyle("visibility","visible");var u=new A.Anim({node:"#"+t.get("id"),from:{opacity:0},to:{opacity:1},duration:0.3});u.run()}A.WlSelectFlights.DataTable.Formaters=A.WlSelectFlights.DataTable.Formaters||function(){A.WlSelectFlights.DataTable.CommonFormatters(p);return true}();function L(AA,u){AA.preventDefault();var v=AA.currentTarget;var w=v.ancestor("tr").get("id");var t=u[w];var z=t.index;var AB=t.direction;var y=t.data;if(!AA.target.hasClass("price")&&!AA.target.hasClass(G)){if(!y){if(A.Lang.isArray(z)){y=s.initData.offers[z[1]].parts[z[0]]}else{y=(AB==="both"?s.initData.outbounds[z]:s.initData[AB][z])}}var AC=s.compInstConfig.overlayTableColumns.split(",");var x=M(N,AC);k(AB,v,x,y.segments,u,w)}}function M(u,AB){var w=[];var x=[],z,t;for(t in u){var AA=u[t].key;var y=A.Array.indexOf(AB,AA);if(y>=0){x[y]=u[t]}}for(z=0;z<=x.length;z++){if(A.Lang.isObject(x[z])){var v=w.length;w[v]=x[z]}}return w}function n(AA,u){AA.preventDefault();var v=AA.currentTarget;var w=v.ancestor("tr").get("id");var t=u[w];var z=t.index;var AC=t.direction;var y=t.data;if(!y){if(A.Lang.isArray(z)){y=s.initData.offers[z[1]].parts[z[0]]}else{y=(AC==="both"?s.initData.outbounds[z]:s.initData[AC][z])}}var x=AA.target.getAttribute("index");var AD=y.segments[x];var AB=new A.widgets.OnTimePerformanceWidget(s,AD);AB.show()}function S(u){if(!F||(F&&U)){var t=u.textValue?Y:O;return A.formatPrice(u,{currencyCodePosition:t,priceTemplate:"<em> {price} </em>"})}return""}e.responseSchema=function(){return E}();e.overlayColumns=function(){return N}();e.overlayResponseSchema=function(){return Q}();e.configurationColumns=function(){return a}();e.flightDetailsOverlayContainerName=function(){return h}();e.marketingTextOverlayContainerName=function(){return c}();e.fareIndicatorTextOverlayName=function(){return d}();e.compareBenefitsOverlayContainerName=function(){return P}();e.overlayContainers=function(){return B}();e.getSelectedHashRef=function(){return o[T]};e.getSelectedBasketPrice=function(){return W[T]};e.resetSelection=function(){o[T]=null;W[T]=null};e.createDataTableContainer=R;e.createOverlay=H;e.createFareIndicatorOverlay=l;e.showFlightDetailsOverlay=k;e.hideFlightDetailsOverlay=X;e.showFareIndicatorTextOverlay=Z;e.formatPrice=S;e.commonEventHandlers=function(u,v){var t=A.one(u);if(t){t=t.get("parentNode");if(s.initData.onTimePerformanceAvailable){A.delegate("click",n,t,".flight-number",A,v);A.delegate("click",n,t,".flight-number-and-direction",A,v);A.delegate("click",L,t,".flight-number-details",A,v);V(v,null,t)}else{A.delegate("click",L,t,".flight-number",A,v);A.delegate("click",L,t,".flight-number-and-direction",A,v);V(v,null,t)}}e.createAdvisorsSuccessHandler=function w(AA,z,AB,y){return function x(AL,AE){var AF="flight-advisory-"+y+"-row";var AK=A.one("#"+AF);var AI=y+"-selected-with-advisors";var AH=A.all("."+AI);AH.each(function(AO){AO.removeClass(AI)});if(AK){AK.remove(false)}var AG=AE.partials;if(AG){var AJ=AG[AB];if(AJ.length>0){var AC=A.one("#"+AA);var AD=AC.one("div");AD.addClass(AI);var AN=document.createElement("tr");AN.id=AF;var AM=document.createElement("td");AM.colSpan=1000;AM.innerHTML=A.decodeHtmlEntities(AJ);AN.appendChild(AM);z.insert(AN,"after")}}}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-multicity",function(A){A.WlSelectFlights.DataTable.Multicity=function(C,K,P){var H=this;A.augment(H,A.WlSelectFlights.DataTable.Common,false,null,[C,K,P]);var I="__flightAdvisorOutboundRow";var T=H.fareIndicatorTextOverlayName;var M=H.overlayContainers;var L;var F=0;var R=[];var N=H.responseSchema;var G=C.compInstConfig.bundledAndMulticityTablesColumns.split(",");A.Array.each(G,function(V,U){G[U]=A.Lang.trim(G[U])});function E(U){return H.createDataTableContainer(U,P,function(V,W){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(V);A.delegate("click",D,V,"td.multicityPrice",A,W);H.commonEventHandlers(V,W);B()})}H.applyEvents=function(W){var U=E(W);var V=C.initData.offers;S(V,U);K.getDomEvents()};function S(Z,W){var Y,U=Z.length;for(Y=0;Y<U;Y++){A.WlSelectFlights.DataTable.EventHandlers.storeData(W,"td-"+Y,{index:[0,Y,Z.dynamicState],basketHashRef:Z[Y].basketHashRef,price:Z[Y].offerPrice});var a=Z[Y].parts;for(var X=0,V=a.length;X<V;X++){A.WlSelectFlights.DataTable.EventHandlers.storeData(W,"tr-"+Y+"-"+X,{index:Y,direction:P,data:a[X]})}}}function Q(X){var b=[],Z,W,V;for(W in X.offers){if(W>0){b[b.length]={}}var c=X.offers[W];var a=true;for(Z in c.parts){var Y=c.parts[Z];var U=b.length;b[U]={};for(V in Y.itineraryPartData){b[U][V]=Y.itineraryPartData[V]}if(a===true){b[U].pricePerPerson={basketHashRef:c.basketHashRef,price:c.offerPrice,discountApplied:c.discountApplied,negotiatedFare:c.negotiatedFare,moreMilesRequired:c.moreMilesRequired,seatsRemaining:c.seatsRemaining,disabled:c.disabled};a=false}b[U].index=[Z,W,X.dynamicState]}R[W]=c.parts.length}return b}function J(){A.all("tr.rest td.yui-dt-col-pricePerPerson").remove();A.all("tr.first td.yui-dt-col-pricePerPerson").each(function(V,U){V.setAttribute("rowspan",R[U]||1)})}function B(){var U=A.all(".price-cell");U.each(function(W){var X=W.one(".content-holder");var V=W.get("offsetHeight");X.setStyle("height",V)})}H.hideFareIndicatorTextOverlay=function(U){if(M[T]){M[T].destroy(true)}};H.createFareIndicatorTextOverlay=function(U){H.createFareIndicatorOverlay(U,"fareIndicator",T,"-marketingTextDetails")};H.showCompareBenefitsOverlay=function(W,V){if(!M[_compareBenefitsOverlayContainerName]){H.createCompareBenefitsOverlay(A.one("body"),V)}W.preventDefault();A.log("show compare benefits");if(M[_compareBenefitsOverlayContainerName]){var U=M[_compareBenefitsOverlayContainerName];U.cfg.setProperty("fixedcenter",true);U.cfg.setProperty("modal",true);U.show()}};function D(a,U){var X=a.currentTarget;var W=X.get("id");var d=U[W];var c=d.basketHashRef;var Y=d.price;var Z=d.index;var V=C.initData.offers[Z[1]];a.stopImmediatePropagation();var b=X.one("input");if(!b){return }b.set("checked",true);K.showProgressOnSelectFlights();C.initData.multicitySelectedBasketHash=c;A.WlSelectFlights.DataTable.selectedBasketHashRef.bundled=c;A.WlSelectFlights.DataTable.selectedBasketPrice.bundled=Y;O(W,d);K.flightWasSelected("multicity",V.parts,c)}function O(W,Y){var X="outbound";var V=I;var c=A.one("#"+W).ancestor();var U=c.next(".emptyTableRow");var a=U==null?a=c.ancestor().one("> tr:last-of-type"):a=U.previous();var b="flight-advisory-"+X+"-row";a=a.getAttribute("id")==b?a.previous():a;var Z={data:{basketHashRefs:[Y.basketHashRef],direction:X,requestPartials:[V]},on:{success:H.createAdvisorsSuccessHandler(W,a,V,X)}};K.fireEvent("to-ajax",{cfg:Z,actionCode:"getAdvisors"})}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable-lazy",function(A){A.WlSelectFlights.DataTable.Lazy=function(B,M,V,E){var J=this;var N;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[B,M,V]);var X=J.fareIndicatorTextOverlayName;var D="__lazyViewWrapperInbounds";var L="__flightAdvisorOutboundRow";var W="__flightAdvisorInboundRow";var I=E.lazyStep;var K=B.initData.selectedParts[I];var F=0;var P=J.responseSchema;var O=J.overlayContainers;P.fields.push("step","pricePerPerson");var H=B.compInstConfig.tableColumns.split(",");A.Array.each(H,function(Z,Y){H[Y]=A.Lang.trim(H[Y])});function C(Y){return J.createDataTableContainer(Y,V,function(Z,a){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(Z);A.delegate("click",R,Z,"td.lazyPrice",A,a);J.commonEventHandlers(Z,a)})}J.applyEvents=function(a,Z){var Y=C(a);T(Z,Y);M.getDomEvents()};J.destroy=function(){if(N){var Y=A.one(N.getContainerEl());N.destroy();N=null;Y.purge(true);Y.remove()}};J.getSelectedHashRef=function(){return K};J.resetSelection=function(){K=null};J.createFareIndicatorTextOverlay=function(Y){J.createFareIndicatorOverlay(Y,"fareIndicator",X,"-marketingTextDetails")};J.hideFareIndicatorTextOverlay=function(Y){if(O[X]){O[X].destroy(true)}};function T(b,Z){var d=b;var a,Y=d.length;for(a=0;a<Y;a++){var c={departureDate:d[a].itineraryPart.itineraryPartData.departureDate,segments:d[a].itineraryPart.segments,fareIndicators:d[a].itineraryPart.fareIndicators};A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"td-lazy-"+I+"-"+a,{step:I,index:a,brandedBasketHashRef:d[a].basketHashRef,offerHashCode:d[a].offerHashCode,itineraryData:c,price:d[a].minPrice});A.WlSelectFlights.DataTable.EventHandlers.storeData(Z,"tr-lazy-"+I+"-"+a,{index:a,direction:V,data:c})}}function U(d){var b=[],a,Z;for(a in d){var c=d[a];var Y=b.length;b[Y]=b[Y]||{};for(Z in c.itineraryPart.itineraryPartData){b[Y][Z]=c.itineraryPart.itineraryPartData[Z]}b[Y].pricePerPerson={basketHashRef:c.basketHashRef,offerHashCode:c.offerHashCode,price:c.minPrice,discountApplied:c.discountApplied,negotiatedFare:c.negotiatedFare,moreMilesRequired:c.moreMilesRequired,seatsRemaining:c.seatsRemaining,disabled:c.disabled,itineraryData:{departureDate:c.itineraryPart.itineraryPartData.departureDate,segments:c.itineraryPart.segments}};b[Y].index=a}return b}function R(c,Y){c.stopImmediatePropagation();var a=c.currentTarget;var d=a.one("input");if(!d||d.get("disabled")){return }d.set("checked",true);var Z=a.get("id");var h=Y[Z];var f=h.brandedBasketHashRef;var g=h.offerHashCode;K=g;M.showProgressOnSelectFlights();M.fireEvent("lazy-flight-selection",{data:{step:h.step,index:h.index,selectedHashRef:f,offerHashCode:g,itinerary:h.itineraryData}});if(!f&&g&&M.rendered){M.showProgressOnSelectFlights();var b={data:{basketHashRefs:[g],requestPartials:[D]},on:{success:S}};M.fireEvent("to-ajax",{cfg:b,actionCode:"itineraryPartSelected"})}Q(Z,h);M.unblockSubmitIfFlightsSelected()}function Q(c,Z){var b=Z.step==1?"inbound":"outbound";var d=Z.step==1?W:L;var a=A.one("#"+c).ancestor();var Y={data:{step:Z.step,offerIndex:Z.index,requestPartials:[d]},on:{success:J.createAdvisorsSuccessHandler(c,a,d,b)}};M.fireEvent("to-ajax",{cfg:Y,actionCode:"getAdvisors"})}function G(Z,Y){return Z==="both"?B.initData.outbounds[Y]:B.initData[Z][Y]}var S=function(c,a){var b=a.partials;if(b){var Z=b[D];var Y=M.node.one("#lazy"+(I+1));if(Y){Y.set("innerHTML",A.decodeHtmlEntities(Z));M.renderLazySelectFlights(I+1,a.model.offers);M.hideProgressOnSelectFlights()}}}}},"1.0.0",{requires:[]});YUI.add("wl-select-flights-datatable",function(A){A.WlSelectFlights.DataTable.Regular=function(C,N,Y){var J=this;A.augment(J,A.WlSelectFlights.DataTable.Common,false,null,[C,N,Y]);var O;var R="";var f="_compareBenefitsOverlayTableHeaderCell";var E="_compareBenefitsOverlayTableCell";var d="_compareBenefitsOverlayTable";var K="__flightAdvisorOutboundRow";var a="__flightAdvisorInboundRow";var I=J.marketingTextOverlayContainerName;var T=J.compareBenefitsOverlayContainerName;var g=J.fareIndicatorTextOverlayName;var P=J.overlayContainers;var B=null;var Z=null;function D(h){return J.createDataTableContainer(h,Y,function(k,l){A.WlSelectFlights.DataTable.EventHandlers.clearStoredData(k);A.delegate("click",F,k,"td.price",A,l);J.commonEventHandlers(k,l)})}J.applyEvents=function(k){R=D(k);var h=C.initData[Y]||C.initData.outbounds;var l=C.initData[Y+"FareFamilies"]||C.initData.outboundsFareFamilies;e(h,l,R);N.fire("widget-rendered",Y)};J.translateBrands=function(h){if(C.compInstConfig.brandedDescriptionEnabled){var k=C.initData[Y+"FareFamilies"]||C.initData.outboundsFareFamilies;A.Array.each(k,function(n){var m=U(n.brandLabel);if(m){var l=h.one(".translate-brand-name-"+n.brandId);l.setContent(m)}})}};J.showTableMessage=function(h,k){O.showTableMessage(h,k)};J.getRow=function(h){return O.getTrEl(h)};function e(p,r,k){var o,q,l=p.length,h=r.length;for(o=0;o<l;o++){A.WlSelectFlights.DataTable.EventHandlers.storeData(k,"tr-"+Y+"-"+o,{index:o,direction:Y,data:p[o]});for(q=0;q<h;q++){var m=r[q].brandId;A.WlSelectFlights.DataTable.EventHandlers.storeData(k,Y+"-"+m,{ffKey:m});if(p[o].basketsRef[m]&&!H(p[o].basketsRef[m].brandedBasketHashRef)){A.WlSelectFlights.DataTable.EventHandlers.storeData(k,"td-"+Y+"-"+m+"-"+o,{fareFamily:m,index:o,direction:Y,brandedBasketHashRef:p[o].basketsRef[m].brandedBasketHashRef,price:p[o].basketsRef[m].prices})}}}}function H(k){var h=N.getValidBasketRefs(Y);return A.Lang.isArray(h)&&A.Array.indexOf(h,k)===-1}function M(t){var u=P[T];var l=C.initData[t+"FareFamilies"]||C.initData.outboundsFareFamilies;var n=A.templateHtml.flc[f];var w=A.templateHtml.flc[E];var m=A.templateHtml.flc[d];var o=[];var q=[],p;for(p=0;p<l.length;p++){var v=U(X(l[p].marketingTexts));if(v!=""){var r={key:l[p].brandId,label:U(l[p].brandLabel),text:v};o.push(N.replaceData(r,n));q.push(N.replaceData(r,w))}}if(A.Object.size(q)>0){var s=N.replaceData({tableHeader:o.join(""),tableRow:q.join("")},m);A.one("#"+t+"-compareBenefitsOverlayTable").set("innerHTML",s);if(A.UA.ie>0){var h=A.one(u.element).one("table").getComputedStyle("width");h=parseInt(h,10);var k=A.one(u.element).get("winWidth");h=h>k*0.9?k*0.9:h;u.cfg.setProperty("width",h)}u.fireEvent("changeContent")}else{if(A.UA.ie>0){u.cfg.setProperty("width","0px")}}}function F(o,h){if(o.target.get("nodeName")==="LABEL"){return }o.stopImmediatePropagation();var k=o.currentTarget;var m=k.one("input");if(!m||m.get("disabled")){return }m.set("checked",true);var n=k.get("id");var l=h[n];W(n,l);Q(n,l)}J.updateDataTableFromSelectedBasketHash=function(n,p,o){var l="#"+p+o;var k=n.one(l);if(k){var h=k.ancestor("td").get("id");var m=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+p,h);C.initData[p+"SelectedBasketHash"]=o;A.WlSelectFlights.DataTable.selectedBasketHashRef[p]=o;A.WlSelectFlights.DataTable.selectedBasketPrice[p]=m.price}};J.reselectFlights=function(n,q,o,p){var l="#"+q+o;var k=n.one(l);if(k){var h=k.ancestor("td").get("id");var m=A.WlSelectFlights.DataTable.EventHandlers.getStoredData("dtcontainer-"+q,h);if(L(m.price,p)){k.set("checked",true);W(h,m)}else{k.set("checked",false)}}};function L(k,h){return A.JSON.stringify(k)===A.JSON.stringify(h)}function W(h,r){var n=r.brandedBasketHashRef;var k=r.price;var m=r.direction;var l=r.index;var o=r.fareFamily;var p=G(m,l);N.showProgressOnSelectFlights();C.initData[m+"SelectedBasketHash"]=n;A.WlSelectFlights.DataTable.selectedBasketHashRef[m]=n;A.WlSelectFlights.DataTable.selectedBasketPrice[m]=k;var q=A.merge(p,{fareFamily:o,price:k,departureDate:p.itineraryPartData.departureDate});N.flightWasSelected(m,q,n)}function Q(n,k){var m=k.direction=="inbounds"?"inbound":"outbound";var o=k.direction=="inbounds"?a:K;var l=A.one("#"+n).ancestor();var h={data:{basketHashRefs:[k.brandedBasketHashRef],direction:k.direction,requestPartials:[o]},on:{success:J.createAdvisorsSuccessHandler(n,l,o,m)}};N.fireEvent("to-ajax",{cfg:h,actionCode:"getAdvisors"})}function G(k,h){return k==="both"?C.initData.outbounds[h]:C.initData[k][h]}function X(l){var h=[],k;for(k=0;k<l.length;k++){var n=l[k].languageId;var m=l[k].marketingText;h.push({languageId:n,marketingText:A.decodeHtmlEntities(m)})}return h}function c(m){var l=A.getCurrentTranslations();var h=m.marketingText;var k=l[h];if(k===undefined){k=h}else{k='<span wl:translate="'+h+'" class="translate">'+k+"</span>"}return k.replace(/&apos;/g,"'")}function U(l){var k=A.translations.lang;k=k.toLowerCase();var h="";if(l&&A.Lang.isArray(l)){A.Array.some(l,function(m){if(k===m.languageId.toLowerCase()){h=c(m);return true}})}return h}function V(l){var k=A.translations.lang;k=k.toLowerCase();var h="";if(l&&A.Lang.isArray(l)){A.Array.some(l,function(m){if(k===m.languageId.toLowerCase()){h=m.brandLabelUrl;return true}})}return h}function S(m,l){var q=m.pageX;var o=m.pageY;l=A.one(l);var n=l.get("region").top;var p=l.get("region").bottom;var k=l.get("region").left;var h=l.get("region").right;return q>k&&q<h&&o>n&&o<p}function b(h){if(h){h.cancel()}}J.createMarketingTextOverlay=function(k,l){J.createOverlay(k,l,I,"-marketingTextDetails");var h=k.one("#"+l+"-compare-benefits-link");if(h){h.on("click",J.showCompareBenefitsOverlay,A,l)}A.on("load",function(n){var m=n.target.get("parentNode");m.removeClass("loading");m.removeClass("loading-iframe");n.target.removeClass("hidden")},".marketing-iframe")};J.createFareIndicatorTextOverlay=function(h){J.createFareIndicatorOverlay(h,"fareIndicator",g,"-marketingTextDetails")};J.createCompareBenefitsOverlay=function(h,k){J.createOverlay(h,k,T,"-compareBenefitsDetails");M(k);A.on("click",J.hideCompareBenefitsOverlay,"#"+k+"-close-compare-benefits")};J.getColumnKeyByHeader=function(h){return O.getColumn(A.Node.getDOMNode(h)).getKey()};J.getStoredColumnKey=function(h){var k=A.WlSelectFlights.DataTable.EventHandlers.getStoredData(R,h.get("id"));return k&&k.ffKey};J.showMarketingTextOverlay=function(p,s,m,r){if(!P[I]){J.createMarketingTextOverlay(A.one("body"),r)}if(P[I]){var k=P[I];var o=A.one(k.element);if(m==="hover"){A.on("marketingTextMessage|mouseout",J.hideMarketingTextOverlayIfNotInOverlayRegion,o)}if(s){if(C.compInstConfig.contentFromUrl){var l=o.one(".marketing-iframe");l.addClass("hidden");var n=l.get("parentNode");n.addClass("loading loading-iframe");l.set("src",V(s.brandLabel).replace(/&amp;/g,"&"))}else{var h=o.one(".marketingOverlayHeader");var q=o.one(".marketingOverlayText");h.set("innerHTML",U(s.brandLabel));q.set("innerHTML",U(X(s.marketingTexts)));A.translateNode(o)}k.cfg.setProperty("context",[p.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[0,-10]]);k.show()}}};J.showMarketingTextOverlayWithDelay=function(k,m,l,h){if(k.target===k.currentTarget||!k.currentTarget.contains(k.relatedTarget)){b(B);b(Z);Z=A.later(300,null,J.showMarketingTextOverlay,[k,m,l,h])}};J.hideMarketingTextOverlay=function(h){if(P[I]){P[I].hide()}};J.hideFareIndicatorTextOverlay=function(h){if(P[g]){P[g].destroy(true)}};J.hideMarketingTextOverlayIfNotInOverlayRegion=function(h){if(!h.currentTarget.contains(h.relatedTarget)){b(B);b(Z);B=A.later(100,null,function(k){if(P[I]&&!S(k,P[I].element)){J.hideMarketingTextOverlay()}},h)}};J.showCompareBenefitsOverlay=function(l,k){if(!P[T]){J.createCompareBenefitsOverlay(A.one("body"),k)}l.preventDefault();A.log("show compare benefits");if(P[T]){var h=P[T];h.cfg.setProperty("fixedcenter",true);h.cfg.setProperty("modal",true);h.show()}};J.hideCompareBenefitsOverlay=function(h){if(P[T]){P[T].hide()}}}},"1.0.0",{requires:[]});YUI.add("onTimePerformanceWidget",function(B){var A=function(E,R){var L=this;var H=B.one("body");var C="onTimePerformance";var M;if(E.otpDialog){E.otpDialog.hide();E.otpDialog.destroy()}var G=sabre.config.satConfiguration.onTimePerformanceConfiguration;var N="_onTimePerformanceOverlay";var D=G.width;var Q=G.height;var O=P();var F={visible:false,draggable:false,zIndex:520,close:true,fixedcenter:true};if(G.displayInNewWindow){window.open(O,"FlightPerformance","width="+D+", height="+Q)}else{var J={link:O,width:D,height:Q};var I=E.component.getPartial(N,J);H.append(I);M=new YAHOO.widget.Dialog(C,F);var K=true;M.showEvent.subscribe(function(){B.one(this.element).translate();B.on(C+"|click",function(U){if(K){K=false}else{var T=U.target;if(!T.inRegion(M.element,true)){M.hide()}}},document)});M.hideEvent.subscribe(function(){B.detach(C+"|click");K=true});M.render(document.body);E.otpDialog=M}function P(){var V=B.DataType.Date.parse(R.departureDate);var T={flightNumber:R.flightNumber[0],origin:R.departureCode,destination:R.arrivalCode,departureDate:S(V,G.dateFormat),departureTime:S(V,G.timeFormat)};var U=B.decodeHtmlEntities(G.url);return E.component.replaceData(T,U)}function S(T,U){return B.DataType.Date.format(T,{format:U})||null}L.show=function(){M.show()}};B.widgets=B.widgets||{};B.widgets.OnTimePerformanceWidget=A},"1.0.0",{requires:[]});YUI.add("wl-flc",function(A){A.components.Flc=function(AI){var b=this;var N={};var Ac;var T;var S;var Ad=AI.compInstConfig;AI.state=AI.initData.dynamicState||"oneway";var n,c;AQ();var O,F,AU,o,AW,G,I,e,AA,AP;var AT;b.onCreate=function(){k(AI.initData);X(AI,b.node,function(){D();AS()});AG()};function Ae(){A.Object.each(N,Ah)}function Ah(Ai){if(!Ai){return }if(P(Ai)){return }var Ak=Ai.direction;if(Ak==="both"){Ak="outbounds"}var Aj;if(Ak==="outbounds"){Aj=O.outboundsSelectedBasketHash}else{if(Ak==="inbounds"){Aj=O.inboundsSelectedBasketHash}}if(Aj){Ai.updateDataTableFromSelectedBasketHash(Aj)}}b.onRenderState={async:function(){},oneway:function(){z();u();AM();AC();AE()},multicity:function(){AC();AE();u()},bundled:function(){AE();u()},unbundled:function(){z();u();AM();AC();AE()},exchange:function(){z();AM();AE()},lazy:function(){AC();u();AE()}};function AB(){if(AI.state==="lazy"&&N[1]){delete N[1]}}b.incomingEvents={refresh_list:function(Ai){if(AI.state==="unbundled"){AH(Ai)}else{b.hideProgressOnSelectFlights()}AS()},reset_selection:function(Ai){AB();d(AY);h();AS()},refresh_lazy_flc:function(Ai){var Aj=Ai.data.selectedHashRefs;V(Aj);AS()},"ff-logged-in":function(Aj){var Ai=Aj.data&&Aj.data.forceRedemptionFaresReload;if(Ai||(AI.initData.airSearchCriteria.awardBooking&&!AI.initData.invalidRedemptionFaresDisabled)){AI.initData.invalidRedemptionFaresDisabled=true;M()}b.fireEvent("unblock_submit",{type:"login"})},"logged-out":function(Ai){if(AI.initData.airSearchCriteria.awardBooking){AI.initData.invalidRedemptionFaresDisabled=false;b.fireEvent("block_submit",{type:"login"})}},"block-list":function(Ai){b.showProgressOnSelectFlights()},refresh_search:function(Ai){d(p);Ab();AS()},change_lang:function(Ai){d(AN)},cart_cleared:function(Ai){if(AI.initData.airSearchCriteria.journey==="ROUND_TRIP"){L(T);L(S)}}};b.on("widget-rendered",function(Aj){N[Aj].rendered=true;var Ai=true;for(var Ak in N){if(!N[Ak].rendered){Ai=false}}if(Ai){Ae();b.getDomEvents()}});function AG(){A.on("pageHtmlLoaded",function(){b.node.all(".enable-when-pageHtmlLoaded").each(function(Ai){Ai.set("disabled","")})})}function AQ(){var Ai=365;var Ak=new Date(sabre.config.global.currentTimeInMillis);Ak=Ak.getTime()-(Ak.getTime()%(1000*60*60*24))+1000*60*Ak.getTimezoneOffset();n=A.DataType.Date.parse(Ak);var Aj=new Date(sabre.config.global.currentTimeInMillis);Aj=Aj.getTime()-(Aj.getTime()%(1000*60*60*24));Aj=A.DataType.Date.parse(Aj);Aj=Aj.setDate(Aj.getDate()+Ai);c=A.DataType.Date.parse(Aj)}function k(Ai){AI.initData=Ai;O=Ai;F=O.inboundCalendarPrices||[];AU=O.outboundCalendarPrices||[];o=O.offers||[];AW=O.flightExchanged;G=O.invalidPassengerType;I=O.outbounds||[];e=O.inbounds||[];AA=F.length&&AU.length;AP=O.airSearchCriteria.itineraryAirportPairs.length}function AE(){b.node.all(".filter_sort").on("change",Aa);b.node.all(".filter-checkbox").on("click",U)}function AF(Ai){if(Ai.indexOf("inbounds")===0){return"inbounds"}else{if(Ai.indexOf("outbounds")===0){return"outbounds"}else{return"multicity"}}}function J(Ai){return Ai==="outbounds"?0:1}function Aa(Ao){Ao.stopImmediatePropagation();var An=Ao.currentTarget.get("offsetParent");An.addClass("loading");var Aj=Ao.currentTarget.get("id");var Ap=Ao.currentTarget.get("value");var Am=AF(Aj);var Al=J(Am);var Ak=m(AI.state,Am);var Ai={data:{direction:Am,sortOption:Ap,requestPartials:[Ak]},on:{end:function(){An.removeClass("loading")},success:function(Ar,Aq){t(Al,Aq,Ak)}}};b.fireEvent("to-ajax",{cfg:Ai,actionCode:"sortFlights"})}function U(Ao){Ao.stopImmediatePropagation();var An=Ao.currentTarget.get("offsetParent");An.addClass("loading");var Aj=Ao.target.get("id");var Am=AF(Aj);var Al=J(Am);var Ak=m(AI.state,Am);var Ai={data:{direction:Am,nonStop:Ao.target.get("checked"),requestPartials:[Ak]},on:{end:function(){An.removeClass("loading")},success:function(Aq,Ap){t(Al,Ap,Ak)}}};b.fireEvent("to-ajax",{cfg:Ai,actionCode:"filterChanged"})}function V(Ai){AT=Ai.length;C(b.node,AT,O.offers,Ai);d(f)}function AY(Ai){Ai.resetSelection()}function r(Aj,Ai){b.fireEvent("render_retained",{data:{node:Aj,label:Ai}})}function AS(){var Ai=sabre.config.satConfiguration.frequentFlyer.loyaltyProviderString=="CONVERSION_LOGIC";if(Ai&&O.awardBooking&&!O.conversionRatesFound){b.fireEvent("add-messages",{data:{messages:[{id:"noConversionRatesFound",level:"warn"}]}});b.fireEvent("modify_search",{forceInitialize:true})}else{b.fireEvent("remove-messages",{data:{messages:["noConversionRatesFound"]}})}}function AL(Aj){var Ai=["ffInsufficientMiles","ffInsufficientMilesPartial"];b.fireEvent("remove-messages",{data:{messages:Ai}});if(null!==Aj&&-1!==A.Array.indexOf(Ai,Aj.id)){b.fireEvent("add-messages",{data:{messages:[Aj]}})}}function AD(Ak,Al,Ai,Aj){if(asyncExec.containsTimeoutError()){w();Y("timeout")}else{if(Aj.errorUrl){window.location.href=A.decodeHtmlEntities(Aj.errorUrl)}else{if(Aj.model){k(Aj.model);Ak.state=Ak.initData.dynamicState||"oneway";X(Ak,Al,Ai);AL(Aj.insufficientMilesMessage)}}}}function w(){b.getDomEvents()}function X(Aj,Ak,Ai){switch(Aj.state){case"async":if(asyncExec.results){AD(Aj,Ak,Ai,asyncExec.results)}else{asyncExec.callback=function(Al){AD(Aj,Ak,Ai,Al)}}break;case"exchange":A.use("wl-select-flights-datatable",function(Ap){b.flightList=new Ap.WlFlightList(Aj,b);var Al=Ak.get("parentNode");var Aq=Ap.Node.create('<div id="retained-leg"></div>');if(Aj.initData.retainInbound){Ac=new Ap.WlSelectFlights(Aj,Ak,"outbounds",b,{isFlightExchanged:AW});N.outbounds=Ac;Ac.setFirstActiveDate(n);if(Aj.initData.inbounds[0]&&Aj.initData.inbounds[0].segments[0]){var Ao=Ap.DataType.Date.parse(Aj.initData.inbounds[0].segments[0].departureDate);Ac.setLastActiveDate(Ao)}Al.append(Aq);r(Aq,"retained.inbound")}else{Al.prepend(Aq);r(Aq,"retained.outbound");var An=Ap.DataType.Date.parse(Aj.initData.outbounds[0].segments[0].departureDate);Ac=new Ap.WlSelectFlights(Aj,Ak,"inbounds",b,{isFlightExchanged:AW});N.inbounds=Ac;var Am=(An<n)?n:An;Ac.setFirstActiveDate(Am);Ac.setLastActiveDate(c)}Ai();Ac.renderHtml(Aj.initData)});break;case"unbundled":A.use("wl-select-flights-datatable",function(An){b.flightList=new An.WlFlightList(Aj,b);T=new An.WlSelectFlights(Aj,Ak,"outbounds",b,{isFlightExchanged:AW});S=new An.WlSelectFlights(Aj,Ak,"inbounds",b,{isFlightExchanged:AW});N.outbounds=T;N.inbounds=S;var Am=An.DataType.Date.parse(Aj.initData.airSearchCriteria.inboundDate);N.outbounds.setLastActiveDate(Am);var Al=An.DataType.Date.parse(Aj.initData.airSearchCriteria.outboundDate);N.inbounds.setFirstActiveDate(Al);N.outbounds.setFirstActiveDate(n);N.inbounds.setLastActiveDate(c);Ai();N.outbounds.renderHtml(Aj.initData);N.inbounds.renderHtml(Aj.initData)});break;case"multicity":case"bundled":A.use("wl-select-flights-datatable-multicity",function(Al){Ak.addClass("flights-multi");b.flightList=new Al.WlFlightList.Bundled(Aj,b,Aj.state);Ac=new Al.WlSelectFlights(Aj,Ak,Aj.state,b,{isFlightExchanged:AW});N[Aj.state]=Ac;Ai();Ac.renderHtml(Aj.initData)});break;case"lazy":A.use("wl-select-flights-datatable-lazy",function(Al){Ak.addClass("flights-lazy");b.flightList=new Al.WlFlightList.Lazy(Aj,b,"lazy");AR(Aj.initData.selectedParts,Ak);Ai()});break;default:A.use("wl-select-flights-datatable",function(Al){b.flightList=new Al.WlFlightList(Aj,b);Ac=new Al.WlSelectFlights(Aj,Ak,"both",b,{isFlightExchanged:AW});N.both=Ac;Ai();Ac.renderHtml(Aj.initData)});break}}function AR(Aj,Ai){A.use("wl-select-flights-datatable-lazy",function(Al){var Ak;for(Ak=0;Ak<=AP;Ak++){AT=Ak;if(AT==0||Aj[AT]){C(Ai,Ak,AI.initData.offers,Aj)}}})}function C(Al,Ak,Aj,Am){var Ai=Am.slice(0,Ak);N[Ak]=new A.WlSelectFlights(AI,Al,"lazy"+Ak,b,{isFlightExchanged:AW,lazyStep:Ak,hashCodesPath:Ai});b.renderLazySelectFlights(Ak,Aj)}b.renderLazySelectFlights=function(Aj,Ai){N[Aj].renderHtml(Ai[Aj]||[])};function z(){d(a);AM()}function u(){d(AK)}b.showProgressOnSelectFlights=function(){d(p)};b.hideProgressOnSelectFlights=function(){d(f)};b.unblockSubmitIfFlightsSelected=function(){AC()};b.flightWasSelected=function(Al,Ai,Aj){var Ak=AI.state==="unbundled"?"send_value_unb":"send_value";Ag();b.fireEvent(Ak,{data:{tripType:AI.state,direction:Al,itinerary:Ai,selectedBasketRefs:Aj}});b.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})};b.getValidBasketRefs=function(Aj){if(!AI.initData.flightExchanged||AI.state==="unbundled"){var Ak,Al,Ai;if(Aj=="outbounds"){Ak=N.inbounds.getSelectedHashRef();Al=AI.initData.brandedInOutMappings}else{if(Aj=="inbounds"){Ak=N.outbounds.getSelectedHashRef();Al=AI.initData.brandedOutInMappings}}if(Ak){Ai=Al[Ak]}return Ai}};function a(Ai){var Aj=AX(AI.initData);if(Ai&&Ad.brandedDescriptionEnabled){Ai.getNode().all("th.price").each(function(Al){var Ak=A.Event.getListeners(Al);var Am=b.rendered?AZ(Ai.getStoredColumnKey(Al),Aj):AZ(Ai.getColumnKeyByHeader(Al),Aj);if(!Ak&&Am&&((Am.marketingTexts&&Am.marketingTexts.length>0)||(Ad.contentFromUrl&&Am.brandLabel&&A.Lang.isArray(Am.brandLabel)&&Am.brandLabel.length>0))){if(Ad.brandedHoveringEnabled){A.on("marketingMessage|mouseover",Ai.showMarketingTextOverlayWithDelay,Al,null,Am,"hover");A.on("marketingMessage|mouseout",Ai.hideMarketingTextOverlayIfNotInOverlayRegion,Al)}else{if(Ad.brandedClickingEnabled){A.on("marketingMessage|click",Ai.showMarketingTextOverlay,Al,null,Am,"click")}}}})}}function AK(Ai){var Aj=Ai.getNode();Aj.delegate("mouseover",Ai.showFareIndicatorTextOverlay,".fare-indicator-row");Aj.delegate("mouseout",Ai.hideFareIndicatorTextOverlay,".fare-indicator-row")}function AX(Ai){var Aj=[];W(Aj,Ai.outboundsFareFamilies);W(Aj,Ai.inboundsFareFamilies);return Aj}function W(Aj,Am){var Ai;if(Am){for(Ai in Am){var Al=Am[Ai].brandId;var Ak=AZ(Al,Aj)!=null;if(!Ak){Aj.push(Am[Ai])}}}}function AZ(Ak,Aj){var Ai;for(Ai in Aj){if(Aj[Ai].brandId===Ak){return Aj[Ai]}}return null}function AN(Ai){Ai.translateBrands()}function p(Ai){Ai.showProgress()}function f(Ai){Ai.hideProgress()}function AO(Ai){Ai.disablePrev7AndNext7Buttons()}function x(){var Aj;var Ai;if(AI.state==="unbundled"){Aj=T.getCurrentDate();Ai=S.getCurrentDate()}else{if(AI.state==="exchange"){if(AI.initData.retainInbound){Aj=Ac.getCurrentDate();Ai=A.DataType.Date.parse(AI.initData.inbounds[0].segments[0].departureDate)}else{Aj=Ac.getCurrentDate();Ai=A.DataType.Date.parse(AI.initData.outbounds[0].segments[0].departureDate)}}else{Aj=Ac.getCurrentDate();Ai=null}}return{departureDate:Q(Aj),returnDate:Q(Ai)}}function K(Al){var Ak=x();var Aj=function(An,Am){k(Am.model);if(AI.initData.airSearchCriteria.journey==="ROUND_TRIP"){if(!AI.initData.flightExchanged||AI.state==="unbundled"){T.setLastActiveDate(S.getCurrentDate());S.setFirstActiveDate(T.getCurrentDate())}}D();Af(Am);R();b.translateTemplate(AI,b.node);E(Ak);AL(Am.insufficientMilesMessage);b.fireEvent("search_refreshed")};var Ai=B(q(),Al);AJ(Ak,Ai,Aj)}function L(Aj){if(Aj){var Ak=P(Aj);var Ai=Aj.getSelectedBasketPrice();if(Ak&&Ai){Aj.reselectFlights(Ak,Ai)}}}function B(Ai,Aj){if("outbounds"===Aj){Ai[0]=null}else{if("inbounds"===Aj){Ai[1]=null}}return Ai}b.handleDateChange=function(Ai){R();d(p);d(AO);K(Ai)};function m(Ak,Aj){var Ai="__"+Ak;if(Ak=="lazy"){if(Aj=="inbounds"){Ai="__lazyViewWrapperInbounds"}else{Ai="__lazyViewWrapperOutbound"}}return Ai}function t(An,Ak,Al){AI.initData=Ak.model;k(AI.initData);var Am=Ak.partials;if(Am){var Aj=Am[Al];if(AI.state==="lazy"){var Ai=b.node.one("#lazy"+(An));if(Ai){Ai.set("innerHTML",A.decodeHtmlEntities(Aj))}b.renderLazySelectFlights(An,Ak.model.offers)}else{Af(Ak,Al)}}}b.handleDatesPeriodChange=function(Ai){R();d(p);d(AO);K(Ai)};function Af(Ai,Aj){Aj=Aj||m(AI.state);b.node.purge(true);b.node.setContent(A.decodeHtmlEntities(Ai.partials[Aj]));d(function(Ak){Ak.renderHtml(AI.initData)});b.hideProgressOnSelectFlights()}function Q(Ai){return A.DataType.Date.format(Ai,{format:sabre.config.dateTimeJSONFormat})||null}function AJ(Am,Aj,Al){var Ak=m(AI.state);var Ai={data:{basketHashRefs:Aj,departureDate:Am.departureDate,returnDate:Am.returnDate,requestPartials:[Ak]},on:{success:Al,end:function(){b.hideProgressOnSelectFlights()}}};b.fireEvent("to-ajax",{cfg:Ai,actionCode:"dateChanged"})}function E(Ak){var Aj=AI.initData.airSearchCriteria.itineraryAirportPairs;var Al=[];for(var Ai=0;Ai<Aj.length;Ai++){Al.push({departureAirport:Aj[Ai].departureCode,arrivalAirport:Aj[Ai].arrivalCode,date:Ai===0?Ak.departureDate:Ak.returnDate})}b.fireEvent("update-data",{data:{itineraryParts:Al}})}function M(){R();var Aj="initialized";var Ai={data:{requestPartials:[Aj]},on:{complete:function(){d(f)},success:function(Al,Ak){AB();Z(Ak,Aj);D();if(l()){Ag()}else{b.fireEvent("search_refreshed")}}}};d(p);b.fireEvent("to-ajax",{cfg:Ai,actionCode:"updateRedemptionFares"})}function Ab(){R();var Aj="__"+AI.state;var Ai={data:{requestPartials:[Aj]},on:{complete:function(){d(f)},success:function(Al,Ak){AI.initData=Ak.model;Z(Ak,Aj);D();d(AC);b.fireEvent("search_refreshed")}}};b.fireEvent("to-ajax",{cfg:Ai,actionCode:"refreshSearch"})}function R(){b.fireEvent("block_submit")}function AC(){if(l()){Ag()}}function l(){var Ai=true;A.Object.each(N,function(Aj){if(!P(Aj)){Ai=false}});return Ai}function P(Ai){return Ai.getSelectedHashRef()}function s(Ai){return Ai.getSelectedBasketPrice()}function Ag(){b.fireEvent("unblock_submit",{data:{},forceInitialize:true})}function D(){if(v()||AV()){return }var Ai=(F&&F.length)||false;var Ak=(AU&&AU.length)||false;var Aj=I.length;var Al=e.length;switch(AI.state){case"unbundled":if(!(Aj&&Al)){if(!Ai&&!Ak){Y("noFlightsAvailableOverlay")}else{if(Ai&&!Ak){Y("noFlightsAvailableOverlayOutbound")}else{if(!Ai&&Ak){Y("noFlightsAvailableOverlayInbound")}}}}else{if(!(Ai&&Ak)){d(g)}}break;case"lazy":case"multicity":case"bundled":if(!o.length){Y("noFlightsAvailableOverlay");R()}break;case"oneway":if(!Aj&&!Ak){Y("noFlightsAvailableOverlay")}else{if(!Ak){d(g)}}break}}function d(Ai){var Aj=Array.prototype.slice.call(arguments,1);A.Object.each(N,function(Ak){Ai.apply(Ak,[Ak].concat(Aj))})}function g(Ai){Ai.hideAlternateDates()}function AM(){if((AA&&(F.length==0||AU.length==0))||(!AA&&(AU.length==0&&F.length==0))){R()}}function v(){if(G){Y("invalidPassengerType");return true}return false}function AV(){if(AI.initData.tooManyPassengerTypes){Y("tooManyPassengerTypes");return true}return false}function Y(Ai){b.fireEvent("modify_search",{errorMessage:Ai,forceInitialize:true})}function q(){var Ai=[];if(A.Lang.isObject(N.inbounds)&&A.Lang.isObject(N.outbounds)){Ai.push(N.outbounds.getSelectedHashRef());Ai.push(N.inbounds.getSelectedHashRef())}else{for(var Aj in N){Ai.push(N[Aj].getSelectedHashRef())}}return Ai}function Z(Ak,Ai){k(Ak.model);var Aj=Ak.partials;if(Aj){AI.state=AI.initData.dynamicState||"oneway";Af(Ak,Ai)}}function H(Al,Ak){var Aj=q();b.fireEvent("itinerary-selected",{basketHashRefs:Aj});var Ai={data:{basketHashRefs:Aj,requestPartials:[Al]},on:{success:function(An,Am){Ak(Am,Al)}}};b.fireEvent("to-ajax",{cfg:Ai,actionCode:"itineraryPartSelected"})}function h(Aj){Aj=Aj||Z;var Ai="__"+AI.state;H(Ai,Aj)}function AH(Aj){var Ai=Aj.data.direction;if(Ai=="outbounds"){y("inbounds")}else{if(Ai=="inbounds"){y("outbounds")}}}function y(Ak){var Aj=function(Ap,An){k(Ap.model);var Ao=Ap.partials;if(Ao){var Am=Ao[An];var Al=b.node.one("#"+Ak);if(Al){Al.set("innerHTML",A.decodeHtmlEntities(Am));N[Ak].renderHtml(AI.initData);b.hideProgressOnSelectFlights()}}};b.showProgressOnSelectFlights();var Ai="__unbundled_"+Ak;H(Ai,Aj)}}});YUI.add("wl-customhtml",function(A){A.components.Customhtml=function(B){}});YUI.add("wl-sbmt",function(A){A.components.Sbmt=function(E){var I=this;var X;I.incomingEvents={unblock:O,block:L,"show-in-seats":N,"remote-submit":H,"show-popup":Q,refresh:D,"update-on-hold-status":J,"validate-submit":C};E.initData=E.initData||{};E.initData.pageCode=sabre.config.pageCode;var V=E.initData.componentCodesUnblockDependency;var G=E.initData.disableSubmitPermanently;I.onRenderState={initialized:function(Z){R()},refund:function(Z){K(["label.sbmt.comfirmButton.yes","label.sbmt.comfirmButton.no"]);R()},exchange:function(Z){K(["label.sbmt.exchange.confirmButton.yes","label.sbmt.exchange.confirmButton.no"]);R()},changePaxDetails:function(Z){K(["label.sbmt.changePaxDetails.confirmButton.yes","label.sbmt.changePaxDetails.confirmButton.no"]);R()},upgrade:function(Z){K(["label.sbmt.upgrade.confirmButton.yes","label.sbmt.upgrade.confirmButton.no"]);R()}};function F(){return A.utilsUrl.buildExecutionUrl(E.initData.returnUrlSuffix)}function R(){T(I.node)}function T(a){var Z=a.ancestor("form");if(Z){Z.on("submit",function(b){Y(Z.get("id"),b);S()})}}function Y(a,Z){I.fireEvent("page-submitted",{cfg:{},actionCode:"ignoreTransaction",formId:a,event:Z})}function S(){A.all("a").each(function(a){a.set("href","#");a.set("onclick",function(){})});var Z=A.all('input[type="submit"]');Z.each(function(a){a.set("disabled","disabled");a.addClass("disabled")})}function H(Z){I.node.ancestor("form").submit()}function C(a){var Z=I.node.ancestor("form");Z.all("input[name=_eventId_next]").each(function(b){b.setAttribute("name","_eventId_runValidation")});Z.submit()}function N(b){var c=1;var a=A.all(b.selector);var Z=I.node.one(".sbmt-seats");a.each(function(e){e.set("innerHTML",Z.get("innerHTML"));var d=e.one("input.btn-next");d.setAttribute("id","btn-next-id"+c++);d.setAttribute("wl:translate",b.translationKey||E.initData.textKey);e.translate();T(e);I.fireEvent("seats-loaded",{node:e})})}function D(c){var b=I.node.one("input#btn-search");if(b){var a=E.initData.textKey;var d=".onHold";var Z=(a.indexOf(d)==a.length-d.length);if(!X&&Z){a=a.substring(0,a.length-d.length)}else{if(X&&!Z){a+=d}}if(c==="paypal"){a="label.sbmt.submitPayment.paypal"}b.setAttribute("wl:translate",a);b.set("value",A.translateParametrized(a));A.translateNode(b)}}function J(Z){X=Z.isOnHoldEnabled;D("")}function P(a){var Z=A.Array.indexOf(V,a);if(Z!==-1){V.splice(Z,1)}}function W(a){var Z=A.Array.indexOf(V,a);if(Z===-1){V.push(a)}}function M(){return V.length==0&&!G}function O(a){if(a.data&&a.data.forceUnblock===true){G=false}if(a.type){P(a.type)}if(M()){var Z=I.node.one("input#btn-search");if(Z){Z.removeAttribute("disabled");Z.removeClass("disabled");I.fireEvent("unblocked")}}}function L(a){if(a.type){W(a.type)}var Z=I.node.one("input#btn-search");if(Z){Z.set("disabled","disabled").addClass("disabled");I.fireEvent("blocked")}}function K(b){var e;var a=A.Node.create('<div class="modalWrapper"></div>');var d=[];var c=A.getCurrentTranslations();var Z=I.node.one("#ignoreFlowPopup");d[0]={text:c[b[0]],handler:function(){if(E.compInstConfig.callIgnoreAction){B(a)}else{a.addClass("loading");location.href=F()}}};d[1]={text:c[b[1]],handler:function(){e.hide()}};e=new YAHOO.widget.Dialog("ignoreFlowPopup",{visible:false,draggable:false,zIndex:100,fixedcenter:true,modal:true,close:false,buttons:d,hideaftersubmit:false});U=function(f){if(typeof f.preventDefault=="function"){f.preventDefault()}btn_0=e.firstButton;btn_1=e.lastButton;btn_0.setAttribute("class","translate");btn_1.setAttribute("class","translate");btn_0.setAttribute("wl:translate",b[0]);btn_1.setAttribute("wl:translate",b[1]);Z.translate();Z.removeClass("hidden");a.removeClass("loading");e.center();e.show()};A.on("click",U,"#ignoreFlow");e.renderEvent.subscribe(function(){var f=Z.get("children");f.each(function(g){a.append(g)});Z.append(a)});e.render(document.body)}var U=function(){};function Q(Z){U(Z)}function B(a){var Z={on:{success:function(){location.href=A.utilsUrl.buildExecutionUrl("_eventId_redirectToCameFromURL")},failure:function(){a.removeClass("loading");A.log("Ajax call failed!","error")}}};a.addClass("loading");I.fireEvent("to-ajax",{cfg:Z,actionCode:"ignoreTransaction"})}}});YUI.add("wl-lang",function(A){A.components.Lang=function(E){var G=this;G.onRenderState={initialized:function(){L();if(sabre.config.satConfiguration.globalCurrencyConfiguration.currencySelectionEnabled){G.fireEvent("add-me-to-pos-change",{trigger:"fsc",actionCode:"changePointOfSale"})}},hidden:function(){L()}};G.incomingEvents={changeLanguage:D,change_lang:function(){O()},"before-changePointOfSale":F};function L(){A.on("change",K,"#select-language");if(A.one("#select-currency")){A.on("change",P,"#select-currency")}H();I(E.initData.currency)}function O(){var R=A.config.locale;var Q="pageTitle."+sabre.config.pageCode;if(A.translations[R]&&A.translations[R][Q]){document.title=A.translations[R][Q]}}function P(R){var Q=R.currentTarget.get("value");N(Q)}function I(R){var Q=G.node.one("#select-currency");if(Q){Q.setStyle("visibility","visible");if(R){A.config.currency=R;Q.set("value",R)}}return R}function D(R){var Q=R.currentTarget.get("id");B(Q)}function K(R){var Q=R.currentTarget.get("value");B(Q)}function H(T){T=T||sabre.config.global.language||sabre.config.defaultLang;var S=T.replace("_","-");A.one("html").setAttribute("lang",S);var Q=A.one("body");if(A.config.locale&&A.config.locale!==T){Q.removeClass("LANGUAGE_"+A.config.locale)}Q.addClass("LANGUAGE_"+T);Q.setAttribute("lang",S);A.config.locale=T;sabre.config.global.language=T;var R=G.node.one("#select-language");if(R){R.set("value",T);if(E.state!="hidden"){R.setStyle("visibility","visible")}}return T}function B(S){var R="wl-lang-"+S;var Q=sabre.config.global.storefrontResourcesPath;if(sabre.config.global.configurationVersion){Q+=sabre.config.global.configurationVersion+"/"}Q+=sabre.config.templateFolder+sabre.config.translationDir+"/";sabre.config.groups["wl-noncombine"].modules[R]={fullpath:Q+S+".js"+sabre.config.global.versionNumber};A.use(R,function(U,T){U.translations[S]=T.success?U.translations[S]:"Translations not found";J(S)})}function J(S){var Q=sabre.config.global.language;H(S);var R={data:{selectedLang:S},on:{success:function(){G.fireEvent("change_lang",{data:S});A.wlValidation.refreshOverlaysAlignment(Q);G.fireEvent("update-data",{data:{language:S}})},complete:function(){var T=A.one("#progressContainer");if(T){T.remove()}}}};G.fireEvent("to-ajax",{cfg:R,actionCode:"setSelectedLang"})}function N(S){var R=G.node.one("#language-content");R.addClass("loading");M();var Q={data:{selectedCurrency:S},on:{complete:function(){R.removeClass("loading")},success:function(){C();G.fireEvent("change_currency",{data:S});G.fireEvent("update-data",{data:{currency:S}})}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setSelectedCurrency"})}function M(){G.fireEvent("block_submit")}function C(){G.fireEvent("unblock_submit",{data:{}})}function F(){var R=G.node.one("#language-content");R.addClass("loading");M();var S="__currency";var Q={data:{requestPartials:[S]},on:{end:function(){R.removeClass("loading")},success:function(X,V){C();var U=G.node.one(".currency-section");if(U){var W=A.Node.create(A.decodeHtmlEntities(V.partials[S]));U.replace(W);var T=G.node.one("#select-currency").get("value");G.fireEvent("change_currency",{data:T});G.fireEvent("update-data",{data:{currency:T}})}}}};G.fireEvent("to-ajax",{cfg:Q,actionCode:"setDefaultCurrency"})}}});YUI.add("wl-ibedata",function(A){A.components.Ibedata=function(C){var D=this;var B=C.initData;D.onRenderState={initialized:function(){WhiteLabel.setIbeData(B)}};D.incomingEvents={"update-data":function(E){if(E.data){B=A.merge(B,E.data);WhiteLabel.setIbeData(B)}}}}});(function(){var D=YAHOO.util;var C=function(G,H,B,A){if(!G){}this.init(G,H,B,A)};C.NAME="Anim";C.prototype={toString:function(){var B=this.getEl()||{};var A=B.id||B.tagName;return(this.constructor.NAME+": "+A)},patterns:{noNegatives:/width|height|opacity|padding/i,offsetAttribute:/^((width|height)|(top|left))$/,defaultUnit:/width|height|top$|bottom$|left$|right$/i,offsetUnit:/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i},doMethod:function(F,A,B){return this.method(this.currentFrame,A,B-A,this.totalFrames)},setAttribute:function(H,A,B){var G=this.getEl();if(this.patterns.noNegatives.test(H)){A=(A>0)?A:0}if(H in G&&!("style" in G&&H in G.style)){G[H]=A}else{D.Dom.setStyle(G,H,A+B)}},getAttribute:function(L){var J=this.getEl();var B=D.Dom.getStyle(J,L);if(B!=="auto"&&!this.patterns.offsetUnit.test(B)){return parseFloat(B)}var K=this.patterns.offsetAttribute.exec(L)||[];var A=!!(K[3]);var I=!!(K[2]);if("style" in J){if(I||(D.Dom.getStyle(J,"position")=="absolute"&&A)){B=J["offset"+K[0].charAt(0).toUpperCase()+K[0].substr(1)]}else{B=0}}else{if(L in J){B=J[L]}}return B},getDefaultUnit:function(A){if(this.patterns.defaultUnit.test(A)){return"px"}return""},setRuntimeAttribute:function(M){var A;var L;var K=this.attributes;this.runtimeAttributes[M]={};var B=function(E){return(typeof E!=="undefined")};if(!B(K[M]["to"])&&!B(K[M]["by"])){return false}A=(B(K[M]["from"]))?K[M]["from"]:this.getAttribute(M);if(B(K[M]["to"])){L=K[M]["to"]}else{if(B(K[M]["by"])){if(A.constructor==Array){L=[];for(var J=0,N=A.length;J<N;++J){L[J]=A[J]+K[M]["by"][J]*1}}else{L=A+K[M]["by"]*1}}}this.runtimeAttributes[M].start=A;this.runtimeAttributes[M].end=L;this.runtimeAttributes[M].unit=(B(K[M].unit))?K[M]["unit"]:this.getDefaultUnit(M);return true},init:function(T,O,P,B){var A=false;var S=null;var Q=0;T=D.Dom.get(T);this.attributes=O||{};this.duration=!YAHOO.lang.isUndefined(P)?P:1;this.method=B||D.Easing.easeNone;this.useSeconds=true;this.currentFrame=0;this.totalFrames=D.AnimMgr.fps;this.setEl=function(E){T=D.Dom.get(E)};this.getEl=function(){return T};this.isAnimated=function(){return A};this.getStartTime=function(){return S};this.runtimeAttributes={};this.animate=function(){if(this.isAnimated()){return false}this.currentFrame=0;this.totalFrames=(this.useSeconds)?Math.ceil(D.AnimMgr.fps*this.duration):this.duration;if(this.duration===0&&this.useSeconds){this.totalFrames=1}D.AnimMgr.registerElement(this);return true};this.stop=function(E){if(!this.isAnimated()){return false}if(E){this.currentFrame=this.totalFrames;this._onTween.fire()}D.AnimMgr.stop(this)};var M=function(){this.onStart.fire();this.runtimeAttributes={};for(var E in this.attributes){this.setRuntimeAttribute(E)}A=true;Q=0;S=new Date()};var N=function(){var E={duration:new Date()-this.getStartTime(),currentFrame:this.currentFrame};E.toString=function(){return("duration: "+E.duration+", currentFrame: "+E.currentFrame)};this.onTween.fire(E);var F=this.runtimeAttributes;for(var G in F){this.setAttribute(G,this.doMethod(G,F[G].start,F[G].end),F[G].unit)}Q+=1};var R=function(){var F=(new Date()-S)/1000;var E={duration:F,frames:Q,fps:Q/F};E.toString=function(){return("duration: "+E.duration+", frames: "+E.frames+", fps: "+E.fps)};A=false;Q=0;this.onComplete.fire(E)};this._onStart=new D.CustomEvent("_start",this,true);this.onStart=new D.CustomEvent("start",this);this.onTween=new D.CustomEvent("tween",this);this._onTween=new D.CustomEvent("_tween",this,true);this.onComplete=new D.CustomEvent("complete",this);this._onComplete=new D.CustomEvent("_complete",this,true);this._onStart.subscribe(M);this._onTween.subscribe(N);this._onComplete.subscribe(R)}};D.Anim=C})();YAHOO.util.AnimMgr=new function(){var I=null;var J=[];var F=0;this.fps=1000;this.delay=1;this.registerElement=function(A){J[J.length]=A;F+=1;A._onStart.fire();this.start()};this.unRegister=function(A,B){B=B||G(A);if(!A.isAnimated()||B===-1){return false}A._onComplete.fire();J.splice(B,1);F-=1;if(F<=0){this.stop()}return true};this.start=function(){if(I===null){I=setInterval(this.run,this.delay)}};this.stop=function(A){if(!A){clearInterval(I);for(var B=0,C=J.length;B<C;++B){this.unRegister(J[0],0)}J=[];I=null;F=0}else{this.unRegister(A)}};this.run=function(){for(var A=0,C=J.length;A<C;++A){var B=J[A];if(!B||!B.isAnimated()){continue}if(B.currentFrame<B.totalFrames||B.totalFrames===null){B.currentFrame+=1;if(B.useSeconds){H(B)}B._onTween.fire()}else{YAHOO.util.AnimMgr.stop(B,A)}}};var G=function(A){for(var B=0,C=J.length;B<C;++B){if(J[B]===A){return B}}return -1};var H=function(E){var B=E.totalFrames;var C=E.currentFrame;var D=(E.currentFrame*E.duration*1000/E.totalFrames);var L=(new Date()-E.getStartTime());var A=0;if(L<E.duration*1000){A=Math.round((L/D-1)*E.currentFrame)}else{A=B-(C+1)}if(A>0&&isFinite(A)){if(E.currentFrame+A>=B){A=B-(C+1)}E.currentFrame+=A}};this._queue=J;this._getIndex=G};YAHOO.util.Bezier=new function(){this.getPosition=function(I,J){var H=I.length;var K=[];for(var L=0;L<H;++L){K[L]=[I[L][0],I[L][1]]}for(var G=1;G<H;++G){for(L=0;L<H-G;++L){K[L][0]=(1-J)*K[L][0]+J*K[parseInt(L+1,10)][0];K[L][1]=(1-J)*K[L][1]+J*K[parseInt(L+1,10)][1]}}return[K[0][0],K[0][1]]}};(function(){var E=function(C,D,B,A){E.superclass.constructor.call(this,C,D,B,A)};E.NAME="ColorAnim";E.DEFAULT_BGCOLOR="#fff";var G=YAHOO.util;YAHOO.extend(E,G.Anim);var F=E.superclass;var H=E.prototype;H.patterns.color=/color$/i;H.patterns.rgb=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i;H.patterns.hex=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;H.patterns.hex3=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;H.patterns.transparent=/^transparent|rgba\(0, 0, 0, 0\)$/;H.parseColor=function(B){if(B.length==3){return B}var A=this.patterns.hex.exec(B);if(A&&A.length==4){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}A=this.patterns.rgb.exec(B);if(A&&A.length==4){return[parseInt(A[1],10),parseInt(A[2],10),parseInt(A[3],10)]}A=this.patterns.hex3.exec(B);if(A&&A.length==4){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}return null};H.getAttribute=function(J){var C=this.getEl();if(this.patterns.color.test(J)){var A=YAHOO.util.Dom.getStyle(C,J);var B=this;if(this.patterns.transparent.test(A)){var D=YAHOO.util.Dom.getAncestorBy(C,function(I){return !B.patterns.transparent.test(A)});if(D){A=G.Dom.getStyle(D,J)}else{A=E.DEFAULT_BGCOLOR}}}else{A=F.getAttribute.call(this,J)}return A};H.doMethod=function(K,A,D){var B;if(this.patterns.color.test(K)){B=[];for(var C=0,L=A.length;C<L;++C){B[C]=F.doMethod.call(this,K,A[C],D[C])}B="rgb("+Math.floor(B[0])+","+Math.floor(B[1])+","+Math.floor(B[2])+")"}else{B=F.doMethod.call(this,K,A,D)}return B};H.setRuntimeAttribute=function(K){F.setRuntimeAttribute.call(this,K);if(this.patterns.color.test(K)){var C=this.attributes;var A=this.parseColor(this.runtimeAttributes[K].start);var D=this.parseColor(this.runtimeAttributes[K].end);if(typeof C[K]["to"]==="undefined"&&typeof C[K]["by"]!=="undefined"){D=this.parseColor(C[K].by);for(var B=0,L=A.length;B<L;++B){D[B]=A[B]+D[B]}}this.runtimeAttributes[K].start=A;this.runtimeAttributes[K].end=D}};G.ColorAnim=E})();YAHOO.util.Easing={easeNone:function(H,E,F,G){return F*H/G+E},easeIn:function(H,E,F,G){return F*(H/=G)*H+E},easeOut:function(H,E,F,G){return -F*(H/=G)*(H-2)+E},easeBoth:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H+E}return -F/2*((--H)*(H-2)-1)+E},easeInStrong:function(H,E,F,G){return F*(H/=G)*H*H*H+E},easeOutStrong:function(H,E,F,G){return -F*((H=H/G-1)*H*H*H-1)+E},easeBothStrong:function(H,E,F,G){if((H/=G/2)<1){return F/2*H*H*H*H+E}return -F/2*((H-=2)*H*H*H-2)+E},elasticIn:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return -(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H},elasticOut:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J)==1){return H+I}if(!K){K=J*0.3}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}return N*Math.pow(2,-10*M)*Math.sin((M*J-L)*(2*Math.PI)/K)+I+H},elasticBoth:function(M,H,I,J,N,K){if(M==0){return H}if((M/=J/2)==2){return H+I}if(!K){K=J*(0.3*1.5)}if(!N||N<Math.abs(I)){N=I;var L=K/4}else{var L=K/(2*Math.PI)*Math.asin(I/N)}if(M<1){return -0.5*(N*Math.pow(2,10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K))+H}return N*Math.pow(2,-10*(M-=1))*Math.sin((M*J-L)*(2*Math.PI)/K)*0.5+I+H},backIn:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*(J/=H)*J*((I+1)*J-I)+F},backOut:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}return G*((J=J/H-1)*J*((I+1)*J+I)+1)+F},backBoth:function(J,F,G,H,I){if(typeof I=="undefined"){I=1.70158}if((J/=H/2)<1){return G/2*(J*J*(((I*=(1.525))+1)*J-I))+F}return G/2*((J-=2)*J*(((I*=(1.525))+1)*J+I)+2)+F},bounceIn:function(H,E,F,G){return F-YAHOO.util.Easing.bounceOut(G-H,0,F,G)+E},bounceOut:function(H,E,F,G){if((H/=G)<(1/2.75)){return F*(7.5625*H*H)+E}else{if(H<(2/2.75)){return F*(7.5625*(H-=(1.5/2.75))*H+0.75)+E}else{if(H<(2.5/2.75)){return F*(7.5625*(H-=(2.25/2.75))*H+0.9375)+E}}}return F*(7.5625*(H-=(2.625/2.75))*H+0.984375)+E},bounceBoth:function(H,E,F,G){if(H<G/2){return YAHOO.util.Easing.bounceIn(H*2,0,F,G)*0.5+E}return YAHOO.util.Easing.bounceOut(H*2-G,0,F,G)*0.5+F*0.5+E}};(function(){var G=function(C,D,B,A){if(C){G.superclass.constructor.call(this,C,D,B,A)}};G.NAME="Motion";var I=YAHOO.util;YAHOO.extend(G,I.ColorAnim);var H=G.superclass;var K=G.prototype;K.patterns.points=/^points$/i;K.setAttribute=function(C,A,B){if(this.patterns.points.test(C)){B=B||"px";H.setAttribute.call(this,"left",A[0],B);H.setAttribute.call(this,"top",A[1],B)}else{H.setAttribute.call(this,C,A,B)}};K.getAttribute=function(B){if(this.patterns.points.test(B)){var A=[H.getAttribute.call(this,"left"),H.getAttribute.call(this,"top")]}else{A=H.getAttribute.call(this,B)}return A};K.doMethod=function(E,A,D){var B=null;if(this.patterns.points.test(E)){var C=this.method(this.currentFrame,0,100,this.totalFrames)/100;B=I.Bezier.getPosition(this.runtimeAttributes[E],C)}else{B=H.doMethod.call(this,E,A,D)}return B};K.setRuntimeAttribute=function(A){if(this.patterns.points.test(A)){var S=this.getEl();var Q=this.attributes;var T;var E=Q.points["control"]||[];var R;var D,B;if(E.length>0&&!(E[0] instanceof Array)){E=[E]}else{var F=[];for(D=0,B=E.length;D<B;++D){F[D]=E[D]}E=F}if(I.Dom.getStyle(S,"position")=="static"){I.Dom.setStyle(S,"position","relative")}if(J(Q.points["from"])){I.Dom.setXY(S,Q.points["from"])}else{I.Dom.setXY(S,I.Dom.getXY(S))}T=this.getAttribute("points");if(J(Q.points["to"])){R=L.call(this,Q.points["to"],T);var C=I.Dom.getXY(this.getEl());for(D=0,B=E.length;D<B;++D){E[D]=L.call(this,E[D],T)}}else{if(J(Q.points["by"])){R=[T[0]+Q.points["by"][0],T[1]+Q.points["by"][1]];for(D=0,B=E.length;D<B;++D){E[D]=[T[0]+E[D][0],T[1]+E[D][1]]}}}this.runtimeAttributes[A]=[T];if(E.length>0){this.runtimeAttributes[A]=this.runtimeAttributes[A].concat(E)}this.runtimeAttributes[A][this.runtimeAttributes[A].length]=R}else{H.setRuntimeAttribute.call(this,A)}};var L=function(C,A){var B=I.Dom.getXY(this.getEl());C=[C[0]-B[0]+A[0],C[1]-B[1]+A[1]];return C};var J=function(A){return(typeof A!=="undefined")};I.Motion=G})();(function(){var F=function(C,D,B,A){if(C){F.superclass.constructor.call(this,C,D,B,A)}};F.NAME="Scroll";var H=YAHOO.util;YAHOO.extend(F,H.ColorAnim);var G=F.superclass;var E=F.prototype;E.doMethod=function(D,A,C){var B=null;if(D=="scroll"){B=[this.method(this.currentFrame,A[0],C[0]-A[0],this.totalFrames),this.method(this.currentFrame,A[1],C[1]-A[1],this.totalFrames)]}else{B=G.doMethod.call(this,D,A,C)}return B};E.getAttribute=function(C){var A=null;var B=this.getEl();if(C=="scroll"){A=[B.scrollLeft,B.scrollTop]}else{A=G.getAttribute.call(this,C)}return A};E.setAttribute=function(D,A,B){var C=this.getEl();if(D=="scroll"){C.scrollLeft=A[0];C.scrollTop=A[1]}else{G.setAttribute.call(this,D,A,B)}};H.Scroll=F})();YAHOO.register("animation",YAHOO.util.Anim,{version:"2.8.0r4",build:"2449"});YUI.add("wl-cart-stick-to-screen",function(B){var L=function(N){var M=N;while(true){var O=M.ancestor(".lay > .lay");if(O!==null){M=O}else{return M}}};var D=function(M){return M.all("> .lay")};var F=function(O,N){for(var M=0;M<O.size();M++){if(O.item(M).contains(N)){return O.item(M)}}return null};var I=function(M){return M.getY()};var K=function(M){return M.get("offsetHeight")};var A=function(M){return I(M)+K(M)};var H=function(M){window.setTimeout(M,1)};var G=function(M){M()};var E=(function(g){var Z=g.ancestor(".lay").ancestor(".lay");var a=g.getY();var b="initial";var U=L(g);var c=D(U);var e=F(c,g);var T=function(){return K(g)};var l=function(){return A(Z)};var Y=function(){return B.DOM.docScrollY()};var S=function(){return B.DOM.winHeight()};var m=function(){return Y()+S()};var P=function(){return T()>S()};var X=function(o,p){g.setStyle("position",o);g.setStyle("top",(p!=null)?p+"px":null)};var M=function(o,p){if(b!==o){p();b=o}};var n=function(){M("bottomOfContainer",function(){B.log("Fixing cart position at the bottom of the container","debug");var o=function(){X("relative",(l()-a-T()))};if(B.UA.ie>0&&B.UA.ie<8){X(null,null);H(o)}else{G(o)}})};var Q=function(){M("initial",function(){B.log("Fixing cart position at the original position","debug");X(null,null)})};var O=function(){M("topOfViewport",function(){B.log("Sticking cart to the top of the viewport","debug");X("fixed",0)})};var h=function(){M("bottomOfViewport",function(){B.log("Sticking cart to the bottom of the viewport","debug");X("fixed",S()-T())})};var k=function(){if(Y()<a){Q()}else{if(Y()+T()>=l()){n()}else{O()}}};var V=function(){if(m()>=l()){n()}else{if(a+T()<m()){h()}else{Q()}}};var R=function(){var p=0;var o=null;c.each(function(r){var q=K(r);if(q>=p){o=r;p=q}});return o};var d=function(){return e.compareTo(R())};var N=function(){if(P()){V()}else{k()}};var W=function(o){if(d()){return }else{N()}};var f=function(o){b="unknown";N()};return{onScroll:W,onSizeChanged:f}});var C=function(){var M=B.Node.create("<div></div>");M.setStyle("position","fixed");return(M.getStyle("position")==="fixed")};var J=function(N){B.log("Attaching scroll handler for shopping cart movement","debug");var M=E(N);B.on("scroll",M.onScroll);B.on("resize",M.onSizeChanged);B.on("cart:sizeChanged",M.onSizeChanged)};B.on("cart:stickToScreen",function(M){if(C()){J(M.container.ancestor(".lay"))}else{B.log("Running on browser that doesn't support position: fixed. Skipping scroll handler for shopping cart movement attachment","warn")}})});YUI.add("wl-cart",function(A){A.components.Cart=function(AL){var m=this;var Al=AL.compInstConfig;var W=AL.initData;var Ak=AL.state;var AZ=Al.insuranceEnabled;var L=AZ&&Al.insuranceAPartOfFareBreakdown;var Ag=!!W.retainedDirection;var a={};var V="bookingFee";var g=[];var I=W.itineraryParts;var AT=W.itineraryParts.length;var AE=[];var AC="";var d,p;var f="initialized";m.incomingEvents={show_rules:n,modify_search_rendered:function(){Af(false)},change_state_unbundled:Ac,change_state:q,clear_invalid_selected_flights:U,update_for_lazy_flc:o,"update-with-insurance":AJ,"update-with-ancillary":Q,"update-with-hotel":AS,"update-with-seat-selected":v,"update-with-fop-surcharge":AH,"update-with-slider":AR,"before-completedCarSelectAjax":AQ,"update-with-bnpl":AX,clear_cart:K,refresh:b,change_lang:function(){var Ao=m.node.all(".fare-family-name");Ao.each(function(As){var Ar=As.getAttribute("wl:translate"),Aq,At;if(Ar){Aq=Ar.split("|");At=As.getAttribute("wl:ff");Aq[1]=AV(At);Ar=Aq.join("|");As.setAttribute("wl:translate",Ar);As.setContent(A.translateParametrized(Ar))}});var Ap=m.node.all(".fare-summary");Ap.each(function(Ar){var As=Ar.getAttribute("wl:ff");var Aq=AP(As);Aq=A.decodeHtmlEntities(Aq);Ar.setContent(Aq)})}};function y(){m.node.removeClass("ftl-created");m.getDomEvents()}function J(){return(Al.stickToScreen===true)}function AW(){A.fire("cart:stickToScreen",{container:m.node})}m.onCreate=function(Ao,Ap){Ab();y();if(J()){AW()}};m.onRenderState={initialized:function(Ao){AG(Ao);u(Ao);AM(Ao);A.fire("cart:sizeChanged");m.fireEvent("cart-updated-with-seats-price",{});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"completedCarSelect"});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"reload"});m.fireEvent("add-me-to-car-select",{trigger:"car",actionCode:"removeCar"})},flightChanged:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchangeReview:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchange:function(Ao){AG(Ao);u(Ao);A.fire("cart:sizeChanged")},exchangeFlightSelect:function(Ao){f="exchangeFlightSelect";AG(Ao);u(Ao);A.fire("cart:sizeChanged")}};function AM(As){var Ao=W.retainedPart;var Ar=W.retainedDirection;var Aq=W.retainedPart;if(Ao&&Ao.length&&Ar&&Aq&&Aq.length){var Ap=As.one("#cart_itinerariesDetails").one("."+Ar.toLowerCase());if(Ap){A.Event.purgeElement(Ap,true);Ap.setContent(X(Ao));As.translate()}}}function AG(Ap){AB(Ap);var Aq=A.all("#fare-rules-anchor");Aq.each(function(Ar){Ar.on("click",Ae)});var Ao=A.one("#modify-search-trigger");if(Ao){Ao.on("click",AU)}A.delegate("click",AA,"#cart-component","em.crossToggler");A.delegate("click",e,"#cart-component","em.toggler");A.delegate("click",Ah,"#cart-component",".fare-family-toggler");A.delegate("click",P,"#cart-component","em.paxToggler")}function AB(Ao){if(a.flightFare){var Ap=Ao.one(".price-details");if(Ap){Ap.removeClass("hidden")}}}function u(Ao){if(Ao){Ao.delegate("mouseover",C,".fare-indicator-icon");Ao.delegate("mouseout",T,".fare-indicator-icon")}}function C(As){As.preventDefault();if(d==null){var Au=As.currentTarget;var Aq={header:"",context:[As.currentTarget.get("id"),"tl","bl",["beforeShow","windowResize"],[Al.fareIndicatorOverlayHorizontalPosition,Al.fareIndicatorOverlayVerticalPosition]],underlay:"none",modal:false,fixedcenter:false,constraintoviewport:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.2}};var Ar=Au.ancestor();var At=Ar.one(".fiTranslation");if(At){var Ao=At.get("innerHTML");var Aw=Ar.ancestor();var Ap=new A.Node.create('<div class="fare-indicator-overlay hidden"></div>');p=new A.Node.create('<div id="fare-indicator-overlay-container"></div>');Aw.appendChild(Ap);Aw.appendChild(p);var Av='<div class="fare-indicator-overlay-content">'+Ao+"</div>";Aq.width=Ap.getStyle("width");Aq.height=Ap.getStyle("height");d=new A.widgets.PopupWidget(p,Av,Aq);d.show()}}}function T(Ar){Ar.preventDefault();var As=Ar.currentTarget;if(d){d.hide();d=null;var Ao=As.ancestor();var Ap=Ao.ancestor();var Aq=Ap.one(".fare-indicator-overlay");Ap.removeChild(Aq);Ap.removeChild(p)}}function S(){if(W.itineraryParts.length===2){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||W.itineraryParts[1].shoppingBasketHash}else{if(W.itineraryParts.length===1){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash}else{if(W.itineraryParts.length===0){g[0]=g[0]||W.outboundsSelectedBasketHash;g[1]=g[1]||W.inboundsSelectedBasketHash}}}}function Ab(){if(W.itineraryParts.length===2){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash;g[1]=g[1]||W.itineraryParts[1].shoppingBasketHash}else{if(W.itineraryParts.length===1){g[0]=g[0]||W.itineraryParts[0].shoppingBasketHash}}}function o(Ar){var Aq=Ar.data.step;g[Aq]=Ar.data.selectedHashRef||Ar.data.offerHashCode;g=g.slice(0,Aq+1);if(AT===g.length){W.itinerarySelected=true;var Ao=g[g.length-1];var Ap={selectedBasketRefs:[Ao]};F(Ap,"lazy",Ao)}else{W.itinerarySelected=false;A.Array.each(I,function(At,As){if(As===Aq){I[As]=Ar.data.itinerary}else{if(As>Aq){I[As].segments=null}}});W.itineraryParts=I;M(W.itineraryParts);AI();l(Ar.data.index);AD([W.itineraryParts])}c()}function Ac(Aq){S();var Ao=Aq.data.direction==="inbounds"?1:0;g[Ao]=Aq.data.selectedBasketRefs;AE[Ao]=Aq.data.itinerary.price;if(g[0]&&g[1]){var Ap={selectedBasketRefs:g};F(Ap,Aq.data.direction,Aq.data.selectedBasketRefs,true)}else{D(Aq.data.itinerary,Ao);var Ar=[null,null];Ar[Ao]=Aq.data.itinerary;AD(Ar,true);AK(Aq.data.direction,Aq.data.selectedBasketRefs)}c();A.fire("cart:sizeChanged")}function q(Ap){g=[Ap.data.selectedBasketRefs];AE[0]=Ap.data.itinerary.price;var Ao={selectedBasketRefs:g};F(Ao,Ap.data.direction,Ap.data.selectedBasketRefs);c();A.fire("cart:sizeChanged")}function U(Ar){var Aq=Ar.data.revisedSelectedHashRefs||[];var As=false;var Ap;for(Ap=0;Ap<W.itineraryParts.length;Ap++){W.itineraryParts[Ap]={departureDate:W.itineraryParts[Ap].departureDate};As=true}if(As){W.itinerarySelected=false;M(W.itineraryParts);AI()}else{var Ao;if(data.context.state=="lazy"){Ao={selectedBasketRefs:[Aq[Aq.length-1]]};F(Ao,"checkPrice",[Aq[Aq.length-1]])}else{Ao={selectedBasketRefs:Aq};F(Ao,"checkPrice",Aq)}}}function M(Ap){var Ao=m.node.one("#cart_itinerariesDetails");if(!Ao){return }A.Array.each(Ap,function(Aq,Ar){D(Aq,Ar)})}function D(Aq,Ao){Ao=Ao||0;var Ar=m.node.one("#cart_itinerariesDetails");if(!Ar){return }var As=Ar.all(".cart_itinerariesDetails_itinerary");var Ap=As.item(Ao);var At=A.Node.create(X(Aq));Ap.replace(At);At.translate();Ap.destroy()}function AJ(Ao){AC=Ao.data.offerCode;s()}function AR(Ao){s()}function v(Ao){G(Ao)}function AQ(Ao){h(Ao)}function Q(Ao){Y(Ao)}function AS(Ao){N(Ao)}function AX(Ao){r(Ao)}function AH(Ao){R(Ao.data)}function n(){S();z()}function Ae(Ao){Ao.preventDefault();n()}function z(){Af(true);m.fireEvent("showFareRules",{forceInitialize:true,data:{allFlightsSelected:An(),callback:function(){Af(false)}}})}function Af(Ap){var Ao=A.one("#cart-component");if(Ao){var Aq=Ao.one("#cart-loading");if(Ap){if(!Aq){html='<div id="cart-loading" class="cart-loading loading"></div>';Ao.prepend(html)}Ao.addClass("loading")}else{if(Aq){Aq.remove()}Ao.removeClass("loading")}}}function An(){return W.itinerarySelected}function AU(Ao){Ao.preventDefault();Af(true);m.fireEvent("modify_search",{forceInitialize:true})}function k(Ao){m.node.set("innerHTML",A.decodeHtmlEntities(Ao));y()}function t(Aq,Ap){Af(true);var Ao={data:{requestPartials:[Ak]},on:{end:function(){Af(false)},success:function(As,Ar){if(Ar){W=Ar.model;k(Ar.partials[Ak])}if(Aq.cfg&&"function"==typeof Aq.cfg.callback){Aq.cfg.callback()}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:Ap})}function Y(Ao){t(Ao,"updatePriceWithAncillary")}function N(Ao){t(Ao,"updatePriceWithHotel")}function r(Ao){t(Ao,"updatePriceWithBNPL")}function x(Ap){var Ao=[];A.Object.each(Ap,function(As,Ar){var Aq=new Number(Ar);if(isFinite(Aq)){Ao.push(As)}});return Ao}function G(Aq){Af(true);Aq=x(Aq);var Ap={selectedSeats:Aq,requestPartials:[Ak]};var Ao={data:Ap,on:{end:function(){Af(false);m.fireEvent("cart-updated-with-seats-price",{})},success:function(As,Ar){if(Ar){W=Ar.model;k(Ar.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithSeatSelected"})}function h(Aq){var Ap={requestPartials:[Ak]};var Ao={data:Ap,on:{success:function(As,Ar){if(Ar){W=Ar.model;k(Ar.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithCarSelected"})}function s(){Af(true);var Ao={data:{selectedInsuranceCode:AC,requestPartials:["initialized"]},on:{end:function(){Af(false)},success:function(Ar,Ap){if(Ap){W=Ap.model;var Aq=Ap.partials.initialized;k(Aq)}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithInsuranceOrSlider"})}function R(Ap){Af(true);var Ao={data:{selectedInsuranceCode:AC,requestPartials:[Ak]},on:{end:function(){Af(false)},success:function(Ar,Aq){if(Aq){W=Aq.model;k(Aq.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"updatePriceWithFopSurcharge"})}function F(Ar,At,Ao,As){Af(true);var Ap={data:A.merge({requestPartials:[f]},Ar),on:{end:function(){Af(false)},success:function(Aw,Au){if(Au){W=Au.model;var Av=Au.partials[f];k(Av);if(Au.model.itinerarySelected){AK(At,Ao);if(!Au.model.redemptionUserCannotAffordItinerary){Am()}}else{Z()}if(A.Lang.isArray(Au.messages)&&Au.messages.length>0){m.fireEvent("add-messages",{data:{messages:Au.messages}})}AD(W.itineraryParts,As);Ad(W.total)}}}};var Aq=At?"checkPrice":"clearSelection";m.fireEvent("remove-all-component-messages");m.fireEvent("to-ajax",{cfg:Ap,actionCode:Aq})}function K(){g=[];Af(true);var Ao={data:{requestPartials:[f]},on:{end:function(){Af(false)},success:function(Ar,Ap){if(Ap){W=Ap.model;var Aq=Ap.partials[f];k(Aq);Ad(W.total);m.fireEvent("cleared")}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"clearSelection"})}function b(){Af(true);var Ao={data:{requestPartials:[Ak]},on:{end:function(){Af(false)},success:function(Aq,Ap){if(Ap){W=Ap.model;k(Ap.partials[Ak])}}}};m.fireEvent("to-ajax",{cfg:Ao,actionCode:"refresh"})}function B(Ao){if(Ao&&Ao.priceAlternatives){return Ao.priceAlternatives}return{}}function O(Ap){if(!Ap||!Ap.segments){return null}var Aq=[];for(var Ar=0;Ar<Ap.segments.length;Ar++){var As=Ap.segments[Ar];var Ao={departure:As.departureDate,arrival:As.arrivalDate,departureAirport:As.departureCode,arrivalAirport:As.arrivalCode,flightNumber:As.flightNumber[0],airlineCode:As.airlineCodes[0],operatingAirlineCode:As.operatingCarrier[0],brandId:Ap.fareFamily,bookingClass:As.bookingClass,fareBasis:As.fareBasis,cabinClass:As.classOfService[0],nextDayIndicator:As.nextDayIndicator};Aq.push(Ao)}return{segments:Aq}}function AD(Au,Ar){var As=[];var Aq,At;for(Aq=0;Aq<Au.length;Aq++){var Ao=O(Au[Aq]);As.push(Ao)}var Ap=[];if(Ar&&As.length===2){for(Aq=0;Aq<2;Aq++){At=B(AE[Aq]);Ap[Aq]={parts:As[Aq]?[As[Aq]]:null,fareAmount:At}}}else{At=B(AE[0]);Ap[0]={parts:As,fareAmount:At}}m.fireEvent("update-data",{data:{selectedOffers:Ap}})}function Ad(Ao){m.fireEvent("update-data",{data:{total:B(Ao)}})}function P(As){var Ar=As.currentTarget;var Aq=Ar.one("a");var Ap=Ar.ancestor("div.cart-pax");if(Ap){var Ao=Ap.one("ol");if(Ao){isOpen=Aq.hasClass("open");if(isOpen){Aq.removeClass("open");Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.view");Ao.setStyle("display","none")}else{Aq.addClass("open");Aq.addClass("translate");Aq.setAttribute("wl:translate","label.cart.priceSummary.hide");Ao.setStyle("display","block")}}}m.translateTemplate(AL,Ar);A.fire("cart:sizeChanged");As.preventDefault()}function AA(Ao){e(Ao,true)}function e(Av,Ar){var Au=Av.currentTarget;var At=Au.ancestor("li");var Ap=At.one("ol");var Aq=Au.one("a").hasClass("open");var As=Au.one("a");if(Aq){As.removeClass("open");if(!Ar){As.addClass("translate");As.setAttribute("wl:translate","label.cart.priceSummary.view")}if(Ap){Ap.setStyle("display","none")}}else{As.addClass("open");if(!Ar){As.addClass("translate");As.setAttribute("wl:translate","label.cart.priceSummary.hide")}if(Ap){Ap.setStyle("display","block");Ap.setAttribute("style","display: block;")}}var Ao=A.all(".cartPrices");Ao.each(function(Aw){m.translateTemplate(AL,Aw)});A.fire("cart:sizeChanged");Av.preventDefault()}function Ah(Ar){var As=Ar.currentTarget;var Aq=As.one("a");var Ap=Aq.hasClass("open");var Ao=As.one("div.fare-summary");if(Ap){Aq.removeClass("open");Aq.setAttribute("wl:translate","label.cart.fareSummary.viewDetails");Aq.addClass("translate");if(Ao){Ao.setStyle("display","none")}}else{Aq.addClass("open");Aq.setAttribute("wl:translate","label.cart.fareSummary.hideDetails");Aq.addClass("translate");if(Ao){Ao.setStyle("display","block");Ao.setAttribute("style","display: block;")}}A.translateNode(As);A.fire("cart:sizeChanged");Ar.preventDefault()}function H(Ap){var Aq="initialized";var Ao;for(Ao in Ap){Aq=(!Ap||!A.Lang.isArray(Ap.segments)||Ap.segments[0].blank)?"initialized":"flightSelected"}return Aq}function E(Ap,Ao,Ar){var Aq=A.all(Ao);Aq.each(function(At){var Au=m.getPartial(Ar,Ap);var As=A.Node.create(Au);At.set("innerHTML",As.get("innerHTML"));A.translateNode(At);As=null})}function AI(){var Ao=AF();if(A.one("#cart-total-price")){A.one("#cart-total-price").remove(true)}E(Ao,".cart-price-details-container","_priceInfo");E(Ao,"#price-summary","_flightChanged_PriceInfo");E(Ao,"#price-info-exchange","_priceInfoExchangeReview")}function AF(){var Ao={};Ao.farePrice=Aa("fare");Ao.taxesPrice=Aa("taxes");Ao.discountPrice="";Ao.feesPrice=Aa("fees");Ao.insurancePrice="";if(AL.state==="exchangeReview"){Ao.newTripTotalPrice=Aa("newTrip")}else{Ao.newTripTotalPrice=Aa("newPrice")}Ao.originalTripPrice=Aa("originalPrice");Ao.changeFeePrice=Aa("changeFee");Ao.ancillariesPrice=Aa("ancillaries");Ao.seatsPrice=Aa("seats");Ao.uniqueFareIndicators="";return Ao}function Aa(Ao){return m.getPartial("_priceInfoItem",{pricePartType:Ao,pricePartLink:"",pricePartValue:""})}function AY(Ap,Ao){if(!W.showClassOfServicePerSegment){return m.getPartial("_chosenClass_cabinClass",{classOfService:A.translateParametrized("Cabin."+Ap),index:Ao})}return""}function X(Ao){var A5="";var A9,A7;var Av=[];var Az=H(Ao);var A6=[];var Aw=[];var BB=(A9==0)?"outbound":"inbound";var As;var A0=Ao.fareFamily;if(A0&&Ao.basketsRef){As=Ao.basketsRef[A0]}if(Ao.segments&&Ao.segments.length>0){var A4=Ao.segments[0].arrivalDate;for(A7=0;A7<Ao.segments.length;A7++){var A1;var Aq=Ao.segments[A7];var A3=Aq.departureCode;var Ax=Aq.departureDate;var BA=Aq.arrivalCode;var Au=As?As.classOfService:Aq.classOfService;var Ap=As?As.fareBasis:Aq.fareBasis;if(A.Lang.isArray(Au)&&Au.length>0){A1=Au[0];A5=A1}Ap=Ap.replace(/\/.*/g,"");var Ar=(A7==0)?"depart":"connection";A6.push(w(A3,A4,Ax,Ap,Ar,A9,A7,A1));A6.push(Ai(A9,A7,A1));var A8=AN(Aq.flightNumber[0],Aq.airlineCodes[0],Aq.operatingCarrier[0]);Aw.push(A8);A4=Aq.arrivalDate}A6.push(w(BA,A4,Ax,Ap,"arrive",A9,A7))}if(A.Lang.isArray(Ao.overrideClassOfService)&&Ao.overrideClassOfService.length>0){A5=Ao.overrideClassOfService[0]}var BC={direction:BB,itineraryPrice:(Ao&&Ao.price&&Ao.price.amount!=0&&!Ag)?AO(Ao.price):"",partSegments:A6.join(""),flightNumbers:Aw.join(" | "),fareFamily:"",cabinClass:AY(A5,A9)};if(A0){var Ay=A.decodeHtmlEntities(AP(A0));var At=W.fareFamilyGroupDataMap[A0];var A2=At?At.familyGroupId:"undefinedGroup";BC.fareFamily=m.getPartial("_chosenClass_fareFamily",{fareFamily:AV(A0),fareFamilyKey:A0,fareFamilyGroupKey:A2,fareSummary:Ay,index:A9})}return m.getPartials("_flightDetails_"+Az,BC)}function Ai(Aq,Ap,Ao){if(W.showClassOfServicePerSegment){var Ar={part_index:Aq,segment_index:Ap+1,classOfService:A.translateParametrized("Cabin."+Ao)};return m.getPartial("_segmentClassOfService",Ar)}return""}function Aj(Ap,As){var Ao=W.fareFamilyDataMap[Ap];if(Ao){var Aq=A.getCurrentLanguage();var Ar=Ao.localizedData[Aq];if(Ar&&Ar[As]){return Ar[As]}}return"&nbsp;"}function AV(Ao){return Aj(Ao,"label")}function AP(Ao){return Aj(Ao,"marketingText")}function AN(Ar,Aq,Ao){var Ap=Al.flightNumberFormat;var As=A.getFullAirlineName(Ao);return m.getPartial("_flightNumber_"+Ap.toLowerCase(),{flightNumber:Ar,airlineCode:Aq,operatingCarrier:As})}function w(Ap,Au,Av,Aw,Aq,At,Ar){var Ao=A.airports[Ap];var As={flightCode:Ap,cityCode:Ao&&Ao.city||Ap,stateCode:Ao&&Ao.stateProvince||Ap,countryCode:Ao&&Ao.country||Ap,arrivalFlightDate:Au,departureFlightDate:Av,fareBasis:Aw,flightType:Aq,partIndex:At,segmentIndex:Ar+1};if(Aq=="depart"){return m.getPartial("_segmentDetailsForDeparture",As)}else{if(Aq=="arrive"){return m.getPartial("_segmentDetailsForArrival",As)}}return m.getPartial("_segmentDetailsForConnection",As)}function AO(Ao){return A.formatPrice(Ao,{currencyCodeSeparator:"&nbsp;"})}function Am(){m.fireEvent("unblock_submit")}function c(){m.fireEvent("block_submit")}function AK(Ap,Ao){setTimeout(function(){m.fireEvent("refresh_flc",{data:{direction:Ap,brandedBasketHashRef:Ao}})},100)}function l(Ao){m.fireEvent("refresh_lazy_flc",{data:{index:Ao,selectedHashRefs:g}})}function Z(){g=[];m.fireEvent("reset_selection")}}});YUI.add("wl-farerules",function(A){A.components.Farerules=function(C){var K=this;var L;var M={};var P=false;var D=C.compInstConfig;K.incomingEvents={showFareRules:B};K.onRenderState={initialized:function(Q){H(Q);if(D.tabHash){A.on("pageHtmlLoaded",function(){K.fireEvent("add_tabs_callback",{data:{tabHash:D.tabHash,additionalCallback:function(R){if(R.newValue){Q.removeClass("hidden")}else{Q.addClass("hidden")}}}})})}},ajax:function(R){if(D.enabled){function Q(){R.removeClass("loading")}R.addClass("loading");O(I,Q,true)}},overlay:function(Q){N()}};function B(R){if(C.state!="overlay"){return }var S=R.data||{};var Q=A.Lang.isFunction(S.callback)&&S.callback;O(G,Q,S.allFlightsSelected)}function O(U,R,T){var S=T?"__fareRulesContent":"__unavailableFareRules";var Q={data:{requestPartials:[S],flightsSelected:T},on:{end:R||function(){},success:function(X,W){if(W){var V=W.partials[S];U(V);H(K.node)}},failure:U}};K.fireEvent("to-ajax",{context:C,type:"farerules",cfg:Q,actionCode:"getFareRules"})}function E(Q){M[C.state]=Q.one(".fare-rules-container")}function H(R){var Q=R.one("ul");if(Q){Q.delegate("click",J,"li")}E(R);F()}function J(S){S.preventDefault();var T=S.currentTarget;if(T.hasClass("selected")){return }T.addClass("selected");T.siblings().removeClass("selected");var Q=T.get("parentNode").get("children").indexOf(T);var R=K.node.one(".yui-content").get("children");R.addClass("yui-hidden");R.item(Q).removeClass("yui-hidden")}function N(){L=new YAHOO.widget.Dialog("fare-rules-overlay",{visible:false,draggable:false,fixedcenter:"contained",zIndex:520,width:"700px",close:true});L.hideEvent.subscribe(function(){P=false;if(!M[C.state]){E(currentNode)}if(!M[C.state]){return }M[C.state].purge(true);M[C.state].set("innerHTML","")})}function I(Q){K.node.one(".fare-rules-list").set("innerHTML",A.decodeHtmlEntities(Q))}function G(Q){if(C.state=="overlay"){if(P){return }P=true;A.one("#fare-rules-overlay").removeClass("hidden");L.render(document.body);L.show();var R=A.one(L.element);if(R){K.node=R;I(Q)}L.center()}}function F(){var Q=C.compInstConfig;K.fireEvent("cssFareRules",{forceInitialize:true,data:{status:Q.status}})}}});YUI.add("event-simulate",function(A){(function(){var K=A.Lang,J=A.Array,F=K.isFunction,D=K.isString,G=K.isBoolean,P=K.isObject,O=K.isNumber,N=A.config.doc,Q={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1},M={keydown:1,keyup:1,keypress:1},C={blur:1,change:1,focus:1,resize:1,scroll:1,select:1},E={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};A.mix(E,Q);A.mix(E,M);function I(V,Z,U,S,b,R,L,a,X,d,c){if(!V){A.error("simulateKeyEvent(): Invalid target.")}if(D(Z)){Z=Z.toLowerCase();switch(Z){case"textevent":Z="keypress";break;case"keyup":case"keydown":case"keypress":break;default:A.error("simulateKeyEvent(): Event type '"+Z+"' not supported.")}}else{A.error("simulateKeyEvent(): Event type must be a string.")}if(!G(U)){U=true}if(!G(S)){S=true}if(!P(b)){b=window}if(!G(R)){R=false}if(!G(L)){L=false}if(!G(a)){a=false}if(!G(X)){X=false}if(!O(d)){d=0}if(!O(c)){c=0}var Y=null;if(F(N.createEvent)){try{Y=N.createEvent("KeyEvents");Y.initKeyEvent(Z,U,S,b,R,L,a,X,d,c)}catch(W){try{Y=N.createEvent("Events")}catch(T){Y=N.createEvent("UIEvents")}finally{Y.initEvent(Z,U,S);Y.view=b;Y.altKey=L;Y.ctrlKey=R;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=d;Y.charCode=c}}V.dispatchEvent(Y)}else{if(P(N.createEventObject)){Y=N.createEventObject();Y.bubbles=U;Y.cancelable=S;Y.view=b;Y.ctrlKey=R;Y.altKey=L;Y.shiftKey=a;Y.metaKey=X;Y.keyCode=(c>0)?c:d;V.fireEvent("on"+Z,Y)}else{A.error("simulateKeyEvent(): No event simulation framework present.")}}}function B(a,f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b){if(!a){A.error("simulateMouseEvent(): Invalid target.")}if(D(f)){f=f.toLowerCase();if(!Q[f]){A.error("simulateMouseEvent(): Event type '"+f+"' not supported.")}}else{A.error("simulateMouseEvent(): Event type must be a string.")}if(!G(X)){X=true}if(!G(U)){U=(f!="mousemove")}if(!P(g)){g=window}if(!O(Z)){Z=1}if(!O(W)){W=0}if(!O(V)){V=0}if(!O(T)){T=0}if(!O(R)){R=0}if(!G(S)){S=false}if(!G(L)){L=false}if(!G(e)){e=false}if(!G(c)){c=false}if(!O(Y)){Y=0}var d=null;if(F(N.createEvent)){d=N.createEvent("MouseEvents");if(d.initMouseEvent){d.initMouseEvent(f,X,U,g,Z,W,V,T,R,S,L,e,c,Y,b)}else{d=N.createEvent("UIEvents");d.initEvent(f,X,U);d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;d.button=Y;d.relatedTarget=b}if(b&&!d.relatedTarget){if(f=="mouseout"){d.toElement=b}else{if(f=="mouseover"){d.fromElement=b}}}a.dispatchEvent(d)}else{if(P(N.createEventObject)){d=N.createEventObject();d.bubbles=X;d.cancelable=U;d.view=g;d.detail=Z;d.screenX=W;d.screenY=V;d.clientX=T;d.clientY=R;d.ctrlKey=S;d.altKey=L;d.metaKey=c;d.shiftKey=e;switch(Y){case 0:d.button=1;break;case 1:d.button=4;break;case 2:break;default:d.button=0}d.relatedTarget=b;a.fireEvent("on"+f,d)}else{A.error("simulateMouseEvent(): No event simulation framework present.")}}}function H(W,V,S,R,L,U){if(!W){A.error("simulateUIEvent(): Invalid target.")}if(D(V)){V=V.toLowerCase();if(!C[V]){A.error("simulateUIEvent(): Event type '"+V+"' not supported.")}}else{A.error("simulateUIEvent(): Event type must be a string.")}var T=null;if(!G(S)){S=(V in E)}if(!G(R)){R=(V=="submit")}if(!P(L)){L=window}if(!O(U)){U=1}if(F(N.createEvent)){T=N.createEvent("UIEvents");T.initUIEvent(V,S,R,L,U);W.dispatchEvent(T)}else{if(P(N.createEventObject)){T=N.createEventObject();T.bubbles=S;T.cancelable=R;T.view=L;T.detail=U;W.fireEvent("on"+V,T)}else{A.error("simulateUIEvent(): No event simulation framework present.")}}}A.Event.simulate=function(S,R,L){L=L||{};if(Q[R]){B(S,R,L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,L.clientX,L.clientY,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}else{if(M[R]){I(S,R,L.bubbles,L.cancelable,L.view,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.keyCode,L.charCode)}else{if(C[R]){H(S,R,L.bubbles,L.cancelable,L.view,L.detail)}else{A.error("simulate(): Event '"+R+"' can't be simulated.")}}}}})()},"3.1.2",{requires:["event-base"]});YUI.add("node-event-simulate",function(A){A.Node.prototype.simulate=function(C,B){A.Event.simulate(A.Node.getDOMNode(this),C,B)}},"3.1.2",{requires:["node-base","event-simulate"]});YUI.add("wl-yui2-log-control",function(A){if(YAHOO&&YAHOO.widget){YAHOO.widget.Logger=function(){};YAHOO.widget.LogWriter=function(){return{log:function(){}}}}},"1.0.0");(function(){YAHOO.util.Config=function(D){if(D){this.init(D)}if(!D){YAHOO.log("No owner specified for Config object","error","Config")}};var B=YAHOO.lang,C=YAHOO.util.CustomEvent,A=YAHOO.util.Config;A.CONFIG_CHANGED_EVENT="configChanged";A.BOOLEAN_TYPE="boolean";A.prototype={owner:null,queueInProgress:false,config:null,initialConfig:null,eventQueue:null,configChangedEvent:null,init:function(D){this.owner=D;this.configChangedEvent=this.createEvent(A.CONFIG_CHANGED_EVENT);this.configChangedEvent.signature=C.LIST;this.queueInProgress=false;this.config={};this.initialConfig={};this.eventQueue=[]},checkBoolean:function(D){return(typeof D==A.BOOLEAN_TYPE)},checkNumber:function(D){return(!isNaN(D))},fireEvent:function(D,F){YAHOO.log("Firing Config event: "+D+"="+F,"info","Config");var E=this.config[D];if(E&&E.event){E.event.fire(F)}},addProperty:function(E,D){E=E.toLowerCase();YAHOO.log("Added property: "+E,"info","Config");this.config[E]=D;D.event=this.createEvent(E,{scope:this.owner});D.event.signature=C.LIST;D.key=E;if(D.handler){D.event.subscribe(D.handler,this.owner)}this.setProperty(E,D.value,true);if(!D.suppressEvent){this.queueProperty(E,D.value)}},getConfig:function(){var D={},F=this.config,G,E;for(G in F){if(B.hasOwnProperty(F,G)){E=F[G];if(E&&E.event){D[G]=E.value}}}return D},getProperty:function(D){var E=this.config[D.toLowerCase()];if(E&&E.event){return E.value}else{return undefined}},resetProperty:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event){if(this.initialConfig[D]&&!B.isUndefined(this.initialConfig[D])){this.setProperty(D,this.initialConfig[D]);return true}}else{return false}},setProperty:function(E,G,D){var F;E=E.toLowerCase();YAHOO.log("setProperty: "+E+"="+G,"info","Config");if(this.queueInProgress&&!D){this.queueProperty(E,G);return true}else{F=this.config[E];if(F&&F.event){if(F.validator&&!F.validator(G)){return false}else{F.value=G;if(!D){this.fireEvent(E,G);this.configChangedEvent.fire([E,G])}return true}}else{return false}}},queueProperty:function(S,P){S=S.toLowerCase();YAHOO.log("queueProperty: "+S+"="+P,"info","Config");var R=this.config[S],K=false,J,G,H,I,O,Q,F,M,N,D,L,T,E;if(R&&R.event){if(!B.isUndefined(P)&&R.validator&&!R.validator(P)){return false}else{if(!B.isUndefined(P)){R.value=P}else{P=R.value}K=false;J=this.eventQueue.length;for(L=0;L<J;L++){G=this.eventQueue[L];if(G){H=G[0];I=G[1];if(H==S){this.eventQueue[L]=null;this.eventQueue.push([S,(!B.isUndefined(P)?P:I)]);K=true;break}}}if(!K&&!B.isUndefined(P)){this.eventQueue.push([S,P])}}if(R.supercedes){O=R.supercedes.length;for(T=0;T<O;T++){Q=R.supercedes[T];F=this.eventQueue.length;for(E=0;E<F;E++){M=this.eventQueue[E];if(M){N=M[0];D=M[1];if(N==Q.toLowerCase()){this.eventQueue.push([N,D]);this.eventQueue[E]=null;break}}}}}YAHOO.log("Config event queue: "+this.outputEventQueue(),"info","Config");return true}else{return false}},refireEvent:function(D){D=D.toLowerCase();var E=this.config[D];if(E&&E.event&&!B.isUndefined(E.value)){if(this.queueInProgress){this.queueProperty(D)}else{this.fireEvent(D,E.value)}}},applyConfig:function(D,G){var F,E;if(G){E={};for(F in D){if(B.hasOwnProperty(D,F)){E[F.toLowerCase()]=D[F]}}this.initialConfig=E}for(F in D){if(B.hasOwnProperty(D,F)){this.queueProperty(F,D[F])}}},refresh:function(){var D;for(D in this.config){if(B.hasOwnProperty(this.config,D)){this.refireEvent(D)}}},fireQueue:function(){var E,H,D,G,F;this.queueInProgress=true;for(E=0;E<this.eventQueue.length;E++){H=this.eventQueue[E];if(H){D=H[0];G=H[1];F=this.config[D];F.value=G;this.eventQueue[E]=null;this.fireEvent(D,G)}}this.queueInProgress=false;this.eventQueue=[]},subscribeToConfigEvent:function(D,E,G,H){var F=this.config[D.toLowerCase()];if(F&&F.event){if(!A.alreadySubscribed(F.event,E,G)){F.event.subscribe(E,G,H)}return true}else{return false}},unsubscribeFromConfigEvent:function(D,E,G){var F=this.config[D.toLowerCase()];if(F&&F.event){return F.event.unsubscribe(E,G)}else{return false}},toString:function(){var D="Config";if(this.owner){D+=" ["+this.owner.toString()+"]"}return D},outputEventQueue:function(){var D="",G,E,F=this.eventQueue.length;for(E=0;E<F;E++){G=this.eventQueue[E];if(G){D+=G[0]+"="+G[1]+", "}}return D},destroy:function(){var E=this.config,D,F;for(D in E){if(B.hasOwnProperty(E,D)){F=E[D];F.event.unsubscribeAll();F.event=null}}this.configChangedEvent.unsubscribeAll();this.configChangedEvent=null;this.owner=null;this.config=null;this.initialConfig=null;this.eventQueue=null}};A.alreadySubscribed=function(E,H,I){var F=E.subscribers.length,D,G;if(F>0){G=F-1;do{D=E.subscribers[G];if(D&&D.obj==I&&D.fn==H){return true}}while(G--)}return false};YAHOO.lang.augmentProto(A,YAHOO.util.EventProvider)}());YAHOO.widget.DateMath={DAY:"D",WEEK:"W",YEAR:"Y",MONTH:"M",ONE_DAY_MS:1000*60*60*24,WEEK_ONE_JAN_DATE:1,add:function(A,D,C){var F=new Date(A.getTime());switch(D){case this.MONTH:var E=A.getMonth()+C;var B=0;if(E<0){while(E<0){E+=12;B-=1}}else{if(E>11){while(E>11){E-=12;B+=1}}}F.setMonth(E);F.setFullYear(A.getFullYear()+B);break;case this.DAY:this._addDays(F,C);break;case this.YEAR:F.setFullYear(A.getFullYear()+C);break;case this.WEEK:this._addDays(F,(C*7));break}return F},_addDays:function(D,C){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){if(C<0){for(var B=-128;C<B;C-=B){D.setDate(D.getDate()+B)}}else{for(var A=96;C>A;C-=A){D.setDate(D.getDate()+A)}}}D.setDate(D.getDate()+C)},subtract:function(A,C,B){return this.add(A,C,(B*-1))},before:function(C,B){var A=B.getTime();if(C.getTime()<A){return true}else{return false}},after:function(C,B){var A=B.getTime();if(C.getTime()>A){return true}else{return false}},between:function(B,A,C){if(this.after(B,A)&&this.before(B,C)){return true}else{return false}},getJan1:function(A){return this.getDate(A,0,1)},getDayOffset:function(B,D){var C=this.getJan1(D);var A=Math.ceil((B.getTime()-C.getTime())/this.ONE_DAY_MS);return A},getWeekNumber:function(D,B,G){B=B||0;G=G||this.WEEK_ONE_JAN_DATE;var H=this.clearTime(D),L,M;if(H.getDay()===B){L=H}else{L=this.getFirstDayOfWeek(H,B)}var I=L.getFullYear();M=new Date(L.getTime()+6*this.ONE_DAY_MS);var F;if(I!==M.getFullYear()&&M.getDate()>=G){F=1}else{var E=this.clearTime(this.getDate(I,0,G)),A=this.getFirstDayOfWeek(E,B);var J=Math.round((H.getTime()-A.getTime())/this.ONE_DAY_MS);var K=J%7;var C=(J-K)/7;F=C+1}return F},getFirstDayOfWeek:function(D,A){A=A||0;var B=D.getDay(),C=(B-A+7)%7;return this.subtract(D,this.DAY,C)},isYearOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getFullYear()!=A.getFullYear()){C=true}return C},isMonthOverlapWeek:function(A){var C=false;var B=this.add(A,this.DAY,6);if(B.getMonth()!=A.getMonth()){C=true}return C},findMonthStart:function(A){var B=this.getDate(A.getFullYear(),A.getMonth(),1);return B},findMonthEnd:function(B){var D=this.findMonthStart(B);var C=this.add(D,this.MONTH,1);var A=this.subtract(C,this.DAY,1);return A},clearTime:function(A){A.setHours(12,0,0,0);return A},getDate:function(D,A,C){var B=null;if(YAHOO.lang.isUndefined(C)){C=1}if(D>=100){B=new Date(D,A,C)}else{B=new Date();B.setFullYear(D);B.setMonth(A);B.setDate(C);B.setHours(0,0,0,0)}return B}};(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,E=YAHOO.lang,D=YAHOO.widget.DateMath;function F(I,G,H){this.init.apply(this,arguments)}F.IMG_ROOT=null;F.DATE="D";F.MONTH_DAY="MD";F.WEEKDAY="WD";F.RANGE="R";F.MONTH="M";F.DISPLAY_DAYS=42;F.STOP_RENDER="S";F.SHORT="short";F.LONG="long";F.MEDIUM="medium";F.ONE_CHAR="1char";F.DEFAULT_CONFIG={YEAR_OFFSET:{key:"year_offset",value:0,supercedes:["pagedate","selected","mindate","maxdate"]},TODAY:{key:"today",value:new Date(),supercedes:["pagedate"]},PAGEDATE:{key:"pagedate",value:null},SELECTED:{key:"selected",value:[]},TITLE:{key:"title",value:""},CLOSE:{key:"close",value:false},IFRAME:{key:"iframe",value:(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6)?true:false},MINDATE:{key:"mindate",value:null},MAXDATE:{key:"maxdate",value:null},MULTI_SELECT:{key:"multi_select",value:false},START_WEEKDAY:{key:"start_weekday",value:0},SHOW_WEEKDAYS:{key:"show_weekdays",value:true},SHOW_WEEK_HEADER:{key:"show_week_header",value:false},SHOW_WEEK_FOOTER:{key:"show_week_footer",value:false},HIDE_BLANK_WEEKS:{key:"hide_blank_weeks",value:false},NAV_ARROW_LEFT:{key:"nav_arrow_left",value:null},NAV_ARROW_RIGHT:{key:"nav_arrow_right",value:null},MONTHS_SHORT:{key:"months_short",value:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},MONTHS_LONG:{key:"months_long",value:["January","February","March","April","May","June","July","August","September","October","November","December"]},WEEKDAYS_1CHAR:{key:"weekdays_1char",value:["S","M","T","W","T","F","S"]},WEEKDAYS_SHORT:{key:"weekdays_short",value:["Su","Mo","Tu","We","Th","Fr","Sa"]},WEEKDAYS_MEDIUM:{key:"weekdays_medium",value:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},WEEKDAYS_LONG:{key:"weekdays_long",value:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LOCALE_MONTHS:{key:"locale_months",value:"long"},LOCALE_WEEKDAYS:{key:"locale_weekdays",value:"short"},DATE_DELIMITER:{key:"date_delimiter",value:","},DATE_FIELD_DELIMITER:{key:"date_field_delimiter",value:"/"},DATE_RANGE_DELIMITER:{key:"date_range_delimiter",value:"-"},MY_MONTH_POSITION:{key:"my_month_position",value:1},MY_YEAR_POSITION:{key:"my_year_position",value:2},MD_MONTH_POSITION:{key:"md_month_position",value:1},MD_DAY_POSITION:{key:"md_day_position",value:2},MDY_MONTH_POSITION:{key:"mdy_month_position",value:1},MDY_DAY_POSITION:{key:"mdy_day_position",value:2},MDY_YEAR_POSITION:{key:"mdy_year_position",value:3},MY_LABEL_MONTH_POSITION:{key:"my_label_month_position",value:1},MY_LABEL_YEAR_POSITION:{key:"my_label_year_position",value:2},MY_LABEL_MONTH_SUFFIX:{key:"my_label_month_suffix",value:" "},MY_LABEL_YEAR_SUFFIX:{key:"my_label_year_suffix",value:""},NAV:{key:"navigator",value:null},STRINGS:{key:"strings",value:{previousMonth:"Previous Month",nextMonth:"Next Month",close:"Close"},supercedes:["close","title"]}};F._DEFAULT_CONFIG=F.DEFAULT_CONFIG;var B=F.DEFAULT_CONFIG;F._EVENT_TYPES={BEFORE_SELECT:"beforeSelect",SELECT:"select",BEFORE_DESELECT:"beforeDeselect",DESELECT:"deselect",CHANGE_PAGE:"changePage",BEFORE_RENDER:"beforeRender",RENDER:"render",BEFORE_DESTROY:"beforeDestroy",DESTROY:"destroy",RESET:"reset",CLEAR:"clear",BEFORE_HIDE:"beforeHide",HIDE:"hide",BEFORE_SHOW:"beforeShow",SHOW:"show",BEFORE_HIDE_NAV:"beforeHideNav",HIDE_NAV:"hideNav",BEFORE_SHOW_NAV:"beforeShowNav",SHOW_NAV:"showNav",BEFORE_RENDER_NAV:"beforeRenderNav",RENDER_NAV:"renderNav"};F.STYLES={CSS_ROW_HEADER:"calrowhead",CSS_ROW_FOOTER:"calrowfoot",CSS_CELL:"calcell",CSS_CELL_SELECTOR:"selector",CSS_CELL_SELECTED:"selected",CSS_CELL_SELECTABLE:"selectable",CSS_CELL_RESTRICTED:"restricted",CSS_CELL_TODAY:"today",CSS_CELL_OOM:"oom",CSS_CELL_OOB:"previous",CSS_HEADER:"calheader",CSS_HEADER_TEXT:"calhead",CSS_BODY:"calbody",CSS_WEEKDAY_CELL:"calweekdaycell",CSS_WEEKDAY_ROW:"calweekdayrow",CSS_FOOTER:"calfoot",CSS_CALENDAR:"yui-calendar",CSS_SINGLE:"single",CSS_CONTAINER:"yui-calcontainer",CSS_NAV_LEFT:"calnavleft",CSS_NAV_RIGHT:"calnavright",CSS_NAV:"calnav",CSS_CLOSE:"calclose",CSS_CELL_TOP:"calcelltop",CSS_CELL_LEFT:"calcellleft",CSS_CELL_RIGHT:"calcellright",CSS_CELL_BOTTOM:"calcellbottom",CSS_CELL_HOVER:"calcellhover",CSS_CELL_HIGHLIGHT1:"highlight1",CSS_CELL_HIGHLIGHT2:"highlight2",CSS_CELL_HIGHLIGHT3:"highlight3",CSS_CELL_HIGHLIGHT4:"highlight4",CSS_WITH_TITLE:"withtitle",CSS_FIXED_SIZE:"fixedsize",CSS_LINK_CLOSE:"link-close"};F._STYLES=F.STYLES;F.prototype={Config:null,parent:null,index:-1,cells:null,cellDates:null,id:null,containerId:null,oDomContainer:null,today:null,renderStack:null,_renderStack:null,oNavigator:null,_selectedDates:null,domEventMap:null,_parseArgs:function(H){var G={id:null,container:null,config:null};if(H&&H.length&&H.length>0){switch(H.length){case 1:G.id=null;G.container=H[0];G.config=null;break;case 2:if(E.isObject(H[1])&&!H[1].tagName&&!(H[1] instanceof String)){G.id=null;G.container=H[0];G.config=H[1]}else{G.id=H[0];G.container=H[1];G.config=null}break;default:G.id=H[0];G.container=H[1];G.config=H[2];break}}else{this.logger.log("Invalid constructor/init arguments","error")}return G},init:function(J,H,I){var G=this._parseArgs(arguments);J=G.id;H=G.container;I=G.config;this.oDomContainer=C.get(H);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=C.generateId()}if(!J){J=this.oDomContainer.id+"_t"}this.id=J;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("Calendar "+this.id);this.initEvents();this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.initStyles();C.addClass(this.oDomContainer,this.Style.CSS_CONTAINER);C.addClass(this.oDomContainer,this.Style.CSS_SINGLE);this.cellDates=[];this.cells=[];this.renderStack=[];this._renderStack=[];this.setupConfig();if(I){this.cfg.applyConfig(I,true)}this.cfg.fireQueue();this.today=this.cfg.getProperty("today")},configIframe:function(I,H,J){var G=H[0];if(!this.parent){if(C.inDocument(this.oDomContainer)){if(G){var K=C.getStyle(this.oDomContainer,"position");if(K=="absolute"||K=="relative"){if(!C.inDocument(this.iframe)){this.iframe=document.createElement("iframe");this.iframe.src="javascript:false;";C.setStyle(this.iframe,"opacity","0");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<=6){C.addClass(this.iframe,this.Style.CSS_FIXED_SIZE)}this.oDomContainer.insertBefore(this.iframe,this.oDomContainer.firstChild)}}}else{if(this.iframe){if(this.iframe.parentNode){this.iframe.parentNode.removeChild(this.iframe)}this.iframe=null}}}}},configTitle:function(H,G,I){var K=G[0];if(K){this.createTitleBar(K)}else{var J=this.cfg.getProperty(B.CLOSE.key);if(!J){this.removeTitleBar()}else{this.createTitleBar("&#160;")}}},configClose:function(H,G,I){var K=G[0],J=this.cfg.getProperty(B.TITLE.key);if(K){if(!J){this.createTitleBar("&#160;")}this.createCloseButton()}else{this.removeCloseButton();if(!J){this.removeTitleBar()}}},initEvents:function(){var G=F._EVENT_TYPES,I=YAHOO.util.CustomEvent,H=this;H.beforeSelectEvent=new I(G.BEFORE_SELECT);H.selectEvent=new I(G.SELECT);H.beforeDeselectEvent=new I(G.BEFORE_DESELECT);H.deselectEvent=new I(G.DESELECT);H.changePageEvent=new I(G.CHANGE_PAGE);H.beforeRenderEvent=new I(G.BEFORE_RENDER);H.renderEvent=new I(G.RENDER);H.beforeDestroyEvent=new I(G.BEFORE_DESTROY);H.destroyEvent=new I(G.DESTROY);H.resetEvent=new I(G.RESET);H.clearEvent=new I(G.CLEAR);H.beforeShowEvent=new I(G.BEFORE_SHOW);H.showEvent=new I(G.SHOW);H.beforeHideEvent=new I(G.BEFORE_HIDE);H.hideEvent=new I(G.HIDE);H.beforeShowNavEvent=new I(G.BEFORE_SHOW_NAV);H.showNavEvent=new I(G.SHOW_NAV);H.beforeHideNavEvent=new I(G.BEFORE_HIDE_NAV);H.hideNavEvent=new I(G.HIDE_NAV);H.beforeRenderNavEvent=new I(G.BEFORE_RENDER_NAV);H.renderNavEvent=new I(G.RENDER_NAV);H.beforeSelectEvent.subscribe(H.onBeforeSelect,this,true);H.selectEvent.subscribe(H.onSelect,this,true);H.beforeDeselectEvent.subscribe(H.onBeforeDeselect,this,true);H.deselectEvent.subscribe(H.onDeselect,this,true);H.changePageEvent.subscribe(H.onChangePage,this,true);H.renderEvent.subscribe(H.onRender,this,true);H.resetEvent.subscribe(H.onReset,this,true);H.clearEvent.subscribe(H.onClear,this,true)},doPreviousMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.previousMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_LEFT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doNextMonthNav:function(H,G){A.preventDefault(H);setTimeout(function(){G.nextMonth();var J=C.getElementsByClassName(G.Style.CSS_NAV_RIGHT,"a",G.oDomContainer);if(J&&J[0]){try{J[0].focus()}catch(I){}}},0)},doSelectCell:function(M,G){var R,O,I,L;var N=A.getTarget(M),H=N.tagName.toLowerCase(),K=false;while(H!="td"&&!C.hasClass(N,G.Style.CSS_CELL_SELECTABLE)){if(!K&&H=="a"&&C.hasClass(N,G.Style.CSS_CELL_SELECTOR)){K=true}N=N.parentNode;H=N.tagName.toLowerCase();if(N==this.oDomContainer||H=="html"){return }}if(K){A.preventDefault(M)}R=N;if(C.hasClass(R,G.Style.CSS_CELL_SELECTABLE)){L=G.getIndexFromId(R.id);if(L>-1){O=G.cellDates[L];if(O){I=D.getDate(O[0],O[1]-1,O[2]);var Q;G.logger.log("Selecting cell "+L+" via click","info");if(G.Options.MULTI_SELECT){Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}var J=G.cellDates[L];var P=G._indexOfSelectedFieldArray(J);if(P>-1){G.deselectCell(L)}else{G.selectCell(L)}}else{Q=R.getElementsByTagName("a")[0];if(Q){Q.blur()}G.selectCell(L)}}}}},doCellMouseOver:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.addClass(G,H.Style.CSS_CELL_HOVER)}},doCellMouseOut:function(I,H){var G;if(I){G=A.getTarget(I)}else{G=this}while(G.tagName&&G.tagName.toLowerCase()!="td"){G=G.parentNode;if(!G.tagName||G.tagName.toLowerCase()=="html"){return }}if(C.hasClass(G,H.Style.CSS_CELL_SELECTABLE)){C.removeClass(G,H.Style.CSS_CELL_HOVER)}},setupConfig:function(){var G=this.cfg;G.addProperty(B.TODAY.key,{value:new Date(B.TODAY.value.getTime()),supercedes:B.TODAY.supercedes,handler:this.configToday,suppressEvent:true});G.addProperty(B.PAGEDATE.key,{value:B.PAGEDATE.value||new Date(B.TODAY.value.getTime()),handler:this.configPageDate});G.addProperty(B.SELECTED.key,{value:B.SELECTED.value.concat(),handler:this.configSelected});G.addProperty(B.TITLE.key,{value:B.TITLE.value,handler:this.configTitle});G.addProperty(B.CLOSE.key,{value:B.CLOSE.value,handler:this.configClose});G.addProperty(B.IFRAME.key,{value:B.IFRAME.value,handler:this.configIframe,validator:G.checkBoolean});G.addProperty(B.MINDATE.key,{value:B.MINDATE.value,handler:this.configMinDate});G.addProperty(B.MAXDATE.key,{value:B.MAXDATE.value,handler:this.configMaxDate});G.addProperty(B.MULTI_SELECT.key,{value:B.MULTI_SELECT.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.START_WEEKDAY.key,{value:B.START_WEEKDAY.value,handler:this.configOptions,validator:G.checkNumber});G.addProperty(B.SHOW_WEEKDAYS.key,{value:B.SHOW_WEEKDAYS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_HEADER.key,{value:B.SHOW_WEEK_HEADER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.SHOW_WEEK_FOOTER.key,{value:B.SHOW_WEEK_FOOTER.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.HIDE_BLANK_WEEKS.key,{value:B.HIDE_BLANK_WEEKS.value,handler:this.configOptions,validator:G.checkBoolean});G.addProperty(B.NAV_ARROW_LEFT.key,{value:B.NAV_ARROW_LEFT.value,handler:this.configOptions});G.addProperty(B.NAV_ARROW_RIGHT.key,{value:B.NAV_ARROW_RIGHT.value,handler:this.configOptions});G.addProperty(B.MONTHS_SHORT.key,{value:B.MONTHS_SHORT.value,handler:this.configLocale});G.addProperty(B.MONTHS_LONG.key,{value:B.MONTHS_LONG.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_1CHAR.key,{value:B.WEEKDAYS_1CHAR.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_SHORT.key,{value:B.WEEKDAYS_SHORT.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_MEDIUM.key,{value:B.WEEKDAYS_MEDIUM.value,handler:this.configLocale});G.addProperty(B.WEEKDAYS_LONG.key,{value:B.WEEKDAYS_LONG.value,handler:this.configLocale});var H=function(){G.refireEvent(B.LOCALE_MONTHS.key);G.refireEvent(B.LOCALE_WEEKDAYS.key)};G.subscribeToConfigEvent(B.START_WEEKDAY.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.MONTHS_LONG.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_1CHAR.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_SHORT.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_MEDIUM.key,H,this,true);G.subscribeToConfigEvent(B.WEEKDAYS_LONG.key,H,this,true);G.addProperty(B.LOCALE_MONTHS.key,{value:B.LOCALE_MONTHS.value,handler:this.configLocaleValues});G.addProperty(B.LOCALE_WEEKDAYS.key,{value:B.LOCALE_WEEKDAYS.value,handler:this.configLocaleValues});G.addProperty(B.YEAR_OFFSET.key,{value:B.YEAR_OFFSET.value,supercedes:B.YEAR_OFFSET.supercedes,handler:this.configLocale});G.addProperty(B.DATE_DELIMITER.key,{value:B.DATE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_FIELD_DELIMITER.key,{value:B.DATE_FIELD_DELIMITER.value,handler:this.configLocale});G.addProperty(B.DATE_RANGE_DELIMITER.key,{value:B.DATE_RANGE_DELIMITER.value,handler:this.configLocale});G.addProperty(B.MY_MONTH_POSITION.key,{value:B.MY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_YEAR_POSITION.key,{value:B.MY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_MONTH_POSITION.key,{value:B.MD_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MD_DAY_POSITION.key,{value:B.MD_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_MONTH_POSITION.key,{value:B.MDY_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_DAY_POSITION.key,{value:B.MDY_DAY_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MDY_YEAR_POSITION.key,{value:B.MDY_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_POSITION.key,{value:B.MY_LABEL_MONTH_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_YEAR_POSITION.key,{value:B.MY_LABEL_YEAR_POSITION.value,handler:this.configLocale,validator:G.checkNumber});G.addProperty(B.MY_LABEL_MONTH_SUFFIX.key,{value:B.MY_LABEL_MONTH_SUFFIX.value,handler:this.configLocale});G.addProperty(B.MY_LABEL_YEAR_SUFFIX.key,{value:B.MY_LABEL_YEAR_SUFFIX.value,handler:this.configLocale});G.addProperty(B.NAV.key,{value:B.NAV.value,handler:this.configNavigator});G.addProperty(B.STRINGS.key,{value:B.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:B.STRINGS.supercedes})},configStrings:function(H,G,I){var J=E.merge(B.STRINGS.value,G[0]);this.cfg.setProperty(B.STRINGS.key,J,true)},configPageDate:function(H,G,I){this.cfg.setProperty(B.PAGEDATE.key,this._parsePageDate(G[0]),true)},configMinDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MINDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configMaxDate:function(H,G,I){var J=G[0];if(E.isString(J)){J=this._parseDate(J);this.cfg.setProperty(B.MAXDATE.key,D.getDate(J[0],(J[1]-1),J[2]))}},configToday:function(I,H,J){var K=H[0];if(E.isString(K)){K=this._parseDate(K)}var G=D.clearTime(K);if(!this.cfg.initialConfig[B.PAGEDATE.key]){this.cfg.setProperty(B.PAGEDATE.key,G)}this.today=G;this.cfg.setProperty(B.TODAY.key,G,true)},configSelected:function(I,G,K){var H=G[0],J=B.SELECTED.key;if(H){if(E.isString(H)){this.cfg.setProperty(J,this._parseDates(H),true)}}if(!this._selectedDates){this._selectedDates=this.cfg.getProperty(J)}},configOptions:function(H,G,I){this.Options[H.toUpperCase()]=G[0]},configLocale:function(H,G,I){this.Locale[H.toUpperCase()]=G[0];this.cfg.refireEvent(B.LOCALE_MONTHS.key);this.cfg.refireEvent(B.LOCALE_WEEKDAYS.key)},configLocaleValues:function(J,I,K){J=J.toLowerCase();var M=I[0],H=this.cfg,N=this.Locale;switch(J){case B.LOCALE_MONTHS.key:switch(M){case F.SHORT:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_SHORT.key).concat();break;case F.LONG:N.LOCALE_MONTHS=H.getProperty(B.MONTHS_LONG.key).concat();break}break;case B.LOCALE_WEEKDAYS.key:switch(M){case F.ONE_CHAR:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_1CHAR.key).concat();break;case F.SHORT:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_SHORT.key).concat();break;case F.MEDIUM:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_MEDIUM.key).concat();break;case F.LONG:N.LOCALE_WEEKDAYS=H.getProperty(B.WEEKDAYS_LONG.key).concat();break}var L=H.getProperty(B.START_WEEKDAY.key);if(L>0){for(var G=0;G<L;++G){N.LOCALE_WEEKDAYS.push(N.LOCALE_WEEKDAYS.shift())}}break}},configNavigator:function(H,G,I){var J=G[0];if(YAHOO.widget.CalendarNavigator&&(J===true||E.isObject(J))){if(!this.oNavigator){this.oNavigator=new YAHOO.widget.CalendarNavigator(this);this.beforeRenderEvent.subscribe(function(){if(!this.pages){this.oNavigator.erase()}},this,true)}}else{if(this.oNavigator){this.oNavigator.destroy();this.oNavigator=null}}},initStyles:function(){var G=F.STYLES;this.Style={CSS_ROW_HEADER:G.CSS_ROW_HEADER,CSS_ROW_FOOTER:G.CSS_ROW_FOOTER,CSS_CELL:G.CSS_CELL,CSS_CELL_SELECTOR:G.CSS_CELL_SELECTOR,CSS_CELL_SELECTED:G.CSS_CELL_SELECTED,CSS_CELL_SELECTABLE:G.CSS_CELL_SELECTABLE,CSS_CELL_RESTRICTED:G.CSS_CELL_RESTRICTED,CSS_CELL_TODAY:G.CSS_CELL_TODAY,CSS_CELL_OOM:G.CSS_CELL_OOM,CSS_CELL_OOB:G.CSS_CELL_OOB,CSS_HEADER:G.CSS_HEADER,CSS_HEADER_TEXT:G.CSS_HEADER_TEXT,CSS_BODY:G.CSS_BODY,CSS_WEEKDAY_CELL:G.CSS_WEEKDAY_CELL,CSS_WEEKDAY_ROW:G.CSS_WEEKDAY_ROW,CSS_FOOTER:G.CSS_FOOTER,CSS_CALENDAR:G.CSS_CALENDAR,CSS_SINGLE:G.CSS_SINGLE,CSS_CONTAINER:G.CSS_CONTAINER,CSS_NAV_LEFT:G.CSS_NAV_LEFT,CSS_NAV_RIGHT:G.CSS_NAV_RIGHT,CSS_NAV:G.CSS_NAV,CSS_CLOSE:G.CSS_CLOSE,CSS_CELL_TOP:G.CSS_CELL_TOP,CSS_CELL_LEFT:G.CSS_CELL_LEFT,CSS_CELL_RIGHT:G.CSS_CELL_RIGHT,CSS_CELL_BOTTOM:G.CSS_CELL_BOTTOM,CSS_CELL_HOVER:G.CSS_CELL_HOVER,CSS_CELL_HIGHLIGHT1:G.CSS_CELL_HIGHLIGHT1,CSS_CELL_HIGHLIGHT2:G.CSS_CELL_HIGHLIGHT2,CSS_CELL_HIGHLIGHT3:G.CSS_CELL_HIGHLIGHT3,CSS_CELL_HIGHLIGHT4:G.CSS_CELL_HIGHLIGHT4,CSS_WITH_TITLE:G.CSS_WITH_TITLE,CSS_FIXED_SIZE:G.CSS_FIXED_SIZE,CSS_LINK_CLOSE:G.CSS_LINK_CLOSE}},buildMonthLabel:function(){return this._buildMonthLabel(this.cfg.getProperty(B.PAGEDATE.key))},_buildMonthLabel:function(G){var I=this.Locale.LOCALE_MONTHS[G.getMonth()]+this.Locale.MY_LABEL_MONTH_SUFFIX,H=(G.getFullYear()+this.Locale.YEAR_OFFSET)+this.Locale.MY_LABEL_YEAR_SUFFIX;if(this.Locale.MY_LABEL_MONTH_POSITION==2||this.Locale.MY_LABEL_YEAR_POSITION==1){return H+I}else{return I+H}},buildDayLabel:function(G){return G.getDate()},createTitleBar:function(G){var H=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||document.createElement("div");H.className=YAHOO.widget.CalendarGroup.CSS_2UPTITLE;H.innerHTML=G;this.oDomContainer.insertBefore(H,this.oDomContainer.firstChild);C.addClass(this.oDomContainer,this.Style.CSS_WITH_TITLE);return H},removeTitleBar:function(){var G=C.getElementsByClassName(YAHOO.widget.CalendarGroup.CSS_2UPTITLE,"div",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}C.removeClass(this.oDomContainer,this.Style.CSS_WITH_TITLE)},createCloseButton:function(){var K=YAHOO.widget.CalendarGroup.CSS_2UPCLOSE,J=this.Style.CSS_LINK_CLOSE,M="us/my/bn/x_d.gif",L=C.getElementsByClassName(J,"a",this.oDomContainer)[0],G=this.cfg.getProperty(B.STRINGS.key),H=(G&&G.close)?G.close:"";if(!L){L=document.createElement("a");A.addListener(L,"click",function(O,N){N.hide();A.preventDefault(O)},this)}L.href="#";L.className=J;if(F.IMG_ROOT!==null){var I=C.getElementsByClassName(K,"img",L)[0]||document.createElement("img");I.src=F.IMG_ROOT+M;I.className=K;L.appendChild(I)}else{L.innerHTML='<span class="'+K+" "+this.Style.CSS_CLOSE+'">'+H+"</span>"}this.oDomContainer.appendChild(L);return L},removeCloseButton:function(){var G=C.getElementsByClassName(this.Style.CSS_LINK_CLOSE,"a",this.oDomContainer)[0]||null;if(G){A.purgeElement(G);this.oDomContainer.removeChild(G)}},renderHeader:function(Q){this.logger.log("Rendering header","render");var P=7,O="us/tr/callt.gif",G="us/tr/calrt.gif",N=this.cfg,K=N.getProperty(B.PAGEDATE.key),L=N.getProperty(B.STRINGS.key),V=(L&&L.previousMonth)?L.previousMonth:"",H=(L&&L.nextMonth)?L.nextMonth:"",M;if(N.getProperty(B.SHOW_WEEK_HEADER.key)){P+=1}if(N.getProperty(B.SHOW_WEEK_FOOTER.key)){P+=1}Q[Q.length]="<thead>";Q[Q.length]="<tr>";Q[Q.length]='<th colspan="'+P+'" class="'+this.Style.CSS_HEADER_TEXT+'">';Q[Q.length]='<div class="'+this.Style.CSS_HEADER+'">';var X,U=false;if(this.parent){if(this.index===0){X=true}if(this.index==(this.parent.cfg.getProperty("pages")-1)){U=true}}else{X=true;U=true}if(X){M=this._buildMonthLabel(D.subtract(K,D.MONTH,1));var R=N.getProperty(B.NAV_ARROW_LEFT.key);if(R===null&&F.IMG_ROOT!==null){R=F.IMG_ROOT+O}var I=(R===null)?"":' style="background-image:url('+R+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_LEFT+'"'+I+' href="#">'+V+" ("+M+")</a>"}var W=this.buildMonthLabel();var S=this.parent||this;if(S.cfg.getProperty("navigator")){W='<a class="'+this.Style.CSS_NAV+'" href="#">'+W+"</a>"}Q[Q.length]=W;if(U){M=this._buildMonthLabel(D.add(K,D.MONTH,1));var T=N.getProperty(B.NAV_ARROW_RIGHT.key);if(T===null&&F.IMG_ROOT!==null){T=F.IMG_ROOT+G}var J=(T===null)?"":' style="background-image:url('+T+')"';Q[Q.length]='<a class="'+this.Style.CSS_NAV_RIGHT+'"'+J+' href="#">'+H+" ("+M+")</a>"}Q[Q.length]="</div>\n</th>\n</tr>";if(N.getProperty(B.SHOW_WEEKDAYS.key)){Q=this.buildWeekdays(Q)}Q[Q.length]="</thead>";return Q},buildWeekdays:function(H){H[H.length]='<tr class="'+this.Style.CSS_WEEKDAY_ROW+'">';if(this.cfg.getProperty(B.SHOW_WEEK_HEADER.key)){H[H.length]="<th>&#160;</th>"}for(var G=0;G<this.Locale.LOCALE_WEEKDAYS.length;++G){H[H.length]='<th class="'+this.Style.CSS_WEEKDAY_CELL+'">'+this.Locale.LOCALE_WEEKDAYS[G]+"</th>"}if(this.cfg.getProperty(B.SHOW_WEEK_FOOTER.key)){H[H.length]="<th>&#160;</th>"}H[H.length]="</tr>";return H},renderBody:function(n,l){this.logger.log("Rendering body","render");var AL=this.cfg.getProperty(B.START_WEEKDAY.key);this.preMonthDays=n.getDay();if(AL>0){this.preMonthDays-=AL}if(this.preMonthDays<0){this.preMonthDays+=7}this.monthDays=D.findMonthEnd(n).getDate();this.postMonthDays=F.DISPLAY_DAYS-this.preMonthDays-this.monthDays;this.logger.log(this.preMonthDays+" preciding out-of-month days","render");this.logger.log(this.monthDays+" month days","render");this.logger.log(this.postMonthDays+" post-month days","render");n=D.subtract(n,D.DAY,this.preMonthDays);this.logger.log("Calendar page starts on "+n,"render");var Y,N,M="w",f="_cell",c="wd",y="d",P,v,AD=this.today,O=this.cfg,W=AD.getFullYear(),w=AD.getMonth(),J=AD.getDate(),AC=O.getProperty(B.PAGEDATE.key),I=O.getProperty(B.HIDE_BLANK_WEEKS.key),k=O.getProperty(B.SHOW_WEEK_FOOTER.key),b=O.getProperty(B.SHOW_WEEK_HEADER.key),U=O.getProperty(B.MINDATE.key),a=O.getProperty(B.MAXDATE.key),T=this.Locale.YEAR_OFFSET;if(U){U=D.clearTime(U)}if(a){a=D.clearTime(a)}l[l.length]='<tbody class="m'+(AC.getMonth()+1)+" "+this.Style.CSS_BODY+'">';var AJ=0,Q=document.createElement("div"),m=document.createElement("td");Q.appendChild(m);var AB=this.parent||this;for(var AF=0;AF<6;AF++){Y=D.getWeekNumber(n,AL);N=M+Y;if(AF!==0&&I===true&&n.getMonth()!=AC.getMonth()){break}else{l[l.length]='<tr class="'+N+'">';if(b){l=this.renderRowHeader(Y,l)}for(var AK=0;AK<7;AK++){P=[];this.clearElement(m);m.className=this.Style.CSS_CELL;m.id=this.id+f+AJ;this.logger.log("Rendering cell "+m.id+" ("+n.getFullYear()+T+"-"+(n.getMonth()+1)+"-"+n.getDate()+")","cellrender");if(n.getDate()==J&&n.getMonth()==w&&n.getFullYear()==W){P[P.length]=AB.renderCellStyleToday}var Z=[n.getFullYear(),n.getMonth()+1,n.getDate()];this.cellDates[this.cellDates.length]=Z;if(n.getMonth()!=AC.getMonth()){P[P.length]=AB.renderCellNotThisMonth}else{C.addClass(m,c+n.getDay());C.addClass(m,y+n.getDate());for(var AE=0;AE<this.renderStack.length;++AE){v=null;var z=this.renderStack[AE],AM=z[0],H,e,L;switch(AM){case F.DATE:H=z[1][1];e=z[1][2];L=z[1][0];if(n.getMonth()+1==H&&n.getDate()==e&&n.getFullYear()==L){v=z[2];this.renderStack.splice(AE,1)}break;case F.MONTH_DAY:H=z[1][0];e=z[1][1];if(n.getMonth()+1==H&&n.getDate()==e){v=z[2];this.renderStack.splice(AE,1)}break;case F.RANGE:var h=z[1][0],g=z[1][1],o=h[1],S=h[2],X=h[0],AI=D.getDate(X,o-1,S),K=g[1],u=g[2],G=g[0],AH=D.getDate(G,K-1,u);if(n.getTime()>=AI.getTime()&&n.getTime()<=AH.getTime()){v=z[2];if(n.getTime()==AH.getTime()){this.renderStack.splice(AE,1)}}break;case F.WEEKDAY:var R=z[1][0];if(n.getDay()+1==R){v=z[2]}break;case F.MONTH:H=z[1][0];if(n.getMonth()+1==H){v=z[2]}break}if(v){P[P.length]=v}}}if(this._indexOfSelectedFieldArray(Z)>-1){P[P.length]=AB.renderCellStyleSelected}if((U&&(n.getTime()<U.getTime()))||(a&&(n.getTime()>a.getTime()))){P[P.length]=AB.renderOutOfBoundsDate}else{P[P.length]=AB.styleCellDefault;P[P.length]=AB.renderCellDefault}for(var AA=0;AA<P.length;++AA){this.logger.log("renderer["+AA+"] for ("+n.getFullYear()+T+"-"+(n.getMonth()+1)+"-"+n.getDate()+")","cellrender");if(P[AA].call(AB,n,m)==F.STOP_RENDER){break}}n.setTime(n.getTime()+D.ONE_DAY_MS);n=D.clearTime(n);if(AJ>=0&&AJ<=6){C.addClass(m,this.Style.CSS_CELL_TOP)}if((AJ%7)===0){C.addClass(m,this.Style.CSS_CELL_LEFT)}if(((AJ+1)%7)===0){C.addClass(m,this.Style.CSS_CELL_RIGHT)}var q=this.postMonthDays;if(I&&q>=7){var V=Math.floor(q/7);for(var AG=0;AG<V;++AG){q-=7}}if(AJ>=((this.preMonthDays+q+this.monthDays)-7)){C.addClass(m,this.Style.CSS_CELL_BOTTOM)}l[l.length]=Q.innerHTML;AJ++}if(k){l=this.renderRowFooter(Y,l)}l[l.length]="</tr>"}}l[l.length]="</tbody>";return l},renderFooter:function(G){return G},render:function(){this.beforeRenderEvent.fire();var H=D.findMonthStart(this.cfg.getProperty(B.PAGEDATE.key));this.resetRenderers();this.cellDates.length=0;A.purgeElement(this.oDomContainer,true);var G=[];G[G.length]='<table cellSpacing="0" class="'+this.Style.CSS_CALENDAR+" y"+(H.getFullYear()+this.Locale.YEAR_OFFSET)+'" id="'+this.id+'">';G=this.renderHeader(G);G=this.renderBody(H,G);G=this.renderFooter(G);G[G.length]="</table>";this.oDomContainer.innerHTML=G.join("\n");this.applyListeners();this.cells=C.getElementsByClassName(this.Style.CSS_CELL,"td",this.id);this.cfg.refireEvent(B.TITLE.key);this.cfg.refireEvent(B.CLOSE.key);this.cfg.refireEvent(B.IFRAME.key);this.renderEvent.fire()},applyListeners:function(){var P=this.oDomContainer,H=this.parent||this,L="a",S="click";var M=C.getElementsByClassName(this.Style.CSS_NAV_LEFT,L,P),I=C.getElementsByClassName(this.Style.CSS_NAV_RIGHT,L,P);if(M&&M.length>0){this.linkLeft=M[0];A.addListener(this.linkLeft,S,this.doPreviousMonthNav,H,true)}if(I&&I.length>0){this.linkRight=I[0];A.addListener(this.linkRight,S,this.doNextMonthNav,H,true)}if(H.cfg.getProperty("navigator")!==null){this.applyNavListeners()}if(this.domEventMap){var J,G;for(var R in this.domEventMap){if(E.hasOwnProperty(this.domEventMap,R)){var N=this.domEventMap[R];if(!(N instanceof Array)){N=[N]}for(var K=0;K<N.length;K++){var Q=N[K];G=C.getElementsByClassName(R,Q.tag,this.oDomContainer);for(var O=0;O<G.length;O++){J=G[O];A.addListener(J,Q.event,Q.handler,Q.scope,Q.correct)}}}}}A.addListener(this.oDomContainer,"click",this.doSelectCell,this);A.addListener(this.oDomContainer,"mouseover",this.doCellMouseOver,this);A.addListener(this.oDomContainer,"mouseout",this.doCellMouseOut,this)},applyNavListeners:function(){var H=this.parent||this,I=this,G=C.getElementsByClassName(this.Style.CSS_NAV,"a",this.oDomContainer);if(G.length>0){A.addListener(G,"click",function(N,M){var L=A.getTarget(N);if(this===L||C.isAncestor(this,L)){A.preventDefault(N)}var J=H.oNavigator;if(J){var K=I.cfg.getProperty("pagedate");J.setYear(K.getFullYear()+I.Locale.YEAR_OFFSET);J.setMonth(K.getMonth());J.show()}})}},getDateByCellId:function(H){var G=this.getDateFieldsByCellId(H);return(G)?D.getDate(G[0],G[1]-1,G[2]):null},getDateFieldsByCellId:function(G){G=this.getIndexFromId(G);return(G>-1)?this.cellDates[G]:null},getCellIndex:function(I){var H=-1;if(I){var G=I.getMonth(),N=I.getFullYear(),M=I.getDate(),K=this.cellDates;for(var J=0;J<K.length;++J){var L=K[J];if(L[0]===N&&L[1]===G+1&&L[2]===M){H=J;break}}}return H},getIndexFromId:function(I){var H=-1,G=I.lastIndexOf("_cell");if(G>-1){H=parseInt(I.substring(G+5),10)}return H},renderOutOfBoundsDate:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOB);G.innerHTML=H.getDate();return F.STOP_RENDER},renderRowHeader:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_HEADER+'">'+H+"</th>";return G},renderRowFooter:function(H,G){G[G.length]='<th class="'+this.Style.CSS_ROW_FOOTER+'">'+H+"</th>";return G},renderCellDefault:function(H,G){G.innerHTML='<a href="#" class="'+this.Style.CSS_CELL_SELECTOR+'">'+this.buildDayLabel(H)+"</a>"},styleCellDefault:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTABLE)},renderCellStyleHighlight1:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT1)},renderCellStyleHighlight2:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT2)},renderCellStyleHighlight3:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT3)},renderCellStyleHighlight4:function(H,G){C.addClass(G,this.Style.CSS_CELL_HIGHLIGHT4)},renderCellStyleToday:function(H,G){C.addClass(G,this.Style.CSS_CELL_TODAY)},renderCellStyleSelected:function(H,G){C.addClass(G,this.Style.CSS_CELL_SELECTED)},renderCellNotThisMonth:function(H,G){C.addClass(G,this.Style.CSS_CELL_OOM);G.innerHTML=H.getDate();return F.STOP_RENDER},renderBodyCellRestricted:function(H,G){C.addClass(G,this.Style.CSS_CELL);C.addClass(G,this.Style.CSS_CELL_RESTRICTED);G.innerHTML=H.getDate();return F.STOP_RENDER},addMonths:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.MONTH,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractMonths:function(G){this.addMonths(-1*G)},addYears:function(I){var H=B.PAGEDATE.key,J=this.cfg.getProperty(H),G=D.add(J,D.YEAR,I);this.cfg.setProperty(H,G);this.resetRenderers();this.changePageEvent.fire(J,G)},subtractYears:function(G){this.addYears(-1*G)},nextMonth:function(){this.addMonths(1)},previousMonth:function(){this.addMonths(-1)},nextYear:function(){this.addYears(1)},previousYear:function(){this.addYears(-1)},reset:function(){this.cfg.resetProperty(B.SELECTED.key);this.cfg.resetProperty(B.PAGEDATE.key);this.resetEvent.fire()},clear:function(){this.cfg.setProperty(B.SELECTED.key,[]);this.cfg.setProperty(B.PAGEDATE.key,new Date(this.today.getTime()));this.clearEvent.fire()},select:function(I){this.logger.log("Select: "+I,"info");var L=this._toFieldArray(I),H=[],K=[],M=B.SELECTED.key;this.logger.log("Selection field array: "+L,"info");for(var G=0;G<L.length;++G){var J=L[G];if(!this.isDateOOB(this._toDate(J))){if(H.length===0){this.beforeSelectEvent.fire();K=this.cfg.getProperty(M)}H.push(J);if(this._indexOfSelectedFieldArray(J)==-1){K[K.length]=J}}}if(H.length===0){this.logger.log("All provided dates were OOB. beforeSelect and select events not fired","info")}if(H.length>0){if(this.parent){this.parent.cfg.setProperty(M,K)}else{this.cfg.setProperty(M,K)}this.selectEvent.fire(H)}return this.getSelectedDates()},selectCell:function(J){var H=this.cells[J],N=this.cellDates[J],M=this._toDate(N),I=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);this.logger.log("Select: "+M,"info");if(!I){this.logger.log("The cell at cellIndex:"+J+" is not a selectable cell. beforeSelect, select events not fired","info")}if(I){this.beforeSelectEvent.fire();var L=B.SELECTED.key;var K=this.cfg.getProperty(L);var G=N.concat();if(this._indexOfSelectedFieldArray(G)==-1){K[K.length]=G}if(this.parent){this.parent.cfg.setProperty(L,K)}else{this.cfg.setProperty(L,K)}this.renderCellStyleSelected(M,H);this.selectEvent.fire([G]);this.doCellMouseOut.call(H,null,this)}return this.getSelectedDates()},deselect:function(K){this.logger.log("Deselect: "+K,"info");var G=this._toFieldArray(K),J=[],M=[],N=B.SELECTED.key;this.logger.log("Deselection field array: "+G,"info");for(var H=0;H<G.length;++H){var L=G[H];if(!this.isDateOOB(this._toDate(L))){if(J.length===0){this.beforeDeselectEvent.fire();M=this.cfg.getProperty(N)}J.push(L);var I=this._indexOfSelectedFieldArray(L);if(I!=-1){M.splice(I,1)}}}if(J.length===0){this.logger.log("All provided dates were OOB. beforeDeselect and deselect events not fired")}if(J.length>0){if(this.parent){this.parent.cfg.setProperty(N,M)}else{this.cfg.setProperty(N,M)}this.deselectEvent.fire(J)}return this.getSelectedDates()},deselectCell:function(K){var H=this.cells[K],N=this.cellDates[K],I=this._indexOfSelectedFieldArray(N);var J=C.hasClass(H,this.Style.CSS_CELL_SELECTABLE);if(!J){this.logger.log("The cell at cellIndex:"+K+" is not a selectable/deselectable cell","info")}if(J){this.beforeDeselectEvent.fire();var L=this.cfg.getProperty(B.SELECTED.key),M=this._toDate(N),G=N.concat();if(I>-1){if(this.cfg.getProperty(B.PAGEDATE.key).getMonth()==M.getMonth()&&this.cfg.getProperty(B.PAGEDATE.key).getFullYear()==M.getFullYear()){C.removeClass(H,this.Style.CSS_CELL_SELECTED)}L.splice(I,1)}if(this.parent){this.parent.cfg.setProperty(B.SELECTED.key,L)}else{this.cfg.setProperty(B.SELECTED.key,L)}this.deselectEvent.fire([G])}return this.getSelectedDates()},deselectAll:function(){this.beforeDeselectEvent.fire();var J=B.SELECTED.key,G=this.cfg.getProperty(J),H=G.length,I=G.concat();if(this.parent){this.parent.cfg.setProperty(J,[])}else{this.cfg.setProperty(J,[])}if(H>0){this.deselectEvent.fire(I)}return this.getSelectedDates()},_toFieldArray:function(H){var G=[];if(H instanceof Date){G=[[H.getFullYear(),H.getMonth()+1,H.getDate()]]}else{if(E.isString(H)){G=this._parseDates(H)}else{if(E.isArray(H)){for(var I=0;I<H.length;++I){var J=H[I];G[G.length]=[J.getFullYear(),J.getMonth()+1,J.getDate()]}}}}return G},toDate:function(G){return this._toDate(G)},_toDate:function(G){if(G instanceof Date){return G}else{return D.getDate(G[0],G[1]-1,G[2])}},_fieldArraysAreEqual:function(I,H){var G=false;if(I[0]==H[0]&&I[1]==H[1]&&I[2]==H[2]){G=true}return G},_indexOfSelectedFieldArray:function(K){var J=-1,G=this.cfg.getProperty(B.SELECTED.key);for(var I=0;I<G.length;++I){var H=G[I];if(K[0]==H[0]&&K[1]==H[1]&&K[2]==H[2]){J=I;break}}return J},isDateOOM:function(G){return(G.getMonth()!=this.cfg.getProperty(B.PAGEDATE.key).getMonth())},isDateOOB:function(I){var J=this.cfg.getProperty(B.MINDATE.key),K=this.cfg.getProperty(B.MAXDATE.key),H=D;if(J){J=H.clearTime(J)}if(K){K=H.clearTime(K)}var G=new Date(I.getTime());G=H.clearTime(G);return((J&&G.getTime()<J.getTime())||(K&&G.getTime()>K.getTime()))},_parsePageDate:function(G){var J;if(G){if(G instanceof Date){J=D.findMonthStart(G)}else{var K,I,H;H=G.split(this.cfg.getProperty(B.DATE_FIELD_DELIMITER.key));K=parseInt(H[this.cfg.getProperty(B.MY_MONTH_POSITION.key)-1],10)-1;I=parseInt(H[this.cfg.getProperty(B.MY_YEAR_POSITION.key)-1],10)-this.Locale.YEAR_OFFSET;J=D.getDate(I,K,1)}}else{J=D.getDate(this.today.getFullYear(),this.today.getMonth(),1)}return J},onBeforeSelect:function(){if(this.cfg.getProperty(B.MULTI_SELECT.key)===false){if(this.parent){this.parent.callChildFunction("clearAllBodyCellStyles",this.Style.CSS_CELL_SELECTED);this.parent.deselectAll()}else{this.clearAllBodyCellStyles(this.Style.CSS_CELL_SELECTED);this.deselectAll()}}},onSelect:function(G){},onBeforeDeselect:function(){},onDeselect:function(G){},onChangePage:function(){this.render()},onRender:function(){},onReset:function(){this.render()},onClear:function(){this.render()},validate:function(){return true},_parseDate:function(I){var J=I.split(this.Locale.DATE_FIELD_DELIMITER),G;if(J.length==2){G=[J[this.Locale.MD_MONTH_POSITION-1],J[this.Locale.MD_DAY_POSITION-1]];G.type=F.MONTH_DAY}else{G=[J[this.Locale.MDY_YEAR_POSITION-1]-this.Locale.YEAR_OFFSET,J[this.Locale.MDY_MONTH_POSITION-1],J[this.Locale.MDY_DAY_POSITION-1]];G.type=F.DATE}for(var H=0;H<G.length;H++){G[H]=parseInt(G[H],10)}return G},_parseDates:function(H){var O=[],N=H.split(this.Locale.DATE_DELIMITER);for(var M=0;M<N.length;++M){var L=N[M];if(L.indexOf(this.Locale.DATE_RANGE_DELIMITER)!=-1){var G=L.split(this.Locale.DATE_RANGE_DELIMITER),K=this._parseDate(G[0]),P=this._parseDate(G[1]),J=this._parseRange(K,P);O=O.concat(J)}else{var I=this._parseDate(L);O.push(I)}}return O},_parseRange:function(G,K){var H=D.add(D.getDate(G[0],G[1]-1,G[2]),D.DAY,1),J=D.getDate(K[0],K[1]-1,K[2]),I=[];I.push(G);while(H.getTime()<=J.getTime()){I.push([H.getFullYear(),H.getMonth()+1,H.getDate()]);H=D.add(H,D.DAY,1)}return I},resetRenderers:function(){this.renderStack=this._renderStack.concat()},removeRenderers:function(){this._renderStack=[];this.renderStack=[]},clearElement:function(G){G.innerHTML="&#160;";G.className=""},addRenderer:function(G,H){var J=this._parseDates(G);for(var I=0;I<J.length;++I){var K=J[I];if(K.length==2){if(K[0] instanceof Array){this._addRenderer(F.RANGE,K,H)}else{this._addRenderer(F.MONTH_DAY,K,H)}}else{if(K.length==3){this._addRenderer(F.DATE,K,H)}}}},_addRenderer:function(H,I,G){var J=[H,I,G];this.renderStack.unshift(J);this._renderStack=this.renderStack.concat()},addMonthRenderer:function(H,G){this._addRenderer(F.MONTH,[H],G)},addWeekdayRenderer:function(H,G){this._addRenderer(F.WEEKDAY,[H],G)},clearAllBodyCellStyles:function(G){for(var H=0;H<this.cells.length;++H){C.removeClass(this.cells[H],G)}},setMonth:function(I){var G=B.PAGEDATE.key,H=this.cfg.getProperty(G);H.setMonth(parseInt(I,10));this.cfg.setProperty(G,H)},setYear:function(H){var G=B.PAGEDATE.key,I=this.cfg.getProperty(G);I.setFullYear(parseInt(H,10)-this.Locale.YEAR_OFFSET);this.cfg.setProperty(G,I)},getSelectedDates:function(){var I=[],H=this.cfg.getProperty(B.SELECTED.key);for(var K=0;K<H.length;++K){var J=H[K];var G=D.getDate(J[0],J[1]-1,J[2]);I.push(G)}I.sort(function(M,L){return M-L});return I},hide:function(){if(this.beforeHideEvent.fire()){this.oDomContainer.style.display="none";this.hideEvent.fire()}},show:function(){if(this.beforeShowEvent.fire()){this.oDomContainer.style.display="block";this.showEvent.fire()}},browser:(function(){var G=navigator.userAgent.toLowerCase();if(G.indexOf("opera")!=-1){return"opera"}else{if(G.indexOf("msie 7")!=-1){return"ie7"}else{if(G.indexOf("msie")!=-1){return"ie"}else{if(G.indexOf("safari")!=-1){return"safari"}else{if(G.indexOf("gecko")!=-1){return"gecko"}else{return false}}}}}})(),toString:function(){return"Calendar "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var G=this;if(G.navigator){G.navigator.destroy()}if(G.cfg){G.cfg.destroy()}A.purgeElement(G.oDomContainer,true);C.removeClass(G.oDomContainer,G.Style.CSS_WITH_TITLE);C.removeClass(G.oDomContainer,G.Style.CSS_CONTAINER);C.removeClass(G.oDomContainer,G.Style.CSS_SINGLE);G.oDomContainer.innerHTML="";G.oDomContainer=null;G.cells=null;this.destroyEvent.fire()}}};YAHOO.widget.Calendar=F;YAHOO.widget.Calendar_Core=YAHOO.widget.Calendar;YAHOO.widget.Cal_Core=YAHOO.widget.Calendar})();(function(){var D=YAHOO.util.Dom,F=YAHOO.widget.DateMath,A=YAHOO.util.Event,E=YAHOO.lang,G=YAHOO.widget.Calendar;function B(J,H,I){if(arguments.length>0){this.init.apply(this,arguments)}}B.DEFAULT_CONFIG=B._DEFAULT_CONFIG=G.DEFAULT_CONFIG;B.DEFAULT_CONFIG.PAGES={key:"pages",value:2};var C=B.DEFAULT_CONFIG;B.prototype={init:function(K,I,J){var H=this._parseArgs(arguments);K=H.id;I=H.container;J=H.config;this.oDomContainer=D.get(I);if(!this.oDomContainer){this.logger.log("Container not found in document.","error")}if(!this.oDomContainer.id){this.oDomContainer.id=D.generateId()}if(!K){K=this.oDomContainer.id+"_t"}this.id=K;this.containerId=this.oDomContainer.id;this.logger=new YAHOO.widget.LogWriter("CalendarGroup "+this.id);this.initEvents();this.initStyles();this.pages=[];D.addClass(this.oDomContainer,B.CSS_CONTAINER);D.addClass(this.oDomContainer,B.CSS_MULTI_UP);this.cfg=new YAHOO.util.Config(this);this.Options={};this.Locale={};this.setupConfig();if(J){this.cfg.applyConfig(J,true)}this.cfg.fireQueue();if(YAHOO.env.ua.opera){this.renderEvent.subscribe(this._fixWidth,this,true);this.showEvent.subscribe(this._fixWidth,this,true)}this.logger.log("Initialized "+this.pages.length+"-page CalendarGroup","info")},setupConfig:function(){var H=this.cfg;H.addProperty(C.PAGES.key,{value:C.PAGES.value,validator:H.checkNumber,handler:this.configPages});H.addProperty(C.YEAR_OFFSET.key,{value:C.YEAR_OFFSET.value,handler:this.delegateConfig,supercedes:C.YEAR_OFFSET.supercedes,suppressEvent:true});H.addProperty(C.TODAY.key,{value:new Date(C.TODAY.value.getTime()),supercedes:C.TODAY.supercedes,handler:this.configToday,suppressEvent:false});H.addProperty(C.PAGEDATE.key,{value:C.PAGEDATE.value||new Date(C.TODAY.value.getTime()),handler:this.configPageDate});H.addProperty(C.SELECTED.key,{value:[],handler:this.configSelected});H.addProperty(C.TITLE.key,{value:C.TITLE.value,handler:this.configTitle});H.addProperty(C.CLOSE.key,{value:C.CLOSE.value,handler:this.configClose});H.addProperty(C.IFRAME.key,{value:C.IFRAME.value,handler:this.configIframe,validator:H.checkBoolean});H.addProperty(C.MINDATE.key,{value:C.MINDATE.value,handler:this.delegateConfig});H.addProperty(C.MAXDATE.key,{value:C.MAXDATE.value,handler:this.delegateConfig});H.addProperty(C.MULTI_SELECT.key,{value:C.MULTI_SELECT.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.START_WEEKDAY.key,{value:C.START_WEEKDAY.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.SHOW_WEEKDAYS.key,{value:C.SHOW_WEEKDAYS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_HEADER.key,{value:C.SHOW_WEEK_HEADER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.SHOW_WEEK_FOOTER.key,{value:C.SHOW_WEEK_FOOTER.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.HIDE_BLANK_WEEKS.key,{value:C.HIDE_BLANK_WEEKS.value,handler:this.delegateConfig,validator:H.checkBoolean});H.addProperty(C.NAV_ARROW_LEFT.key,{value:C.NAV_ARROW_LEFT.value,handler:this.delegateConfig});H.addProperty(C.NAV_ARROW_RIGHT.key,{value:C.NAV_ARROW_RIGHT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_SHORT.key,{value:C.MONTHS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.MONTHS_LONG.key,{value:C.MONTHS_LONG.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_1CHAR.key,{value:C.WEEKDAYS_1CHAR.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_SHORT.key,{value:C.WEEKDAYS_SHORT.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_MEDIUM.key,{value:C.WEEKDAYS_MEDIUM.value,handler:this.delegateConfig});H.addProperty(C.WEEKDAYS_LONG.key,{value:C.WEEKDAYS_LONG.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_MONTHS.key,{value:C.LOCALE_MONTHS.value,handler:this.delegateConfig});H.addProperty(C.LOCALE_WEEKDAYS.key,{value:C.LOCALE_WEEKDAYS.value,handler:this.delegateConfig});H.addProperty(C.DATE_DELIMITER.key,{value:C.DATE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_FIELD_DELIMITER.key,{value:C.DATE_FIELD_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.DATE_RANGE_DELIMITER.key,{value:C.DATE_RANGE_DELIMITER.value,handler:this.delegateConfig});H.addProperty(C.MY_MONTH_POSITION.key,{value:C.MY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_YEAR_POSITION.key,{value:C.MY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_MONTH_POSITION.key,{value:C.MD_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MD_DAY_POSITION.key,{value:C.MD_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_MONTH_POSITION.key,{value:C.MDY_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_DAY_POSITION.key,{value:C.MDY_DAY_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MDY_YEAR_POSITION.key,{value:C.MDY_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_POSITION.key,{value:C.MY_LABEL_MONTH_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_YEAR_POSITION.key,{value:C.MY_LABEL_YEAR_POSITION.value,handler:this.delegateConfig,validator:H.checkNumber});H.addProperty(C.MY_LABEL_MONTH_SUFFIX.key,{value:C.MY_LABEL_MONTH_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.MY_LABEL_YEAR_SUFFIX.key,{value:C.MY_LABEL_YEAR_SUFFIX.value,handler:this.delegateConfig});H.addProperty(C.NAV.key,{value:C.NAV.value,handler:this.configNavigator});H.addProperty(C.STRINGS.key,{value:C.STRINGS.value,handler:this.configStrings,validator:function(I){return E.isObject(I)},supercedes:C.STRINGS.supercedes})},initEvents:function(){var J=this,L="Event",M=YAHOO.util.CustomEvent;var I=function(O,R,N){for(var Q=0;Q<J.pages.length;++Q){var P=J.pages[Q];P[this.type+L].subscribe(O,R,N)}};var H=function(N,Q){for(var P=0;P<J.pages.length;++P){var O=J.pages[P];O[this.type+L].unsubscribe(N,Q)}};var K=G._EVENT_TYPES;J.beforeSelectEvent=new M(K.BEFORE_SELECT);J.beforeSelectEvent.subscribe=I;J.beforeSelectEvent.unsubscribe=H;J.selectEvent=new M(K.SELECT);J.selectEvent.subscribe=I;J.selectEvent.unsubscribe=H;J.beforeDeselectEvent=new M(K.BEFORE_DESELECT);J.beforeDeselectEvent.subscribe=I;J.beforeDeselectEvent.unsubscribe=H;J.deselectEvent=new M(K.DESELECT);J.deselectEvent.subscribe=I;J.deselectEvent.unsubscribe=H;J.changePageEvent=new M(K.CHANGE_PAGE);J.changePageEvent.subscribe=I;J.changePageEvent.unsubscribe=H;J.beforeRenderEvent=new M(K.BEFORE_RENDER);J.beforeRenderEvent.subscribe=I;J.beforeRenderEvent.unsubscribe=H;J.renderEvent=new M(K.RENDER);J.renderEvent.subscribe=I;J.renderEvent.unsubscribe=H;J.resetEvent=new M(K.RESET);J.resetEvent.subscribe=I;J.resetEvent.unsubscribe=H;J.clearEvent=new M(K.CLEAR);J.clearEvent.subscribe=I;J.clearEvent.unsubscribe=H;J.beforeShowEvent=new M(K.BEFORE_SHOW);J.showEvent=new M(K.SHOW);J.beforeHideEvent=new M(K.BEFORE_HIDE);J.hideEvent=new M(K.HIDE);J.beforeShowNavEvent=new M(K.BEFORE_SHOW_NAV);J.showNavEvent=new M(K.SHOW_NAV);J.beforeHideNavEvent=new M(K.BEFORE_HIDE_NAV);J.hideNavEvent=new M(K.HIDE_NAV);J.beforeRenderNavEvent=new M(K.BEFORE_RENDER_NAV);J.renderNavEvent=new M(K.RENDER_NAV);J.beforeDestroyEvent=new M(K.BEFORE_DESTROY);J.destroyEvent=new M(K.DESTROY)},configPages:function(T,R,N){var L=R[0],J=C.PAGEDATE.key,W="_",M,O=null,S="groupcal",V="first-of-type",K="last-of-type";for(var I=0;I<L;++I){var U=this.id+W+I,Q=this.containerId+W+I,P=this.cfg.getConfig();P.close=false;P.title=false;P.navigator=null;if(I>0){M=new Date(O);this._setMonthOnDate(M,M.getMonth()+I);P.pageDate=M}var H=this.constructChild(U,Q,P);D.removeClass(H.oDomContainer,this.Style.CSS_SINGLE);D.addClass(H.oDomContainer,S);if(I===0){O=H.cfg.getProperty(J);D.addClass(H.oDomContainer,V)}if(I==(L-1)){D.addClass(H.oDomContainer,K)}H.parent=this;H.index=I;this.pages[this.pages.length]=H}},configPageDate:function(O,N,L){var J=N[0],M;var K=C.PAGEDATE.key;for(var I=0;I<this.pages.length;++I){var H=this.pages[I];if(I===0){M=H._parsePageDate(J);H.cfg.setProperty(K,M)}else{var P=new Date(M);this._setMonthOnDate(P,P.getMonth()+I);H.cfg.setProperty(K,P)}}},configSelected:function(J,H,L){var K=C.SELECTED.key;this.delegateConfig(J,H,L);var I=(this.pages.length>0)?this.pages[0].cfg.getProperty(K):[];this.cfg.setProperty(K,I,true)},delegateConfig:function(I,H,L){var M=H[0];var K;for(var J=0;J<this.pages.length;J++){K=this.pages[J];K.cfg.setProperty(I,M)}},setChildFunction:function(K,I){var H=this.cfg.getProperty(C.PAGES.key);for(var J=0;J<H;++J){this.pages[J][K]=I}},callChildFunction:function(M,I){var H=this.cfg.getProperty(C.PAGES.key);for(var L=0;L<H;++L){var K=this.pages[L];if(K[M]){var J=K[M];J.call(K,I)}}},constructChild:function(K,I,J){var H=document.getElementById(I);if(!H){H=document.createElement("div");H.id=I;this.oDomContainer.appendChild(H)}return new G(K,I,J)},setMonth:function(L){L=parseInt(L,10);var M;var I=C.PAGEDATE.key;for(var K=0;K<this.pages.length;++K){var J=this.pages[K];var H=J.cfg.getProperty(I);if(K===0){M=H.getFullYear()}else{H.setFullYear(M)}this._setMonthOnDate(H,L+K);J.cfg.setProperty(I,H)}},setYear:function(J){var I=C.PAGEDATE.key;J=parseInt(J,10);for(var L=0;L<this.pages.length;++L){var K=this.pages[L];var H=K.cfg.getProperty(I);if((H.getMonth()+1)==1&&L>0){J+=1}K.setYear(J)}},render:function(){this.renderHeader();for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.render()}this.renderFooter()},select:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.select(H)}return this.getSelectedDates()},selectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.selectCell(H)}return this.getSelectedDates()},deselect:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselect(H)}return this.getSelectedDates()},deselectAll:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.deselectAll()}return this.getSelectedDates()},deselectCell:function(H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.deselectCell(H)}return this.getSelectedDates()},reset:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.reset()}},clear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.clear()}this.cfg.setProperty(C.SELECTED.key,[]);this.cfg.setProperty(C.PAGEDATE.key,new Date(this.pages[0].today.getTime()));this.render()},nextMonth:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextMonth()}},previousMonth:function(){for(var I=this.pages.length-1;I>=0;--I){var H=this.pages[I];H.previousMonth()}},nextYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.nextYear()}},previousYear:function(){for(var I=0;I<this.pages.length;++I){var H=this.pages[I];H.previousYear()}},getSelectedDates:function(){var J=[];var I=this.cfg.getProperty(C.SELECTED.key);for(var L=0;L<I.length;++L){var K=I[L];var H=F.getDate(K[0],K[1]-1,K[2]);J.push(H)}J.sort(function(N,M){return N-M});return J},addRenderer:function(H,I){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addRenderer(H,I)}},addMonthRenderer:function(K,H){for(var J=0;J<this.pages.length;++J){var I=this.pages[J];I.addMonthRenderer(K,H)}},addWeekdayRenderer:function(I,H){for(var K=0;K<this.pages.length;++K){var J=this.pages[K];J.addWeekdayRenderer(I,H)}},removeRenderers:function(){this.callChildFunction("removeRenderers")},renderHeader:function(){},renderFooter:function(){},addMonths:function(H){this.callChildFunction("addMonths",H)},subtractMonths:function(H){this.callChildFunction("subtractMonths",H)},addYears:function(H){this.callChildFunction("addYears",H)},subtractYears:function(H){this.callChildFunction("subtractYears",H)},getCalendarPage:function(K){var M=null;if(K){var N=K.getFullYear(),J=K.getMonth();var I=this.pages;for(var L=0;L<I.length;++L){var H=I[L].cfg.getProperty("pagedate");if(H.getFullYear()===N&&H.getMonth()===J){M=I[L];break}}}return M},_setMonthOnDate:function(I,J){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420&&(J<0||J>11)){var H=F.add(I,F.MONTH,J-I.getMonth());I.setTime(H.getTime())}else{I.setMonth(J)}},_fixWidth:function(){var H=0;for(var J=0;J<this.pages.length;++J){var I=this.pages[J];H+=I.oDomContainer.offsetWidth}if(H>0){this.oDomContainer.style.width=H+"px"}},toString:function(){return"CalendarGroup "+this.id},destroy:function(){if(this.beforeDestroyEvent.fire()){var J=this;if(J.navigator){J.navigator.destroy()}if(J.cfg){J.cfg.destroy()}A.purgeElement(J.oDomContainer,true);D.removeClass(J.oDomContainer,B.CSS_CONTAINER);D.removeClass(J.oDomContainer,B.CSS_MULTI_UP);for(var I=0,H=J.pages.length;I<H;I++){J.pages[I].destroy();J.pages[I]=null}J.oDomContainer.innerHTML="";J.oDomContainer=null;this.destroyEvent.fire()}}};B.CSS_CONTAINER="yui-calcontainer";B.CSS_MULTI_UP="multi";B.CSS_2UPTITLE="title";B.CSS_2UPCLOSE="close-icon";YAHOO.lang.augmentProto(B,G,"buildDayLabel","buildMonthLabel","renderOutOfBoundsDate","renderRowHeader","renderRowFooter","renderCellDefault","styleCellDefault","renderCellStyleHighlight1","renderCellStyleHighlight2","renderCellStyleHighlight3","renderCellStyleHighlight4","renderCellStyleToday","renderCellStyleSelected","renderCellNotThisMonth","renderBodyCellRestricted","initStyles","configTitle","configClose","configIframe","configStrings","configToday","configNavigator","createTitleBar","createCloseButton","removeTitleBar","removeCloseButton","hide","show","toDate","_toDate","_parseArgs","browser");YAHOO.widget.CalGrp=B;YAHOO.widget.CalendarGroup=B;YAHOO.widget.Calendar2up=function(J,H,I){this.init(J,H,I)};YAHOO.extend(YAHOO.widget.Calendar2up,B);YAHOO.widget.Cal2up=YAHOO.widget.Calendar2up})();YAHOO.widget.CalendarNavigator=function(A){this.init(A)};(function(){var A=YAHOO.widget.CalendarNavigator;A.CLASSES={NAV:"yui-cal-nav",NAV_VISIBLE:"yui-cal-nav-visible",MASK:"yui-cal-nav-mask",YEAR:"yui-cal-nav-y",MONTH:"yui-cal-nav-m",BUTTONS:"yui-cal-nav-b",BUTTON:"yui-cal-nav-btn",ERROR:"yui-cal-nav-e",YEAR_CTRL:"yui-cal-nav-yc",MONTH_CTRL:"yui-cal-nav-mc",INVALID:"yui-invalid",DEFAULT:"yui-default"};A.DEFAULT_CONFIG={strings:{month:"Month",year:"Year",submit:"Okay",cancel:"Cancel",invalidYear:"Year needs to be a number"},monthFormat:YAHOO.widget.Calendar.LONG,initialFocus:"year"};A._DEFAULT_CFG=A.DEFAULT_CONFIG;A.ID_SUFFIX="_nav";A.MONTH_SUFFIX="_month";A.YEAR_SUFFIX="_year";A.ERROR_SUFFIX="_error";A.CANCEL_SUFFIX="_cancel";A.SUBMIT_SUFFIX="_submit";A.YR_MAX_DIGITS=4;A.YR_MINOR_INC=1;A.YR_MAJOR_INC=10;A.UPDATE_DELAY=50;A.YR_PATTERN=/^\d+$/;A.TRIM=/^\s*(.*?)\s*$/})();YAHOO.widget.CalendarNavigator.prototype={id:null,cal:null,navEl:null,maskEl:null,yearEl:null,monthEl:null,errorEl:null,submitEl:null,cancelEl:null,firstCtrl:null,lastCtrl:null,_doc:null,_year:null,_month:0,__rendered:false,init:function(A){var C=A.oDomContainer;this.cal=A;this.id=C.id+YAHOO.widget.CalendarNavigator.ID_SUFFIX;this._doc=C.ownerDocument;var B=YAHOO.env.ua.ie;this.__isIEQuirks=(B&&((B<=6)||(this._doc.compatMode=="BackCompat")))},show:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeShowNavEvent.fire()){if(!this.__rendered){this.render()}this.clearErrors();this._updateMonthUI();this._updateYearUI();this._show(this.navEl,true);this.setInitialFocus();this.showMask();YAHOO.util.Dom.addClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.showNavEvent.fire()}},hide:function(){var A=YAHOO.widget.CalendarNavigator.CLASSES;if(this.cal.beforeHideNavEvent.fire()){this._show(this.navEl,false);this.hideMask();YAHOO.util.Dom.removeClass(this.cal.oDomContainer,A.NAV_VISIBLE);this.cal.hideNavEvent.fire()}},showMask:function(){this._show(this.maskEl,true);if(this.__isIEQuirks){this._syncMask()}},hideMask:function(){this._show(this.maskEl,false)},getMonth:function(){return this._month},getYear:function(){return this._year},setMonth:function(A){if(A>=0&&A<12){this._month=A}this._updateMonthUI()},setYear:function(B){var A=YAHOO.widget.CalendarNavigator.YR_PATTERN;if(YAHOO.lang.isNumber(B)&&A.test(B+"")){this._year=B}this._updateYearUI()},render:function(){this.cal.beforeRenderNavEvent.fire();if(!this.__rendered){this.createNav();this.createMask();this.applyListeners();this.__rendered=true}this.cal.renderNavEvent.fire()},createNav:function(){var B=YAHOO.widget.CalendarNavigator;var C=this._doc;var D=C.createElement("div");D.className=B.CLASSES.NAV;var A=this.renderNavContents([]);D.innerHTML=A.join("");this.cal.oDomContainer.appendChild(D);this.navEl=D;this.yearEl=C.getElementById(this.id+B.YEAR_SUFFIX);this.monthEl=C.getElementById(this.id+B.MONTH_SUFFIX);this.errorEl=C.getElementById(this.id+B.ERROR_SUFFIX);this.submitEl=C.getElementById(this.id+B.SUBMIT_SUFFIX);this.cancelEl=C.getElementById(this.id+B.CANCEL_SUFFIX);if(YAHOO.env.ua.gecko&&this.yearEl&&this.yearEl.type=="text"){this.yearEl.setAttribute("autocomplete","off")}this._setFirstLastElements()},createMask:function(){var B=YAHOO.widget.CalendarNavigator.CLASSES;var A=this._doc.createElement("div");A.className=B.MASK;this.cal.oDomContainer.appendChild(A);this.maskEl=A},_syncMask:function(){var B=this.cal.oDomContainer;if(B&&this.maskEl){var A=YAHOO.util.Dom.getRegion(B);YAHOO.util.Dom.setStyle(this.maskEl,"width",A.right-A.left+"px");YAHOO.util.Dom.setStyle(this.maskEl,"height",A.bottom-A.top+"px")}},renderNavContents:function(A){var D=YAHOO.widget.CalendarNavigator,E=D.CLASSES,B=A;B[B.length]='<div class="'+E.MONTH+'">';this.renderMonth(B);B[B.length]="</div>";B[B.length]='<div class="'+E.YEAR+'">';this.renderYear(B);B[B.length]="</div>";B[B.length]='<div class="'+E.BUTTONS+'">';this.renderButtons(B);B[B.length]="</div>";B[B.length]='<div class="'+E.ERROR+'" id="'+this.id+D.ERROR_SUFFIX+'"></div>';return B},renderMonth:function(D){var G=YAHOO.widget.CalendarNavigator,H=G.CLASSES;var I=this.id+G.MONTH_SUFFIX,F=this.__getCfg("monthFormat"),A=this.cal.cfg.getProperty((F==YAHOO.widget.Calendar.SHORT)?"MONTHS_SHORT":"MONTHS_LONG"),E=D;if(A&&A.length>0){E[E.length]='<label for="'+I+'">';E[E.length]=this.__getCfg("month",true);E[E.length]="</label>";E[E.length]='<select name="'+I+'" id="'+I+'" class="'+H.MONTH_CTRL+'">';for(var B=0;B<A.length;B++){E[E.length]='<option value="'+B+'">';E[E.length]=A[B];E[E.length]="</option>"}E[E.length]="</select>"}return E},renderYear:function(B){var E=YAHOO.widget.CalendarNavigator,F=E.CLASSES;var G=this.id+E.YEAR_SUFFIX,A=E.YR_MAX_DIGITS,D=B;D[D.length]='<label for="'+G+'">';D[D.length]=this.__getCfg("year",true);D[D.length]="</label>";D[D.length]='<input type="text" name="'+G+'" id="'+G+'" class="'+F.YEAR_CTRL+'" maxlength="'+A+'"/>';return D},renderButtons:function(A){var D=YAHOO.widget.CalendarNavigator.CLASSES;var B=A;B[B.length]='<span class="'+D.BUTTON+" "+D.DEFAULT+'">';B[B.length]='<button type="button" id="'+this.id+'_submit">';B[B.length]=this.__getCfg("submit",true);B[B.length]="</button>";B[B.length]="</span>";B[B.length]='<span class="'+D.BUTTON+'">';B[B.length]='<button type="button" id="'+this.id+'_cancel">';B[B.length]=this.__getCfg("cancel",true);B[B.length]="</button>";B[B.length]="</span>";return B},applyListeners:function(){var B=YAHOO.util.Event;function A(){if(this.validate()){this.setYear(this._getYearFromUI())}}function C(){this.setMonth(this._getMonthFromUI())}B.on(this.submitEl,"click",this.submit,this,true);B.on(this.cancelEl,"click",this.cancel,this,true);B.on(this.yearEl,"blur",A,this,true);B.on(this.monthEl,"change",C,this,true);if(this.__isIEQuirks){YAHOO.util.Event.on(this.cal.oDomContainer,"resize",this._syncMask,this,true)}this.applyKeyListeners()},purgeListeners:function(){var A=YAHOO.util.Event;A.removeListener(this.submitEl,"click",this.submit);A.removeListener(this.cancelEl,"click",this.cancel);A.removeListener(this.yearEl,"blur");A.removeListener(this.monthEl,"change");if(this.__isIEQuirks){A.removeListener(this.cal.oDomContainer,"resize",this._syncMask)}this.purgeKeyListeners()},applyKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.on(this.yearEl,"keypress",this._handleEnterKey,this,true);D.on(this.yearEl,C,this._handleDirectionKeys,this,true);D.on(this.lastCtrl,B,this._handleTabKey,this,true);D.on(this.firstCtrl,B,this._handleShiftTabKey,this,true)},purgeKeyListeners:function(){var D=YAHOO.util.Event,A=YAHOO.env.ua;var C=(A.ie||A.webkit)?"keydown":"keypress";var B=(A.ie||A.opera||A.webkit)?"keydown":"keypress";D.removeListener(this.yearEl,"keypress",this._handleEnterKey);D.removeListener(this.yearEl,C,this._handleDirectionKeys);D.removeListener(this.lastCtrl,B,this._handleTabKey);D.removeListener(this.firstCtrl,B,this._handleShiftTabKey)},submit:function(){if(this.validate()){this.hide();this.setMonth(this._getMonthFromUI());this.setYear(this._getYearFromUI());var B=this.cal;var A=YAHOO.widget.CalendarNavigator.UPDATE_DELAY;if(A>0){var C=this;window.setTimeout(function(){C._update(B)},A)}else{this._update(B)}}},_update:function(B){var A=YAHOO.widget.DateMath.getDate(this.getYear()-B.cfg.getProperty("YEAR_OFFSET"),this.getMonth(),1);B.cfg.setProperty("pagedate",A);B.render()},cancel:function(){this.hide()},validate:function(){if(this._getYearFromUI()!==null){this.clearErrors();return true}else{this.setYearError();this.setError(this.__getCfg("invalidYear",true));return false}},setError:function(A){if(this.errorEl){this.errorEl.innerHTML=A;this._show(this.errorEl,true)}},clearError:function(){if(this.errorEl){this.errorEl.innerHTML="";this._show(this.errorEl,false)}},setYearError:function(){YAHOO.util.Dom.addClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearYearError:function(){YAHOO.util.Dom.removeClass(this.yearEl,YAHOO.widget.CalendarNavigator.CLASSES.INVALID)},clearErrors:function(){this.clearError();this.clearYearError()},setInitialFocus:function(){var A=this.submitEl,C=this.__getCfg("initialFocus");if(C&&C.toLowerCase){C=C.toLowerCase();if(C=="year"){A=this.yearEl;try{this.yearEl.select()}catch(B){}}else{if(C=="month"){A=this.monthEl}}}if(A&&YAHOO.lang.isFunction(A.focus)){try{A.focus()}catch(D){}}},erase:function(){if(this.__rendered){this.purgeListeners();this.yearEl=null;this.monthEl=null;this.errorEl=null;this.submitEl=null;this.cancelEl=null;this.firstCtrl=null;this.lastCtrl=null;if(this.navEl){this.navEl.innerHTML=""}var B=this.navEl.parentNode;if(B){B.removeChild(this.navEl)}this.navEl=null;var A=this.maskEl.parentNode;if(A){A.removeChild(this.maskEl)}this.maskEl=null;this.__rendered=false}},destroy:function(){this.erase();this._doc=null;this.cal=null;this.id=null},_show:function(B,A){if(B){YAHOO.util.Dom.setStyle(B,"display",(A)?"block":"none")}},_getMonthFromUI:function(){if(this.monthEl){return this.monthEl.selectedIndex}else{return 0}},_getYearFromUI:function(){var B=YAHOO.widget.CalendarNavigator;var A=null;if(this.yearEl){var C=this.yearEl.value;C=C.replace(B.TRIM,"$1");if(B.YR_PATTERN.test(C)){A=parseInt(C,10)}}return A},_updateYearUI:function(){if(this.yearEl&&this._year!==null){this.yearEl.value=this._year}},_updateMonthUI:function(){if(this.monthEl){this.monthEl.selectedIndex=this._month}},_setFirstLastElements:function(){this.firstCtrl=this.monthEl;this.lastCtrl=this.cancelEl;if(this.__isMac){if(YAHOO.env.ua.webkit&&YAHOO.env.ua.webkit<420){this.firstCtrl=this.monthEl;this.lastCtrl=this.yearEl}if(YAHOO.env.ua.gecko){this.firstCtrl=this.yearEl;this.lastCtrl=this.yearEl}}},_handleEnterKey:function(B){var A=YAHOO.util.KeyListener.KEY;if(YAHOO.util.Event.getCharCode(B)==A.ENTER){YAHOO.util.Event.preventDefault(B);this.submit()}},_handleDirectionKeys:function(H){var G=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY,D=YAHOO.widget.CalendarNavigator;var F=(this.yearEl.value)?parseInt(this.yearEl.value,10):null;if(isFinite(F)){var B=false;switch(G.getCharCode(H)){case A.UP:this.yearEl.value=F+D.YR_MINOR_INC;B=true;break;case A.DOWN:this.yearEl.value=Math.max(F-D.YR_MINOR_INC,0);B=true;break;case A.PAGE_UP:this.yearEl.value=F+D.YR_MAJOR_INC;B=true;break;case A.PAGE_DOWN:this.yearEl.value=Math.max(F-D.YR_MAJOR_INC,0);B=true;break;default:break}if(B){G.preventDefault(H);try{this.yearEl.select()}catch(C){}}}},_handleTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(C.getCharCode(D)==A.TAB&&!D.shiftKey){try{C.preventDefault(D);this.firstCtrl.focus()}catch(B){}}},_handleShiftTabKey:function(D){var C=YAHOO.util.Event,A=YAHOO.util.KeyListener.KEY;if(D.shiftKey&&C.getCharCode(D)==A.TAB){try{C.preventDefault(D);this.lastCtrl.focus()}catch(B){}}},__getCfg:function(D,B){var C=YAHOO.widget.CalendarNavigator.DEFAULT_CONFIG;var A=this.cal.cfg.getProperty("navigator");if(B){return(A!==true&&A.strings&&A.strings[D])?A.strings[D]:C.strings[D]}else{return(A!==true&&A[D])?A[D]:C[D]}},__isMac:(navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1)};YAHOO.register("calendar",YAHOO.widget.Calendar,{version:"2.8.0r4",build:"2449"});YUI.add("wl-calendar",function(C){var D={};var O=[];var H=[];var K={};var E=sabre.config.global.currentTimeInMillis;C.wlCalendar={reset:function(){O=[]},setFlightDates:function(R,S){O=[];var T=R.previous();var Q=T?C.DataType.Date.parse(T.get("value")):new Date(E);if(!Q){Q=new Date()}H[S]=H[S]||{};H[S].date=Q;H[S].textInput=R;H[S].hiddenInput=R.previous();H[S].calendar=null},loadCalendar:function(R,T,S){K.dateFormat=S.dateFormat;K.showCalendar=S.show;K.onSelectCallback=S.onSelectCallback||function(){};K.maxDateRange=S.maxDateRange||365;var Q=R.get("id");R=C.one("#"+Q);var U=F(Q);if(!D[Q]){D[Q]=L(Q);T.registerContainer(D[Q]);D[Q].hideEvent.subscribe(function(){C.wlValidation.validate(null,R.previous());var W=C.one(O[U].oDomContainer);W.removeClass("calendar-container");W.addClass("hidden")})}I(Q);var V=C.one(D[Q].body);V.addClass("loadingContainer");D[Q].show();C.later(5,C,function(){C.use("yui2-calendar",function(Z){if(!Z.Lang.isValue(O[U])){O[U]=new YAHOO.widget.CalendarGroup("calendar-"+Q,{iframe:false});O[U].selectEvent.subscribe(function(k,Y,l){B(l,D[Q],Q,K.dateFormat,T);K.onSelectCallback()},O[U],true);O[U].renderEvent.subscribe(function(){Z.one(O[U].oDomContainer).removeClass("hidden");D[Q].fireEvent("changeContent")});H[U].calendar=O[U]}var f=new Date(E);var e=O[U]&&O[U].getSelectedDates()[0];var d=YAHOO.widget.DateMath;if(document.getElementById("formattedOutboundDepartureDate")&&document.getElementById("formattedOutboundDepartureDate").value){var W=Z.DataType.Date.parse(document.getElementById("formattedOutboundDepartureDate").value)}else{var a=H[U-1];var W=a?Z.DataType.Date.parse(a.hiddenInput.get("value"))||f:f}var g=d.add(f,d.DAY,K.maxDateRange);var c=Z.one("#date"+(U+1));if(c&&c.get("disabled")){var h=Z.one("#date_hidden"+(U+1));if(h){g=Z.DataType.Date.parse(h.get("value"))}}var X=e||W;var b=O[U].cfg;b.setProperty("locale_weekdays","medium");b.setProperty("mindate",W);b.setProperty("maxdate",g);b.setProperty("pagedate",X);b.setProperty("start_weekday",sabre.config.satConfiguration.calendarStartDay);if(T.getTripType()==="oneway"){O[U].removeRenderers()}else{G(O,U)}J(O[U]);O[U].render();Z.on("keyup",function(Y){if(Y.charCode===27){D[Q].hide()}});V.addClass("calendar-container");V.removeClass("loadingContainer");I(Q)})})}};function L(R){var Q=new YAHOO.widget.Panel("container-"+R,{visible:false,draggable:false,zIndex:520,close:true});Q.showEvent.subscribe(function(){Q.fireEvent("changeContent")});Q.setBody('<div class="calendar-container" id="calendar-'+R+'"></div>');Q.render(document.body);return Q}function B(a,b,Q,d,c){var S=C.one("#"+Q);var k=S.previous();var V;var W;if(a.getSelectedDates().length>0){var R=a.getSelectedDates()[0];var f=R.getDate();var m=R.getMonth();var Y=R.getFullYear();V=C.DataType.Date.format(R,{format:d});W=M(Y,m,f);var l=(m+1)+"/"+f+"/"+Y;var g,X,Z,e;var U=F(Q);for(g=U+1;g<H.length;g++){e=H[g];var T=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R>T){e.calendar&&e.calendar.select(l);e.date=R;X=H[g].textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}for(g=U-1;g>-1;g--){e=H[g];var h=e.calendar&&e.calendar.getSelectedDates()[0]||e.date;if(R<h){e.calendar&&e.calendar.select(l);e.date=R;X=e.textInput;if(X){X.set("value",V);Z=e.hiddenInput;Z.set("value",W)}}}}else{V="";W=0}S.set("value",V);k.set("value",W);b.hide();if(c.persistInputState){c.persistInputState(Q,W);c.persistInputState("textForField"+Q,V)}}function M(R,S,Q){return C.DataType.Date.format(new Date(R,S,Q),{format:sabre.config.dateInputFormat})}function F(R){var S=new RegExp("^[a-z_\\-]+(\\d+)$","i");var Q=R.match(S);return Q?C.DataType.Number.parse(Q[1]):null}function G(T,U){var W=T[U];var V;var Q;for(var R=0;R<T.length;R++){var S=T[R]&&T[R].getSelectedDates()[0]||H[R].date;if(S){if(!V&&!Q){V=S;Q=S}if(S<V){V=S}if(S>Q){Q=S}}}V=V||new Date(E);Q=Q||new Date(E);W.removeRenderers();W.addRenderer(A(W,V,Q),W.renderCellStyleHighlight1)}function A(T,Q,R){var S=T.cfg.getProperty(YAHOO.widget.CalendarGroup._DEFAULT_CONFIG.DATE_RANGE_DELIMITER.key);return(N(T,Q)+S+N(T,R))}function N(U,T){var R=YAHOO.widget.CalendarGroup._DEFAULT_CONFIG;var Q=[];Q[U.cfg.getProperty(R.MDY_MONTH_POSITION.key)-1]=(T.getMonth()+1);Q[U.cfg.getProperty(R.MDY_DAY_POSITION.key)-1]=T.getDate();Q[U.cfg.getProperty(R.MDY_YEAR_POSITION.key)-1]=T.getFullYear();var S=U.cfg.getProperty(R.DATE_FIELD_DELIMITER.key);return Q.join(S)}function J(S){var T=C.config.locale;if(C.DataType.Date.Locale){var R=C.DataType.Date.Locale[T];P(R,S)}else{var Q=T.replace("_","-");C.use("lang/datatype-date-format_"+Q,function(V){V.Intl.setLang("datatype-date-format",Q);var U=V.Intl.get("datatype-date-format");P(U,S)})}}function P(Q,T){if(Q){var R={b:"MONTHS_SHORT",B:"MONTHS_LONG",a:"WEEKDAYS_MEDIUM",A:"WEEKDAYS_LONG"};for(var S in R){if(R.hasOwnProperty(S)){T.cfg.setProperty(R[S],Q[S])}}T.render()}}function I(R){var S=C.isCurrentLanguageRtl();var T=S?"br":"bl";var Q=S?"tr":"tl";D[R].cfg.setProperty("context",[R,Q,T,["beforeShow","windowResize"]])}},"1.0.0",{requires:[]});YUI.add("wl-airport-finder",function(A){A.wlAirportFinder=function(l,V,W){var h;var E;var G={};var I="";var g="";var S=[];var K=[];var k={};W=W||{};var p=W.cityListFormat||"%airport (%code)";var o=W.defaultOriginLabel||"";var H=W.defaultDestinationLabel||"";var a=W.maxRowCount||16;var Z='<div class="table-container"><table><tbody><tr class="ondhead"><td id="originInfoErrorMessage" class="translate" wl:translate="label.fsc.noOriginMatch"></td></tr><tr class="foot"><td colspan="5"></td></tr></tbody></table></div>';var O=false;return{showAirportList:N,createAirportList:B,updateAirportInputTranslation:Y,formatCityList:P,setRbeBooking:L};function L(q){O=q}function N(t,s,r,q){A.use("wl-routes",function(u){b(t,s,r,q)})}function M(r,t){var s=A.isCurrentLanguageRtl();var u=s?"br":"bl";var q=s?"tr":"tl";r.cfg.setProperty("context",[t.get("id"),q,u,["beforeShow","windowResize"]])}function b(z,AB,q,AF){var AG;var AC;var AD;var AA;var w;B(AB);var v=AB.hasClass("origin_airport");var u=AB.get("id");var x=AB.previous();if(!x){A.log("Cannot show airport finder - unable to find connected input control","warn");return }if(v){AC=x.get("id");AA=u;AD=AC.replace("origin","destination");w=AA.replace("origin","destination");h=AG=G[AA];E=G[w]}else{AD=x.get("id");w=u;AC=AD.replace("destination","origin");AA=w.replace("destination","origin");E=AG=G[w];h=G[AA]}var AE=z&&z.type==="keyup"?z.charCode:null;var t=AG.cfg.getProperty("visible");if(AE===27||AE===13){AG.hide();if(v){K=R(null,A.one(E.body),AD,AC,q);if(!e(AD)){A.one("#"+AD).next().fire("originChosen")}var y=AD[AD.length-1];d(y)}}else{if(!t||AE!==null){var s=[9,13];AE=!AE||A.Array.indexOf(s,AE)!==-1?null:AE;var r=A.one(AG.body);r.addClass("loadingContainer");AG.cfg.setProperty("visible",true);M(AG,AB);k=A.routes||[];r.removeClass("loadingContainer");if(v){S=n(AE,r,AC,AF)}else{K=R(AE,r,AD,AC,q)}AG.fireEvent("changeContent");if(AE===null){J(u);AB.set("value","");AB.focus()}if(v){A.on("click",function(){K=R(null,A.one(E.body),AD,AC,q);if(!e(AD)){U(AD)}},A.one(h.element).one("a.container-close"))}}}M(AG,AB)}function J(q){U(q,F(q))}function P(w){var r=A.airports[w]||{};var s=r.code||w;var v=r.city||s;var u=A.translateParametrized("Airport."+s);var y=A.translateParametrized("AirportShort."+s);var x=A.translateParametrized("City."+v);var q=A.translateParametrized("StateProvince."+r.stateProvince);var t=A.translateParametrized("Country."+r.country);return A.formatText(p,{code:s,airport:u||"",airportShort:y||"",cityCode:v||"",city:x||"",stateProvince:q||"",country:t||""})}function e(q){return !!F(q).length}function F(x){var u=A.one("#"+x);var t=A.Lang.trim(u.get("value"));if(t.length>0){var s=u.hasClass("origin_airport")?S:K;for(var r=0;r<s.length;r++){var w=s[r][0];var v=P(w);if(v===t){return[v,w]}var q=new RegExp(t,"i");if(v.search(q)>-1){return[v,w]}}}return[]}function X(q,r,s){r=r||"";s=s||"";q.previous().set("value",s);q.previous().set("wl:value",s);q.set("wl:value","");q.set("value",r)}function U(v,r){var q=A.one("#"+v);if(r&&r.length===2){X(q,r[0],r[1])}else{var u=q.hasClass("origin_airport");var t=A.getCurrentTranslations();var s=u?t[o]:t[H];X(q,s)}}function T(t,w,u,y,x){var r=null;var s=w.get("id");var v={visible:false,draggable:false,zIndex:520,close:true};var q=new YAHOO.widget.Panel(t,v);var z;q.setBody("");q.renderEvent.subscribe(function(){z=A.one("#"+t);z.setStyles({display:"none"});A.delegate("click",function(AD){var AC=AD.target;w=A.one("#"+s);w.set("value",AC.get("innerHTML"));var AA=w.previous();AA.set("value",AC.get("rel"));if(u){K=R(null,A.one(E.body),y,x,r);if(!e(y)){A.one("#"+y).next().fire("originChosen")}var AB=s.charAt(s.length-1);d(AB)}q.hide();AD.preventDefault()},q.element,"span")});q.render(document.body);q.cfg.setProperty("context",[s,"tl","bl",["beforeShow","windowResize"]]);q.hideEvent.subscribe(function(){w=A.one("#"+s);J(s);if(V.persistInputState){V.persistInputState(s,w.previous().get("value"))}if(V.getTripType()==="roundtrip"){C(W.airportInputsIds,s,w.previous().get("value"))}A.fire("fsc:inputChanged");A.wlValidation.validate(null,w.previous());z.setStyles({display:"none"});if(q.handle){q.handle.detach();q.handle=null}});q.showEvent.subscribe(function(){z.setStyles({display:"block"});q.focus();A.Lang.later(10,null,function(){if(!q.handle){q.handle=A.on("click",function(AB){var AA=AB.target;if(!AA.inRegion(q.element,true)){q.hide()}},document)}})});V.registerContainer(q);return q}function d(r){var q=A.one("#destination_airport"+r);q.changeTarget({currentTarget:q})}function B(s){var q=s.get("id");var u;var t;var v=s.hasClass("origin_airport");if(v){u=s.previous().get("id");t=u.replace("origin","destination")}else{t=s.previous().get("id");u=t.replace("destination","origin")}if(!G[q]){var r=q+"-cont";G[q]=T(r,s,v,t,u)}}function C(q,r,v){var u=new RegExp("^([a-z_]+)(\\d+)$","i");var t=r.match(u);if(t){var s=t[1];if(s===q.departure){s=q.arrival}else{if(s===q.arrival){s=q.departure}}if(V.setStoredInputValue){V.setStoredInputValue(s,1,v)}}}function D(r){r=r||[];for(var q in r){if(f(r[q])){return true}}return false}function f(q){return q===1||(A.Lang.isObject(q)&&((!O&&q.b2c!==0)||(O&&q.rbe!==0)))}function n(AA,s,v,AB){var x=[];var AC=A.one("#"+v);var t=A.Lang.trim(AC.next().get("value"));var y=t||"";y=c(y);var r=new RegExp("^"+y,"i");var q=new RegExp(",\\s"+y,"i");var w=v.split("origin_airport_hidden")[1];for(var z in k){if(!D(k[z])){continue}if(A.airports[z]){if(!AB||AB.length===0||AB.length===1&&w>1||w>=AB.length||AB[w]===null||A.airports[z].country===AB[w]){var u=P(z);if(AA!=null&&(A.Lang.trim(y)!=""&&A.Lang.trim(y)!=g)){if(z.match(r)||u.match(r)||u.match(q)){x.push(new Array(z,u))}}else{x.push(new Array(z,u))}}}else{A.log("origin airport not found:"+z,"warn")}}m(x,s,"origins");return x}function R(AK,x,t,w,q){var AG=[];var AJ=A.one("#"+t);var AI=A.one("#"+w);var AA=A.Lang.trim(AJ.next().get("value"));var AH=AA||"";AH=c(AH);var AE=new RegExp("^"+AH,"i");var AD=new RegExp(",\\s"+AH,"i");var AF=[];var z=k[AI.get("value")];if(A.Lang.isValue(z)){AF=z}else{var AC=[];for(var s in k){AC.push(s)}for(var v=0;v<AC.length;v++){for(var u in k[AC[v]]){AF[u]=k[AC[v]][u]}}}var y=t.split("destination_airport_hidden")[1];for(var AB in AF){if(!f(AF[AB])){continue}if(A.airports[AB]){if(!q||q.length===0||y>=q.length||q[y]===null||A.airports[AB].country===q[y]){var r=P(AB)||"";if(AK!=null&&(A.Lang.trim(AH)!=""&&A.Lang.trim(AH)!=I)){if(AB.match(AE)||r.match(AE)||r.match(AD)){AG.push([AB,r])}}else{AG.push([AB,r])}}}else{A.log("destination airport not found: "+AB,"warn")}}m(AG,x,"destinations");return AG}function Y(){A.all(".airport-picker").each(function(s){var r=s.previous();q(s,r)});function q(s,r){if(!s||!r){return }var t=r.get("value");if(!t){return }var u=P(t);s.set("value",u);s.setAttribute("wl:value",u)}}function m(x,s,z){x.sort(Q);s.addClass("airportsList");if(x.length==0){s.set("innerHTML",Z);s.translate();return }if(!s.one("table")){var AA=A.Node.create('<div class="table-container"><table><tbody><tr></tr></tbody></table></div>');s.set("innerHTML","");s.append(AA)}var y=s.one("table").one("tr");y.all("td").remove();var q;var t;for(var u=0;u<x.length;u++){var r=x[u][0];var AC=P(r);var AB=A.Node.create("<li></li>");var w=A.Node.create('<span class="airport-name" id="'+z+"-"+r+'" rel="'+r+'">'+AC+"</span>");AB.append(w);if(u===0||(u%a)===0){t=A.Node.create("<ul></ul>");t.append(AB);var v=document.createElement("td");q=A.one(v);q.append(t);y.append(q)}else{if((u%a)!==0){t.append(AB)}}}}function c(r){var q=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");return r.replace(q,"\\$&")}function Q(r,q){if(r[0]===""){return -1}if(q[0]===""){return 1}if(r[1]<q[1]){return -1}if(q[1]<r[1]){return 1}return 0}}});YUI.add("wl-fsc-multicity",function(E){var D;var C={init:function(F){D=F}};C.commonMulticityDomEvents=function(G){var F=G.one("#addMoreFlights");if(F){F.on("click",B)}E.on("click",A,".multiFlight-delete-leg")};function B(F){F.preventDefault();D.addFlight()}function A(G){G.preventDefault();var F=E.DataType.Number.parse(this.get("id"));D.removeFlight(F)}E.widgets=E.widgets||{};E.widgets.multicity=C});YUI.add("wl-fsc-modifySearch",function(D){var B;var I;var C,J;var F;var G=false;var E=document.getElementById("promo_box_per_pax");var H={init:function(N,Q,O,M){I=M.errorMsg||"";promoCodesMessage=M.promoCodesMessage||"";J=N;C=Q;var P=D.one("#"+O);F=P?P.get("innerHTML"):""},create:function(P,M,N){var O={visible:true,draggable:false,fixedcenter:false,modal:true,close:true,postmethod:"form",hideaftersubmit:false,monitorresize:true};var R=D.merge(O,N);if(B){if(E==null){B.destroy()}}var Q=D.one("#"+P);if(!Q){Q=D.Node.create('<div id="'+P+'"></div>');Q.set("innerHTML",F);if(G){D.translateNode(Q)}D.one("body").appendChild(Q)}B=new YAHOO.widget.Dialog(P,R);B.renderEvent.subscribe(function(){this.cfg.setProperty("zIndex",100);this.sizeMask();var S=D.one("#modify-search");S.removeClass("hidden");B.center();D.on("modifySearchOverlay|click",A,"#btn-modify-search");D.on("modifySearchOverlay|click",function(){B.hide()},"#btn-cancel");if(I){L(I)}if(promoCodesMessage===true){K()}if(D.Lang.isFunction(M.render)){M.render.call(this,this)}J.fireEvent("modify_search_rendered")});B.hideEvent.subscribe(function(){D.detach("modifySearchOverlay|*");D.wlValidation.errorRendering.hideAllOverlays();if(D.Lang.isFunction(M.hide)){M.hide.call(this,this)}});B.render(document.body)},updateErrorMessages:function(M){I=M;L(M)},getErrorMessages:function(){return I},setTranslationRequired:function(){G=true}};D.widgets=D.widgets||{};D.widgets.modifySearch=H;function A(){var M=D.one("#requestFromModifySearch");if(M){M.set("value",true)}D.one(B.element).addClass("loading");B.submit()}function L(N){var M=D.one("#errors");var O={message:N};J.renderPartialInNode("_flowMessage",O,M,true);M.removeClass("hidden")}function K(N){var M=D.one("#promo-code-error");M.removeClass("hidden")}});YUI.add("wl-fsc",function(B){var A={ONE_WAY:"oneway",ROUND_TRIP:"roundtrip",MULTI_CITY:"multicity"};B.components.Fsc=function(AR){var x=this;var b=AR.initData||{};var At=AR.compInstConfig||{};var C=new YAHOO.widget.OverlayManager();var y=At.dateFormat;var q=At.maxDateRange;var Am=At.promoCodePerPaxExcludingInfantsEnabled;var t=At.onePromoCodeforAllPaxEnabled;var AA=At.originCityDefaultValueKey||"";var AH=At.destinationCityDefaultValueKey||"";var AE=b.destinationAirportCountriesFilter;var D=b.originAirportCountriesFilter;var J=b.restrictOriginAndDestination&&b.nonRefundableAncillariesIncluded;var U=b.mybWasAwardBooking;var K=b.frequentFlyerUserLoggedIn||false;var Ah=sabre.config.satConfiguration.frequentFlyer.requireLogin;var O=sabre.config.satConfiguration.frequentFlyer.allowedJourneyTypes;var AU=sabre.config.techSwitchesConfiguration.profileSystemAvailable;var Af=sabre.config.techSwitchesConfiguration.loyaltyProgramAvailable;var h=b.awardBooking||false;var M=(!h&&b.redeemMiles)||false;var Ap=At.rbeTabEnabled||false;var v=At.awardBookingEnabled&&Af;var An=b.partialExchange;var G=!AU&&Ah;var Ae=U||!v||G||(t==false);var AX=b.journey||At.journey.defaultValue;var AJ=A[AX];var p={};var w="INF_id";var Ac="redeem_miles";var F;var T=[];var As=b.promoCodes;var AQ=b.supportedPassengers;var m=[];var Y=[];var Ai=B.one("#promo_box_per_pax");var n;var u="";B.widgets.multicity.init(p);var Aj=B.wlAirportFinder(x,p,{cityListFormat:At.cityListFormat,maxRowCount:At.maxRowCount,defaultOriginLabel:AA,defaultDestinationLabel:AH,airportInputsIds:{departure:"origin_airport",arrival:"destination_airport"}});var AK;x.incomingEvents={load_overlay:function(Ay){p.setTripType(b.journey);P(Ay.errorMessage)},change_lang:function(){e();if(AR.state==="modifySearch"){B.widgets.modifySearch.setTranslationRequired()}},"ff-logged-in":function(){K=true;AO();L();R()},"logged-in":function(){AO();L()},"logged-out":function(){K=false;AO();L();R()}};x.onRenderState={exchange:function(Ay){Au(Ay)},modifySearch:function(A1){var A0=B.Lang.isObject(AR.validationMessages)&&B.Object.size(AR.validationMessages)?"validationError":null;var Ay=false;for(var Az in AR.validationMessages){if(/^promoCodes/.test(Az)&&AR.validationMessages[Az]["0"]["code"]==="validation.field.required"){Ay=true;break}}B.widgets.modifySearch.init(x,p,"modify-search",{errorMsg:A0,promoCodesMessage:Ay});if(A0||b.alwaysShowModifySearch){P()}},searchPage:function(Ay){B.wlProfiler.add("fsc rendered");Au(Ay);H(Ay)}};p.getTripType=function(){return AJ};p.setTripType=function(Ay){AX=A[Ay]?Ay:"ROUND_TRIP";AJ=A[Ay];return AJ};p.getTripTypeKey=function(Ay){return A[Ay]};p.registerContainer=function(Ay){C.register(Ay)};p.toggleRedemptionSearchAllowed=function(){var A1=false;if(!V(AX)){A1=true}else{var A0=x.node.one("#"+w);if(A0){var Az=A0.get("value");if(Az>0){A1=true}}}var Ay=x.node.one("#"+Ac);Ag(Ay,A1);AO()};p.addFlight=function(){Ao()};p.removeFlight=function(Ay){AB(Ay)};function P(Ay){if(Ay){B.widgets.modifySearch.updateErrorMessages(Ay)}B.widgets.modifySearch.create("modify-search",{render:function(Az){x.node=B.one(Az.element);if(t==false){Ai.set("innerHTML","")}Au(x.node)},hide:function(Az){AV(b.journey);C.hideAll()}})}function Au(A1){A1.delegate("click",d,".trip-type-input");A1.delegate("click",X,".fsc-tab");A1.delegate("click",A4,".promo_code_button");if(!J){A1.delegate("click",Ax,".airport-trigger")}if(J){AY()}var A3=A1.one(".componentContentHolder")||A1;A3.addClass(AJ);AP(A1);var Ay=document.getElementById("promo_box_per_pax");var A0=A1.one("#ADT_id");if(A0){o.apply(A0);if(t==false&&(Ay!=null)){AN()}if(B.UA.ie){A0.on("change",o)}else{A1.delegate("change",o,"#ADT_id")}}if(m){for(var A2=0;A2<Y.length;A2++){if(B.UA.ie){B.one("#"+Y[A2]+"_id").on("change",Az)}else{A1.delegate("change",Az,"#"+Y[A2]+"_id")}}}function Az(){var A7=B.one("#promo_box_per_pax");A5();if(t==false){AC(A7);AN()}A6()}function A6(){var A9;var A8=(T.length>F)?F:T.length;for(var A7=0;A7<A8;A7++){A9=document.getElementById("promo_per_pax"+A7);A9.value=T[A7]}}function A4(){var A9=document.getElementById("promo_per_pax"+0).value;var A8;for(var A7=1;A7<F;A7++){A8=document.getElementById("promo_per_pax"+A7);A8.value=A9}}function A5(){T.length=F;for(var A7=0;A7<T.length;A7++){T[A7]=document.getElementById("promo_per_pax"+A7).value}}if(t==false&&(As!=null)){l()}AO();AS(Ae);if(v&&!Ap){Z();p.toggleRedemptionSearchAllowed();A1.delegate("click",r,"#"+Ac);R();N(A1)}L()}function AC(Ay){Ay.set("innerHTML","")}function l(){var A0;var Az=(As.length>F)?F:As.length;for(var Ay=0;Ay<Az;Ay++){A0=document.getElementById("promo_per_pax"+Ay);A0.value=As[Ay]}}function AN(){var Ay=k();var A1=B.translateParametrized("label.fsc.promoCode.passengers");var Az="";for(var A0=0;A0<Ay;A0++){Az+='<div class="promo_cont">';Az+='<label for="promo_per_pax'+A0+'" class="promo_label"><span class="translate" wl:translate="label.fsc.promoCode.passengers">'+A1+"</span><span> "+(A0+1)+"</span></label>";Az+='<input type="text" class="promo_code_textfield" maxlength="'+At.promoCodeMaxlength+'" id="promo_per_pax'+A0+'" name="promoCodes['+A0+']"/>';Az+="</div>"}if(A2==null){var A2=B.one("#promo_box_per_pax")}A2.append(B.Node.create(Az))}function k(){var Ay=0;Y=Ad();for(var Az=0;Az<Y.length;Az++){if(Am==true&&(Y[Az]=="INF"||Y[Az]=="INS")){continue}var A0=x.node.one("#"+Y[Az]+"_id");Ay=Ay+parseInt(A0.get("value"))}F=Ay;return Ay}function Ad(){for(var Ay=0;Ay<AQ.length;Ay++){Y[Ay]=AQ[Ay].passengerType.code;m[Ay]=x.node.one("#"+Y[Ay]+"_id")}return Y}function H(Ay){Ay.delegate("change",s,"#fsc-pointOfSale")}function AY(){for(var Ay in A){var Az=x.node.one("#journey_"+Ay+"_el");if(Az&&!Az.get("checked")){Ag(Az,true)}}}function AP(Ay){Aw(Ay);Ay.all(".airport-picker").each(function(Az){if(!Az.get("disabled")){Az.changeTarget=Ar;Az.on("click",Ar);Az.on("keyup",AZ);Az.on("key",Aa,"down:13");AI(Az)}});e();Ay.all(".date_departure_inp, .date_return_inp").each(function(A0,Az){Al(A0,Az);if(!A0.get("disabled")){A0.on("focus",W)}});Ay.all("input, select").each(function(Az){Az.on("blur",Ab)});if(AJ==="multicity"){B.widgets.multicity.commonMulticityDomEvents(Ay)}}function Aw(Ay){B.wlValidation.initializeForPartial(AR.getType(),B.wlValidation.validationEngineRules,B.wlValidation.validationConfiguration,Ay)}function e(){Aj.updateAirportInputTranslation();C.hideAll()}function AS(Ay){var Az=x.node.one("#redeemMiles");if(Az&&Ay){Az.addClass("hidden")}}function R(){if(K){return }var Ay=x.node.one(".redeem-miles-label");if(Ay){if(!M){Ay.removeClass("warning")}else{if(v&&!K&&Ah){Ay.addClass("warning")}}}}function N(Az){var A0;if(v){for(A0 in A){var Ay=Az.one("#journey_"+A0+"_el");var A1=!V(A0)&&M;Ag(Ay,A1)}var A4=Az.one("#cabin_class");var A2=Az.one("#fare_type");var A7=Az.one("#travelOptionsHotelReservation");var A3=Az.one("#travelOptionsCarRental");Ag(A4,M);Ag(A2,M);Ag(A7,M);Ag(A3,M);var A5=Az.one("#travelOptionsNumberOfRooms");if(M&&A5){A5.set("value",1)}Ag(A5,M);var A6=Az.one("#"+w);if(M&&A6){A6.set("value",0)}Ag(A6,M)}}function r(Ay){M=Ay.currentTarget.get("checked");N(x.node);L();AO();R();S(M);AT(M)}function Z(){M=b.redeemMiles||false;var Ay=x.node.one("#"+Ac);if(Ay){Ay.set("checked",M)}S(M)}function S(Ay){var A0=x.node.one("#"+Ac+"_val_holder");if(A0){A0.set("value",Ay?"true":"false")}var Az=x.node.one("#award_booking_val_holder");if(Az){Az.set("value",Ay?"true":"false")}}function AT(Az){var Ay=x.node.one("#promo_code");if(Ay){var A0=Az?At.awardBookingMode.promoCodeMaxlength:At.promoCodeMaxlength;Ay.setAttribute("maxlength",A0);Ay.set("value",Ay.get("value").substring(0,A0))}}function V(Ay){return(B.Array.indexOf(O,Ay)>-1)}function W(Ay){C.hideAll();B.wlCalendar.loadCalendar(Ay.target,p,{dateFormat:y,show:true,maxDateRange:q})}function Al(Az,Ay){B.wlCalendar.setFlightDates(Az,Ay)}function AI(Ay){if(AR.state!=="modifySearch"){B.use("wl-routes",function(Az){x.node.all(".origin_airport").removeClass("disabled");x.node.all(".destination_airport").removeClass("disabled")})}Aj.createAirportList(Ay)}function Ar(Ay){C.hideAll();Aj.showAirportList(Ay,Ay.currentTarget,AE,D)}function Ax(Az){Az.preventDefault();var Ay=this.previous();C.hideAll();Aj.showAirportList(null,Ay,AE,D)}function AZ(Ay){if(Ay.charCode===9){C.hideAll()}Aj.showAirportList(Ay,Ay.currentTarget,AE,D)}function Aa(Ay){Ay.halt()}function L(){if(K||!(M||h)){AG()}else{if(Ah&&(M||h)){AG();AW()}}}function AG(){var Ay=x.node.one(".redeem-miles-label");if(Ay){Ay.removeClass("warning")}AF("#flow-message-ffNotLoggedIn");AF("#flow-message-ffLoginNeeded");AF("#flow-message-ffInvalidProfileType")}function AF(Ay){var Az=B.one(Ay);if(Az){Az.addClass("hidden")}}function AW(){var Az=x.node.one(".redeem-miles-label");var Ay=B.one("#flow-message-ffNotLoggedIn");var A2=B.one("#flow-message-ffLoginNeeded");var A1=B.one("#flow-message-ffInvalidProfileType");var A0=(Ay!=null||A2!=null||A1!=null);if(A1){A1.removeClass("hidden")}else{if(A2){A2.removeClass("hidden")}else{if(Ay){Ay.removeClass("hidden")}}}if(Az&&A0){Az.addClass("warning")}}function AO(){if(!K&&Ah&&(M||h)){B.on("pageHtmlLoaded",g);g()}else{B.on("pageHtmlLoaded",Av);Av()}}function g(){if(AR.state!=="modifySearch"){x.fireEvent("block_submit")}else{var Ay=x.node.one("#btn-modify-search");if(Ay){Ay.set("disabled","disabled");Ay.addClass("disabled")}}}function Av(){if(AR.state!=="modifySearch"){x.fireEvent("unblock_submit");x.fireEvent("unblock_submit",{data:{},type:"flomes",forceInitialize:true})}else{var Ay=x.node.one("#btn-modify-search");if(Ay){Ay.removeAttribute("disabled");Ay.removeClass("disabled")}}}function Ag(Az,Ay){if(Az){if(Ay){Az.set("disabled",true);Az.addClass("disabled");Az.set("checked",false)}else{Az.removeAttribute("disabled");Az.removeClass("disabled")}}}function AD(Ay){return parseInt(Ay.get("value"))}function AL(A0,Ay){var Az="";AK=AK||Ay.all("option");AK.each(function(A1){var A2=parseInt(A1.get("value"));if(A2<=A0){Az+='<option value="'+A2+'">'+A2+"</option>"}});Ay.setContent(Az)}function I(Ay,A1,Az){var A2=parseInt(Ay,10);var A0=A2>A1?A1:A2;Az.set("selectedIndex",A0)}function o(){var A0=AD(this);var Ay=x.node.one("#"+w);if(Ay){var Az=Ay.get("value");AL(A0,Ay);I(Az,A0,Ay);Aq()}}function Ab(Ay){if(!this.hasClass("airport-picker")&&!this.hasClass("date-picker")){B.wlValidation.validate(Ay)}}function Aq(){B.on("change",p.toggleRedemptionSearchAllowed,"#"+w)}function Ak(Az,Ay){Az.purge(true);Az.set("innerHTML",B.decodeHtmlEntities(Ay));AP(Az)}function AM(A0,Ay){var Az=x.node.one("#"+A0+Ay);return Az?Az.get("value"):null}function f(Az){if(!Az){return null}var Ay=B.DataType.Date.parse(Az,sabre.config.dateInputFormat);return B.DataType.Date.format(Ay,{format:sabre.config.dateTimeJSONFormat})}function X(Ay){h=this.hasClass("fsc-tab-rbe");n=this.hasClass("fsc-tab-regular");L();AO();z({isRbe:h});Ay.preventDefault()}function d(Az){var Ay=Az.target;var A0=Ay.get("value");AV(A0)}function AV(Ay){x.node.removeClass(AJ);var Az=a();p.setTripType(Ay);x.node.addClass(AJ);c({actionCode:"changeTripType",itineraryParts:Az})}function E(Ay){return{origin:AM("origin_airport_hidden",Ay),destination:AM("destination_airport_hidden",Ay),date:f(AM("date_hidden",Ay)),timeRange:AM("time_range",Ay)}}function Q(Ay){return Ay.origin||Ay.destination||Ay.date||Ay.timeRange}function a(){var A0=[];for(var Az=0;;Az++){var Ay=E(Az);if(Q(Ay)){A0.push(Ay)}else{break}}if("roundtrip"==AJ&&A0.length>1){A0[1].origin=A0[0].destination;A0[1].destination=A0[0].origin}return A0}function AB(Ay){c({actionCode:"deleteFlight",deletedFlightIndex:Ay})}function Ao(){c({actionCode:"addFlight"})}function z(A0){var Az=x.node;if(!Az){return }x.addLoadingOverlay();var Ay={data:{rbeTabSelected:A0.isRbe,journey:AX,requestPartials:[AR.state]},on:{success:function(A2,A1){if(A1){Az.purge(true);Az.set("innerHTML",B.decodeHtmlEntities(A1.partials[AR.state]));AP(Az);L();Aj.setRbeBooking(A0.isRbe);if(AR.state==="modifySearch"){x.onRenderState.modifySearch(Az);P()}if(t==false&&n){x.onRenderState.searchPage(Az)}}},complete:function(){x.removeLoadingOverlay()}}};x.fireEvent("to-ajax",{cfg:Ay,actionCode:"loadFscPartial"})}function c(A3){var A2=A3.itineraryParts||a();var Az="__"+(AR.state==="modifySearch"?"modifySearch":"searchPage")+"_"+AX.toLowerCase();var A1=x.node.one("#airports-dates-container");if(!A1){return }var A0=x.node.all(".trip-type-input");A1.addClass("loading");A0.each(function(A4){A4.set("disabled","disabled")});var Ay={data:{actionCode:A3.actionCode,deletedFlightIndex:A3.deletedFlightIndex,requestPartials:[Az],journey:AX,fscItineraryParts:A2},on:{success:function(A5,A4){if(A4){Ak(A1,A4.partials[Az]);p.toggleRedemptionSearchAllowed()}},complete:function(){A1.removeClass("loading");A0.each(function(A4){if(!A4.hasClass("disabled")){A4.removeAttribute("disabled")}})}}};x.fireEvent("to-ajax",{cfg:Ay,actionCode:"loadFscPartial"})}function s(Az){var A1=x.node.one("#fsc-pointOfSale");var A2=A1.ancestor(".component-section");if(A2){A2.addClass("loading")}var A0=A1.get("value");var Ay={data:{pointOfSale:A0},on:{end:function(){if(A2){A2.removeClass("loading")}},success:function(A4,A3){x.fireEvent("update-data",{data:{pointOfSale:A0}})}}};x.fireEvent("to-ajax",{cfg:Ay,actionCode:"changePointOfSale"})}}});YUI.add("wl-googleanalytics",function(A){A.components.Googleanalytics=function(B){this.create=false;this.render=false}});